{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */function (_super) {\n  __extends(YearEvent, _super);\n  function YearEvent(parent) {\n    var _this = _super.call(this, parent, 'day') || this;\n    _this.isResource = false;\n    return _this;\n  }\n  YearEvent.prototype.renderAppointments = function () {\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.setDragArea();\n    }\n    this.fields = this.parent.eventFields;\n    var elementSelector = this.parent.currentView === 'Year' ? '.' + cls.WORK_CELLS_CLASS + ' ' + '.' + cls.APPOINTMENT_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n    for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n      var wrapper = eventWrappers_1[_i];\n      remove(wrapper);\n    }\n    this.renderedEvents = [];\n    if (this.parent.currentView === 'Year') {\n      this.yearViewEvents();\n    } else {\n      this.removeCellHeight();\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.isResource = true;\n        this.timelineResourceEvents();\n      } else {\n        this.timelineYearViewEvents();\n      }\n    }\n    this.parent.renderTemplates();\n    this.parent.notify(events.contentReady, {});\n  };\n  YearEvent.prototype.yearViewEvents = function () {\n    var months = this.getMonths();\n    for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n      var month = months_1[_i];\n      var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n      var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n      var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n      var startDate = util.getWeekFirstDate(monthStart, this.parent.activeViewOptions.firstDayOfWeek);\n      var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.activeViewOptions.firstDayOfWeek), 1);\n      for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n        var start = util.resetTime(new Date(startDate.getTime()));\n        var end = util.addDays(new Date(start.getTime()), 1);\n        startDate = util.addDays(new Date(startDate.getTime()), 1);\n        if (!this.parent.isMinMaxDate(start)) {\n          continue;\n        }\n        var filterEvents = this.parent.eventBase.filterEvents(start, end);\n        if (filterEvents.length > 0) {\n          var workCell = workCells[parseInt(index.toString(), 10)];\n          if (workCell) {\n            workCell.appendChild(createElement('div', {\n              className: cls.APPOINTMENT_CLASS\n            }));\n          }\n        }\n      }\n    }\n  };\n  YearEvent.prototype.timelineYearViewEvents = function () {\n    var _this = this;\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')');\n    this.cellWidth = this.parent.getElementWidth(workCell);\n    this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = this.parent.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var selector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n    this.addCellHeight(selector, this.eventHeight, EVENT_GAP, this.cellHeader, this.moreIndicatorHeight);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var months = this.getMonths();\n    var groupIndex = this.parent.activeViewOptions.group.resources.length > 0 && this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : undefined;\n    for (var row = 0; row < months.length; row++) {\n      var wrapper = wrapperCollection[parseInt(row.toString(), 10)];\n      var td = row + 1;\n      var eventWrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(eventWrapper);\n      var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n      var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n      var dayIndex = monthStart.getDay();\n      var isSpannedCollection = [];\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        this.renderedEvents = [];\n      }\n      while (monthStart.getTime() <= monthEnd.getTime()) {\n        var leftValue = void 0;\n        var rightValue = void 0;\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          var wrapper_1 = wrapperCollection[parseInt(dayIndex.toString(), 10)];\n          td = dayIndex + 1;\n          eventWrapper = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n          if (!eventWrapper) {\n            eventWrapper = createElement('div', {\n              className: cls.APPOINTMENT_WRAPPER_CLASS\n            });\n            wrapper_1.appendChild(eventWrapper);\n          }\n          if (this.parent.enableRtl) {\n            rightValue = row * this.cellWidth;\n          } else {\n            leftValue = row * this.cellWidth;\n          }\n        } else {\n          if (this.parent.enableRtl) {\n            rightValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          } else {\n            leftValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          }\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n        this.cellHeight = rowTd.offsetHeight;\n        var dayStart = util.resetTime(new Date(monthStart.getTime()));\n        var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n        var resource = void 0;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n          resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        }\n        var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n        dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n        var _loop_1 = function (index, count) {\n          var eventData = extend({}, dayEvents[parseInt(index.toString(), 10)], null, true);\n          this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n          var overlapIndex = this_1.getIndex(dayStart);\n          eventData.Index = overlapIndex;\n          var availedHeight = this_1.cellHeader + this_1.eventHeight * (overlapIndex + 1) + EVENT_GAP + this_1.moreIndicatorHeight;\n          var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n          var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));\n          var eventsPerRow = this_1.parent.rowAutoHeight ? 1 : this_1.parent.activeViewOptions.maxEventsPerRow;\n          var moreIndicatorCount = this_1.parent.activeViewOptions.maxEventsPerRow ? count - eventsPerRow : count - renderedAppCount <= 0 ? 1 : count - renderedAppCount;\n          if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n            var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n            var isSpanned = isSpannedCollection.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n            if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n              var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n              this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n              return \"continue\";\n            } else if (isRendered.length > 0 || isSpanned.length > 0) {\n              return \"continue\";\n            }\n          }\n          var enableAppRender = this_1.maxOrIndicator || overlapIndex < eventsPerRow || this_1.cellHeight > availedHeight;\n          if (this_1.parent.rowAutoHeight || enableAppRender || this_1.cellHeight > availedHeight) {\n            this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n            if (this_1.parent.rowAutoHeight || this_1.cellHeight > availedHeight) {\n              this_1.updateCellHeight(rowTd, availedHeight);\n            }\n            isSpannedCollection.push(eventData);\n          } else {\n            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n            if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n              eventData.MoreIndicator = true;\n              this_1.renderedEvents.push(eventData);\n              isSpannedCollection.push(eventData);\n            }\n          }\n        };\n        var this_1 = this;\n        for (var index = 0, count = dayEvents.length; index < count; index++) {\n          _loop_1(index, count);\n        }\n        monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          dayIndex++;\n          this.renderedEvents = [];\n        }\n      }\n    }\n    if (this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n      var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n      var tr_1 = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr'));\n      appContainer.forEach(function (ele, index) {\n        var app = [].slice.call(ele.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        var appTop = tr_1[parseInt(index.toString(), 10)].offsetTop + _this.cellHeader + EVENT_GAP;\n        app.forEach(function (app) {\n          var overlap = parseInt(app.getAttribute('data-index'), 10);\n          app.style.top = appTop + overlap * _this.eventHeight + 'px';\n          app.removeAttribute('data-index');\n        });\n      });\n    }\n  };\n  YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n    var isLeftRightResize = this.isResource && this.parent.activeViewOptions.orientation === 'Vertical' || !this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal';\n    var data = {\n      isLeft: true,\n      isRight: true,\n      isBottom: true,\n      isTop: true\n    };\n    if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n      if (isLeftRightResize) {\n        data.isLeft = false;\n      } else {\n        data.isTop = false;\n      }\n    }\n    if (dayEnd.getTime() >= eventObj[this.fields.endTime].getTime() || isLeftRightResize && !this.isResource && util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth() || isLeftRightResize && this.isResource && dayEnd.getTime() <= eventObj[this.fields.endTime].getTime()) {\n      if (isLeftRightResize) {\n        data.isRight = false;\n      } else {\n        data.isBottom = false;\n      }\n    }\n    eventObj.data = data;\n  };\n  YearEvent.prototype.timelineResourceEvents = function () {\n    var _this = this;\n    var contentTable = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var isVerticalScrollbarAvail = contentTable.offsetWidth > contentTable.clientWidth;\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n    this.cellWidth = this.parent.getElementWidth(workCell);\n    this.cellHeader = 0;\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = this.parent.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var selector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n    this.addCellHeight(selector, this.eventHeight, EVENT_GAP, this.cellHeader, this.moreIndicatorHeight);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.activeViewOptions.allowVirtualScrolling ? this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;\n    var months = this.getMonths();\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      for (var month = 0; month < months.length; month++) {\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n        for (var i = 0, len = resources.length; i < len; i++) {\n          this.renderedEvents = [];\n          this.renderResourceEvent(wrapperCollection[parseInt(month.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n        }\n      }\n    } else {\n      for (var i = 0, len = resources.length; i < len; i++) {\n        this.renderedEvents = [];\n        for (var month = 0; month < months.length; month++) {\n          var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n          this.renderResourceEvent(wrapperCollection[parseInt(i.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n        }\n      }\n    }\n    if (this.parent.rowAutoHeight && !isVerticalScrollbarAvail && contentTable.offsetWidth > contentTable.clientWidth) {\n      var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n      appointments.forEach(function (ele) {\n        ele.style.removeProperty('left');\n        ele.style.removeProperty('right');\n      });\n      var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n      var conTable_1 = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      var tr_2 = [].slice.call(conTable_1.querySelectorAll('tbody tr'));\n      appContainer.forEach(function (ele, index) {\n        var appWrapper = [].slice.call(ele.children);\n        var row = tr_2[parseInt(index.toString(), 10)];\n        appWrapper.forEach(function (appWrap, cellIndex) {\n          var td = row.querySelector(\"td:nth-child(\" + (cellIndex + 1) + \")\");\n          var app = [].slice.call(appWrap.children);\n          var width = _this.parent.getElementWidth(td);\n          var left = td.offsetLeft;\n          if (_this.parent.enableRtl) {\n            var right_1 = conTable_1.offsetWidth - left - td.offsetWidth;\n            app.forEach(function (app) {\n              app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n              app.style.right = right_1 + 'px';\n            });\n          } else {\n            app.forEach(function (app) {\n              app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n              app.style.left = left + 'px';\n            });\n          }\n        });\n      });\n    }\n  };\n  YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_WRAPPER_CLASS\n    });\n    wrapper.appendChild(eventWrapper);\n    var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n    var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n    var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n    var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n    this.cellHeight = td.offsetHeight;\n    this.groupOrder = resource.groupOrder;\n    var isSpannedCollection = [];\n    var _loop_2 = function (a) {\n      var data = eventDatas[parseInt(a.toString(), 10)];\n      var overlapIndex = void 0;\n      var eventData = extend({}, data, null, true);\n      if (this_2.parent.activeViewOptions.group.resources.length > 0) {\n        var eventObj = this_2.isSpannedEvent(eventData, monthStart);\n        overlapIndex = this_2.getIndex(eventObj[this_2.fields.startTime]);\n        eventData.Index = overlapIndex;\n      } else {\n        overlapIndex = this_2.getIndex(eventData[this_2.fields.startTime]);\n        eventData.Index = overlapIndex;\n      }\n      var availedHeight = this_2.cellHeader + this_2.eventHeight * (a + 1) + EVENT_GAP + this_2.moreIndicatorHeight;\n      var leftValue = this_2.parent.activeViewOptions.orientation === 'Vertical' ? month * this_2.cellWidth : index * this_2.cellWidth;\n      if (!this_2.parent.isMinMaxDate(eventData[this_2.fields.startTime])) {\n        return {\n          value: void 0\n        };\n      }\n      if (this_2.parent.activeViewOptions.orientation === 'Vertical' && this_2.parent.activeViewOptions.group.resources.length > 0) {\n        var isRendered = this_2.renderedEvents.filter(function (eventObj) {\n          return eventObj.Guid === eventData.Guid;\n        });\n        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n          return eventObj.Guid === eventData.Guid;\n        });\n        if (isRendered.length > 0 || isSpanned.length > 0) {\n          return \"continue\";\n        }\n      }\n      if (this_2.parent.rowAutoHeight || this_2.cellHeight > availedHeight) {\n        this_2.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n        this_2.updateCellHeight(td, availedHeight);\n        isSpannedCollection.push(eventData);\n      } else {\n        var moreIndex = this_2.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n        this_2.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n        if (this_2.parent.activeViewOptions.orientation === 'Horizontal') {\n          for (var i = index; i < eventDatas.length; i++) {\n            this_2.renderedEvents.push(extend({}, eventDatas[parseInt(i.toString(), 10)], {\n              Index: overlapIndex + i\n            }, true));\n          }\n        }\n        return \"break\";\n      }\n    };\n    var this_2 = this;\n    for (var a = 0; a < eventDatas.length; a++) {\n      var state_1 = _loop_2(a);\n      if (typeof state_1 === \"object\") return state_1.value;\n      if (state_1 === \"break\") break;\n    }\n  };\n  // eslint-disable-next-line max-len\n  YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n    var _this = this;\n    var eventObj = this.isSpannedEvent(eventData, monthDate);\n    var wrap = this.createEventElement(eventObj);\n    var width;\n    var index;\n    if (eventObj.isSpanned.count === 1) {\n      var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n      eventObj[this.fields.endTime] = endTime > eventObj[this.fields.startTime] ? endTime : eventObj[this.fields.endTime];\n    }\n    if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n      return;\n    }\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      index = row + 1;\n      if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n        eventObj.isSpanned.count = 1;\n      }\n      width = eventObj.isSpanned.count * this.cellWidth;\n    } else {\n      index = rowIndex + 1;\n      width = this.isResource ? eventObj.isSpanned.count * this.cellWidth : this.cellWidth;\n    }\n    var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n    var top = rowTd.offsetTop + this.cellHeader + this.eventHeight * eventObj.Index + EVENT_GAP;\n    setStyleAttribute(wrap, {\n      'width': width + 'px',\n      'height': this.eventHeight + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n    if (!this.isResource && this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n      wrap.setAttribute('data-index', eventObj.Index.toString());\n    }\n    var args = {\n      data: eventObj,\n      element: wrap,\n      cancel: false,\n      type: 'event'\n    };\n    this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        wrapper.appendChild(wrap);\n        _this.wireAppointmentEvents(wrap, eventObj);\n        if (_this.parent.activeViewOptions.group.resources.length > 0) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal' || !eventObj.isSpanned.isRight) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        }\n      }\n    });\n  };\n  // eslint-disable-next-line max-len\n  YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n    if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n      return;\n    }\n    var endDate;\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n    } else {\n      endDate = util.addDays(new Date(startDate.getTime()), 1);\n    }\n    var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n    var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n    var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n    left = Math.floor(left / this.cellWidth) * this.cellWidth;\n    right = Math.floor(right / this.cellWidth) * this.cellWidth;\n    setStyleAttribute(moreIndicator, {\n      'width': this.cellWidth + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n    if (!isNullOrUndefined(index)) {\n      moreIndicator.setAttribute('data-group-index', index.toString());\n    }\n    wrapper.appendChild(moreIndicator);\n    EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n  };\n  YearEvent.prototype.createEventElement = function (record) {\n    var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      attrs: {\n        'data-id': 'Appointment_' + record[this.fields.id],\n        'data-guid': record.Guid,\n        'role': 'button',\n        'tabindex': '0',\n        'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n        'aria-label': this.parent.getAnnouncementString(record)\n      }\n    });\n    if (this.cssClass) {\n      addClass([eventWrapper], this.cssClass);\n    }\n    if (record[this.fields.isReadonly]) {\n      addClass([eventWrapper], cls.READ_ONLY);\n    }\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resIndex = this.getGroupIndexFromEvent(record);\n      eventWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n    var templateElement = [];\n    var eventObj = extend({}, record, null, true);\n    if (this.parent.activeViewOptions.eventTemplate) {\n      var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n      templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false, undefined, undefined, this.parent.root);\n    } else {\n      var locationEle = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n      var subjectEle = createElement('div', {\n        className: cls.SUBJECT_CLASS,\n        innerHTML: eventSubject + (locationEle ? ';&nbsp' + locationEle : '')\n      });\n      var startTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n      });\n      var endTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n      });\n      addClass([subjectEle], 'e-text-center');\n      if (record[this.fields.isAllDay]) {\n        templateElement = [subjectEle];\n      } else if (!eventObj.isLeft && !eventObj.isRight) {\n        templateElement = [startTimeEle, subjectEle, endTimeEle];\n      } else {\n        if (!eventObj.isLeft) {\n          templateElement.push(startTimeEle);\n        }\n        templateElement.push(subjectEle);\n        if (!eventObj.isRight) {\n          templateElement.push(endTimeEle);\n        }\n      }\n    }\n    var appointmentDetails = createElement('div', {\n      className: cls.APPOINTMENT_DETAILS\n    });\n    append(templateElement, appointmentDetails);\n    eventWrapper.appendChild(appointmentDetails);\n    this.parent.eventBase.renderSpannedIcon(eventWrapper, record.isSpanned);\n    this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n    this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n    return eventWrapper;\n  };\n  YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n    var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    var monthEnd = util.addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n    var eventData = extend({}, eventObj, null, true);\n    var eventStart = eventData[this.fields.startTime];\n    var eventEnd = eventData[this.fields.endTime];\n    var isSpanned = {\n      isLeft: false,\n      isRight: false,\n      count: 1\n    };\n    var yearStart = new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear, 1);\n    var yearEnd = util.addMonths(yearStart, this.parent.monthsCount);\n    if (this.isResource) {\n      this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n    }\n    if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n      this.updateSpannedEventDetails(eventStart, eventEnd, yearStart, yearEnd, eventData, isSpanned);\n      var originalStartTime = eventData[this.fields.startTime];\n      var originalEndTime = new Date(eventData[this.fields.endTime] - 1);\n      isSpanned.count = originalEndTime.getMonth() - originalStartTime.getMonth() + this.parent.monthsCount * (originalEndTime.getFullYear() - originalStartTime.getFullYear()) + 1;\n    } else {\n      this.updateSpannedEventDetails(eventStart, eventEnd, monthStart, monthEnd, eventData, isSpanned);\n      if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n        var end = util.resetTime(eventData[this.fields.endTime]).getTime();\n        var start = util.resetTime(eventData[this.fields.startTime]).getTime();\n        if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n          end = util.addDays(new Date(end), -1).getTime();\n        }\n        isSpanned.count = Math.round((end - start) / util.MS_PER_DAY) + 1;\n      }\n    }\n    eventData.isSpanned = isSpanned;\n    if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n      eventData[this.fields.startTime] = this.parent.minDate;\n    }\n    if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n      eventData[this.fields.endTime] = this.parent.maxDate;\n    }\n    return eventData;\n  };\n  YearEvent.prototype.updateSpannedEventDetails = function (eventStart, eventEnd, viewStart, viewEnd, eventObj, isSpanned) {\n    if (eventStart.getTime() < viewStart.getTime()) {\n      eventObj[this.fields.startTime] = viewStart;\n      isSpanned.isLeft = true;\n    }\n    if (eventEnd.getTime() > viewEnd.getTime()) {\n      eventObj[this.fields.endTime] = viewEnd;\n      isSpanned.isRight = true;\n    }\n  };\n  YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n    var dateStart;\n    var dateEnd;\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n      var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n      dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n      dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n    } else {\n      if (this.parent.rowAutoHeight) {\n        dateStart = util.resetTime(new Date(date.getTime())).getTime();\n        dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n      } else {\n        dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n      }\n    }\n    for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n      var app = appointments_1[_i];\n      var appStart = new Date(app[this.fields.startTime].getTime());\n      var appEnd = new Date(app[this.fields.endTime].getTime());\n      var timeCondition = app[this.fields.isAllDay] ? util.resetTime(appEnd).getTime() > dateStart : util.resetTime(appEnd).getTime() >= dateStart;\n      if (util.resetTime(appStart).getTime() <= dateStart && timeCondition || util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() <= dateEnd) {\n        appointmentsList.push(app);\n      } else if (this.parent.activeViewOptions.orientation === 'Vertical') {\n        if (util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() >= dateEnd) {\n          appointmentsList.push(app);\n        }\n      }\n    }\n    return appointmentsList;\n  };\n  YearEvent.prototype.getMonths = function () {\n    var _this = this;\n    // eslint-disable-next-line prefer-spread\n    return Array.apply(null, {\n      length: this.parent.monthsCount\n    }).map(function (value, index) {\n      return _this.parent.firstMonthOfYear + index;\n    });\n  };\n  YearEvent.prototype.removeCellHeight = function () {\n    var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n    var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      row.firstElementChild.style.height = '';\n    }\n  };\n  YearEvent.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.parent = null;\n  };\n  return YearEvent;\n}(TimelineEvent);\nexport { YearEvent };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","addClass","append","createElement","extend","remove","isNullOrUndefined","setStyleAttribute","EventHandler","TimelineEvent","util","events","cls","EVENT_GAP","YearEvent","_super","parent","_this","call","isResource","renderAppointments","dragAndDropModule","setDragArea","fields","eventFields","elementSelector","currentView","WORK_CELLS_CLASS","APPOINTMENT_CLASS","APPOINTMENT_WRAPPER_CLASS","MORE_INDICATOR_CLASS","eventWrappers","slice","element","querySelectorAll","_i","eventWrappers_1","length","wrapper","renderedEvents","yearViewEvents","removeCellHeight","activeViewOptions","group","resources","uiStateValues","isGroupAdaptive","timelineResourceEvents","timelineYearViewEvents","renderTemplates","notify","contentReady","months","getMonths","months_1","month","queryString","indexOf","workCells","monthDate","Date","selectedDate","getFullYear","monthStart","calendarUtil","getMonthStartDate","getTime","monthEnd","getMonthEndDate","startDate","getWeekFirstDate","firstDayOfWeek","endDate","addDays","getWeekLastDate","index","start","resetTime","end","isMinMaxDate","filterEvents","eventBase","workCell","parseInt","toString","appendChild","className","querySelector","OTHERMONTH_CLASS","cellWidth","getElementWidth","cellHeader","getOuterHeight","DATE_HEADER_CLASS","eventTable","EVENT_TABLE_CLASS","eventHeight","getElementHeightFromClass","selector","MONTH_HEADER_WRAPPER","RESOURCE_COLUMN_TABLE_CLASS","CONTENT_TABLE_CLASS","addCellHeight","moreIndicatorHeight","wrapperCollection","APPOINTMENT_CONTAINER_CLASS","groupIndex","undefined","row","td","eventWrapper","getMonth","dayIndex","getDay","isSpannedCollection","orientation","leftValue","rightValue","wrapper_1","enableRtl","getDate","rowTd","cellHeight","offsetHeight","dayStart","dayEnd","resource","resourceBase","lastResourceLevel","dayEvents","sortByDateTime","_loop_1","count","eventData","this_1","updateSpannedEvents","overlapIndex","getIndex","Index","availedHeight","appArea","renderedAppCount","Math","floor","eventsPerRow","rowAutoHeight","maxEventsPerRow","moreIndicatorCount","isRendered","filter","eventObj","Guid","isSpanned","MoreIndicator","moreIndex","renderMoreIndicator","enableAppRender","maxOrIndicator","renderEvent","updateCellHeight","push","appContainer","tr_1","forEach","ele","app","appTop","offsetTop","overlap","getAttribute","style","top","removeAttribute","isLeftRightResize","data","isLeft","isRight","isBottom","isTop","startTime","endTime","contentTable","CONTENT_WRAP_CLASS","isVerticalScrollbarAvail","offsetWidth","clientWidth","allowVirtualScrolling","renderedResources","i","len","renderResourceEvent","appointments","removeProperty","conTable_1","tr_2","appWrapper","children","appWrap","cellIndex","width","left","offsetLeft","right_1","right","lastDateOfMonth","eventDatas","rowIndex","groupOrder","_loop_2","a","this_2","isSpannedEvent","value","state_1","wrap","createEventElement","setAttribute","args","cancel","type","trigger","eventRendered","eventArgs","wireAppointmentEvents","moreIndicator","getMoreIndicatorElement","rowTr","add","moreIndicatorClick","record","eventSubject","subject","eventSettings","default","localeObj","getConstant","attrs","id","getReadonlyAttribute","getAnnouncementString","cssClass","isReadonly","READ_ONLY","resIndex","getGroupIndexFromEvent","templateElement","eventTemplate","templateId","eventTemplateName","getAppointmentTemplate","root","locationEle","location","subjectEle","SUBJECT_CLASS","innerHTML","startTimeEle","APPOINTMENT_TIME","isAdaptive","DISABLE_CLASS","getTimeString","endTimeEle","isAllDay","appointmentDetails","APPOINTMENT_DETAILS","renderSpannedIcon","renderResizeHandler","applyResourceColor","eventStart","eventEnd","yearStart","firstMonthOfYear","yearEnd","addMonths","monthsCount","updateSpannedEventDetails","originalStartTime","originalEndTime","round","MS_PER_DAY","minDate","maxDate","viewStart","viewEnd","getOverlapEvents","date","appointmentsList","dateStart","dateEnd","appointments_1","appStart","appEnd","timeCondition","apply","map","rows","rows_1","firstElementChild","height","destroy"],"sources":["C:/Users/Dell/OneDrive/Desktop/Programs/soc-portal/node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/year.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */ (function (_super) {\n    __extends(YearEvent, _super);\n    function YearEvent(parent) {\n        var _this = _super.call(this, parent, 'day') || this;\n        _this.isResource = false;\n        return _this;\n    }\n    YearEvent.prototype.renderAppointments = function () {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.fields = this.parent.eventFields;\n        var elementSelector = (this.parent.currentView === 'Year') ? '.' + cls.WORK_CELLS_CLASS + ' ' + '.' + cls.APPOINTMENT_CLASS :\n            '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        this.renderedEvents = [];\n        if (this.parent.currentView === 'Year') {\n            this.yearViewEvents();\n        }\n        else {\n            this.removeCellHeight();\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                this.isResource = true;\n                this.timelineResourceEvents();\n            }\n            else {\n                this.timelineYearViewEvents();\n            }\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n    };\n    YearEvent.prototype.yearViewEvents = function () {\n        var months = this.getMonths();\n        for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n            var month = months_1[_i];\n            var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n            var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var startDate = util.getWeekFirstDate(monthStart, this.parent.activeViewOptions.firstDayOfWeek);\n            var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.activeViewOptions.firstDayOfWeek), 1);\n            for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n                var start = util.resetTime(new Date(startDate.getTime()));\n                var end = util.addDays(new Date(start.getTime()), 1);\n                startDate = util.addDays(new Date(startDate.getTime()), 1);\n                if (!this.parent.isMinMaxDate(start)) {\n                    continue;\n                }\n                var filterEvents = this.parent.eventBase.filterEvents(start, end);\n                if (filterEvents.length > 0) {\n                    var workCell = workCells[parseInt(index.toString(), 10)];\n                    if (workCell) {\n                        workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_CLASS }));\n                    }\n                }\n            }\n        }\n    };\n    YearEvent.prototype.timelineYearViewEvents = function () {\n        var _this = this;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')');\n        this.cellWidth = this.parent.getElementWidth(workCell);\n        this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = this.parent.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var selector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        this.addCellHeight(selector, this.eventHeight, EVENT_GAP, this.cellHeader, this.moreIndicatorHeight);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var months = this.getMonths();\n        var groupIndex = (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.uiStateValues.isGroupAdaptive) ?\n            this.parent.uiStateValues.groupIndex : undefined;\n        for (var row = 0; row < months.length; row++) {\n            var wrapper = wrapperCollection[parseInt(row.toString(), 10)];\n            var td = row + 1;\n            var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(eventWrapper);\n            var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n            var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n            var dayIndex = monthStart.getDay();\n            var isSpannedCollection = [];\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                this.renderedEvents = [];\n            }\n            while (monthStart.getTime() <= monthEnd.getTime()) {\n                var leftValue = void 0;\n                var rightValue = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    var wrapper_1 = wrapperCollection[parseInt(dayIndex.toString(), 10)];\n                    td = dayIndex + 1;\n                    eventWrapper = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                    if (!eventWrapper) {\n                        eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                        wrapper_1.appendChild(eventWrapper);\n                    }\n                    if (this.parent.enableRtl) {\n                        rightValue = row * this.cellWidth;\n                    }\n                    else {\n                        leftValue = row * this.cellWidth;\n                    }\n                }\n                else {\n                    if (this.parent.enableRtl) {\n                        rightValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                    else {\n                        leftValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                }\n                var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n                this.cellHeight = rowTd.offsetHeight;\n                var dayStart = util.resetTime(new Date(monthStart.getTime()));\n                var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n                var resource = void 0;\n                if (this.parent.uiStateValues.isGroupAdaptive) {\n                    resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                }\n                var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n                dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n                var _loop_1 = function (index, count) {\n                    var eventData = extend({}, dayEvents[parseInt(index.toString(), 10)], null, true);\n                    this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n                    var overlapIndex = this_1.getIndex(dayStart);\n                    eventData.Index = overlapIndex;\n                    var availedHeight = this_1.cellHeader + (this_1.eventHeight * (overlapIndex + 1)) + EVENT_GAP +\n                        this_1.moreIndicatorHeight;\n                    var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n                    var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));\n                    var eventsPerRow = this_1.parent.rowAutoHeight ? 1 : this_1.parent.activeViewOptions.maxEventsPerRow;\n                    var moreIndicatorCount = this_1.parent.activeViewOptions.maxEventsPerRow ? count - eventsPerRow\n                        : (count - renderedAppCount) <= 0 ? 1 : count - renderedAppCount;\n                    if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                        var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n                            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n                            return \"continue\";\n                        }\n                        else if (isRendered.length > 0 || isSpanned.length > 0) {\n                            return \"continue\";\n                        }\n                    }\n                    var enableAppRender = this_1.maxOrIndicator || (overlapIndex < eventsPerRow) ||\n                        (this_1.cellHeight > availedHeight);\n                    if (this_1.parent.rowAutoHeight || enableAppRender || this_1.cellHeight > availedHeight) {\n                        this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n                        if (this_1.parent.rowAutoHeight || this_1.cellHeight > availedHeight) {\n                            this_1.updateCellHeight(rowTd, availedHeight);\n                        }\n                        isSpannedCollection.push(eventData);\n                    }\n                    else {\n                        var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                        this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n                        if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                            eventData.MoreIndicator = true;\n                            this_1.renderedEvents.push(eventData);\n                            isSpannedCollection.push(eventData);\n                        }\n                    }\n                };\n                var this_1 = this;\n                for (var index = 0, count = dayEvents.length; index < count; index++) {\n                    _loop_1(index, count);\n                }\n                monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    dayIndex++;\n                    this.renderedEvents = [];\n                }\n            }\n        }\n        if (this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n            var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n            var tr_1 = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr'));\n            appContainer.forEach(function (ele, index) {\n                var app = [].slice.call(ele.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n                var appTop = tr_1[parseInt(index.toString(), 10)].offsetTop + _this.cellHeader + EVENT_GAP;\n                app.forEach(function (app) {\n                    var overlap = parseInt(app.getAttribute('data-index'), 10);\n                    app.style.top = appTop + (overlap * _this.eventHeight) + 'px';\n                    app.removeAttribute('data-index');\n                });\n            });\n        }\n    };\n    YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n        var isLeftRightResize = (this.isResource && this.parent.activeViewOptions.orientation === 'Vertical') ||\n            (!this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal');\n        var data = { isLeft: true, isRight: true, isBottom: true, isTop: true };\n        if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n            if (isLeftRightResize) {\n                data.isLeft = false;\n            }\n            else {\n                data.isTop = false;\n            }\n        }\n        if ((dayEnd.getTime() >= eventObj[this.fields.endTime].getTime()) || (isLeftRightResize && !this.isResource &&\n            util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth()) ||\n            (isLeftRightResize && this.isResource && (dayEnd.getTime() <= eventObj[this.fields.endTime].getTime()))) {\n            if (isLeftRightResize) {\n                data.isRight = false;\n            }\n            else {\n                data.isBottom = false;\n            }\n        }\n        eventObj.data = data;\n    };\n    YearEvent.prototype.timelineResourceEvents = function () {\n        var _this = this;\n        var contentTable = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var isVerticalScrollbarAvail = contentTable.offsetWidth > contentTable.clientWidth;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = this.parent.getElementWidth(workCell);\n        this.cellHeader = 0;\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = this.parent.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var selector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        this.addCellHeight(selector, this.eventHeight, EVENT_GAP, this.cellHeader, this.moreIndicatorHeight);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.activeViewOptions.allowVirtualScrolling ? this.parent.resourceBase.renderedResources :\n                this.parent.resourceBase.lastResourceLevel;\n        var months = this.getMonths();\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            for (var month = 0; month < months.length; month++) {\n                var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                for (var i = 0, len = resources.length; i < len; i++) {\n                    this.renderedEvents = [];\n                    this.renderResourceEvent(wrapperCollection[parseInt(month.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = resources.length; i < len; i++) {\n                this.renderedEvents = [];\n                for (var month = 0; month < months.length; month++) {\n                    var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                    this.renderResourceEvent(wrapperCollection[parseInt(i.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n                }\n            }\n        }\n        if (this.parent.rowAutoHeight && !isVerticalScrollbarAvail && contentTable.offsetWidth > contentTable.clientWidth) {\n            var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n            appointments.forEach(function (ele) {\n                ele.style.removeProperty('left');\n                ele.style.removeProperty('right');\n            });\n            var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n            var conTable_1 = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            var tr_2 = [].slice.call(conTable_1.querySelectorAll('tbody tr'));\n            appContainer.forEach(function (ele, index) {\n                var appWrapper = [].slice.call(ele.children);\n                var row = tr_2[parseInt(index.toString(), 10)];\n                appWrapper.forEach(function (appWrap, cellIndex) {\n                    var td = row.querySelector(\"td:nth-child(\" + (cellIndex + 1) + \")\");\n                    var app = [].slice.call(appWrap.children);\n                    var width = _this.parent.getElementWidth(td);\n                    var left = td.offsetLeft;\n                    if (_this.parent.enableRtl) {\n                        var right_1 = conTable_1.offsetWidth - left - td.offsetWidth;\n                        app.forEach(function (app) {\n                            app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n                            app.style.right = right_1 + 'px';\n                        });\n                    }\n                    else {\n                        app.forEach(function (app) {\n                            app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n                            app.style.left = left + 'px';\n                        });\n                    }\n                });\n            });\n        }\n    };\n    YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n        wrapper.appendChild(eventWrapper);\n        var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n        var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n        var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n        var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n        this.cellHeight = td.offsetHeight;\n        this.groupOrder = resource.groupOrder;\n        var isSpannedCollection = [];\n        var _loop_2 = function (a) {\n            var data = eventDatas[parseInt(a.toString(), 10)];\n            var overlapIndex = void 0;\n            var eventData = extend({}, data, null, true);\n            if (this_2.parent.activeViewOptions.group.resources.length > 0) {\n                var eventObj = this_2.isSpannedEvent(eventData, monthStart);\n                overlapIndex = this_2.getIndex(eventObj[this_2.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            else {\n                overlapIndex = this_2.getIndex(eventData[this_2.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            var availedHeight = this_2.cellHeader + (this_2.eventHeight * (a + 1)) + EVENT_GAP + this_2.moreIndicatorHeight;\n            var leftValue = (this_2.parent.activeViewOptions.orientation === 'Vertical') ?\n                month * this_2.cellWidth : index * this_2.cellWidth;\n            if (!this_2.parent.isMinMaxDate(eventData[this_2.fields.startTime])) {\n                return { value: void 0 };\n            }\n            if (this_2.parent.activeViewOptions.orientation === 'Vertical' && this_2.parent.activeViewOptions.group.resources.length > 0) {\n                var isRendered = this_2.renderedEvents.filter(function (eventObj) {\n                    return eventObj.Guid === eventData.Guid;\n                });\n                var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                    return eventObj.Guid === eventData.Guid;\n                });\n                if (isRendered.length > 0 || isSpanned.length > 0) {\n                    return \"continue\";\n                }\n            }\n            if (this_2.parent.rowAutoHeight || this_2.cellHeight > availedHeight) {\n                this_2.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n                this_2.updateCellHeight(td, availedHeight);\n                isSpannedCollection.push(eventData);\n            }\n            else {\n                var moreIndex = this_2.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n                this_2.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n                if (this_2.parent.activeViewOptions.orientation === 'Horizontal') {\n                    for (var i = index; i < eventDatas.length; i++) {\n                        this_2.renderedEvents.push(extend({}, eventDatas[parseInt(i.toString(), 10)], { Index: overlapIndex + i }, true));\n                    }\n                }\n                return \"break\";\n            }\n        };\n        var this_2 = this;\n        for (var a = 0; a < eventDatas.length; a++) {\n            var state_1 = _loop_2(a);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n        var _this = this;\n        var eventObj = this.isSpannedEvent(eventData, monthDate);\n        var wrap = this.createEventElement(eventObj);\n        var width;\n        var index;\n        if (eventObj.isSpanned.count === 1) {\n            var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n            eventObj[this.fields.endTime] = (endTime > eventObj[this.fields.startTime]) ? endTime : eventObj[this.fields.endTime];\n        }\n        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n            return;\n        }\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            index = row + 1;\n            if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            width = eventObj.isSpanned.count * this.cellWidth;\n        }\n        else {\n            index = rowIndex + 1;\n            width = this.isResource ? eventObj.isSpanned.count * this.cellWidth : this.cellWidth;\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n        var top = rowTd.offsetTop + this.cellHeader + (this.eventHeight * eventObj.Index) + EVENT_GAP;\n        setStyleAttribute(wrap, {\n            'width': width + 'px', 'height': this.eventHeight + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px'\n        });\n        if (!this.isResource && this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n            wrap.setAttribute('data-index', eventObj.Index.toString());\n        }\n        var args = { data: eventObj, element: wrap, cancel: false, type: 'event' };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                wrapper.appendChild(wrap);\n                _this.wireAppointmentEvents(wrap, eventObj);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal'\n                    || !eventObj.isSpanned.isRight) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n            }\n        });\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n        if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n            return;\n        }\n        var endDate;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n        }\n        else {\n            endDate = util.addDays(new Date(startDate.getTime()), 1);\n        }\n        var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n        var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n        var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n        left = (Math.floor(left / this.cellWidth) * this.cellWidth);\n        right = (Math.floor(right / this.cellWidth) * this.cellWidth);\n        setStyleAttribute(moreIndicator, { 'width': this.cellWidth + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px' });\n        if (!isNullOrUndefined(index)) {\n            moreIndicator.setAttribute('data-group-index', index.toString());\n        }\n        wrapper.appendChild(moreIndicator);\n        EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n    };\n    YearEvent.prototype.createEventElement = function (record) {\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var eventWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'data-guid': record.Guid,\n                'role': 'button', 'tabindex': '0',\n                'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (this.cssClass) {\n            addClass([eventWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([eventWrapper], cls.READ_ONLY);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resIndex = this.getGroupIndexFromEvent(record);\n            eventWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement = [];\n        var eventObj = extend({}, record, null, true);\n        if (this.parent.activeViewOptions.eventTemplate) {\n            var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false, undefined, undefined, this.parent.root);\n        }\n        else {\n            var locationEle = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var subjectEle = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (locationEle ? ';&nbsp' + locationEle : ''))\n            });\n            var startTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n            });\n            var endTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n            });\n            addClass([subjectEle], 'e-text-center');\n            if (record[this.fields.isAllDay]) {\n                templateElement = [subjectEle];\n            }\n            else if (!eventObj.isLeft && !eventObj.isRight) {\n                templateElement = [startTimeEle, subjectEle, endTimeEle];\n            }\n            else {\n                if (!eventObj.isLeft) {\n                    templateElement.push(startTimeEle);\n                }\n                templateElement.push(subjectEle);\n                if (!eventObj.isRight) {\n                    templateElement.push(endTimeEle);\n                }\n            }\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        append(templateElement, appointmentDetails);\n        eventWrapper.appendChild(appointmentDetails);\n        this.parent.eventBase.renderSpannedIcon(eventWrapper, record.isSpanned);\n        this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n        this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n        return eventWrapper;\n    };\n    YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n        var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n        var monthEnd = util.addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.fields.startTime];\n        var eventEnd = eventData[this.fields.endTime];\n        var isSpanned = { isLeft: false, isRight: false, count: 1 };\n        var yearStart = new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear, 1);\n        var yearEnd = util.addMonths(yearStart, this.parent.monthsCount);\n        if (this.isResource) {\n            this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n        }\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n            this.updateSpannedEventDetails(eventStart, eventEnd, yearStart, yearEnd, eventData, isSpanned);\n            var originalStartTime = eventData[this.fields.startTime];\n            var originalEndTime = new Date(eventData[this.fields.endTime] - 1);\n            isSpanned.count = (originalEndTime.getMonth() - originalStartTime.getMonth()) +\n                (this.parent.monthsCount * (originalEndTime.getFullYear() - originalStartTime.getFullYear())) + 1;\n        }\n        else {\n            this.updateSpannedEventDetails(eventStart, eventEnd, monthStart, monthEnd, eventData, isSpanned);\n            if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n                var end = util.resetTime(eventData[this.fields.endTime]).getTime();\n                var start = util.resetTime(eventData[this.fields.startTime]).getTime();\n                if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n                    end = util.addDays(new Date(end), -1).getTime();\n                }\n                isSpanned.count = Math.round((end - start) / util.MS_PER_DAY) + 1;\n            }\n        }\n        eventData.isSpanned = isSpanned;\n        if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n            eventData[this.fields.startTime] = this.parent.minDate;\n        }\n        if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n            eventData[this.fields.endTime] = this.parent.maxDate;\n        }\n        return eventData;\n    };\n    YearEvent.prototype.updateSpannedEventDetails = function (eventStart, eventEnd, viewStart, viewEnd, eventObj, isSpanned) {\n        if (eventStart.getTime() < viewStart.getTime()) {\n            eventObj[this.fields.startTime] = viewStart;\n            isSpanned.isLeft = true;\n        }\n        if (eventEnd.getTime() > viewEnd.getTime()) {\n            eventObj[this.fields.endTime] = viewEnd;\n            isSpanned.isRight = true;\n        }\n    };\n    YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateStart;\n        var dateEnd;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n            var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n            dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n            dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n        }\n        else {\n            if (this.parent.rowAutoHeight) {\n                dateStart = util.resetTime(new Date(date.getTime())).getTime();\n                dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n            }\n            else {\n                dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n            }\n        }\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            var appStart = new Date(app[this.fields.startTime].getTime());\n            var appEnd = new Date(app[this.fields.endTime].getTime());\n            var timeCondition = app[this.fields.isAllDay] ? util.resetTime(appEnd).getTime() > dateStart :\n                util.resetTime(appEnd).getTime() >= dateStart;\n            if (((util.resetTime(appStart).getTime() <= dateStart) && (timeCondition)) ||\n                (util.resetTime(appStart).getTime() >= dateStart) && (util.resetTime(appEnd).getTime() <= dateEnd)) {\n                appointmentsList.push(app);\n            }\n            else if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                if (util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() >= dateEnd) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    YearEvent.prototype.getMonths = function () {\n        var _this = this;\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.monthsCount }).map(function (value, index) {\n            return _this.parent.firstMonthOfYear + index;\n        });\n    };\n    YearEvent.prototype.removeCellHeight = function () {\n        var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    YearEvent.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.parent = null;\n    };\n    return YearEvent;\n}(TimelineEvent));\nexport { YearEvent };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}