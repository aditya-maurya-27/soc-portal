{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, extend, EventHandler, Animation, formatUnit, closest } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Vertical view appointment rendering\n */\nvar VerticalEvent = /** @class */function (_super) {\n  __extends(VerticalEvent, _super);\n  function VerticalEvent(parent) {\n    var _this = _super.call(this, parent) || this;\n    _this.dateRender = [];\n    _this.renderedEvents = [];\n    _this.renderedAllDayEvents = [];\n    _this.overlapEvents = [];\n    _this.moreEvents = [];\n    _this.overlapList = [];\n    _this.allDayEvents = [];\n    _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n    _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n    _this.allDayLevel = 0;\n    _this.startHour = _this.getStartEndHours(_this.parent.activeViewOptions.startHour);\n    _this.endHour = _this.getStartEndHours(_this.parent.activeViewOptions.endHour);\n    _this.element = _this.parent.activeView.getPanel();\n    _this.fields = _this.parent.eventFields;\n    _this.animation = new Animation({\n      progress: _this.animationUiUpdate.bind(_this)\n    });\n    _this.addEventListener();\n    return _this;\n  }\n  VerticalEvent.prototype.renderAppointments = function () {\n    var _this = this;\n    if (isNullOrUndefined(this.parent)) {\n      return;\n    }\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.setDragArea();\n    }\n    this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();\n    var wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS + ',.' + cls.APPOINTMENT_CLASS + ',.' + cls.ROW_COUNT_WRAPPER_CLASS));\n    var isDragging = this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction ? true : false;\n    var hideWrapper = function (wrapper) {\n      if (_this.parent.isReact && !isNullOrUndefined(_this.parent.activeViewOptions.eventTemplate)) {\n        var appWrapper = closest(wrapper, '.' + cls.DAY_WRAPPER_CLASS + ',.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS);\n        if (appWrapper && !appWrapper.classList.contains(cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS)) {\n          addClass([appWrapper], cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS);\n        }\n      }\n    };\n    for (var _i = 0, wrapperElements_1 = wrapperElements; _i < wrapperElements_1.length; _i++) {\n      var wrapper = wrapperElements_1[_i];\n      if (isDragging && !(wrapper.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) || wrapper.classList.contains(cls.ROW_COUNT_WRAPPER_CLASS))) {\n        var groupIndex = parseInt(wrapper.getAttribute('data-group-index'), 10);\n        for (var j = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; j < len; j++) {\n          if (groupIndex === this.parent.crudModule.crudObj.sourceEvent[parseInt(j.toString(), 10)].groupIndex || groupIndex === this.parent.crudModule.crudObj.targetEvent[parseInt(j.toString(), 10)].groupIndex) {\n            hideWrapper(wrapper);\n            remove(wrapper);\n          }\n        }\n      } else {\n        hideWrapper(wrapper);\n        remove(wrapper);\n      }\n    }\n    if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n      return;\n    }\n    if (this.parent.virtualScrollModule) {\n      this.parent.virtualScrollModule.updateFocusedWorkCell();\n    }\n    this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n    this.setAllDayRowHeight(0);\n    if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n      return;\n    }\n    var expandCollapse = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n    EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n    EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n    this.renderedEvents = [];\n    this.renderedAllDayEvents = [];\n    this.initializeValues();\n    this.processBlockEvents();\n    this.renderEvents('normalEvents');\n    if (this.allDayEvents.length > 0) {\n      this.allDayEvents = this.allDayEvents.filter(function (item, index, arr) {\n        return index === arr.map(function (item) {\n          return item.Guid;\n        }).indexOf(item.Guid);\n      });\n      removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n      this.slots.push(this.parent.activeView.renderDates.map(function (date) {\n        return +date;\n      }));\n      this.renderEvents('allDayEvents');\n      this.animation.animate(this.allDayElement[0]);\n    }\n    this.parent.notify(events.contentReady, {});\n    addClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n    if (isDragging) {\n      this.parent.crudModule.crudObj.isCrudAction = false;\n    }\n    this.parent.renderTemplates(function () {\n      if (_this.parent && _this.parent.isReact && _this.parent.activeViewOptions.eventTemplate) {\n        var wraps = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS));\n        removeClass(wraps, cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS);\n      }\n    });\n  };\n  VerticalEvent.prototype.initializeValues = function () {\n    this.resources = this.parent.activeViewOptions.group.resources.length > 0 ? this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel : [];\n    if (this.resources.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.virtualScrollModule) {\n      this.resources = this.parent.resourceBase.renderedResources;\n    }\n    this.cellHeight = parseFloat(this.parent.getElementHeight(this.parent.element.querySelector('.e-content-wrap tbody tr')).toFixed(2));\n    this.dateRender[0] = this.parent.activeView.renderDates;\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      for (var i = 0, len = this.resources.length; i < len; i++) {\n        this.dateRender[parseInt(i.toString(), 10)] = this.resources[parseInt(i.toString(), 10)].renderDates;\n      }\n    }\n  };\n  VerticalEvent.prototype.getHeight = function (start, end) {\n    var appHeight = (util.getUniversalTime(end) - util.getUniversalTime(start)) / util.MS_PER_MINUTE * (this.cellHeight * this.slotCount) / this.interval;\n    appHeight = appHeight <= 0 ? this.cellHeight : appHeight;\n    return appHeight;\n  };\n  VerticalEvent.prototype.appendEvent = function (eventObj, appointmentElement, index, appLeft) {\n    var appointmentWrap = this.element.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS + '[id=\"' + cls.APPOINTMENT_WRAPPER_CLASS + '-' + index + '\"]');\n    if (this.parent.enableRtl) {\n      setStyleAttribute(appointmentElement, {\n        'right': appLeft\n      });\n    } else {\n      setStyleAttribute(appointmentElement, {\n        'left': appLeft\n      });\n    }\n    var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n    var args = {\n      data: extend({}, eventObj, null, true),\n      element: appointmentElement,\n      cancel: false,\n      type: eventType\n    };\n    this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        appointmentWrap.appendChild(appointmentElement);\n      }\n    });\n  };\n  VerticalEvent.prototype.processBlockEvents = function () {\n    var resources = this.getResourceList();\n    var dateCount = this.getStartCount();\n    for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n      var resource = resources_1[_i];\n      var renderDates = this.dateRender[parseInt(resource.toString(), 10)];\n      for (var day = 0, length_1 = renderDates.length; day < length_1; day++) {\n        var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());\n        var endDate = util.resetTime(util.addDays(renderDates[parseInt(day.toString(), 10)], 1));\n        var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[parseInt(resource.toString(), 10)]);\n        for (var _a = 0, filterEvents_1 = filterEvents; _a < filterEvents_1.length; _a++) {\n          var event_1 = filterEvents_1[_a];\n          if (this.parent.resourceBase) {\n            this.setValues(event_1, resource);\n          }\n          this.renderBlockEvents(event_1, day, resource, dateCount);\n          this.cssClass = null;\n          this.groupOrder = null;\n        }\n        dateCount += 1;\n      }\n    }\n  };\n  VerticalEvent.prototype.renderBlockEvents = function (eventObj, dayIndex, resource, dayCount) {\n    var spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n    var eStart = spannedData[this.fields.startTime];\n    var eEnd = spannedData[this.fields.endTime];\n    var currentDate = util.resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()));\n    var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n    if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule) && this.isWorkDayAvailable(resource, eStart)) {\n      var blockTop = void 0;\n      var blockHeight = void 0;\n      if (spannedData[this.fields.isAllDay]) {\n        var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n        blockHeight = formatUnit(contentWrap.offsetHeight);\n        blockTop = formatUnit(0);\n      } else {\n        blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n        blockTop = formatUnit(this.getTopValue(eStart));\n      }\n      var appointmentElement = this.createBlockAppointmentElement(eventObj, resource, this.isResourceEventTemplate);\n      setStyleAttribute(appointmentElement, {\n        'width': '100%',\n        'height': blockHeight,\n        'top': blockTop\n      });\n      var index = this.getDayIndex(dayIndex, resource, dayCount);\n      this.appendEvent(eventObj, appointmentElement, index, '0px');\n    }\n  };\n  VerticalEvent.prototype.renderEvents = function (eventType) {\n    removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n    var eventCollection = eventType === 'allDayEvents' ? this.sortByDateTime(this.allDayEvents) : undefined;\n    var resources = this.getResourceList();\n    var dateCount = this.getStartCount();\n    var isRender;\n    var appHeight = eventType === 'allDayEvents' ? this.parent.getElementHeightFromClass(this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS), cls.APPOINTMENT_CLASS) : 0;\n    var allDayRowTop = eventType === 'allDayEvents' && this.allDayElement.length > 0 ? this.allDayElement[0].offsetTop : 0;\n    var _loop_1 = function (resource) {\n      isRender = true;\n      if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction && eventType !== 'allDayEvents' && !this_1.parent.uiStateValues.isGroupAdaptive) {\n        if (this_1.parent.crudModule.crudObj.sourceEvent.filter(function (data) {\n          return data.groupIndex === resource;\n        }).length === 0 && this_1.parent.crudModule.crudObj.targetEvent.filter(function (data) {\n          return data.groupIndex === resource;\n        }).length === 0) {\n          isRender = false;\n        }\n      }\n      this_1.slots = [];\n      var renderDates = this_1.dateRender[parseInt(resource.toString(), 10)];\n      var renderedDate = this_1.getRenderedDates(renderDates) || renderDates;\n      this_1.slots.push(renderDates.map(function (date) {\n        return +date;\n      }));\n      for (var day = 0, length_2 = renderDates.length; day < length_2 && renderDates[parseInt(day.toString(), 10)] <= renderedDate[renderedDate.length - 1]; day++) {\n        this_1.renderedEvents = [];\n        var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());\n        var endDate = util.resetTime(util.addDays(renderDates[parseInt(day.toString(), 10)], 1));\n        var filterEvents = this_1.filterEvents(startDate, endDate, eventCollection, this_1.resources[parseInt(resource.toString(), 10)]);\n        if (isRender) {\n          for (var _i = 0, filterEvents_2 = filterEvents; _i < filterEvents_2.length; _i++) {\n            var event_2 = filterEvents_2[_i];\n            if (this_1.parent.resourceBase) {\n              this_1.setValues(event_2, resource);\n            }\n            if (eventType === 'allDayEvents') {\n              this_1.renderAllDayEvents(event_2, day, resource, dateCount, false, allDayRowTop, appHeight);\n            } else {\n              if (this_1.isAllDayAppointment(event_2)) {\n                this_1.allDayEvents.push(extend({}, event_2, null, true));\n              } else {\n                if (this_1.parent.eventSettings.enableMaxHeight) {\n                  if (this_1.getOverlapIndex(event_2, day, false, resource) > 0) {\n                    continue;\n                  }\n                }\n                this_1.renderNormalEvents(event_2, day, resource, dateCount);\n              }\n            }\n            this_1.cssClass = null;\n            this_1.groupOrder = null;\n          }\n        } else {\n          for (var _a = 0, filterEvents_3 = filterEvents; _a < filterEvents_3.length; _a++) {\n            var event_3 = filterEvents_3[_a];\n            if (this_1.isAllDayAppointment(event_3)) {\n              this_1.allDayEvents.push(extend({}, event_3, null, true));\n            }\n          }\n        }\n        dateCount += 1;\n      }\n    };\n    var this_1 = this;\n    for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n      var resource = resources_2[_i];\n      _loop_1(resource);\n    }\n  };\n  VerticalEvent.prototype.getStartCount = function () {\n    return this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.timeScale.enable ? parseInt(this.element.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).getAttribute('id').split('-').slice(-1)[0], 10) : 0;\n  };\n  VerticalEvent.prototype.getDayIndex = function (dayIndex, resource, dayCount) {\n    var _this = this;\n    if (!this.parent.activeViewOptions.group.byDate) {\n      return dayCount;\n    }\n    if (this.parent.activeViewOptions.group.byDate && !this.parent.activeViewOptions.group.hideNonWorkingDays) {\n      var renderedIndex = this.parent.resourceBase.lastResourceLevel[0].renderDates.indexOf(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)]);\n      return this.resources.length * renderedIndex + resource;\n    }\n    var dateIndex = 0;\n    var firstColumn = this.parent.activeView.colLevels[0];\n    var currentDate = this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime();\n    var currentResources = [];\n    for (var i = 0; i < firstColumn.length; i++) {\n      currentResources = this.parent.resourceBase.resourceDateTree[parseInt(i.toString(), 10)];\n      if (currentDate === firstColumn[parseInt(i.toString(), 10)].date.getTime()) {\n        break;\n      }\n      dateIndex = dateIndex + firstColumn[parseInt(i.toString(), 10)].colSpan;\n    }\n    var resIndex = currentResources.findIndex(function (x) {\n      return x.groupOrder.toString() === _this.resources[parseInt(resource.toString(), 10)].groupOrder.toString();\n    });\n    if (resIndex < 0) {\n      return dateIndex;\n    }\n    return dateIndex + resIndex;\n  };\n  VerticalEvent.prototype.setValues = function (event, resourceIndex) {\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.cssClass = this.resources[parseInt(resourceIndex.toString(), 10)].cssClass;\n      this.groupOrder = this.resources[parseInt(resourceIndex.toString(), 10)].groupOrder;\n    } else {\n      this.cssClass = this.parent.resourceBase.getCssClass(event);\n    }\n  };\n  VerticalEvent.prototype.getResourceList = function () {\n    // eslint-disable-next-line prefer-spread\n    var resources = Array.apply(null, {\n      length: this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive ? this.resources.length : 1\n    }).map(function (value, index) {\n      return index;\n    });\n    return resources;\n  };\n  // eslint-disable-next-line max-len\n  VerticalEvent.prototype.createAppointmentElement = function (record, isAllDay, data, resource) {\n    var fieldMapping = this.parent.eventFields;\n    var recordSubject = record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var appointmentWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      attrs: {\n        'data-id': 'Appointment_' + record[fieldMapping.id],\n        'data-guid': record.Guid,\n        'role': 'button',\n        'tabindex': '0',\n        'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n        'aria-label': this.parent.getAnnouncementString(record)\n      }\n    });\n    if (record[this.fields.isReadonly]) {\n      addClass([appointmentWrapper], 'e-read-only');\n    }\n    var appointmentDetails = createElement('div', {\n      className: cls.APPOINTMENT_DETAILS\n    });\n    appointmentWrapper.appendChild(appointmentDetails);\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n      appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n    }\n    var templateElement;\n    var eventData = data;\n    if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n      var elementId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.eventTemplateName;\n      var templateId = elementId + viewName + 'eventTemplate';\n      var resIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n      var templateName = this.isResourceEventTemplate ? this.parent.getEventTemplateName(resIndex) : 'eventTemplate';\n      templateElement = this.parent.getAppointmentTemplate()(record, this.parent, templateName, templateId, false, undefined, undefined, this.parent.root);\n    } else {\n      var appointmentSubject = createElement('div', {\n        className: cls.SUBJECT_CLASS\n      });\n      this.parent.sanitize(recordSubject, appointmentSubject);\n      if (isAllDay) {\n        if (record[fieldMapping.isAllDay]) {\n          templateElement = [appointmentSubject];\n        } else {\n          templateElement = [];\n          var appointmentStartTime = createElement('div', {\n            className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n            innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n          });\n          var appointmentEndTime = createElement('div', {\n            className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n            innerHTML: this.parent.getTimeString(record[fieldMapping.endTime])\n          });\n          addClass([appointmentSubject], 'e-text-center');\n          if (!eventData.isLeft) {\n            templateElement.push(appointmentStartTime);\n          }\n          templateElement.push(appointmentSubject);\n          if (!eventData.isRight) {\n            templateElement.push(appointmentEndTime);\n          }\n        }\n      } else {\n        var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' + this.parent.getTimeString(record[fieldMapping.endTime]);\n        var appointmentTime = createElement('div', {\n          className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n          innerHTML: timeStr\n        });\n        var appointmentLocation = createElement('div', {\n          className: cls.LOCATION_CLASS\n        });\n        this.parent.sanitize(record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || '', appointmentLocation);\n        templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n      }\n    }\n    append(templateElement, appointmentDetails);\n    if (!this.parent.isAdaptive && (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n      var iconClass = record[fieldMapping.id] === record[fieldMapping.recurrenceID] ? cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n      var recurrenceIcon = createElement('div', {\n        className: cls.ICON + ' ' + iconClass\n      });\n      if (isAllDay) {\n        appointmentDetails.appendChild(recurrenceIcon);\n      } else {\n        appointmentWrapper.appendChild(recurrenceIcon);\n      }\n    }\n    this.parent.eventBase.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n    if (!isNullOrUndefined(this.cssClass)) {\n      addClass([appointmentWrapper], this.cssClass);\n    }\n    this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n    this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n    return appointmentWrapper;\n  };\n  VerticalEvent.prototype.createMoreIndicator = function (allDayRow, count, currentDay) {\n    var index = currentDay + count;\n    var countWrapper = allDayRow[parseInt(index.toString(), 10)];\n    if (countWrapper.childElementCount <= 0) {\n      var innerCountWrap = createElement('div', {\n        className: cls.ROW_COUNT_WRAPPER_CLASS,\n        id: cls.ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n      });\n      var moreIndicatorElement = createElement('div', {\n        className: cls.MORE_INDICATOR_CLASS,\n        attrs: {\n          'tabindex': '0',\n          'data-index': index.toString(),\n          'data-count': '1'\n        },\n        innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n      });\n      innerCountWrap.appendChild(moreIndicatorElement);\n      countWrapper.appendChild(innerCountWrap);\n      EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n    } else {\n      var countCell = countWrapper.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n      var moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n      countCell.setAttribute('data-count', moreCount.toString());\n      countCell.innerHTML = '+' + this.parent.globalize.formatNumber(moreCount) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n    }\n  };\n  VerticalEvent.prototype.isSpannedEvent = function (record, day, resource) {\n    var currentDate = util.resetTime(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)]);\n    var renderedDate = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) || [currentDate];\n    var currentDay = renderedDate.filter(function (date) {\n      return date.getDay() === day;\n    });\n    if (currentDay.length === 0) {\n      currentDate = util.resetTime(renderedDate[0]);\n    }\n    var field = this.parent.eventFields;\n    var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n    var event = extend({}, record, null, true);\n    event.isSpanned = {\n      isBottom: false,\n      isTop: false,\n      isSameDuration: event[field.startTime].getTime() === event[field.endTime].getTime()\n    };\n    if (record[field.startTime].getTime() < schedule.startHour.getTime()) {\n      event[field.startTime] = schedule.startHour;\n      event.isSpanned.isTop = true;\n    }\n    if (record[field.endTime].getTime() > schedule.endHour.getTime()) {\n      event[field.endTime] = schedule.endHour;\n      event.isSpanned.isBottom = true;\n    }\n    var eventDates = this.updateEventMinimumDuration(schedule, event[field.startTime], event[field.endTime]);\n    event[field.startTime] = eventDates.startDate;\n    event[field.endTime] = eventDates.endDate;\n    return event;\n  };\n  VerticalEvent.prototype.isWorkDayAvailable = function (resource, start) {\n    if (this.parent.activeViewOptions.group.hideNonWorkingDays && this.resources.length > 0) {\n      var workDays = this.resources[parseInt(resource.toString(), 10)].resourceData[this.resources[parseInt(resource.toString(), 10)].resource.workDaysField] || this.parent.activeViewOptions.workDays;\n      return workDays && workDays.indexOf(start.getDay()) >= 0;\n    }\n    return true;\n  };\n  // eslint-disable-next-line max-len\n  VerticalEvent.prototype.renderAllDayEvents = function (eventObj, dayIndex, resource, dayCount, inline, cellTop, eventHeight) {\n    var _this = this;\n    var currentDates = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) || this.dateRender[parseInt(resource.toString(), 10)];\n    if (this.parent.activeViewOptions.group.byDate) {\n      this.slots[0] = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()];\n      currentDates = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)]];\n    }\n    var record = this.splitEvent(eventObj, currentDates)[0];\n    var eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n    var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n    var appWidth = 0;\n    var topValue = 1;\n    var isDateRange = currentDates[0].getTime() <= eStart.getTime() && util.addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n    if (eStart <= eEnd && isDateRange && this.isWorkDayAvailable(resource, eStart)) {\n      var isAlreadyRendered = [];\n      if (this.renderedAllDayEvents[parseInt(resource.toString(), 10)]) {\n        isAlreadyRendered = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function (event) {\n          return event.Guid === eventObj.Guid;\n        });\n        if (this.parent.activeViewOptions.group.byDate) {\n          isAlreadyRendered = isAlreadyRendered.filter(function (event) {\n            return event[_this.parent.eventFields.startTime] >= currentDates[parseInt(dayIndex.toString(), 10)] && event[_this.parent.eventFields.endTime] <= util.addDays(new Date(+currentDates[parseInt(dayIndex.toString(), 10)]), 1);\n          });\n        }\n      }\n      if (isAlreadyRendered.length === 0) {\n        var allDayDifference_1 = record.data.count;\n        var allDayIndex_1 = this.getOverlapIndex(record, dayIndex, true, resource);\n        record.Index = allDayIndex_1;\n        this.allDayLevel = this.allDayLevel < allDayIndex_1 ? allDayIndex_1 : this.allDayLevel;\n        var widthAdjustment = record.data.isRight ? 0 : this.parent.currentView === 'Day' ? 4 : 7;\n        if (allDayDifference_1 >= 0) {\n          appWidth = allDayDifference_1 * 100 - (!this.parent.activeViewOptions.allowOverlap ? 0 : widthAdjustment);\n        }\n        if (isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {\n          this.renderedAllDayEvents[parseInt(resource.toString(), 10)] = [];\n        }\n        this.renderedAllDayEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));\n        var allDayRow_1 = [].slice.call(this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).children);\n        var wIndex_1 = this.getDayIndex(dayIndex, resource, dayCount);\n        var eventWrapper_1 = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':nth-child(' + (wIndex_1 + 1) + ')');\n        var appointmentElement_1;\n        if (inline) {\n          appointmentElement_1 = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n        } else {\n          appointmentElement_1 = this.createAppointmentElement(eventObj, true, record.data, resource);\n        }\n        addClass([appointmentElement_1], cls.ALLDAY_APPOINTMENT_CLASS);\n        var eventData = extend({}, record.data, null, true);\n        eventObj.data = eventData;\n        var args = {\n          data: eventObj,\n          element: appointmentElement_1,\n          cancel: false\n        };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            eventWrapper_1.appendChild(appointmentElement_1);\n            topValue += (allDayIndex_1 === 0 ? cellTop : cellTop + allDayIndex_1 * eventHeight) + 1;\n            setStyleAttribute(appointmentElement_1, {\n              'width': appWidth + '%',\n              'top': formatUnit(topValue)\n            });\n            if (allDayIndex_1 > 1) {\n              _this.moreEvents.push(appointmentElement_1);\n              for (var count = 0, length_3 = allDayDifference_1; count < length_3; count++) {\n                _this.createMoreIndicator(allDayRow_1, count, wIndex_1);\n              }\n            }\n            _this.allDayElement[0].setAttribute('data-count', _this.allDayLevel.toString());\n            var allDayRowHeight = (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2 ? 3 * eventHeight : (_this.allDayLevel + 1) * eventHeight) + 4;\n            _this.setAllDayRowHeight(allDayRowHeight);\n            _this.addOrRemoveClass();\n            _this.wireAppointmentEvents(appointmentElement_1, eventObj);\n          }\n        });\n      }\n    }\n  };\n  VerticalEvent.prototype.renderNormalEvents = function (eventObj, dayIndex, resource, dayCount, inline) {\n    var record = this.isSpannedEvent(eventObj, dayIndex, resource);\n    var eStart = record[this.fields.startTime];\n    var eEnd = record[this.fields.endTime];\n    var appWidth = '0%';\n    var appLeft = '0%';\n    var topValue = 0;\n    var currentDate = util.resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()));\n    var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n    var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n    if (eStart.getTime() < this.parent.minDate.getTime() || eEnd.getTime() > this.parent.maxDate.getTime()) {\n      return;\n    }\n    if (eStart <= eEnd && isValidEvent && this.isWorkDayAvailable(resource, eStart)) {\n      var appHeight = record.isSpanned.isSameDuration ? this.cellHeight : this.getHeight(eStart, eEnd);\n      if (eStart.getTime() >= schedule.startHour.getTime()) {\n        topValue = this.getTopValue(eStart);\n      }\n      var appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n      record.Index = appIndex;\n      this.overlapList.push(record);\n      if (this.overlapList.length > 1) {\n        if (isNullOrUndefined(this.overlapEvents[parseInt(appIndex.toString(), 10)])) {\n          this.overlapEvents[parseInt(appIndex.toString(), 10)] = [];\n        }\n        this.overlapEvents[parseInt(appIndex.toString(), 10)].push(record);\n      } else {\n        this.overlapEvents = [];\n        this.overlapEvents.push([record]);\n      }\n      appWidth = this.getEventWidth();\n      var argsData = {\n        index: appIndex,\n        left: appLeft,\n        width: appWidth,\n        day: dayCount,\n        dayIndex: dayIndex,\n        record: record,\n        resource: resource\n      };\n      var tempData = this.adjustOverlapElements(argsData);\n      appWidth = tempData.appWidth;\n      if (isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)])) {\n        this.renderedEvents[parseInt(resource.toString(), 10)] = [];\n      }\n      this.renderedEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));\n      var appointmentElement = void 0;\n      if (inline) {\n        appointmentElement = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n      } else {\n        appointmentElement = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n      }\n      setStyleAttribute(appointmentElement, {\n        'width': this.parent.eventSettings.enableMaxHeight || !this.parent.activeViewOptions.allowOverlap ? '100%' : tempData.appWidth,\n        'height': appHeight + 'px',\n        'top': topValue + 'px'\n      });\n      var iconHeight = appointmentElement.querySelectorAll('.' + cls.EVENT_INDICATOR_CLASS).length * 15;\n      var maxHeight = appHeight - 40 - iconHeight;\n      var subjectElement = appointmentElement.querySelector('.' + cls.SUBJECT_CLASS);\n      if (!this.parent.isAdaptive && subjectElement) {\n        subjectElement.style.maxHeight = formatUnit(maxHeight);\n      }\n      var index = this.getDayIndex(dayIndex, resource, dayCount);\n      var eventData = {};\n      eventData[this.fields.startTime] = eventObj[this.fields.startTime];\n      eventData[this.fields.endTime] = eventObj[this.fields.endTime];\n      record.data = eventData;\n      this.appendEvent(record, appointmentElement, index, tempData.appLeft);\n      this.wireAppointmentEvents(appointmentElement, eventObj);\n    }\n  };\n  VerticalEvent.prototype.getEventWidth = function () {\n    var width = this.parent.currentView === 'Day' ? 97 : 94;\n    var tempWidth = (width - this.overlapEvents.length) / this.overlapEvents.length;\n    return (tempWidth < 0 ? 0 : tempWidth) + '%';\n  };\n  VerticalEvent.prototype.getEventLeft = function (appWidth, index) {\n    var tempLeft = (parseFloat(appWidth) + 1) * index;\n    return (tempLeft > 99 ? 99 : tempLeft) + '%';\n  };\n  VerticalEvent.prototype.getStartEndHours = function (startEndTime) {\n    if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n      var startEndDate = new Date(2000, 0, 0, 0);\n      var timeString = startEndTime.split(':');\n      if (timeString.length === 2) {\n        startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n      }\n      return startEndDate;\n    }\n    return null;\n  };\n  VerticalEvent.prototype.getTopValue = function (date) {\n    var startHour = this.getStartEndHours(this.parent.activeViewOptions.startHour);\n    var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n    return this.parent.activeViewOptions.timeScale.enable ? diffInMinutes * this.cellHeight * this.slotCount / this.interval : 0;\n  };\n  VerticalEvent.prototype.getOverlapIndex = function (record, day, isAllDay, resource) {\n    var _this = this;\n    var fieldMapping = this.parent.eventFields;\n    var eventsList = [];\n    var appIndex = -1;\n    this.overlapEvents = [];\n    if (isAllDay) {\n      if (!isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {\n        var date_1 = util.resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)].getTime()));\n        eventsList = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function (app) {\n          return util.resetTime(app[fieldMapping.startTime]).getTime() <= date_1.getTime() && util.resetTime(app[fieldMapping.endTime]).getTime() >= date_1.getTime();\n        });\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          eventsList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], eventsList);\n        }\n      }\n    } else {\n      var appointmentList_1 = !isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)]) ? this.renderedEvents[parseInt(resource.toString(), 10)] : [];\n      var appointment_1 = [];\n      var recordStart_1 = record[fieldMapping.startTime];\n      var recordEnd_1 = record[fieldMapping.endTime];\n      this.overlapList = appointmentList_1.filter(function (data) {\n        return data[fieldMapping.endTime] > recordStart_1 && data[fieldMapping.startTime] <= recordEnd_1 || data[fieldMapping.startTime] >= recordEnd_1 && data[fieldMapping.endTime] <= recordStart_1 || data[fieldMapping.endTime].getTime() === data[fieldMapping.startTime].getTime() && data[fieldMapping.startTime].getTime() === recordStart_1.getTime() && data[fieldMapping.endTime] < recordEnd_1;\n      });\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.overlapList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], this.overlapList);\n      }\n      var queue_1 = [];\n      this.overlapList.forEach(function (obj) {\n        queue_1.push(obj);\n        var filterList = [];\n        var processedIds = new Set();\n        var _loop_2 = function () {\n          var currentObj = queue_1.shift();\n          var overlaps = appointmentList_1.filter(function (data) {\n            return data[fieldMapping.endTime] > currentObj[fieldMapping.startTime] && data[fieldMapping.startTime] <= currentObj[fieldMapping.endTime] && !processedIds.has(data[fieldMapping.id]);\n          });\n          overlaps.forEach(function (overlap) {\n            filterList.push(overlap);\n            processedIds.add(overlap[fieldMapping.id]);\n            queue_1.push(overlap);\n          });\n          if (processedIds.size < appointmentList_1.length - 1) {\n            return \"break\";\n          }\n        };\n        while (queue_1.length > 0) {\n          var state_1 = _loop_2();\n          if (state_1 === \"break\") break;\n        }\n        if (_this.parent.activeViewOptions.group.resources.length > 0) {\n          filterList = _this.filterEventsByResource(_this.resources[parseInt(resource.toString(), 10)], filterList);\n        }\n        var collection = filterList.filter(function (val) {\n          return _this.overlapList.indexOf(val) === -1;\n        });\n        if (collection.length > 0) {\n          appointment_1 = appointment_1.concat(collection);\n        }\n      });\n      for (var i = 0; i < appointment_1.length - 1; i++) {\n        for (var j = i + 1; j < appointment_1.length; j++) {\n          if (appointment_1[parseInt(i.toString(), 10)][fieldMapping.id] === appointment_1[parseInt(j.toString(), 10)][fieldMapping.id]) {\n            appointment_1.splice(j, 1);\n            j--;\n          }\n        }\n      }\n      this.overlapList = this.overlapList.concat(appointment_1);\n      eventsList = this.overlapList;\n      for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n        var event_4 = eventsList_1[_i];\n        var record_1 = event_4;\n        var index = record_1.Index;\n        if (isNullOrUndefined(this.overlapEvents[parseInt(index.toString(), 10)])) {\n          this.overlapEvents[parseInt(index.toString(), 10)] = [event_4];\n        } else {\n          this.overlapEvents[parseInt(index.toString(), 10)].push(event_4);\n        }\n      }\n    }\n    if (!isAllDay) {\n      eventsList = eventsList.filter(function (obj) {\n        return obj[fieldMapping.startTime] === record[fieldMapping.startTime] && obj[fieldMapping.endTime] > record[fieldMapping.endTime] || obj[fieldMapping.endTime] > record[fieldMapping.startTime] && obj[fieldMapping.startTime] < record[fieldMapping.endTime] || obj[fieldMapping.endTime] === record[fieldMapping.startTime] && obj[fieldMapping.startTime] === record[fieldMapping.endTime] || obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() && obj[fieldMapping.endTime].getTime() === record[fieldMapping.endTime].getTime() || obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() && obj[fieldMapping.endTime].getTime() < record[fieldMapping.endTime].getTime() || obj[fieldMapping.endTime].getTime() > record[fieldMapping.endTime].getTime();\n      });\n    }\n    if (eventsList.length > 0) {\n      var appLevel = eventsList.map(function (obj) {\n        return obj.Index;\n      });\n      appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;\n    }\n    return appIndex === -1 ? 0 : appIndex;\n  };\n  VerticalEvent.prototype.adjustOverlapElements = function (args) {\n    var data = {\n      appWidth: args.width,\n      appLeft: args.left\n    };\n    for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n      if (!isNullOrUndefined(this.overlapEvents[parseInt(i.toString(), 10)])) {\n        for (var j = 0, length2 = this.overlapEvents[parseInt(i.toString(), 10)].length; j < length2; j++) {\n          var dayCount = this.getDayIndex(args.dayIndex, args.resource, args.day);\n          var element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n          if (element && element.childElementCount > 0) {\n            var eleGuid = this.overlapEvents[parseInt(i.toString(), 10)][parseInt(j.toString(), 10)].Guid;\n            if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n              var apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n              if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                if (this.parent.enableRtl) {\n                  apps.style.right = this.getEventLeft(args.width, i);\n                } else {\n                  apps.style.left = this.getEventLeft(args.width, i);\n                }\n                apps.style.width = parseFloat(args.width) + '%';\n                data.appWidth = apps.style.width;\n              } else {\n                data.appWidth = apps.style.width;\n              }\n            } else {\n              var appWidth = args.width;\n              if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                appWidth = this.getEventWidth();\n              }\n              data.appWidth = appWidth;\n              data.appLeft = this.getEventLeft(appWidth, args.index);\n            }\n          }\n        }\n      }\n    }\n    return data;\n  };\n  VerticalEvent.prototype.setAllDayRowHeight = function (height) {\n    var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n    if (this.parent.height === 'auto' || !this.parent.enableAllDayScroll) {\n      addClass([dateHeader], cls.ALLDAY_APPOINTMENT_AUTO);\n    }\n    var allDayRow = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n    allDayRow.style.height = '';\n    if (this.parent.uiStateValues.expand && this.parent.height !== 'auto' && this.parent.enableAllDayScroll) {\n      allDayRow.style.height = height / 12 + 'em';\n      this.parent.eventBase.allDayExpandScroll(dateHeader);\n    } else {\n      for (var _i = 0, _a = this.allDayElement; _i < _a.length; _i++) {\n        var element = _a[_i];\n        element.style.height = height / 12 + 'em';\n      }\n      removeClass([dateHeader], cls.ALLDAY_APPOINTMENT_SCROLL);\n    }\n  };\n  VerticalEvent.prototype.addOrRemoveClass = function () {\n    var _this = this;\n    this.moreEvents.filter(function (element) {\n      if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n        addClass([element], cls.EVENT_COUNT_CLASS);\n        element.setAttribute('tabindex', '-1');\n      } else {\n        removeClass([element], cls.EVENT_COUNT_CLASS);\n        element.setAttribute('tabindex', '0');\n      }\n    });\n    var moreEventCount = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n    if (this.parent.uiStateValues.expand) {\n      removeClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n      addClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n    } else {\n      removeClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n      addClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n    }\n    if (this.allDayLevel > 2) {\n      removeClass([moreEventCount], cls.DISABLE_CLASS);\n    } else {\n      addClass([moreEventCount], cls.DISABLE_CLASS);\n    }\n    var countCell = [].slice.call(this.element.querySelectorAll('.' + cls.ROW_COUNT_WRAPPER_CLASS));\n    countCell.forEach(function (element) {\n      if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n        removeClass([element], cls.DISABLE_CLASS);\n      } else {\n        addClass([element], cls.DISABLE_CLASS);\n      }\n    });\n  };\n  VerticalEvent.prototype.getEventHeight = function () {\n    var eventElement = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      styles: 'visibility:hidden'\n    });\n    var eventWrapper = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n    eventWrapper.appendChild(eventElement);\n    var height = eventElement.offsetHeight;\n    remove(eventElement);\n    return height;\n  };\n  VerticalEvent.prototype.rowExpandCollapse = function () {\n    var target = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n    this.parent.uiStateValues.expand = target.classList.contains(cls.APPOINTMENT_ROW_EXPAND_CLASS);\n    var rowHeight;\n    if (this.parent.uiStateValues.expand) {\n      target.setAttribute('title', this.parent.localeObj.getConstant('collapseAllDaySection'));\n      target.setAttribute('aria-label', this.parent.localeObj.getConstant('collapseAllDaySection'));\n      rowHeight = (this.allDayLevel + 1) * this.getEventHeight() + 4;\n    } else {\n      target.setAttribute('title', this.parent.localeObj.getConstant('expandAllDaySection'));\n      target.setAttribute('aria-label', this.parent.localeObj.getConstant('expandAllDaySection'));\n      rowHeight = 3 * this.getEventHeight() + 4;\n      this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS).scrollTop = 0;\n    }\n    this.setAllDayRowHeight(rowHeight);\n    this.animation.animate(this.allDayElement[0]);\n    this.addOrRemoveClass();\n    this.animation.animate(target);\n  };\n  VerticalEvent.prototype.animationUiUpdate = function () {\n    this.parent.notify(events.contentReady, {});\n  };\n  VerticalEvent.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.removeEventListener();\n    this.allDayElement = null;\n    this.renderedAllDayEvents = null;\n    this.renderedEvents = null;\n    this.slotCount = null;\n    this.interval = null;\n    this.startHour = null;\n    this.endHour = null;\n    this.element = null;\n    this.fields = null;\n    this.animation = null;\n    _super.prototype.destroy.call(this);\n  };\n  return VerticalEvent;\n}(EventBase);\nexport { VerticalEvent };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","append","createElement","extend","EventHandler","Animation","formatUnit","closest","isNullOrUndefined","setStyleAttribute","remove","removeClass","addClass","EventBase","util","events","cls","VerticalEvent","_super","parent","_this","call","dateRender","renderedEvents","renderedAllDayEvents","overlapEvents","moreEvents","overlapList","allDayEvents","slotCount","activeViewOptions","timeScale","interval","allDayLevel","startHour","getStartEndHours","endHour","element","activeView","getPanel","fields","eventFields","animation","progress","animationUiUpdate","bind","addEventListener","renderAppointments","dragAndDropModule","setDragArea","isResourceEventTemplate","isSpecificResourceEvents","wrapperElements","slice","querySelectorAll","BLOCK_APPOINTMENT_CLASS","APPOINTMENT_CLASS","ROW_COUNT_WRAPPER_CLASS","isDragging","crudModule","crudObj","isCrudAction","hideWrapper","wrapper","isReact","eventTemplate","appWrapper","DAY_WRAPPER_CLASS","ALLDAY_APPOINTMENT_WRAPPER_CLASS","classList","contains","APPOINTMENT_WRAPPER_HIDDEN_CLASS","_i","wrapperElements_1","length","ALLDAY_APPOINTMENT_CLASS","groupIndex","parseInt","getAttribute","j","len","sourceEvent","toString","targetEvent","querySelector","WORK_CELLS_CLASS","virtualScrollModule","updateFocusedWorkCell","allDayElement","ALLDAY_CELLS_CLASS","setAllDayRowHeight","eventsProcessed","blockProcessed","expandCollapse","ALLDAY_APPOINTMENT_SECTION_CLASS","rowExpandCollapse","add","initializeValues","processBlockEvents","renderEvents","filter","item","index","arr","map","Guid","indexOf","ALLDAY_ROW_ANIMATE_CLASS","slots","push","renderDates","date","animate","notify","contentReady","renderTemplates","wraps","resources","group","uiStateValues","isGroupAdaptive","resourceBase","lastResourceLevel","allowVirtualScrolling","renderedResources","cellHeight","parseFloat","getElementHeight","toFixed","i","getHeight","start","end","appHeight","getUniversalTime","MS_PER_MINUTE","appendEvent","eventObj","appointmentElement","appLeft","appointmentWrap","APPOINTMENT_WRAPPER_CLASS","enableRtl","eventType","args","data","cancel","type","trigger","eventRendered","eventArgs","appendChild","getResourceList","dateCount","getStartCount","resources_1","resource","day","length_1","startDate","Date","getTime","endDate","resetTime","addDays","filterEvents","_a","filterEvents_1","event_1","setValues","renderBlockEvents","cssClass","groupOrder","dayIndex","dayCount","spannedData","isSpannedEvent","eStart","startTime","eEnd","endTime","currentDate","schedule","isValidEvent","isWorkDayAvailable","blockTop","blockHeight","isAllDay","contentWrap","CONTENT_WRAP_CLASS","offsetHeight","getTopValue","createBlockAppointmentElement","getDayIndex","eventCollection","sortByDateTime","undefined","isRender","getElementHeightFromClass","allDayRowTop","offsetTop","_loop_1","this_1","renderedDate","getRenderedDates","length_2","filterEvents_2","event_2","renderAllDayEvents","isAllDayAppointment","eventSettings","enableMaxHeight","getOverlapIndex","renderNormalEvents","filterEvents_3","event_3","resources_2","enable","split","byDate","hideNonWorkingDays","renderedIndex","dateIndex","firstColumn","colLevels","currentResources","resourceDateTree","colSpan","resIndex","findIndex","x","event","resourceIndex","getCssClass","apply","value","createAppointmentElement","record","fieldMapping","recordSubject","subject","default","localeObj","getConstant","appointmentWrapper","className","attrs","id","eventBase","getReadonlyAttribute","getAnnouncementString","isReadonly","appointmentDetails","APPOINTMENT_DETAILS","setAttribute","templateElement","eventData","elementId","viewName","eventTemplateName","templateId","templateName","getEventTemplateName","getAppointmentTemplate","root","appointmentSubject","SUBJECT_CLASS","sanitize","appointmentStartTime","APPOINTMENT_TIME","isAdaptive","DISABLE_CLASS","innerHTML","getTimeString","appointmentEndTime","isLeft","isRight","timeStr","appointmentTime","appointmentLocation","LOCATION_CLASS","location","recurrenceRule","recurrenceID","iconClass","EVENT_RECURRENCE_ICON_CLASS","EVENT_RECURRENCE_EDIT_ICON_CLASS","recurrenceIcon","ICON","renderSpannedIcon","applyResourceColor","renderResizeHandler","createMoreIndicator","allDayRow","count","currentDay","countWrapper","childElementCount","innerCountWrap","moreIndicatorElement","MORE_INDICATOR_CLASS","countCell","moreCount","globalize","formatNumber","getDay","field","isSpanned","isBottom","isTop","isSameDuration","eventDates","updateEventMinimumDuration","workDays","resourceData","workDaysField","inline","cellTop","eventHeight","currentDates","splitEvent","appWidth","topValue","isDateRange","isAlreadyRendered","allDayDifference_1","allDayIndex_1","Index","widthAdjustment","currentView","allowOverlap","allDayRow_1","ALLDAY_ROW_CLASS","children","wIndex_1","eventWrapper_1","appointmentElement_1","inlineModule","createInlineAppointmentElement","length_3","allDayRowHeight","expand","addOrRemoveClass","wireAppointmentEvents","minDate","maxDate","appIndex","getEventWidth","argsData","left","width","tempData","adjustOverlapElements","iconHeight","EVENT_INDICATOR_CLASS","maxHeight","subjectElement","style","tempWidth","getEventLeft","tempLeft","startEndTime","startEndDate","timeString","setHours","diffInMinutes","getHours","getMinutes","eventsList","date_1","app","filterEventsByResource","appointmentList_1","appointment_1","recordStart_1","recordEnd_1","queue_1","forEach","obj","filterList","processedIds","Set","_loop_2","currentObj","shift","overlaps","has","overlap","size","state_1","collection","val","concat","splice","eventsList_1","event_4","record_1","appLevel","getSmallestMissingNumber","length1","length2","eleGuid","apps","right","height","dateHeader","DATE_HEADER_WRAP_CLASS","enableAllDayScroll","ALLDAY_APPOINTMENT_AUTO","allDayExpandScroll","ALLDAY_APPOINTMENT_SCROLL","EVENT_COUNT_CLASS","moreEventCount","APPOINTMENT_ROW_EXPAND_CLASS","APPOINTMENT_ROW_COLLAPSE_CLASS","getEventHeight","eventElement","styles","eventWrapper","target","rowHeight","scrollTop","destroy","isDestroyed","removeEventListener"],"sources":["C:/Users/Dell/OneDrive/Desktop/Programs/soc-portal/node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/vertical-view.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, extend, EventHandler, Animation, formatUnit, closest } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Vertical view appointment rendering\n */\nvar VerticalEvent = /** @class */ (function (_super) {\n    __extends(VerticalEvent, _super);\n    function VerticalEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dateRender = [];\n        _this.renderedEvents = [];\n        _this.renderedAllDayEvents = [];\n        _this.overlapEvents = [];\n        _this.moreEvents = [];\n        _this.overlapList = [];\n        _this.allDayEvents = [];\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.allDayLevel = 0;\n        _this.startHour = _this.getStartEndHours(_this.parent.activeViewOptions.startHour);\n        _this.endHour = _this.getStartEndHours(_this.parent.activeViewOptions.endHour);\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.animation = new Animation({ progress: _this.animationUiUpdate.bind(_this) });\n        _this.addEventListener();\n        return _this;\n    }\n    VerticalEvent.prototype.renderAppointments = function () {\n        var _this = this;\n        if (isNullOrUndefined(this.parent)) {\n            return;\n        }\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();\n        var wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS +\n            ',.' + cls.APPOINTMENT_CLASS + ',.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        var isDragging = (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) ? true : false;\n        var hideWrapper = function (wrapper) {\n            if (_this.parent.isReact && !isNullOrUndefined(_this.parent.activeViewOptions.eventTemplate)) {\n                var appWrapper = closest(wrapper, '.' + cls.DAY_WRAPPER_CLASS + ',.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS);\n                if (appWrapper && !appWrapper.classList.contains(cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS)) {\n                    addClass([appWrapper], cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS);\n                }\n            }\n        };\n        for (var _i = 0, wrapperElements_1 = wrapperElements; _i < wrapperElements_1.length; _i++) {\n            var wrapper = wrapperElements_1[_i];\n            if (isDragging && !(wrapper.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) ||\n                wrapper.classList.contains(cls.ROW_COUNT_WRAPPER_CLASS))) {\n                var groupIndex = parseInt(wrapper.getAttribute('data-group-index'), 10);\n                for (var j = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; j < len; j++) {\n                    if (groupIndex === this.parent.crudModule.crudObj.sourceEvent[parseInt(j.toString(), 10)].groupIndex ||\n                        groupIndex === this.parent.crudModule.crudObj.targetEvent[parseInt(j.toString(), 10)].groupIndex) {\n                        hideWrapper(wrapper);\n                        remove(wrapper);\n                    }\n                }\n            }\n            else {\n                hideWrapper(wrapper);\n                remove(wrapper);\n            }\n        }\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.updateFocusedWorkCell();\n        }\n        this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n        this.setAllDayRowHeight(0);\n        if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n            return;\n        }\n        var expandCollapse = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n        EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n        this.renderedEvents = [];\n        this.renderedAllDayEvents = [];\n        this.initializeValues();\n        this.processBlockEvents();\n        this.renderEvents('normalEvents');\n        if (this.allDayEvents.length > 0) {\n            this.allDayEvents = this.allDayEvents.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.Guid; }).indexOf(item.Guid);\n            });\n            removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n            this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n            this.renderEvents('allDayEvents');\n            this.animation.animate(this.allDayElement[0]);\n        }\n        this.parent.notify(events.contentReady, {});\n        addClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n        if (isDragging) {\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        this.parent.renderTemplates(function () {\n            if (_this.parent && _this.parent.isReact && _this.parent.activeViewOptions.eventTemplate) {\n                var wraps = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS));\n                removeClass(wraps, cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS);\n            }\n        });\n    };\n    VerticalEvent.prototype.initializeValues = function () {\n        this.resources = (this.parent.activeViewOptions.group.resources.length > 0) ? this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel : [];\n        if (this.resources.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.virtualScrollModule) {\n            this.resources = this.parent.resourceBase.renderedResources;\n        }\n        this.cellHeight =\n            parseFloat(this.parent.getElementHeight(this.parent.element.querySelector('.e-content-wrap tbody tr')).toFixed(2));\n        this.dateRender[0] = this.parent.activeView.renderDates;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (var i = 0, len = this.resources.length; i < len; i++) {\n                this.dateRender[parseInt(i.toString(), 10)] = this.resources[parseInt(i.toString(), 10)].renderDates;\n            }\n        }\n    };\n    VerticalEvent.prototype.getHeight = function (start, end) {\n        var appHeight = (util.getUniversalTime(end) - util.getUniversalTime(start)) /\n            util.MS_PER_MINUTE * (this.cellHeight * this.slotCount) / this.interval;\n        appHeight = (appHeight <= 0) ? this.cellHeight : appHeight;\n        return appHeight;\n    };\n    VerticalEvent.prototype.appendEvent = function (eventObj, appointmentElement, index, appLeft) {\n        var appointmentWrap = this.element.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS + '[id=\"' + cls.APPOINTMENT_WRAPPER_CLASS + '-' + index + '\"]');\n        if (this.parent.enableRtl) {\n            setStyleAttribute(appointmentElement, { 'right': appLeft });\n        }\n        else {\n            setStyleAttribute(appointmentElement, { 'left': appLeft });\n        }\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var args = {\n            data: extend({}, eventObj, null, true),\n            element: appointmentElement, cancel: false, type: eventType\n        };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                appointmentWrap.appendChild(appointmentElement);\n            }\n        });\n    };\n    VerticalEvent.prototype.processBlockEvents = function () {\n        var resources = this.getResourceList();\n        var dateCount = this.getStartCount();\n        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n            var resource = resources_1[_i];\n            var renderDates = this.dateRender[parseInt(resource.toString(), 10)];\n            for (var day = 0, length_1 = renderDates.length; day < length_1; day++) {\n                var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());\n                var endDate = util.resetTime(util.addDays(renderDates[parseInt(day.toString(), 10)], 1));\n                var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[parseInt(resource.toString(), 10)]);\n                for (var _a = 0, filterEvents_1 = filterEvents; _a < filterEvents_1.length; _a++) {\n                    var event_1 = filterEvents_1[_a];\n                    if (this.parent.resourceBase) {\n                        this.setValues(event_1, resource);\n                    }\n                    this.renderBlockEvents(event_1, day, resource, dateCount);\n                    this.cssClass = null;\n                    this.groupOrder = null;\n                }\n                dateCount += 1;\n            }\n        }\n    };\n    VerticalEvent.prototype.renderBlockEvents = function (eventObj, dayIndex, resource, dayCount) {\n        var spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = spannedData[this.fields.startTime];\n        var eEnd = spannedData[this.fields.endTime];\n        var currentDate = util.resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule) && this.isWorkDayAvailable(resource, eStart)) {\n            var blockTop = void 0;\n            var blockHeight = void 0;\n            if (spannedData[this.fields.isAllDay]) {\n                var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                blockHeight = formatUnit(contentWrap.offsetHeight);\n                blockTop = formatUnit(0);\n            }\n            else {\n                blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n                blockTop = formatUnit(this.getTopValue(eStart));\n            }\n            var appointmentElement = this.createBlockAppointmentElement(eventObj, resource, this.isResourceEventTemplate);\n            setStyleAttribute(appointmentElement, { 'width': '100%', 'height': blockHeight, 'top': blockTop });\n            var index = this.getDayIndex(dayIndex, resource, dayCount);\n            this.appendEvent(eventObj, appointmentElement, index, '0px');\n        }\n    };\n    VerticalEvent.prototype.renderEvents = function (eventType) {\n        removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n        var eventCollection = (eventType === 'allDayEvents') ? this.sortByDateTime(this.allDayEvents) : undefined;\n        var resources = this.getResourceList();\n        var dateCount = this.getStartCount();\n        var isRender;\n        var appHeight = eventType === 'allDayEvents' ? this.parent.getElementHeightFromClass(this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS), cls.APPOINTMENT_CLASS) : 0;\n        var allDayRowTop = eventType === 'allDayEvents' && this.allDayElement.length > 0 ? this.allDayElement[0].offsetTop : 0;\n        var _loop_1 = function (resource) {\n            isRender = true;\n            if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction && eventType !== 'allDayEvents'\n                && !this_1.parent.uiStateValues.isGroupAdaptive) {\n                if (this_1.parent.crudModule.crudObj.sourceEvent.filter(function (data) { return data.groupIndex === resource; }).length === 0 &&\n                    this_1.parent.crudModule.crudObj.targetEvent.filter(function (data) { return data.groupIndex === resource; }).length === 0) {\n                    isRender = false;\n                }\n            }\n            this_1.slots = [];\n            var renderDates = this_1.dateRender[parseInt(resource.toString(), 10)];\n            var renderedDate = this_1.getRenderedDates(renderDates) || renderDates;\n            this_1.slots.push(renderDates.map(function (date) { return +date; }));\n            for (var day = 0, length_2 = renderDates.length; day < length_2 &&\n                renderDates[parseInt(day.toString(), 10)] <= renderedDate[renderedDate.length - 1]; day++) {\n                this_1.renderedEvents = [];\n                var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());\n                var endDate = util.resetTime(util.addDays(renderDates[parseInt(day.toString(), 10)], 1));\n                var filterEvents = this_1.filterEvents(startDate, endDate, eventCollection, this_1.resources[parseInt(resource.toString(), 10)]);\n                if (isRender) {\n                    for (var _i = 0, filterEvents_2 = filterEvents; _i < filterEvents_2.length; _i++) {\n                        var event_2 = filterEvents_2[_i];\n                        if (this_1.parent.resourceBase) {\n                            this_1.setValues(event_2, resource);\n                        }\n                        if (eventType === 'allDayEvents') {\n                            this_1.renderAllDayEvents(event_2, day, resource, dateCount, false, allDayRowTop, appHeight);\n                        }\n                        else {\n                            if (this_1.isAllDayAppointment(event_2)) {\n                                this_1.allDayEvents.push(extend({}, event_2, null, true));\n                            }\n                            else {\n                                if (this_1.parent.eventSettings.enableMaxHeight) {\n                                    if (this_1.getOverlapIndex(event_2, day, false, resource) > 0) {\n                                        continue;\n                                    }\n                                }\n                                this_1.renderNormalEvents(event_2, day, resource, dateCount);\n                            }\n                        }\n                        this_1.cssClass = null;\n                        this_1.groupOrder = null;\n                    }\n                }\n                else {\n                    for (var _a = 0, filterEvents_3 = filterEvents; _a < filterEvents_3.length; _a++) {\n                        var event_3 = filterEvents_3[_a];\n                        if (this_1.isAllDayAppointment(event_3)) {\n                            this_1.allDayEvents.push(extend({}, event_3, null, true));\n                        }\n                    }\n                }\n                dateCount += 1;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n            var resource = resources_2[_i];\n            _loop_1(resource);\n        }\n    };\n    VerticalEvent.prototype.getStartCount = function () {\n        return this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.timeScale.enable ?\n            parseInt(this.element.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).getAttribute('id').split('-').slice(-1)[0], 10) : 0;\n    };\n    VerticalEvent.prototype.getDayIndex = function (dayIndex, resource, dayCount) {\n        var _this = this;\n        if (!this.parent.activeViewOptions.group.byDate) {\n            return dayCount;\n        }\n        if (this.parent.activeViewOptions.group.byDate && !this.parent.activeViewOptions.group.hideNonWorkingDays) {\n            var renderedIndex = this.parent.resourceBase.lastResourceLevel[0].renderDates.indexOf(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)]);\n            return (this.resources.length * renderedIndex) + resource;\n        }\n        var dateIndex = 0;\n        var firstColumn = this.parent.activeView.colLevels[0];\n        var currentDate = this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime();\n        var currentResources = [];\n        for (var i = 0; i < firstColumn.length; i++) {\n            currentResources = this.parent.resourceBase.resourceDateTree[parseInt(i.toString(), 10)];\n            if (currentDate === firstColumn[parseInt(i.toString(), 10)].date.getTime()) {\n                break;\n            }\n            dateIndex = dateIndex + firstColumn[parseInt(i.toString(), 10)].colSpan;\n        }\n        var resIndex = currentResources.findIndex(function (x) { return x.groupOrder.toString() ===\n            _this.resources[parseInt(resource.toString(), 10)].groupOrder.toString(); });\n        if (resIndex < 0) {\n            return dateIndex;\n        }\n        return dateIndex + resIndex;\n    };\n    VerticalEvent.prototype.setValues = function (event, resourceIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.cssClass = this.resources[parseInt(resourceIndex.toString(), 10)].cssClass;\n            this.groupOrder = this.resources[parseInt(resourceIndex.toString(), 10)].groupOrder;\n        }\n        else {\n            this.cssClass = this.parent.resourceBase.getCssClass(event);\n        }\n    };\n    VerticalEvent.prototype.getResourceList = function () {\n        // eslint-disable-next-line prefer-spread\n        var resources = Array.apply(null, {\n            length: (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) ?\n                this.resources.length : 1\n        }).map(function (value, index) { return index; });\n        return resources;\n    };\n    // eslint-disable-next-line max-len\n    VerticalEvent.prototype.createAppointmentElement = function (record, isAllDay, data, resource) {\n        var fieldMapping = this.parent.eventFields;\n        var recordSubject = (record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[fieldMapping.id],\n                'data-guid': record.Guid,\n                'role': 'button',\n                'tabindex': '0',\n                'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n            appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n        }\n        var templateElement;\n        var eventData = data;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var elementId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = elementId + viewName + 'eventTemplate';\n            var resIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n            var templateName = this.isResourceEventTemplate ? this.parent.getEventTemplateName(resIndex) : 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(record, this.parent, templateName, templateId, false, undefined, undefined, this.parent.root);\n        }\n        else {\n            var appointmentSubject = createElement('div', { className: cls.SUBJECT_CLASS });\n            this.parent.sanitize(recordSubject, appointmentSubject);\n            if (isAllDay) {\n                if (record[fieldMapping.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    var appointmentStartTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n                    });\n                    var appointmentEndTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.endTime])\n                    });\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' +\n                    this.parent.getTimeString(record[fieldMapping.endTime]);\n                var appointmentTime = createElement('div', {\n                    className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                    innerHTML: timeStr\n                });\n                var appointmentLocation = createElement('div', { className: cls.LOCATION_CLASS });\n                this.parent.sanitize((record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || ''), appointmentLocation);\n                templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        if (!this.parent.isAdaptive &&\n            (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n            var iconClass = (record[fieldMapping.id] === record[fieldMapping.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            var recurrenceIcon = createElement('div', { className: cls.ICON + ' ' + iconClass });\n            if (isAllDay) {\n                appointmentDetails.appendChild(recurrenceIcon);\n            }\n            else {\n                appointmentWrapper.appendChild(recurrenceIcon);\n            }\n        }\n        this.parent.eventBase.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n        this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    VerticalEvent.prototype.createMoreIndicator = function (allDayRow, count, currentDay) {\n        var index = currentDay + count;\n        var countWrapper = allDayRow[parseInt(index.toString(), 10)];\n        if (countWrapper.childElementCount <= 0) {\n            var innerCountWrap = createElement('div', {\n                className: cls.ROW_COUNT_WRAPPER_CLASS,\n                id: cls.ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n            });\n            var moreIndicatorElement = createElement('div', {\n                className: cls.MORE_INDICATOR_CLASS,\n                attrs: { 'tabindex': '0', 'data-index': index.toString(), 'data-count': '1' },\n                innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n            });\n            innerCountWrap.appendChild(moreIndicatorElement);\n            countWrapper.appendChild(innerCountWrap);\n            EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n        }\n        else {\n            var countCell = countWrapper.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n            var moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n            countCell.setAttribute('data-count', moreCount.toString());\n            countCell.innerHTML = '+' + this.parent.globalize.formatNumber(moreCount) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n        }\n    };\n    VerticalEvent.prototype.isSpannedEvent = function (record, day, resource) {\n        var currentDate = util.resetTime(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)]);\n        var renderedDate = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) || [currentDate];\n        var currentDay = renderedDate.filter(function (date) { return date.getDay() === day; });\n        if (currentDay.length === 0) {\n            currentDate = util.resetTime(renderedDate[0]);\n        }\n        var field = this.parent.eventFields;\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var event = extend({}, record, null, true);\n        event.isSpanned = {\n            isBottom: false, isTop: false,\n            isSameDuration: event[field.startTime].getTime() === event[field.endTime].getTime()\n        };\n        if (record[field.startTime].getTime() < schedule.startHour.getTime()) {\n            event[field.startTime] = schedule.startHour;\n            event.isSpanned.isTop = true;\n        }\n        if (record[field.endTime].getTime() > schedule.endHour.getTime()) {\n            event[field.endTime] = schedule.endHour;\n            event.isSpanned.isBottom = true;\n        }\n        var eventDates = this.updateEventMinimumDuration(schedule, event[field.startTime], event[field.endTime]);\n        event[field.startTime] = eventDates.startDate;\n        event[field.endTime] = eventDates.endDate;\n        return event;\n    };\n    VerticalEvent.prototype.isWorkDayAvailable = function (resource, start) {\n        if (this.parent.activeViewOptions.group.hideNonWorkingDays && this.resources.length > 0) {\n            var workDays = this.resources[parseInt(resource.toString(), 10)].\n                resourceData[this.resources[parseInt(resource.toString(), 10)].resource.workDaysField] ||\n                this.parent.activeViewOptions.workDays;\n            return workDays && workDays.indexOf(start.getDay()) >= 0;\n        }\n        return true;\n    };\n    // eslint-disable-next-line max-len\n    VerticalEvent.prototype.renderAllDayEvents = function (eventObj, dayIndex, resource, dayCount, inline, cellTop, eventHeight) {\n        var _this = this;\n        var currentDates = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) ||\n            this.dateRender[parseInt(resource.toString(), 10)];\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.slots[0] = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()];\n            currentDates = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)]];\n        }\n        var record = this.splitEvent(eventObj, currentDates)[0];\n        var eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n        var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n        var appWidth = 0;\n        var topValue = 1;\n        var isDateRange = currentDates[0].getTime() <= eStart.getTime() &&\n            util.addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n        if (eStart <= eEnd && isDateRange && this.isWorkDayAvailable(resource, eStart)) {\n            var isAlreadyRendered = [];\n            if (this.renderedAllDayEvents[parseInt(resource.toString(), 10)]) {\n                isAlreadyRendered = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function (event) {\n                    return event.Guid === eventObj.Guid;\n                });\n                if (this.parent.activeViewOptions.group.byDate) {\n                    isAlreadyRendered = isAlreadyRendered.filter(function (event) {\n                        return event[_this.parent.eventFields.startTime] >= currentDates[parseInt(dayIndex.toString(), 10)] &&\n                            event[_this.parent.eventFields.endTime] <=\n                                util.addDays(new Date(+currentDates[parseInt(dayIndex.toString(), 10)]), 1);\n                    });\n                }\n            }\n            if (isAlreadyRendered.length === 0) {\n                var allDayDifference_1 = record.data.count;\n                var allDayIndex_1 = this.getOverlapIndex(record, dayIndex, true, resource);\n                record.Index = allDayIndex_1;\n                this.allDayLevel = (this.allDayLevel < allDayIndex_1) ? allDayIndex_1 : this.allDayLevel;\n                var widthAdjustment = record.data.isRight ? 0 :\n                    this.parent.currentView === 'Day' ? 4 : 7;\n                if (allDayDifference_1 >= 0) {\n                    appWidth = (allDayDifference_1 * 100) - (!this.parent.activeViewOptions.allowOverlap ? 0 : widthAdjustment);\n                }\n                if (isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {\n                    this.renderedAllDayEvents[parseInt(resource.toString(), 10)] = [];\n                }\n                this.renderedAllDayEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));\n                var allDayRow_1 = [].slice.call(this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).children);\n                var wIndex_1 = this.getDayIndex(dayIndex, resource, dayCount);\n                var eventWrapper_1 = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS +\n                    ':nth-child(' + (wIndex_1 + 1) + ')');\n                var appointmentElement_1;\n                if (inline) {\n                    appointmentElement_1 = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n                }\n                else {\n                    appointmentElement_1 = this.createAppointmentElement(eventObj, true, record.data, resource);\n                }\n                addClass([appointmentElement_1], cls.ALLDAY_APPOINTMENT_CLASS);\n                var eventData = extend({}, record.data, null, true);\n                eventObj.data = eventData;\n                var args = { data: eventObj, element: appointmentElement_1, cancel: false };\n                this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        eventWrapper_1.appendChild(appointmentElement_1);\n                        topValue += (allDayIndex_1 === 0 ? cellTop : (cellTop + (allDayIndex_1 * eventHeight))) + 1;\n                        setStyleAttribute(appointmentElement_1, { 'width': appWidth + '%', 'top': formatUnit(topValue) });\n                        if (allDayIndex_1 > 1) {\n                            _this.moreEvents.push(appointmentElement_1);\n                            for (var count = 0, length_3 = allDayDifference_1; count < length_3; count++) {\n                                _this.createMoreIndicator(allDayRow_1, count, wIndex_1);\n                            }\n                        }\n                        _this.allDayElement[0].setAttribute('data-count', _this.allDayLevel.toString());\n                        var allDayRowHeight = ((!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) ?\n                            (3 * eventHeight) : ((_this.allDayLevel + 1) * eventHeight)) + 4;\n                        _this.setAllDayRowHeight(allDayRowHeight);\n                        _this.addOrRemoveClass();\n                        _this.wireAppointmentEvents(appointmentElement_1, eventObj);\n                    }\n                });\n            }\n        }\n    };\n    VerticalEvent.prototype.renderNormalEvents = function (eventObj, dayIndex, resource, dayCount, inline) {\n        var record = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = record[this.fields.startTime];\n        var eEnd = record[this.fields.endTime];\n        var appWidth = '0%';\n        var appLeft = '0%';\n        var topValue = 0;\n        var currentDate = util.resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n        if ((eStart.getTime() < this.parent.minDate.getTime()) || (eEnd.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        if (eStart <= eEnd && isValidEvent && this.isWorkDayAvailable(resource, eStart)) {\n            var appHeight = record.isSpanned.isSameDuration ? this.cellHeight : this.getHeight(eStart, eEnd);\n            if (eStart.getTime() >= schedule.startHour.getTime()) {\n                topValue = this.getTopValue(eStart);\n            }\n            var appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n            record.Index = appIndex;\n            this.overlapList.push(record);\n            if (this.overlapList.length > 1) {\n                if (isNullOrUndefined(this.overlapEvents[parseInt(appIndex.toString(), 10)])) {\n                    this.overlapEvents[parseInt(appIndex.toString(), 10)] = [];\n                }\n                this.overlapEvents[parseInt(appIndex.toString(), 10)].push(record);\n            }\n            else {\n                this.overlapEvents = [];\n                this.overlapEvents.push([record]);\n            }\n            appWidth = this.getEventWidth();\n            var argsData = {\n                index: appIndex, left: appLeft, width: appWidth,\n                day: dayCount, dayIndex: dayIndex, record: record, resource: resource\n            };\n            var tempData = this.adjustOverlapElements(argsData);\n            appWidth = (tempData.appWidth);\n            if (isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)])) {\n                this.renderedEvents[parseInt(resource.toString(), 10)] = [];\n            }\n            this.renderedEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));\n            var appointmentElement = void 0;\n            if (inline) {\n                appointmentElement = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n            }\n            else {\n                appointmentElement = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n            }\n            setStyleAttribute(appointmentElement, {\n                'width': (this.parent.eventSettings.enableMaxHeight || !this.parent.activeViewOptions.allowOverlap ? '100%' : tempData.appWidth),\n                'height': appHeight + 'px', 'top': topValue + 'px'\n            });\n            var iconHeight = appointmentElement.querySelectorAll('.' + cls.EVENT_INDICATOR_CLASS).length * 15;\n            var maxHeight = appHeight - 40 - iconHeight;\n            var subjectElement = appointmentElement.querySelector('.' + cls.SUBJECT_CLASS);\n            if (!this.parent.isAdaptive && subjectElement) {\n                subjectElement.style.maxHeight = formatUnit(maxHeight);\n            }\n            var index = this.getDayIndex(dayIndex, resource, dayCount);\n            var eventData = {};\n            eventData[this.fields.startTime] = eventObj[this.fields.startTime];\n            eventData[this.fields.endTime] = eventObj[this.fields.endTime];\n            record.data = eventData;\n            this.appendEvent(record, appointmentElement, index, tempData.appLeft);\n            this.wireAppointmentEvents(appointmentElement, eventObj);\n        }\n    };\n    VerticalEvent.prototype.getEventWidth = function () {\n        var width = this.parent.currentView === 'Day' ? 97 : 94;\n        var tempWidth = ((width - this.overlapEvents.length) / this.overlapEvents.length);\n        return (tempWidth < 0 ? 0 : tempWidth) + '%';\n    };\n    VerticalEvent.prototype.getEventLeft = function (appWidth, index) {\n        var tempLeft = (parseFloat(appWidth) + 1) * index;\n        return (tempLeft > 99 ? 99 : tempLeft) + '%';\n    };\n    VerticalEvent.prototype.getStartEndHours = function (startEndTime) {\n        if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n            var startEndDate = new Date(2000, 0, 0, 0);\n            var timeString = startEndTime.split(':');\n            if (timeString.length === 2) {\n                startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n            }\n            return startEndDate;\n        }\n        return null;\n    };\n    VerticalEvent.prototype.getTopValue = function (date) {\n        var startHour = this.getStartEndHours(this.parent.activeViewOptions.startHour);\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (this.parent.activeViewOptions.timeScale.enable) ? ((diffInMinutes * this.cellHeight * this.slotCount) / this.interval) : 0;\n    };\n    VerticalEvent.prototype.getOverlapIndex = function (record, day, isAllDay, resource) {\n        var _this = this;\n        var fieldMapping = this.parent.eventFields;\n        var eventsList = [];\n        var appIndex = -1;\n        this.overlapEvents = [];\n        if (isAllDay) {\n            if (!isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {\n                var date_1 = util.resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)].getTime()));\n                eventsList = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function (app) {\n                    return util.resetTime(app[fieldMapping.startTime]).getTime() <= date_1.getTime() &&\n                        util.resetTime(app[fieldMapping.endTime]).getTime() >= date_1.getTime();\n                });\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    eventsList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], eventsList);\n                }\n            }\n        }\n        else {\n            var appointmentList_1 = !isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)]) ?\n                this.renderedEvents[parseInt(resource.toString(), 10)] : [];\n            var appointment_1 = [];\n            var recordStart_1 = record[fieldMapping.startTime];\n            var recordEnd_1 = record[fieldMapping.endTime];\n            this.overlapList = appointmentList_1.filter(function (data) {\n                return (data[fieldMapping.endTime] > recordStart_1 && data[fieldMapping.startTime] <= recordEnd_1) ||\n                    (data[fieldMapping.startTime] >= recordEnd_1 && data[fieldMapping.endTime] <= recordStart_1) ||\n                    (data[fieldMapping.endTime].getTime() === data[fieldMapping.startTime].getTime() &&\n                        data[fieldMapping.startTime].getTime() === recordStart_1.getTime() && data[fieldMapping.endTime] < recordEnd_1);\n            });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.overlapList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], this.overlapList);\n            }\n            var queue_1 = [];\n            this.overlapList.forEach(function (obj) {\n                queue_1.push(obj);\n                var filterList = [];\n                var processedIds = new Set();\n                var _loop_2 = function () {\n                    var currentObj = queue_1.shift();\n                    var overlaps = appointmentList_1.filter(function (data) {\n                        return data[fieldMapping.endTime] > currentObj[fieldMapping.startTime] &&\n                            data[fieldMapping.startTime] <= currentObj[fieldMapping.endTime] &&\n                            !processedIds.has(data[fieldMapping.id]);\n                    });\n                    overlaps.forEach(function (overlap) {\n                        filterList.push(overlap);\n                        processedIds.add(overlap[fieldMapping.id]);\n                        queue_1.push(overlap);\n                    });\n                    if (processedIds.size < appointmentList_1.length - 1) {\n                        return \"break\";\n                    }\n                };\n                while (queue_1.length > 0) {\n                    var state_1 = _loop_2();\n                    if (state_1 === \"break\")\n                        break;\n                }\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    filterList = _this.filterEventsByResource(_this.resources[parseInt(resource.toString(), 10)], filterList);\n                }\n                var collection = filterList.filter(function (val) {\n                    return _this.overlapList.indexOf(val) === -1;\n                });\n                if (collection.length > 0) {\n                    appointment_1 = appointment_1.concat(collection);\n                }\n            });\n            for (var i = 0; i < appointment_1.length - 1; i++) {\n                for (var j = i + 1; j < appointment_1.length; j++) {\n                    if (appointment_1[parseInt(i.toString(), 10)][fieldMapping.id] ===\n                        appointment_1[parseInt(j.toString(), 10)][fieldMapping.id]) {\n                        appointment_1.splice(j, 1);\n                        j--;\n                    }\n                }\n            }\n            this.overlapList = this.overlapList.concat(appointment_1);\n            eventsList = this.overlapList;\n            for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n                var event_4 = eventsList_1[_i];\n                var record_1 = event_4;\n                var index = record_1.Index;\n                if (isNullOrUndefined(this.overlapEvents[parseInt(index.toString(), 10)])) {\n                    this.overlapEvents[parseInt(index.toString(), 10)] = [event_4];\n                }\n                else {\n                    this.overlapEvents[parseInt(index.toString(), 10)].push(event_4);\n                }\n            }\n        }\n        if (!isAllDay) {\n            eventsList = eventsList.filter(function (obj) { return (obj[fieldMapping.startTime] === record[fieldMapping.startTime] &&\n                obj[fieldMapping.endTime] > record[fieldMapping.endTime] || obj[fieldMapping.endTime] > record[fieldMapping.startTime] &&\n                obj[fieldMapping.startTime] < record[fieldMapping.endTime] || obj[fieldMapping.endTime] === record[fieldMapping.startTime]\n                && obj[fieldMapping.startTime] === record[fieldMapping.endTime]) ||\n                ((obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() &&\n                    obj[fieldMapping.endTime].getTime() === record[fieldMapping.endTime].getTime())\n                    || (obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() &&\n                        obj[fieldMapping.endTime].getTime() < record[fieldMapping.endTime].getTime() ||\n                        obj[fieldMapping.endTime].getTime() > record[fieldMapping.endTime].getTime())); });\n        }\n        if (eventsList.length > 0) {\n            var appLevel = eventsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    VerticalEvent.prototype.adjustOverlapElements = function (args) {\n        var data = { appWidth: args.width, appLeft: args.left };\n        for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n            if (!isNullOrUndefined(this.overlapEvents[parseInt(i.toString(), 10)])) {\n                for (var j = 0, length2 = this.overlapEvents[parseInt(i.toString(), 10)].length; j < length2; j++) {\n                    var dayCount = this.getDayIndex(args.dayIndex, args.resource, args.day);\n                    var element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n                    if (element && element.childElementCount > 0) {\n                        var eleGuid = this.overlapEvents[parseInt(i.toString(), 10)][parseInt(j.toString(), 10)].Guid;\n                        if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n                            var apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n                            if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                                if (this.parent.enableRtl) {\n                                    apps.style.right = this.getEventLeft(args.width, i);\n                                }\n                                else {\n                                    apps.style.left = this.getEventLeft(args.width, i);\n                                }\n                                apps.style.width = ((parseFloat(args.width))) + '%';\n                                data.appWidth = apps.style.width;\n                            }\n                            else {\n                                data.appWidth = apps.style.width;\n                            }\n                        }\n                        else {\n                            var appWidth = args.width;\n                            if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                                appWidth = this.getEventWidth();\n                            }\n                            data.appWidth = appWidth;\n                            data.appLeft = this.getEventLeft(appWidth, args.index);\n                        }\n                    }\n                }\n            }\n        }\n        return data;\n    };\n    VerticalEvent.prototype.setAllDayRowHeight = function (height) {\n        var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        if (this.parent.height === 'auto' || !this.parent.enableAllDayScroll) {\n            addClass([dateHeader], cls.ALLDAY_APPOINTMENT_AUTO);\n        }\n        var allDayRow = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n        allDayRow.style.height = '';\n        if (this.parent.uiStateValues.expand && this.parent.height !== 'auto' && this.parent.enableAllDayScroll) {\n            allDayRow.style.height = (height / 12) + 'em';\n            this.parent.eventBase.allDayExpandScroll(dateHeader);\n        }\n        else {\n            for (var _i = 0, _a = this.allDayElement; _i < _a.length; _i++) {\n                var element = _a[_i];\n                element.style.height = (height / 12) + 'em';\n            }\n            removeClass([dateHeader], cls.ALLDAY_APPOINTMENT_SCROLL);\n        }\n    };\n    VerticalEvent.prototype.addOrRemoveClass = function () {\n        var _this = this;\n        this.moreEvents.filter(function (element) {\n            if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n                addClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '-1');\n            }\n            else {\n                removeClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '0');\n            }\n        });\n        var moreEventCount = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        if (this.parent.uiStateValues.expand) {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n        }\n        else {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        }\n        if (this.allDayLevel > 2) {\n            removeClass([moreEventCount], cls.DISABLE_CLASS);\n        }\n        else {\n            addClass([moreEventCount], cls.DISABLE_CLASS);\n        }\n        var countCell = [].slice.call(this.element.querySelectorAll('.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        countCell.forEach(function (element) {\n            if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n                removeClass([element], cls.DISABLE_CLASS);\n            }\n            else {\n                addClass([element], cls.DISABLE_CLASS);\n            }\n        });\n    };\n    VerticalEvent.prototype.getEventHeight = function () {\n        var eventElement = createElement('div', { className: cls.APPOINTMENT_CLASS, styles: 'visibility:hidden' });\n        var eventWrapper = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n        eventWrapper.appendChild(eventElement);\n        var height = eventElement.offsetHeight;\n        remove(eventElement);\n        return height;\n    };\n    VerticalEvent.prototype.rowExpandCollapse = function () {\n        var target = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        this.parent.uiStateValues.expand = target.classList.contains(cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        var rowHeight;\n        if (this.parent.uiStateValues.expand) {\n            target.setAttribute('title', this.parent.localeObj.getConstant('collapseAllDaySection'));\n            target.setAttribute('aria-label', this.parent.localeObj.getConstant('collapseAllDaySection'));\n            rowHeight = ((this.allDayLevel + 1) * this.getEventHeight()) + 4;\n        }\n        else {\n            target.setAttribute('title', this.parent.localeObj.getConstant('expandAllDaySection'));\n            target.setAttribute('aria-label', this.parent.localeObj.getConstant('expandAllDaySection'));\n            rowHeight = (3 * this.getEventHeight()) + 4;\n            this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS).scrollTop = 0;\n        }\n        this.setAllDayRowHeight(rowHeight);\n        this.animation.animate(this.allDayElement[0]);\n        this.addOrRemoveClass();\n        this.animation.animate(target);\n    };\n    VerticalEvent.prototype.animationUiUpdate = function () {\n        this.parent.notify(events.contentReady, {});\n    };\n    VerticalEvent.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        this.allDayElement = null;\n        this.renderedAllDayEvents = null;\n        this.renderedEvents = null;\n        this.slotCount = null;\n        this.interval = null;\n        this.startHour = null;\n        this.endHour = null;\n        this.element = null;\n        this.fields = null;\n        this.animation = null;\n        _super.prototype.destroy.call(this);\n    };\n    return VerticalEvent;\n}(EventBase));\nexport { VerticalEvent };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}