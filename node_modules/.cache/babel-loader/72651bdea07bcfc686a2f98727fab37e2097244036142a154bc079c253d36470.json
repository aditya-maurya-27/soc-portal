{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, EventHandler, isNullOrUndefined, formatUnit, append } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, createElement, remove, extend } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, isCollide } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { FieldValidator } from './form-validator';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\nvar QuickPopups = /** @class */function () {\n  function QuickPopups(parent) {\n    this.isMultipleEventSelect = false;\n    this.isCrudAction = false;\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.fieldValidator = new FieldValidator();\n    this.render();\n    this.addEventListener();\n  }\n  QuickPopups.prototype.render = function () {\n    this.renderQuickPopup();\n    this.renderMorePopup();\n    this.renderQuickDialog();\n  };\n  QuickPopups.prototype.renderQuickPopup = function () {\n    var quickPopupWrapper = createElement('div', {\n      className: cls.POPUP_WRAPPER_CLASS + ' e-popup-close',\n      attrs: {\n        role: 'dialog'\n      }\n    });\n    if (this.parent.isAdaptive) {\n      document.body.appendChild(quickPopupWrapper);\n      addClass([quickPopupWrapper], cls.DEVICE_CLASS);\n    } else {\n      this.parent.element.appendChild(quickPopupWrapper);\n    }\n    this.quickPopup = new Popup(quickPopupWrapper, {\n      targetType: this.parent.isAdaptive ? 'container' : 'relative',\n      enableRtl: this.parent.enableRtl,\n      open: this.quickPopupOpen.bind(this),\n      close: this.quickPopupClose.bind(this),\n      hideAnimation: this.parent.isAdaptive ? {\n        name: 'ZoomOut'\n      } : {\n        name: 'FadeOut',\n        duration: 150\n      },\n      showAnimation: this.parent.isAdaptive ? {\n        name: 'ZoomIn'\n      } : {\n        name: 'FadeIn',\n        duration: 150\n      },\n      collision: this.parent.isAdaptive ? {\n        X: 'fit',\n        Y: 'fit'\n      } : this.parent.enableRtl ? {\n        X: 'flip',\n        Y: 'fit'\n      } : {\n        X: 'none',\n        Y: 'fit'\n      },\n      position: this.parent.isAdaptive || this.parent.enableRtl ? {\n        X: 'left',\n        Y: 'top'\n      } : {\n        X: 'right',\n        Y: 'top'\n      },\n      viewPortElement: this.parent.isAdaptive ? document.body : this.parent.element,\n      zIndex: this.parent.isAdaptive ? 1004 : 3\n    });\n  };\n  QuickPopups.prototype.renderMorePopup = function () {\n    var moreEventPopup = \"<div class=\\\"\" + cls.MORE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_CLASS + \"\\\">\" + (\"<div class=\\\"\" + cls.MORE_EVENT_CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\" tabindex=\\\"0\\\" role=\\\"button\\\"></div>\") + (\"<div class=\\\"\" + cls.MORE_EVENT_DATE_HEADER_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_DAY_CLASS + \"\\\" id=\\\"\" + this.parent.element.id + \"_more_popup\\\"></div>\") + (\"<div class=\\\"\" + cls.MORE_EVENT_HEADER_DATE_CLASS + \" \" + cls.NAVIGATE_CLASS + \"\\\" tabindex=\\\"0\\\" role=\\\"link\\\"></div></div></div></div>\");\n    var moreEventWrapper = createElement('div', {\n      className: cls.MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n      innerHTML: moreEventPopup\n    });\n    if (this.parent.isAdaptive) {\n      document.body.appendChild(moreEventWrapper);\n      addClass([moreEventWrapper], cls.DEVICE_CLASS);\n    } else {\n      this.parent.element.appendChild(moreEventWrapper);\n    }\n    this.morePopup = new Popup(moreEventWrapper, {\n      targetType: this.parent.isAdaptive ? 'container' : 'relative',\n      enableRtl: this.parent.enableRtl,\n      hideAnimation: {\n        name: 'ZoomOut',\n        duration: 300\n      },\n      showAnimation: {\n        name: 'ZoomIn',\n        duration: 300\n      },\n      open: this.morePopupOpen.bind(this),\n      close: this.morePopupClose.bind(this),\n      collision: this.parent.isAdaptive ? {\n        X: 'fit',\n        Y: 'fit'\n      } : this.parent.enableRtl ? {\n        X: 'flip',\n        Y: 'fit'\n      } : {\n        X: 'flip',\n        Y: 'flip'\n      },\n      viewPortElement: this.parent.isAdaptive ? document.body : this.parent.element,\n      zIndex: this.parent.isAdaptive ? 1002 : 2\n    });\n    this.morePopup.element.setAttribute('role', 'dialog');\n    this.morePopup.element.setAttribute('aria-labelledby', this.parent.element.id + '_more_popup');\n    var closeButton = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CLOSE_CLASS);\n    this.renderButton('e-round', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n    EventHandler.add(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n  };\n  QuickPopups.prototype.renderQuickDialog = function () {\n    var buttonModel = [{\n      buttonModel: {\n        cssClass: 'e-quick-alertok e-flat',\n        isPrimary: true\n      },\n      click: this.dialogButtonClick.bind(this)\n    }, {\n      buttonModel: {\n        cssClass: 'e-quick-alertcancel e-flat',\n        isPrimary: false\n      },\n      click: this.dialogButtonClick.bind(this)\n    }, {\n      buttonModel: {\n        cssClass: 'e-quick-dialog-cancel e-disable e-flat',\n        isPrimary: false\n      },\n      click: this.dialogButtonClick.bind(this)\n    }];\n    if (this.parent.eventSettings.editFollowingEvents) {\n      var followingSeriesButton = {\n        buttonModel: {\n          cssClass: 'e-quick-alertfollowing e-flat',\n          isPrimary: false\n        },\n        click: this.dialogButtonClick.bind(this)\n      };\n      buttonModel.splice(1, 0, followingSeriesButton);\n    }\n    this.quickDialog = new Dialog({\n      animationSettings: {\n        effect: 'Zoom'\n      },\n      buttons: buttonModel,\n      cssClass: cls.QUICK_DIALOG_CLASS,\n      closeOnEscape: true,\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      beforeClose: this.beforeQuickDialogClose.bind(this),\n      isModal: true,\n      position: {\n        X: 'center',\n        Y: 'center'\n      },\n      showCloseIcon: true,\n      target: document.body,\n      visible: false,\n      width: 'auto'\n    });\n    var dialogElement = createElement('div', {\n      id: this.parent.element.id + 'QuickDialog'\n    });\n    this.parent.element.appendChild(dialogElement);\n    this.quickDialog.appendTo(dialogElement);\n    var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    if (okButton) {\n      okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n      okButton.setAttribute('aria-label', okButton.innerHTML);\n    }\n    var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    if (cancelButton) {\n      cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n      cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n    }\n    if (this.quickDialog.element.querySelector('.e-dlg-closeicon-btn')) {\n      this.quickDialog.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n    }\n  };\n  // eslint-disable-next-line max-len\n  QuickPopups.prototype.renderButton = function (className, iconName, isDisabled, element, clickEvent) {\n    var buttonObj = new Button({\n      cssClass: className,\n      disabled: isDisabled,\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      iconCss: iconName\n    });\n    buttonObj.appendTo(element);\n    EventHandler.add(element, 'click', clickEvent, this);\n    removeClass([element], cls.ICON);\n  };\n  QuickPopups.prototype.quickDialogClass = function (action) {\n    var classList = [cls.QUICK_DIALOG_OCCURRENCE_CLASS, cls.QUICK_DIALOG_SERIES_CLASS, cls.QUICK_DIALOG_DELETE_CLASS, cls.QUICK_DIALOG_CANCEL_CLASS, cls.QUICK_DIALOG_ALERT_BTN_CLASS, cls.DISABLE_CLASS];\n    var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    var followingEventButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n    removeClass([okButton, cancelButton], classList);\n    addClass([this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS)], cls.DISABLE_CLASS);\n    if (this.parent.eventSettings.editFollowingEvents) {\n      addClass([followingEventButton], cls.DISABLE_CLASS);\n      removeClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n    }\n    switch (action) {\n      case 'Recurrence':\n        addClass([okButton], cls.QUICK_DIALOG_OCCURRENCE_CLASS);\n        addClass([cancelButton], cls.QUICK_DIALOG_SERIES_CLASS);\n        if (this.parent.eventSettings.editFollowingEvents) {\n          removeClass([followingEventButton], cls.DISABLE_CLASS);\n          addClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n          addClass([followingEventButton], cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);\n        }\n        break;\n      case 'Delete':\n        addClass([okButton], cls.QUICK_DIALOG_DELETE_CLASS);\n        addClass([cancelButton], cls.QUICK_DIALOG_CANCEL_CLASS);\n        break;\n      case 'Alert':\n        addClass([okButton], [cls.QUICK_DIALOG_ALERT_OK, cls.QUICK_DIALOG_ALERT_BTN_CLASS]);\n        addClass([cancelButton], [cls.QUICK_DIALOG_ALERT_CANCEL, cls.DISABLE_CLASS]);\n        break;\n    }\n  };\n  QuickPopups.prototype.applyFormValidation = function () {\n    var form = this.quickPopup.element.querySelector('.' + cls.FORM_CLASS);\n    var rules = {};\n    rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n    this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element, this.parent.locale);\n  };\n  QuickPopups.prototype.openRecurrenceAlert = function () {\n    var editDeleteOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    if (editDeleteOnly) {\n      editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n      editDeleteOnly.setAttribute('aria-label', editDeleteOnly.innerHTML);\n    }\n    var editFollowingEventsOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n    if (editFollowingEventsOnly) {\n      editFollowingEventsOnly.innerHTML = this.l10n.getConstant('editFollowingEvent');\n      editFollowingEventsOnly.setAttribute('aria-label', editFollowingEventsOnly.innerHTML);\n    }\n    var editDeleteSeries = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    if (editDeleteSeries) {\n      editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n      editDeleteSeries.setAttribute('aria-label', editDeleteSeries.innerHTML);\n    }\n    this.quickDialog.content = this.l10n.getConstant('editContent');\n    this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteTitle' : 'editTitle');\n    this.quickDialogClass('Recurrence');\n    this.showQuickDialog('RecurrenceAlert');\n  };\n  QuickPopups.prototype.openRecurrenceValidationAlert = function (type) {\n    this.quickDialogClass('Alert');\n    var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    okButton.innerHTML = this.l10n.getConstant('ok');\n    okButton.setAttribute('aria-label', okButton.innerHTML);\n    var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    cancelButton.innerHTML = this.l10n.getConstant('cancel');\n    cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n    this.quickDialog.header = this.l10n.getConstant('alert');\n    var dialogCancel;\n    switch (type) {\n      case 'wrongPattern':\n        addClass([cancelButton], cls.DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n        break;\n      case 'createError':\n        addClass([cancelButton], cls.DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('createError');\n        break;\n      case 'sameDayAlert':\n        addClass([cancelButton], cls.DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n        break;\n      case 'seriesChangeAlert':\n        dialogCancel = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS);\n        removeClass([cancelButton, dialogCancel], cls.DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n        okButton.innerHTML = this.l10n.getConstant('yes');\n        cancelButton.innerHTML = this.l10n.getConstant('no');\n        dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n        break;\n      case 'occurrenceAlert':\n        addClass([cancelButton], cls.DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('occurenceAlert');\n        break;\n    }\n    if (!this.parent.enableRecurrenceValidation && type === 'wrongPattern' || this.parent.enableRecurrenceValidation) {\n      this.showQuickDialog('RecurrenceValidationAlert');\n    }\n  };\n  QuickPopups.prototype.openDeleteAlert = function () {\n    if (this.parent.activeViewOptions.readonly) {\n      return;\n    }\n    var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    if (okButton) {\n      okButton.innerHTML = this.l10n.getConstant('delete');\n      okButton.setAttribute('aria-label', okButton.innerHTML);\n    }\n    var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    if (cancelButton) {\n      cancelButton.innerHTML = this.l10n.getConstant('cancel');\n      cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n    }\n    this.quickDialog.content = this.parent.activeEventData.event.length > 1 ? this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n    this.quickDialog.header = this.parent.activeEventData.event.length > 1 ? this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n    this.quickDialogClass('Delete');\n    this.showQuickDialog('DeleteAlert');\n  };\n  QuickPopups.prototype.openValidationError = function (type, eventData) {\n    this.quickDialog.header = this.l10n.getConstant('alert');\n    this.quickDialog.content = this.l10n.getConstant(type);\n    var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    if (okButton) {\n      okButton.innerHTML = this.l10n.getConstant('ok');\n      okButton.setAttribute('aria-label', okButton.innerHTML);\n    }\n    var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    if (cancelButton) {\n      cancelButton.innerHTML = this.l10n.getConstant('cancel');\n      okButton.setAttribute('aria-label', cancelButton.innerHTML);\n    }\n    this.quickDialogClass('Alert');\n    this.showQuickDialog(type === 'overlapAlert' ? 'OverlapAlert' : 'ValidationAlert', eventData);\n  };\n  QuickPopups.prototype.showQuickDialog = function (popupType, eventData) {\n    var _this = this;\n    this.quickDialog.dataBind();\n    var eventProp = {\n      type: popupType,\n      cancel: false,\n      element: this.quickDialog.element,\n      data: extend({}, eventData || this.parent.activeEventData.event, null, true)\n    };\n    if (!this.parent.activeViewOptions.allowOverlap) {\n      eventProp.overlapEvents = this.parent.overlapAppointments;\n    }\n    this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n      if (!popupArgs.cancel) {\n        _this.quickDialog.show();\n      }\n    });\n  };\n  QuickPopups.prototype.createMoreEventList = function (eventCollection, groupOrder, groupIndex) {\n    var _this = this;\n    var fields = this.parent.eventFields;\n    var moreEventContentEle = createElement('div', {\n      className: cls.MORE_EVENT_CONTENT_CLASS\n    });\n    var moreEventWrapperEle = createElement('div', {\n      className: cls.MORE_EVENT_WRAPPER_CLASS\n    });\n    if (eventCollection.length === 0) {\n      moreEventWrapperEle = createElement('div', {\n        className: cls.MORE_EVENT_CONTENT_CLASS,\n        innerHTML: this.l10n.getConstant('emptyContainer')\n      });\n    } else {\n      var _loop_1 = function (eventData) {\n        var eventText = eventData[fields.subject] || this_1.parent.eventSettings.fields.subject.default || this_1.parent.localeObj.getConstant('addTitle');\n        var appointmentElement = createElement('div', {\n          className: cls.APPOINTMENT_CLASS,\n          attrs: {\n            'data-id': '' + eventData[fields.id],\n            'data-guid': eventData.Guid,\n            'role': 'button',\n            'tabindex': '0',\n            'aria-disabled': this_1.parent.eventBase.getReadonlyAttribute(eventData),\n            'aria-label': this_1.parent.getAnnouncementString(eventData)\n          }\n        });\n        if (eventData[fields.isReadonly]) {\n          addClass([appointmentElement], 'e-read-only');\n        }\n        var templateElement = void 0;\n        if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {\n          var tempId = this_1.parent.element.id + '_' + this_1.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n          templateElement = this_1.parent.getAppointmentTemplate()(eventData, this_1.parent, 'eventTemplate', tempId, false, undefined, undefined, this_1.parent.root);\n          append(templateElement, appointmentElement);\n        } else {\n          appointmentElement.appendChild(createElement('div', {\n            className: cls.SUBJECT_CLASS\n          }));\n          this_1.parent.sanitize(eventText, appointmentElement.firstElementChild);\n        }\n        if (!isNullOrUndefined(groupIndex)) {\n          appointmentElement.setAttribute('data-group-index', groupIndex);\n        }\n        if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n          var iconClass = eventData[fields.id] === eventData[fields.recurrenceID] ? cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n          appointmentElement.appendChild(createElement('div', {\n            className: cls.ICON + ' ' + iconClass\n          }));\n        }\n        var args = {\n          data: extend({}, eventData, null, true),\n          element: appointmentElement,\n          cancel: false\n        };\n        this_1.parent.trigger(event.eventRendered, args, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            moreEventWrapperEle.appendChild(appointmentElement);\n            var isPreventCrud = _this.parent.isAdaptive || _this.parent.currentView === 'Year';\n            _this.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData, isPreventCrud);\n            _this.parent.eventBase.applyResourceColor(appointmentElement, eventData, 'backgroundColor', groupOrder);\n          }\n        });\n      };\n      var this_1 = this;\n      for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n        var eventData = eventCollection_1[_i];\n        _loop_1(eventData);\n      }\n    }\n    moreEventContentEle.appendChild(moreEventWrapperEle);\n    return moreEventContentEle;\n  };\n  QuickPopups.prototype.tapHoldEventPopup = function (e) {\n    var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS);\n    this.parent.selectedElements = [];\n    this.isMultipleEventSelect = true;\n    this.parent.eventBase.getSelectedEventElements(target);\n    this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n    var guid = target.getAttribute('data-guid');\n    var eventObj = this.parent.eventBase.getEventByGuid(guid);\n    if (isNullOrUndefined(eventObj)) {\n      return;\n    }\n    var eventTitle = eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle');\n    var eventTemplate = \"<div class=\\\"\" + cls.MULTIPLE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.POPUP_HEADER_CLASS + \"\\\">\" + (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button>\") + (\"<div class=\\\"\" + cls.SUBJECT_CLASS + \"\\\">\" + eventTitle + \"</div>\") + (\"<button class=\\\"\" + cls.EDIT_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") + (\"<button class=\\\"\" + cls.DELETE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button></div></div>\");\n    this.quickPopup.element.innerHTML = eventTemplate;\n    var closeIcon = this.quickPopup.element.querySelector('.' + cls.CLOSE_CLASS);\n    this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n    var readonly = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];\n    var editAction = !this.parent.eventSettings.allowEditing || readonly;\n    var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n    var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n    if (editIcon) {\n      this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n    }\n    var deleteIcon = this.quickPopup.element.querySelector('.' + cls.DELETE_CLASS);\n    if (deleteIcon) {\n      this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n    }\n    this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(e));\n  };\n  QuickPopups.prototype.isCellBlocked = function (args) {\n    var tempObj = {};\n    tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n    tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n    tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var targetCell = args.element instanceof Array ? args.element[0] : args.element;\n      var groupIndex = parseInt(targetCell.getAttribute('data-group-index'), 10);\n      this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);\n    }\n    return this.parent.eventBase.isBlockRange(tempObj);\n  };\n  QuickPopups.prototype.cellClick = function (args) {\n    var date = new Date(args.startTime.getTime());\n    if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding || this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args) || !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n      this.quickPopupHide();\n      return;\n    }\n    var targetEle = !isNullOrUndefined(args.event) ? args.event.target : args.element;\n    if (this.parent.isAdaptive) {\n      this.quickPopupHide();\n      var newEventClone = this.parent.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n      if (isNullOrUndefined(newEventClone)) {\n        newEventClone = createElement('div', {\n          className: cls.NEW_EVENT_CLASS,\n          innerHTML: \"<div class=\\\"e-title\\\">+ \" + this.l10n.getConstant('newEvent') + \"</div>\"\n        });\n      }\n      var targetCell = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n      if (targetCell) {\n        targetCell.appendChild(newEventClone);\n      }\n      return;\n    }\n    var target = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.HEADER_CELLS_CLASS);\n    if (isNullOrUndefined(target) || targetEle.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n      return;\n    }\n    var isSameTarget = this.quickPopup.relateTo === target;\n    if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n      var subjectElement_1 = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n      if (subjectElement_1) {\n        subjectElement_1.focus();\n      }\n      return;\n    } else if (this.quickPopup.element) {\n      this.destroyPopupButtons('quickPopup');\n    }\n    var temp = {};\n    temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n    temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n    temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n    var quickCellPopup = createElement('div', {\n      className: cls.CELL_POPUP_CLASS\n    });\n    quickCellPopup.appendChild(this.getPopupHeader('Cell', temp));\n    quickCellPopup.appendChild(this.getPopupContent('Cell', args, temp));\n    quickCellPopup.appendChild(this.getPopupFooter('Cell', temp));\n    this.quickPopup.element.setAttribute('aria-label', this.l10n.getConstant('newEvent'));\n    var subjectElement = quickCellPopup.querySelector('.' + cls.SUBJECT_CLASS);\n    if (subjectElement) {\n      Input.createInput({\n        element: subjectElement,\n        properties: {\n          placeholder: this.l10n.getConstant('addTitle')\n        }\n      });\n    }\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n      subjectElement.value = this.parent.eventSettings.fields.subject.default;\n    }\n    var closeIcon = quickCellPopup.querySelector('.' + cls.CLOSE_CLASS);\n    if (closeIcon) {\n      this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n    }\n    var moreButton = quickCellPopup.querySelector('.' + cls.QUICK_POPUP_EVENT_DETAILS_CLASS);\n    if (moreButton) {\n      this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n    }\n    var saveButton = quickCellPopup.querySelector('.' + cls.EVENT_CREATE_CLASS);\n    if (saveButton) {\n      this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n    }\n    if (this.morePopup) {\n      this.morePopup.hide();\n    }\n    this.quickPopup.content = quickCellPopup;\n    this.quickPopup.relateTo = target;\n    this.quickPopup.dataBind();\n    this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(args.event));\n  };\n  QuickPopups.prototype.isSameEventClick = function (events) {\n    var isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n    if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n      var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n      if (editIcon) {\n        editIcon.focus();\n      }\n      if (!this.parent.isAdaptive) {\n        var editButton = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n        if (editButton) {\n          editButton.focus();\n        }\n      }\n      return true;\n    }\n    return false;\n  };\n  QuickPopups.prototype.isQuickTemplate = function (type) {\n    return this.parent.quickInfoTemplates.templateType === 'Both' || this.parent.quickInfoTemplates.templateType === type;\n  };\n  QuickPopups.prototype.eventClick = function (events) {\n    if (this.parent.eventTooltip) {\n      this.parent.eventTooltip.close();\n    }\n    if (!this.parent.showQuickInfo) {\n      return;\n    }\n    if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n      this.updateTapHoldEventPopup(closest(events.element, '.' + cls.APPOINTMENT_CLASS));\n    } else {\n      var isSameTarget = this.isSameEventClick(events);\n      this.parent.selectedElements = [];\n      if (isSameTarget) {\n        return;\n      } else if (this.quickPopup.element) {\n        this.destroyPopupButtons('quickPopup');\n      }\n      var eventData = events.event;\n      var quickEventPopup = createElement('div', {\n        className: cls.EVENT_POPUP_CLASS\n      });\n      quickEventPopup.appendChild(this.getPopupHeader('Event', eventData));\n      quickEventPopup.appendChild(this.getPopupContent('Event', events, eventData));\n      quickEventPopup.appendChild(this.getPopupFooter('Event', eventData));\n      this.quickPopup.element.setAttribute('aria-label', this.l10n.getConstant('editEvent'));\n      var readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n      var editAction = !this.parent.eventSettings.allowEditing || readonly;\n      var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n      var editIcon = quickEventPopup.querySelector('.' + cls.EDIT_CLASS);\n      var buttonClass = 'e-flat e-round e-small';\n      if (editIcon) {\n        this.renderButton(buttonClass, cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n      }\n      var deleteIcon = quickEventPopup.querySelector('.' + cls.DELETE_CLASS);\n      if (deleteIcon) {\n        this.renderButton(buttonClass, cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n      }\n      var closeIcon = quickEventPopup.querySelector('.' + cls.CLOSE_CLASS);\n      if (closeIcon) {\n        this.renderButton(buttonClass, cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n      }\n      var editButton = quickEventPopup.querySelector('.' + cls.EDIT_EVENT_CLASS);\n      if (editButton) {\n        this.renderButton('e-flat e-primary', '', editAction, editButton, this.editClick);\n      }\n      var deleteButton = quickEventPopup.querySelector('.' + cls.DELETE_EVENT_CLASS);\n      if (deleteButton) {\n        this.renderButton('e-flat', '', deleteAction, deleteButton, this.deleteClick);\n      }\n      if (this.morePopup && !closest(events.element, '.' + cls.MORE_EVENT_WRAPPER_CLASS)) {\n        this.morePopup.hide();\n      }\n      this.quickPopup.content = quickEventPopup;\n      this.quickPopup.relateTo = this.parent.isAdaptive ? document.body : closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n      this.quickPopup.dataBind();\n      this.beforeQuickPopupOpen(events.element, this.parent.eventBase.getPageCoordinates(events.originalEvent));\n    }\n  };\n  QuickPopups.prototype.getPopupHeader = function (headerType, headerData) {\n    var headerTemplate = createElement('div', {\n      className: cls.POPUP_HEADER_CLASS\n    });\n    if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {\n      var headerArgs = extend({}, headerData, {\n        elementType: headerType.toLowerCase()\n      }, true);\n      var templateId = this.parent.element.id;\n      var headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, 'header', templateId + '_headerTemplate', false));\n      append([].slice.call(headerTemp), headerTemplate);\n    } else {\n      var header = void 0;\n      var args = void 0;\n      switch (headerType) {\n        case 'Cell':\n          header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\"><button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\" + (\"\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\");\n          break;\n        case 'Event':\n          args = this.getFormattedString(headerData);\n          header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\">\" + (\"<button class=\\\"\" + (cls.EDIT_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") + (\"<button class=\\\"\" + (cls.DELETE_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button>\") + (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\") + (\"<div class=\\\"\" + cls.SUBJECT_WRAP + \"\\\"><div class=\\\"\" + cls.SUBJECT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" \") + (\"title=\\\"\" + (args.eventSubject ? args.eventSubject.replaceAll('\"', '\\'') : args.eventSubject) + \"\\\"></div></div >\");\n          break;\n      }\n      var templateWrapper = createElement('div', {\n        innerHTML: header\n      });\n      if (headerType === 'Event') {\n        var subjectText = templateWrapper.querySelector('.' + cls.SUBJECT_CLASS);\n        this.parent.sanitize(args.eventSubject, subjectText);\n      }\n      append([].slice.call(templateWrapper.childNodes), headerTemplate);\n    }\n    return headerTemplate;\n  };\n  QuickPopups.prototype.getPopupContent = function (type, args, data) {\n    var contentTemplate = createElement('div', {\n      className: cls.POPUP_CONTENT_CLASS\n    });\n    if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {\n      var contentArgs = extend({}, data, {\n        elementType: type.toLowerCase()\n      }, true);\n      var templateId = this.parent.element.id;\n      var contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, 'content', templateId + '_contentTemplate', false));\n      append([].slice.call(contentTemp), contentTemplate);\n    } else {\n      var content = void 0;\n      var cellDetails = void 0;\n      var argsData = void 0;\n      var resourceText = this.getResourceText(args, type.toLowerCase());\n      switch (type) {\n        case 'Cell':\n          cellDetails = this.getFormattedString(data);\n          content = \"<table class=\\\"\" + cls.POPUP_TABLE_CLASS + \"\\\"><tbody><tr><td><form class=\\\"\" + cls.FORM_CLASS + \"\\\" onsubmit=\" + (\"\\\"return false;\\\"><input class=\\\"\" + cls.SUBJECT_CLASS + \" \" + EVENT_FIELD + \"\\\" type=\\\"text\\\" name=\") + (\"\\\"\" + this.parent.eventFields.subject + \"\\\" /></form></td></tr><tr><td><div class=\\\"\" + cls.DATE_TIME_CLASS + \"\\\">\") + (\"<div class=\\\"\" + cls.DATE_TIME_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.DATE_TIME_DETAILS_CLASS + \" \") + (cls.TEXT_ELLIPSIS + \"\\\">\" + cellDetails.details + \"</div></div>\") + ((this.parent.activeViewOptions.group.resources.length > 0 ? \"<div class=\\\"\" + cls.RESOURCE_CLASS + \"\\\">\" + (\"<div class=\\\"\" + cls.RESOURCE_ICON_CLASS + \" \" + cls.ICON + \" \\\"></div><div class=\\\"\" + cls.RESOURCE_DETAILS_CLASS + \" \") + (cls.TEXT_ELLIPSIS + \"\\\"></div></div>\") : '') + \"</td></tr></tbody></table>\");\n          break;\n        case 'Event':\n          argsData = this.getFormattedString(data);\n          content = '<div class=\"' + cls.DATE_TIME_CLASS + '\"><div class=\"' + cls.DATE_TIME_ICON_CLASS + ' ' + cls.ICON + '\"></div><div class=\"' + cls.DATE_TIME_WRAPPER_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"><div class=\"' + cls.DATE_TIME_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + argsData.details + '</div>';\n          if (data[this.parent.eventFields.recurrenceRule]) {\n            content += '<div class=\"' + cls.RECURRENCE_SUMMARY_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + this.getRecurrenceSummary(data) + '</div>';\n          }\n          content += '</div></div>';\n          if (data[this.parent.eventFields.location]) {\n            content += '<div class=\"' + cls.LOCATION_CLASS + '\"><div class=\"' + cls.LOCATION_ICON_CLASS + ' ' + cls.ICON + '\"></div><div class=\"' + cls.LOCATION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"></div></div>';\n          }\n          if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {\n            content += '<div class=\"' + cls.TIME_ZONE_CLASS + '\"><div class=\"' + cls.TIME_ZONE_ICON_CLASS + ' ' + cls.ICON + '\"></div><div class=\"' + cls.TIME_ZONE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + this.getTimezone(data) + '</div></div>';\n          }\n          if (data[this.parent.eventFields.description]) {\n            content += '<div class=\"' + cls.DESCRIPTION_CLASS + '\"><div class=\"' + cls.DESCRIPTION_ICON_CLASS + ' ' + cls.ICON + '\"></div><div class=\"' + cls.DESCRIPTION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"></div></div>';\n          }\n          if (this.parent.resourceCollection.length > 0) {\n            content += '<div class=\"' + cls.RESOURCE_CLASS + '\"><div class=\"' + cls.RESOURCE_ICON_CLASS + ' ' + cls.ICON + '\"></div><div class=\"' + cls.RESOURCE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"></div></div>';\n          }\n          break;\n      }\n      var templateWrapper = createElement('div', {\n        innerHTML: content\n      });\n      if (data[this.parent.eventFields.location]) {\n        var locationDetails = templateWrapper.querySelector('.' + cls.LOCATION_DETAILS_CLASS);\n        if (!isNullOrUndefined(locationDetails)) {\n          this.parent.sanitize(data[this.parent.eventFields.location], locationDetails);\n        }\n      }\n      if (data[this.parent.eventFields.description]) {\n        var descriptionDetails = templateWrapper.querySelector('.' + cls.DESCRIPTION_DETAILS_CLASS);\n        if (!isNullOrUndefined(descriptionDetails)) {\n          this.parent.sanitize(data[this.parent.eventFields.description], descriptionDetails);\n        }\n      }\n      if (resourceText) {\n        var resourceDetails = templateWrapper.querySelector('.' + cls.RESOURCE_DETAILS_CLASS);\n        if (!isNullOrUndefined(resourceDetails)) {\n          this.parent.sanitize(resourceText, resourceDetails);\n        }\n      }\n      append([].slice.call(templateWrapper.childNodes), contentTemplate);\n    }\n    return contentTemplate;\n  };\n  QuickPopups.prototype.getPopupFooter = function (footerType, footerData) {\n    var footerTemplate = createElement('div', {\n      className: cls.POPUP_FOOTER_CLASS\n    });\n    if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {\n      var footerArgs = extend({}, footerData, {\n        elementType: footerType.toLowerCase()\n      }, true);\n      var templateId = this.parent.element.id;\n      var footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, 'footer', templateId + '_footerTemplate', false));\n      append([].slice.call(footerTemp), footerTemplate);\n    } else {\n      var footer = void 0;\n      switch (footerType) {\n        case 'Cell':\n          footer = \"<button class=\\\"\" + (cls.QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS) + \"\\\" title=\" + (\"\\\"\" + this.l10n.getConstant('moreDetails') + \"\\\">\" + this.l10n.getConstant('moreDetails') + \"</button>\") + (\"<button class=\\\"\" + cls.EVENT_CREATE_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('save') + \"\\\">\") + (this.l10n.getConstant('save') + \"</button>\");\n          break;\n        case 'Event':\n          footer = \"\" + (this.parent.isAdaptive ? '' : \"<button class=\\\"\" + cls.EDIT_EVENT_CLASS + \" \" + (cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\">\" + this.l10n.getConstant('edit') + \"</button>\") + (\"<button class=\\\"\" + cls.DELETE_EVENT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\">\") + (this.l10n.getConstant('delete') + \"</button>\"));\n          break;\n      }\n      var templateWrapper = createElement('div', {\n        innerHTML: footer\n      });\n      append([].slice.call(templateWrapper.childNodes), footerTemplate);\n    }\n    return footerTemplate;\n  };\n  QuickPopups.prototype.getResourceText = function (args, type) {\n    if (this.parent.resourceCollection.length === 0) {\n      return null;\n    }\n    var resourceValue = '';\n    if (this.parent.activeViewOptions.group.resources.length === 0) {\n      var resourceCollection_1 = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n      var resourceData = resourceCollection_1.dataSource;\n      if (type === 'event') {\n        var eventData = args.event;\n        var _loop_2 = function (data) {\n          var resourceId = eventData[resourceCollection_1.field];\n          if (resourceId instanceof Array) {\n            if (resourceId.indexOf(data[resourceCollection_1.idField]) > -1) {\n              var id_1 = resourceId[resourceId.indexOf(data[resourceCollection_1.idField])];\n              var resource = resourceData.filter(function (e) {\n                return e[resourceCollection_1.idField] === id_1;\n              })[0];\n              resourceValue += resourceValue === '' ? resource[resourceCollection_1.textField] : ', ' + resource[resourceCollection_1.textField];\n            }\n          } else if (data[resourceCollection_1.idField] === resourceId) {\n            resourceValue = data[resourceCollection_1.textField].toString();\n          }\n        };\n        for (var _i = 0, resourceData_1 = resourceData; _i < resourceData_1.length; _i++) {\n          var data = resourceData_1[_i];\n          _loop_2(data);\n        }\n      } else {\n        resourceValue = resourceData[0][resourceCollection_1.textField].toString();\n      }\n    } else {\n      if (type === 'event') {\n        var eventData = args.event;\n        var resourceData = void 0;\n        var lastResource_1;\n        for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n          resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];\n          if (!isNullOrUndefined(resourceData)) {\n            lastResource_1 = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];\n            break;\n          }\n        }\n        if (!Array.isArray(resourceData)) {\n          resourceData = [resourceData];\n        }\n        var resNames_1 = [];\n        var lastResourceData_1 = lastResource_1.dataSource;\n        resourceData.forEach(function (value) {\n          var text;\n          var i = util.findIndexInData(lastResourceData_1, lastResource_1.idField, value);\n          if (i > -1) {\n            text = lastResourceData_1[parseInt(i.toString(), 10)][lastResource_1.textField];\n          }\n          if (text) {\n            resNames_1.push(text);\n          }\n        });\n        resourceValue = resNames_1.join(', ');\n      } else {\n        var argsData = args;\n        var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n        var resourceDetails = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)];\n        resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n      }\n    }\n    return resourceValue;\n  };\n  QuickPopups.prototype.getFormattedString = function (eventData) {\n    var fields = this.parent.eventFields;\n    var eventSubject = eventData[fields.subject] || this.l10n.getConstant('noTitle');\n    var startDate = eventData[fields.startTime];\n    var endDate = eventData[fields.endTime];\n    var startDateDetails = this.getDateFormat(startDate, 'long');\n    var endDateDetails = eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0 ? this.getDateFormat(util.addDays(new Date(endDate.getTime()), -1), 'long') : this.getDateFormat(endDate, 'long');\n    var startTimeDetail = this.parent.getTimeString(startDate);\n    var endTimeDetail = this.parent.getTimeString(endDate);\n    var details = '';\n    var spanLength = endDate.getDate() !== startDate.getDate() && (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n    if (eventData[fields.isAllDay]) {\n      details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n      if ((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) / util.MS_PER_DAY > 1) {\n        details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n      }\n    } else if ((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) / util.MS_PER_DAY >= 1 || spanLength > 0) {\n      details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n    } else {\n      details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n    }\n    return {\n      eventSubject: eventSubject,\n      details: details\n    };\n  };\n  QuickPopups.prototype.moreEventClick = function (data, endDate, groupIndex) {\n    var _this = this;\n    this.quickPopupHide(true);\n    var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n    if (moreEventContentEle) {\n      remove(moreEventContentEle);\n    }\n    var selectedDate = data.date.getTime().toString();\n    var target = closest(data.element, '.' + cls.MORE_INDICATOR_CLASS + ',.' + cls.WORK_CELLS_CLASS);\n    var day = this.parent.globalize.formatDate(data.date, {\n      format: 'E',\n      calendar: this.parent.getCalendarMode()\n    });\n    this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DAY_CLASS).innerHTML = util.capitalizeFirstWord(day, 'single');\n    var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n    dateElement.innerHTML = this.getDateFormat(data.date, 'd');\n    dateElement.setAttribute('data-date', selectedDate);\n    dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n    var groupOrder;\n    if (!isNullOrUndefined(groupIndex)) {\n      dateElement.setAttribute('data-group-index', groupIndex);\n      groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n    }\n    var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n    this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n    removeClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n    if (util.resetTime(data.date).getTime() === util.resetTime(this.parent.getCurrentTime()).getTime()) {\n      addClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n    }\n    if (!this.parent.isAdaptive) {\n      if (this.parent.currentView.indexOf('Timeline') !== -1) {\n        var gIndex = target.getAttribute('data-group-index');\n        var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n        startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n        var tdDate = startDate.getTime().toString();\n        if (isNullOrUndefined(gIndex)) {\n          this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' tbody tr td[data-date=\"' + tdDate + '\"]');\n        } else {\n          this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n          if (isNullOrUndefined(this.morePopup.relateTo)) {\n            var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' tbody tr td[data-group-index=\"' + gIndex + '\"]'));\n            for (var i = 0; i < workCells.length; i++) {\n              var date = workCells[parseInt(i.toString(), 10)].getAttribute('data-date');\n              if (date < tdDate) {\n                this.morePopup.relateTo = workCells[parseInt(i.toString(), 10)];\n              }\n            }\n          }\n        }\n      } else {\n        this.morePopup.relateTo = closest(target, '.' + cls.WORK_CELLS_CLASS);\n      }\n    }\n    this.parent.renderTemplates(function () {\n      var eventProp = {\n        type: 'EventContainer',\n        cancel: false,\n        element: _this.morePopup.element,\n        data: data\n      };\n      _this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n        if (!popupArgs.cancel) {\n          _this.morePopup.show();\n        }\n      });\n    });\n  };\n  QuickPopups.prototype.saveClick = function (event) {\n    this.applyFormValidation();\n    this.dialogEvent = event;\n    this.isCrudAction = true;\n    this.quickPopupHide();\n  };\n  QuickPopups.prototype.detailsClick = function (event) {\n    var subjectEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n    if (subjectEle && subjectEle.value !== '') {\n      extend(this.parent.activeCellsData, {\n        subject: subjectEle.value\n      });\n    }\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.fieldValidator.destroyToolTip();\n    this.quickPopupHide();\n    this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n  };\n  QuickPopups.prototype.editClick = function (event) {\n    this.dialogEvent = event;\n    this.quickPopupHide(true);\n    var data = this.parent.activeEventData.event;\n    this.parent.currentAction = 'EditSeries';\n    if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n      this.parent.currentAction = 'EditOccurrence';\n      this.openRecurrenceAlert();\n    } else {\n      this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n    }\n  };\n  QuickPopups.prototype.deleteClick = function (event) {\n    this.dialogEvent = event;\n    this.quickPopupHide(true);\n    this.parent.currentAction = 'Delete';\n    if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n      this.openRecurrenceAlert();\n    } else {\n      this.openDeleteAlert();\n    }\n  };\n  QuickPopups.prototype.updateMoreEventContent = function () {\n    if (this.morePopup.element.classList.contains('e-popup-close')) {\n      return;\n    }\n    var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n    if (moreEventContentEle) {\n      remove(moreEventContentEle);\n    }\n    var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n    var startDate = new Date(parseInt(dateElement.getAttribute('data-date'), 10));\n    var endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n    var groupIndex = dateElement.getAttribute('data-group-index');\n    var data;\n    var groupOrder;\n    if (!isNullOrUndefined(groupIndex)) {\n      data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n      groupOrder = data.groupOrder;\n    }\n    var events = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n    var moreElement = this.createMoreEventList(events, groupOrder, groupIndex);\n    this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n  };\n  QuickPopups.prototype.closeClick = function (event) {\n    this.dialogEvent = event;\n    if (this.parent.currentView === 'Year' && this.parent.activeCellsData && this.parent.activeCellsData.element) {\n      this.parent.selectCell(this.parent.activeCellsData.element);\n    }\n    this.quickPopupHide();\n    this.morePopup.hide();\n  };\n  QuickPopups.prototype.dialogButtonClick = function (event) {\n    this.dialogEvent = event;\n    this.quickDialog.hide();\n    var target = event.target;\n    var cancelBtn = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    var eventData = this.parent.activeEventData.event;\n    if (target.classList.contains(cls.QUICK_DIALOG_OCCURRENCE_CLASS)) {\n      this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteOccurrence' : 'EditOccurrence';\n      switch (this.parent.currentAction) {\n        case 'EditOccurrence':\n          this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n          break;\n        case 'DeleteOccurrence':\n          this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n          break;\n      }\n    } else if (target.classList.contains(cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {\n      this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteFollowingEvents' : 'EditFollowingEvents';\n      switch (this.parent.currentAction) {\n        case 'EditFollowingEvents':\n          this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n          break;\n        case 'DeleteFollowingEvents':\n          this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n          break;\n      }\n    } else if (target.classList.contains(cls.QUICK_DIALOG_SERIES_CLASS)) {\n      this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteSeries' : 'EditSeries';\n      switch (this.parent.currentAction) {\n        case 'EditSeries':\n          this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);\n          break;\n        case 'DeleteSeries':\n          this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n          break;\n      }\n    } else if (target.classList.contains(cls.QUICK_DIALOG_DELETE_CLASS)) {\n      this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n    } else if (!cancelBtn.classList.contains(cls.DISABLE_CLASS) && (target.classList.contains(cls.QUICK_DIALOG_ALERT_OK) || target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(cls.QUICK_DIALOG_CANCEL_CLASS))) {\n      this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL);\n      this.parent.eventWindow.eventSave(event, this.l10n.getConstant('ok'));\n    }\n  };\n  QuickPopups.prototype.updateTapHoldEventPopup = function (target) {\n    var selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n    this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n    if (selectedElements.length > 0) {\n      var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n      var titleContent = selectedElements.length === 1 ? eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle') : '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n      this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS).innerHTML = titleContent;\n      if (selectedElements.length > 1) {\n        addClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n      } else {\n        removeClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n      }\n    } else {\n      this.parent.selectedElements = [];\n      this.quickPopupHide();\n    }\n  };\n  QuickPopups.prototype.getTimezone = function (event) {\n    var zoneDetails = '';\n    zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n    zoneDetails += zoneDetails === '' ? '' : ' - ';\n    zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n    return zoneDetails;\n  };\n  QuickPopups.prototype.getRecurrenceSummary = function (event) {\n    var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n    if (recurrenceEditor) {\n      var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n      return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n    }\n    return '';\n  };\n  QuickPopups.prototype.getDateFormat = function (date, skeletonString) {\n    return util.capitalizeFirstWord(this.parent.globalize.formatDate(date, {\n      skeleton: skeletonString,\n      calendar: this.parent.getCalendarMode()\n    }), 'single');\n  };\n  QuickPopups.prototype.getDataFromTarget = function (target) {\n    if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n      return this.parent.activeEventData.event;\n    }\n    // Deprecated cells data in quick popups\n    var eventObj = {\n      startTime: this.parent.activeCellsData.startTime,\n      endTime: this.parent.activeCellsData.endTime,\n      isAllDay: this.parent.activeCellsData.isAllDay,\n      groupIndex: this.parent.activeCellsData.groupIndex\n    };\n    var cellsData = this.parent.activeCellsData;\n    this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n    return eventObj;\n  };\n  QuickPopups.prototype.beforeQuickDialogClose = function (e) {\n    var _this = this;\n    var args = {\n      event: e.event || this.dialogEvent,\n      type: isNullOrUndefined(this.parent.activeEventData.event) ? 'ValidationAlert' : !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) ? 'RecurrenceAlert' : 'DeleteAlert',\n      cancel: false,\n      data: this.parent.activeEventData.event,\n      element: this.quickDialog.element\n    };\n    this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n      if (!popupCloseArgs.cancel) {\n        _this.parent.eventBase.focusElement(true);\n      }\n    });\n  };\n  QuickPopups.prototype.beforeQuickPopupOpen = function (target, originalEvent) {\n    var _this = this;\n    this.parent.renderTemplates(function () {\n      var isEventPopup = _this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n      var popupType = _this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n      var eventProp = {\n        type: popupType,\n        cancel: false,\n        data: extend({}, _this.getDataFromTarget(target), null, true),\n        target: target,\n        element: _this.quickPopup.element\n      };\n      _this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n        if (popupArgs.cancel) {\n          _this.quickPopupHide();\n          _this.destroyPopupButtons('quickPopup');\n          if (popupArgs.element.classList.contains(cls.POPUP_OPEN)) {\n            _this.quickPopupClose();\n          }\n          util.removeChildren(_this.quickPopup.element);\n          _this.isMultipleEventSelect = false;\n        } else {\n          var display = _this.quickPopup.element.style.display;\n          _this.quickPopup.element.style.display = 'block';\n          if (_this.parent.isAdaptive) {\n            _this.quickPopup.element.removeAttribute('style');\n            _this.quickPopup.element.style.display = 'block';\n            _this.quickPopup.element.style.height = formatUnit(popupType === 'EditEventInfo' ? 65 : window.innerHeight);\n          } else {\n            var isVirtualScroll = _this.parent.virtualScrollModule && _this.parent.virtualScrollModule.isHorizontalScroll && !isNullOrUndefined(closest(target, '.' + cls.CONTENT_TABLE_CLASS));\n            var conTable = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n            _this.quickPopup.offsetX = isVirtualScroll && !_this.parent.enableRtl ? util.getTranslateX(conTable) + 10 : 10;\n            _this.quickPopup.offsetY = _this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll ? _this.quickPopup.offsetY : 0;\n            _this.quickPopup.collision = {\n              X: _this.parent.enableRtl ? 'flip' : 'none',\n              Y: 'fit'\n            };\n            _this.quickPopup.position = {\n              X: _this.parent.enableRtl ? 'left' : 'right',\n              Y: _this.parent.enableRtl ? 'bottom' : 'top'\n            };\n            _this.quickPopup.dataBind();\n            _this.quickPopup.refreshPosition(null, true);\n            var collide = isCollide(_this.quickPopup.element, _this.parent.element);\n            if (collide.indexOf(_this.parent.enableRtl ? 'left' : 'right') > -1) {\n              _this.quickPopup.offsetX = -target.offsetWidth - 10 - _this.quickPopup.element.offsetWidth;\n              if (isVirtualScroll && !_this.parent.enableRtl) {\n                _this.quickPopup.offsetX = util.getTranslateX(conTable) + _this.quickPopup.offsetX;\n              }\n              _this.quickPopup.dataBind();\n              _this.quickPopup.refreshPosition(null, true);\n              var leftCollide = isCollide(_this.quickPopup.element, _this.parent.element);\n              if (leftCollide.indexOf('left') > -1) {\n                _this.quickPopup.position = {\n                  X: 'center',\n                  Y: 'center'\n                };\n                _this.quickPopup.collision = {\n                  X: 'fit',\n                  Y: 'fit'\n                };\n                _this.quickPopup.offsetX = -(_this.quickPopup.element.offsetWidth / 2);\n                _this.quickPopup.dataBind();\n              }\n            }\n            if (_this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n              var translateY = util.getTranslateY(conTable);\n              _this.quickPopup.offsetY = translateY;\n              _this.quickPopup.dataBind();\n              _this.quickPopup.refreshPosition(null, true);\n            }\n            if (_this.quickPopup.position.X === 'center' && _this.quickPopup.position.Y === 'center' && !isNullOrUndefined(originalEvent) && originalEvent.clientX && originalEvent.clientY) {\n              var clientX = originalEvent.clientX;\n              var clientY = originalEvent.clientY;\n              var targetRect = target.getBoundingClientRect();\n              var offsetY = originalEvent.offsetY || Math.ceil(clientY - targetRect.y);\n              var previousOffset = _this.quickPopup.offsetY;\n              var collision = isCollide(_this.quickPopup.element, target);\n              var popupRect = _this.quickPopup.element.getBoundingClientRect();\n              var targetEle = document.elementFromPoint(clientX, clientY);\n              if (collision.indexOf('top') > -1 || collision.indexOf('bottom') > -1 || closest(targetEle, '.' + cls.POPUP_WRAPPER_CLASS)) {\n                if (popupRect.top <= clientY && clientY <= popupRect.top + popupRect.height) {\n                  _this.quickPopup.offsetY = previousOffset - popupRect.height - 10;\n                  _this.quickPopup.dataBind();\n                  collision = isCollide(_this.quickPopup.element, _this.parent.element);\n                  if (collision.indexOf('top') > -1) {\n                    _this.quickPopup.offsetY = previousOffset + offsetY + 10;\n                    _this.quickPopup.dataBind();\n                  }\n                } else if (isCollide(_this.quickPopup.element, _this.parent.element).indexOf('bottom') > -1) {\n                  _this.quickPopup.offsetY = previousOffset - offsetY - Math.ceil(popupRect.height) - 10;\n                  _this.quickPopup.dataBind();\n                }\n              }\n            }\n          }\n          if (isEventPopup) {\n            _this.applyEventColor();\n          }\n          _this.quickPopup.element.style.display = display;\n          _this.quickPopup.dataBind();\n          _this.quickPopup.show();\n        }\n      });\n    });\n  };\n  QuickPopups.prototype.applyEventColor = function () {\n    var colorField = '';\n    if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n      colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n    } else {\n      colorField = 'background-color';\n    }\n    var color = this.parent.activeEventData.element.style[colorField];\n    if (color === '') {\n      return;\n    }\n    var colorEle = this.quickPopup.element.querySelector('.' + cls.POPUP_HEADER_CLASS);\n    var footerEle = this.quickPopup.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n    if (footerEle && footerEle.offsetParent) {\n      colorEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n      if (colorEle) {\n        colorEle.style.borderLeftColor = color;\n        color = \"rgba(\" + color.match(/\\d+/g).join() + \",0.3)\";\n      }\n    }\n    if (colorEle) {\n      colorEle.style.backgroundColor = color;\n    }\n  };\n  QuickPopups.prototype.quickPopupOpen = function () {\n    if (this.parent.isAdaptive) {\n      this.quickPopup.element.style.top = '0px';\n      return;\n    }\n    if (this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS)) {\n      var subjectElement = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n      if (subjectElement) {\n        subjectElement.focus();\n      }\n    } else {\n      var editElement = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n      if (editElement) {\n        editElement.focus();\n      }\n      var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n      if (editIcon) {\n        editIcon.focus();\n      }\n    }\n  };\n  QuickPopups.prototype.quickPopupClose = function () {\n    this.parent.eventBase.focusElement();\n    this.quickPopup.relateTo = '.' + cls.WORK_CELLS_CLASS;\n    this.fieldValidator.destroyToolTip();\n    if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n      this.fieldValidator.destroy();\n    }\n    this.destroyPopupButtons('quickPopup');\n    util.removeChildren(this.quickPopup.element);\n  };\n  QuickPopups.prototype.morePopupOpen = function () {\n    if (this.parent.isAdaptive) {\n      this.morePopup.element.style.top = '0px';\n      this.morePopup.element.style.left = '0px';\n      this.morePopup.element.style.height = formatUnit(window.innerHeight);\n      return;\n    }\n    this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS).focus();\n    this.morePopup.refreshPosition();\n  };\n  QuickPopups.prototype.morePopupClose = function () {\n    var moreWrapper = this.parent.element.querySelector('.' + cls.MORE_EVENT_WRAPPER_CLASS);\n    if (moreWrapper) {\n      remove(moreWrapper);\n    }\n  };\n  QuickPopups.prototype.popupClose = function (event) {\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.quickPopupHide(true);\n  };\n  QuickPopups.prototype.quickPopupHide = function (hideAnimation) {\n    var _this = this;\n    if (!this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n      return;\n    }\n    var isCellPopup = this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS);\n    var popupData;\n    if (isCellPopup) {\n      var formvalidator = this.quickPopup.element.querySelector('.e-formvalidator');\n      if (this.isCrudAction && formvalidator && !formvalidator.ej2_instances[0].validate()) {\n        return;\n      }\n      var fields = this.parent.eventFields;\n      var saveObj = this.parent.eventWindow.getObjectFromFormData(cls.POPUP_WRAPPER_CLASS);\n      this.parent.eventWindow.setDefaultValueToObject(saveObj);\n      saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n      saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n      saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n      saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.setResourceValues(saveObj);\n      }\n      popupData = saveObj;\n    } else {\n      popupData = this.parent.activeEventData.event;\n    }\n    var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n    var args = {\n      event: this.dialogEvent,\n      type: this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo',\n      cancel: false,\n      data: popupData,\n      element: this.quickPopup.element,\n      target: isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n    };\n    this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n      if (!popupCloseArgs.cancel) {\n        if (_this.quickPopup.element.classList.contains('e-popup-open')) {\n          if (isCellPopup && _this.isCrudAction) {\n            _this.parent.currentAction = 'Add';\n            _this.parent.crudModule.addEvent(popupCloseArgs.data);\n          }\n          if (hideAnimation) {\n            var animation = _this.quickPopup.hideAnimation;\n            _this.quickPopup.hideAnimation = null;\n            _this.quickPopup.hide();\n            _this.quickPopup.hideAnimation = animation;\n          } else {\n            _this.quickPopup.hide();\n          }\n          _this.isMultipleEventSelect = false;\n          _this.isCrudAction = false;\n        }\n      }\n    });\n  };\n  QuickPopups.prototype.navigationClick = function (e) {\n    var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n    if (!isNullOrUndefined(navigateEle)) {\n      var date = this.parent.getDateFromElement(e.currentTarget);\n      if (!isNullOrUndefined(date)) {\n        this.closeClick(e);\n        this.parent.setProperties({\n          selectedDate: date\n        }, true);\n        this.parent.changeView(this.parent.getNavigateView(), e);\n      }\n    }\n  };\n  QuickPopups.prototype.documentClick = function (e) {\n    var target = e.event.target;\n    var isInsideDialog = !!closest(target, '.e-dialog');\n    var classNames = '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.HEADER_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.WORK_CELLS_CLASS + ',.' + cls.APPOINTMENT_CLASS;\n    if (!isInsideDialog) {\n      classNames += ',.e-popup';\n    }\n    var popupWrap = this.parent.element.querySelector('.' + cls.POPUP_WRAPPER_CLASS);\n    if (popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames) || !closest(target, classNames)) {\n      this.quickPopupHide();\n      this.parent.removeNewEventElement();\n    }\n    var tar = this.parent.allowInline ? this.parent.inlineModule.getInlineElement() : null;\n    if (tar && tar !== target) {\n      this.parent.inlineModule.documentClick(tar);\n    }\n    if (closest(target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.HEADER_CELLS_CLASS)) {\n      this.parent.removeNewEventElement();\n    }\n    if (!closest(target, '.' + cls.MORE_POPUP_WRAPPER_CLASS) && target.classList && !target.classList.contains(cls.MORE_INDICATOR_CLASS) && !closest(target, '.' + cls.MORE_POPUP_WRAPPER_CLASS + '.' + cls.POPUP_OPEN) && !closest(target, '.' + cls.WORK_CELLS_CLASS)) {\n      this.morePopup.hide();\n    }\n  };\n  QuickPopups.prototype.onClosePopup = function (event) {\n    if (!isNullOrUndefined(event)) {\n      this.dialogEvent = event;\n    }\n    this.quickPopupHide();\n    if (isNullOrUndefined(event) || !isNullOrUndefined(event) && event.action !== 'escape' || this.parent.inlineModule && this.parent.element.querySelector('.' + cls.INLINE_APPOINTMENT_CLASS)) {\n      this.parent.eventBase.focusElement();\n    }\n  };\n  QuickPopups.prototype.addEventListener = function () {\n    this.parent.on(event.cellClick, this.cellClick, this);\n    this.parent.on(event.eventClick, this.eventClick, this);\n    this.parent.on(event.documentClick, this.documentClick, this);\n    this.parent.on(event.dataReady, this.updateMoreEventContent, this);\n  };\n  QuickPopups.prototype.removeEventListener = function () {\n    this.parent.off(event.cellClick, this.cellClick);\n    this.parent.off(event.eventClick, this.eventClick);\n    this.parent.off(event.documentClick, this.documentClick);\n    this.parent.off(event.dataReady, this.updateMoreEventContent);\n  };\n  QuickPopups.prototype.destroyPopupButtons = function (popupName) {\n    var popup = popupName === 'quickPopup' ? this.quickPopup : this.morePopup;\n    var buttonCollections = [].slice.call(popup.element.querySelectorAll('.e-control.e-btn'));\n    for (var _i = 0, buttonCollections_1 = buttonCollections; _i < buttonCollections_1.length; _i++) {\n      var button = buttonCollections_1[_i];\n      var instance = button.ej2_instances[0];\n      if (instance) {\n        instance.destroy();\n      }\n    }\n    if (popupName === 'quickPopup') {\n      var input = popup.element.querySelector('input.' + cls.SUBJECT_CLASS);\n      if (input) {\n        input.remove();\n      }\n      var form = this.quickPopup.element.querySelector('form.' + cls.FORM_CLASS);\n      if (form) {\n        util.removeChildren(form);\n        form.remove();\n      }\n      this.parent.resetTemplates(['content', 'header', 'footer']);\n    }\n  };\n  QuickPopups.prototype.refreshQuickDialog = function () {\n    this.destroyQuickDialog();\n    this.renderQuickDialog();\n  };\n  QuickPopups.prototype.refreshQuickPopup = function () {\n    this.destroyQuickPopup();\n    this.renderQuickPopup();\n  };\n  QuickPopups.prototype.refreshMorePopup = function () {\n    this.destroyMorePopup();\n    this.renderMorePopup();\n  };\n  QuickPopups.prototype.destroyQuickDialog = function () {\n    if (this.quickDialog.element) {\n      this.quickDialog.destroy();\n      remove(this.quickDialog.element);\n      this.quickDialog = null;\n    }\n  };\n  QuickPopups.prototype.destroyQuickPopup = function () {\n    if (this.quickPopup.element) {\n      this.destroyPopupButtons('quickPopup');\n      this.quickPopup.destroy();\n      remove(this.quickPopup.element);\n      this.quickPopup = null;\n    }\n  };\n  QuickPopups.prototype.destroyMorePopup = function () {\n    if (this.morePopup.element) {\n      this.destroyPopupButtons('morePopup');\n      this.morePopup.destroy();\n      remove(this.morePopup.element);\n      this.morePopup = null;\n    }\n  };\n  QuickPopups.prototype.destroy = function () {\n    if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n      this.fieldValidator.destroy();\n    }\n    this.removeEventListener();\n    this.destroyQuickPopup();\n    this.destroyMorePopup();\n    this.destroyQuickDialog();\n    this.dialogEvent = null;\n    this.parent = null;\n    this.l10n = null;\n    this.isCrudAction = null;\n    this.fieldValidator = null;\n    this.isMultipleEventSelect = null;\n  };\n  return QuickPopups;\n}();\nexport { QuickPopups };","map":{"version":3,"names":["closest","EventHandler","isNullOrUndefined","formatUnit","append","addClass","removeClass","createElement","remove","extend","Dialog","Popup","isCollide","Button","Input","FieldValidator","event","cls","util","EVENT_FIELD","QuickPopups","parent","isMultipleEventSelect","isCrudAction","l10n","localeObj","fieldValidator","render","addEventListener","prototype","renderQuickPopup","renderMorePopup","renderQuickDialog","quickPopupWrapper","className","POPUP_WRAPPER_CLASS","attrs","role","isAdaptive","document","body","appendChild","DEVICE_CLASS","element","quickPopup","targetType","enableRtl","open","quickPopupOpen","bind","close","quickPopupClose","hideAnimation","name","duration","showAnimation","collision","X","Y","position","viewPortElement","zIndex","moreEventPopup","MORE_EVENT_POPUP_CLASS","MORE_EVENT_HEADER_CLASS","MORE_EVENT_CLOSE_CLASS","getConstant","MORE_EVENT_DATE_HEADER_CLASS","MORE_EVENT_HEADER_DAY_CLASS","id","MORE_EVENT_HEADER_DATE_CLASS","NAVIGATE_CLASS","moreEventWrapper","MORE_POPUP_WRAPPER_CLASS","innerHTML","morePopup","morePopupOpen","morePopupClose","setAttribute","closeButton","querySelector","renderButton","ICON","CLOSE_ICON_CLASS","closeClick","add","navigationClick","buttonModel","cssClass","isPrimary","click","dialogButtonClick","eventSettings","editFollowingEvents","followingSeriesButton","splice","quickDialog","animationSettings","effect","buttons","QUICK_DIALOG_CLASS","closeOnEscape","enableHtmlSanitizer","beforeClose","beforeQuickDialogClose","isModal","showCloseIcon","target","visible","width","dialogElement","appendTo","okButton","QUICK_DIALOG_ALERT_OK","cancelButton","QUICK_DIALOG_ALERT_CANCEL","iconName","isDisabled","clickEvent","buttonObj","disabled","iconCss","quickDialogClass","action","classList","QUICK_DIALOG_OCCURRENCE_CLASS","QUICK_DIALOG_SERIES_CLASS","QUICK_DIALOG_DELETE_CLASS","QUICK_DIALOG_CANCEL_CLASS","QUICK_DIALOG_ALERT_BTN_CLASS","DISABLE_CLASS","followingEventButton","QUICK_DIALOG_ALERT_FOLLOWING","FOLLOWING_EVENTS_DIALOG","QUICK_DIALOG_FOLLOWING_EVENTS_CLASS","applyFormValidation","form","FORM_CLASS","rules","fields","subject","validation","renderFormValidator","locale","openRecurrenceAlert","editDeleteOnly","currentAction","editFollowingEventsOnly","editDeleteSeries","content","header","showQuickDialog","openRecurrenceValidationAlert","type","dialogCancel","enableRecurrenceValidation","openDeleteAlert","activeViewOptions","readonly","activeEventData","length","openValidationError","eventData","popupType","_this","dataBind","eventProp","cancel","data","allowOverlap","overlapEvents","overlapAppointments","trigger","popupOpen","popupArgs","show","createMoreEventList","eventCollection","groupOrder","groupIndex","eventFields","moreEventContentEle","MORE_EVENT_CONTENT_CLASS","moreEventWrapperEle","MORE_EVENT_WRAPPER_CLASS","_loop_1","eventText","this_1","default","appointmentElement","APPOINTMENT_CLASS","Guid","eventBase","getReadonlyAttribute","getAnnouncementString","isReadonly","templateElement","eventTemplate","tempId","eventTemplateName","getAppointmentTemplate","undefined","root","SUBJECT_CLASS","sanitize","firstElementChild","recurrenceRule","iconClass","recurrenceID","EVENT_RECURRENCE_ICON_CLASS","EVENT_RECURRENCE_EDIT_ICON_CLASS","args","eventRendered","eventArgs","isPreventCrud","currentView","wireAppointmentEvents","applyResourceColor","_i","eventCollection_1","tapHoldEventPopup","e","selectedElements","getSelectedEventElements","getSelectedEvents","guid","getAttribute","eventObj","getEventByGuid","eventTitle","MULTIPLE_EVENT_POPUP_CLASS","POPUP_HEADER_CLASS","CLOSE_CLASS","EDIT_CLASS","DELETE_CLASS","closeIcon","editAction","allowEditing","deleteAction","allowDeleting","editIcon","EDIT_ICON_CLASS","editClick","deleteIcon","DELETE_ICON_CLASS","deleteClick","beforeQuickPopupOpen","getPageCoordinates","isCellBlocked","tempObj","startTime","activeCellsData","endTime","isAllDay","group","resources","targetCell","Array","parseInt","resourceBase","setResourceValues","isNaN","isBlockRange","cellClick","date","Date","getTime","showQuickInfo","allowAdding","isMinMaxDate","setHours","quickPopupHide","targetEle","newEventClone","NEW_EVENT_CLASS","WORK_CELLS_CLASS","ALLDAY_CELLS_CLASS","HEADER_CELLS_CLASS","contains","MORE_INDICATOR_CLASS","isSameTarget","relateTo","POPUP_OPEN","subjectElement_1","focus","destroyPopupButtons","temp","quickCellPopup","CELL_POPUP_CLASS","getPopupHeader","getPopupContent","getPopupFooter","subjectElement","createInput","properties","placeholder","value","popupClose","moreButton","QUICK_POPUP_EVENT_DETAILS_CLASS","detailsClick","saveButton","EVENT_CREATE_CLASS","saveClick","hide","isSameEventClick","events","editButton","EDIT_EVENT_CLASS","isQuickTemplate","quickInfoTemplates","templateType","eventClick","eventTooltip","updateTapHoldEventPopup","quickEventPopup","EVENT_POPUP_CLASS","buttonClass","deleteButton","DELETE_EVENT_CLASS","originalEvent","headerType","headerData","headerTemplate","headerArgs","elementType","toLowerCase","templateId","headerTemp","slice","call","getQuickInfoTemplatesHeader","POPUP_HEADER_ICON_WRAPPER","getFormattedString","SUBJECT_WRAP","TEXT_ELLIPSIS","eventSubject","replaceAll","templateWrapper","subjectText","childNodes","contentTemplate","POPUP_CONTENT_CLASS","contentArgs","contentTemp","getQuickInfoTemplatesContent","cellDetails","argsData","resourceText","getResourceText","POPUP_TABLE_CLASS","DATE_TIME_CLASS","DATE_TIME_ICON_CLASS","DATE_TIME_DETAILS_CLASS","details","RESOURCE_CLASS","RESOURCE_ICON_CLASS","RESOURCE_DETAILS_CLASS","DATE_TIME_WRAPPER_CLASS","RECURRENCE_SUMMARY_CLASS","getRecurrenceSummary","location","LOCATION_CLASS","LOCATION_ICON_CLASS","LOCATION_DETAILS_CLASS","startTimezone","endTimezone","TIME_ZONE_CLASS","TIME_ZONE_ICON_CLASS","TIME_ZONE_DETAILS_CLASS","getTimezone","description","DESCRIPTION_CLASS","DESCRIPTION_ICON_CLASS","DESCRIPTION_DETAILS_CLASS","resourceCollection","locationDetails","descriptionDetails","resourceDetails","footerType","footerData","footerTemplate","POPUP_FOOTER_CLASS","footer","footerArgs","footerTemp","getQuickInfoTemplatesFooter","resourceValue","resourceCollection_1","resourceData","dataSource","_loop_2","resourceId","field","indexOf","idField","id_1","resource","filter","textField","toString","resourceData_1","lastResource_1","i","isArray","resNames_1","lastResourceData_1","forEach","text","findIndexInData","push","join","lastResourceLevel","startDate","endDate","startDateDetails","getDateFormat","endDateDetails","getHours","getMinutes","addDays","startTimeDetail","getTimeString","endTimeDetail","spanLength","getDate","getUniversalTime","MS_PER_DAY","moreEventClick","selectedDate","day","globalize","formatDate","format","calendar","getCalendarMode","capitalizeFirstWord","dateElement","moreEventElements","CURRENTDATE_CLASS","resetTime","getCurrentTime","gIndex","tdDate","CONTENT_WRAP_CLASS","workCells","querySelectorAll","renderTemplates","dialogEvent","subjectEle","destroyToolTip","eventWindow","openEditor","updateMoreEventContent","filterEvents","eventsProcessed","moreElement","selectCell","cancelBtn","crudModule","deleteEvent","getParentEvent","uiStateValues","isIgnoreOccurrence","eventSave","titleContent","HIDDEN_CLASS","zoneDetails","recurrenceEditor","getRecurrenceEditorInstance","ruleSummary","getRuleSummary","charAt","toUpperCase","skeletonString","skeleton","getDataFromTarget","cellsData","convertToEventData","popupCloseArgs","focusElement","isEventPopup","removeChildren","display","style","removeAttribute","height","window","innerHeight","isVirtualScroll","virtualScrollModule","isHorizontalScroll","CONTENT_TABLE_CLASS","conTable","offsetX","getTranslateX","offsetY","refreshPosition","collide","offsetWidth","leftCollide","translateY","getTranslateY","clientX","clientY","targetRect","getBoundingClientRect","Math","ceil","y","previousOffset","popupRect","elementFromPoint","top","applyEventColor","colorField","color","colorEle","footerEle","offsetParent","borderLeftColor","match","backgroundColor","editElement","destroy","left","moreWrapper","isCellPopup","popupData","formvalidator","ej2_instances","validate","saveObj","getObjectFromFormData","setDefaultValueToObject","getEventMaxID","addEvent","animation","navigateEle","getDateFromElement","currentTarget","setProperties","changeView","getNavigateView","documentClick","isInsideDialog","classNames","popupWrap","childElementCount","removeNewEventElement","tar","allowInline","inlineModule","getInlineElement","onClosePopup","INLINE_APPOINTMENT_CLASS","on","dataReady","removeEventListener","off","popupName","popup","buttonCollections","buttonCollections_1","button","instance","input","resetTemplates","refreshQuickDialog","destroyQuickDialog","refreshQuickPopup","destroyQuickPopup","refreshMorePopup","destroyMorePopup"],"sources":["C:/Users/Dell/OneDrive/Desktop/Programs/soc-portal/node_modules/@syncfusion/ej2-schedule/src/schedule/popups/quick-popups.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, EventHandler, isNullOrUndefined, formatUnit, append } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, createElement, remove, extend } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, isCollide } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { FieldValidator } from './form-validator';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\nvar QuickPopups = /** @class */ (function () {\n    function QuickPopups(parent) {\n        this.isMultipleEventSelect = false;\n        this.isCrudAction = false;\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fieldValidator = new FieldValidator();\n        this.render();\n        this.addEventListener();\n    }\n    QuickPopups.prototype.render = function () {\n        this.renderQuickPopup();\n        this.renderMorePopup();\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.renderQuickPopup = function () {\n        var quickPopupWrapper = createElement('div', { className: cls.POPUP_WRAPPER_CLASS + ' e-popup-close', attrs: { role: 'dialog' } });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(quickPopupWrapper);\n            addClass([quickPopupWrapper], cls.DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(quickPopupWrapper);\n        }\n        this.quickPopup = new Popup(quickPopupWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            open: this.quickPopupOpen.bind(this),\n            close: this.quickPopupClose.bind(this),\n            hideAnimation: (this.parent.isAdaptive ? { name: 'ZoomOut' } : { name: 'FadeOut', duration: 150 }),\n            showAnimation: (this.parent.isAdaptive ? { name: 'ZoomIn' } : { name: 'FadeIn', duration: 150 }),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'none', Y: 'fit' })),\n            position: (this.parent.isAdaptive || this.parent.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1004 : 3)\n        });\n    };\n    QuickPopups.prototype.renderMorePopup = function () {\n        var moreEventPopup = \"<div class=\\\"\" + cls.MORE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_CLASS + \"\\\">\" +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\" tabindex=\\\"0\\\" role=\\\"button\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_DATE_HEADER_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_DAY_CLASS + \"\\\" id=\\\"\" + this.parent.element.id + \"_more_popup\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_HEADER_DATE_CLASS + \" \" + cls.NAVIGATE_CLASS + \"\\\" tabindex=\\\"0\\\" role=\\\"link\\\"></div></div></div></div>\");\n        var moreEventWrapper = createElement('div', {\n            className: cls.MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n            innerHTML: moreEventPopup\n        });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(moreEventWrapper);\n            addClass([moreEventWrapper], cls.DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(moreEventWrapper);\n        }\n        this.morePopup = new Popup(moreEventWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'ZoomOut', duration: 300 },\n            showAnimation: { name: 'ZoomIn', duration: 300 },\n            open: this.morePopupOpen.bind(this),\n            close: this.morePopupClose.bind(this),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'flip', Y: 'flip' })),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1002 : 2)\n        });\n        this.morePopup.element.setAttribute('role', 'dialog');\n        this.morePopup.element.setAttribute('aria-labelledby', this.parent.element.id + '_more_popup');\n        var closeButton = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CLOSE_CLASS);\n        this.renderButton('e-round', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n        EventHandler.add(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n    };\n    QuickPopups.prototype.renderQuickDialog = function () {\n        var buttonModel = [\n            { buttonModel: { cssClass: 'e-quick-alertok e-flat', isPrimary: true }, click: this.dialogButtonClick.bind(this) },\n            { buttonModel: { cssClass: 'e-quick-alertcancel e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this) },\n            {\n                buttonModel: { cssClass: 'e-quick-dialog-cancel e-disable e-flat', isPrimary: false },\n                click: this.dialogButtonClick.bind(this)\n            }\n        ];\n        if (this.parent.eventSettings.editFollowingEvents) {\n            var followingSeriesButton = {\n                buttonModel: { cssClass: 'e-quick-alertfollowing e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this)\n            };\n            buttonModel.splice(1, 0, followingSeriesButton);\n        }\n        this.quickDialog = new Dialog({\n            animationSettings: { effect: 'Zoom' },\n            buttons: buttonModel,\n            cssClass: cls.QUICK_DIALOG_CLASS,\n            closeOnEscape: true,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            beforeClose: this.beforeQuickDialogClose.bind(this),\n            isModal: true,\n            position: { X: 'center', Y: 'center' },\n            showCloseIcon: true,\n            target: document.body,\n            visible: false,\n            width: 'auto'\n        });\n        var dialogElement = createElement('div', { id: this.parent.element.id + 'QuickDialog' });\n        this.parent.element.appendChild(dialogElement);\n        this.quickDialog.appendTo(dialogElement);\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        if (this.quickDialog.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.quickDialog.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n    };\n    // eslint-disable-next-line max-len\n    QuickPopups.prototype.renderButton = function (className, iconName, isDisabled, element, clickEvent) {\n        var buttonObj = new Button({\n            cssClass: className,\n            disabled: isDisabled,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            iconCss: iconName\n        });\n        buttonObj.appendTo(element);\n        EventHandler.add(element, 'click', clickEvent, this);\n        removeClass([element], cls.ICON);\n    };\n    QuickPopups.prototype.quickDialogClass = function (action) {\n        var classList = [\n            cls.QUICK_DIALOG_OCCURRENCE_CLASS, cls.QUICK_DIALOG_SERIES_CLASS, cls.QUICK_DIALOG_DELETE_CLASS,\n            cls.QUICK_DIALOG_CANCEL_CLASS, cls.QUICK_DIALOG_ALERT_BTN_CLASS, cls.DISABLE_CLASS\n        ];\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        var followingEventButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n        removeClass([okButton, cancelButton], classList);\n        addClass([this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS)], cls.DISABLE_CLASS);\n        if (this.parent.eventSettings.editFollowingEvents) {\n            addClass([followingEventButton], cls.DISABLE_CLASS);\n            removeClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n        }\n        switch (action) {\n            case 'Recurrence':\n                addClass([okButton], cls.QUICK_DIALOG_OCCURRENCE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_SERIES_CLASS);\n                if (this.parent.eventSettings.editFollowingEvents) {\n                    removeClass([followingEventButton], cls.DISABLE_CLASS);\n                    addClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n                    addClass([followingEventButton], cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);\n                }\n                break;\n            case 'Delete':\n                addClass([okButton], cls.QUICK_DIALOG_DELETE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_CANCEL_CLASS);\n                break;\n            case 'Alert':\n                addClass([okButton], [cls.QUICK_DIALOG_ALERT_OK, cls.QUICK_DIALOG_ALERT_BTN_CLASS]);\n                addClass([cancelButton], [cls.QUICK_DIALOG_ALERT_CANCEL, cls.DISABLE_CLASS]);\n                break;\n        }\n    };\n    QuickPopups.prototype.applyFormValidation = function () {\n        var form = this.quickPopup.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n        this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element, this.parent.locale);\n    };\n    QuickPopups.prototype.openRecurrenceAlert = function () {\n        var editDeleteOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (editDeleteOnly) {\n            editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n            editDeleteOnly.setAttribute('aria-label', editDeleteOnly.innerHTML);\n        }\n        var editFollowingEventsOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n        if (editFollowingEventsOnly) {\n            editFollowingEventsOnly.innerHTML = this.l10n.getConstant('editFollowingEvent');\n            editFollowingEventsOnly.setAttribute('aria-label', editFollowingEventsOnly.innerHTML);\n        }\n        var editDeleteSeries = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (editDeleteSeries) {\n            editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n            editDeleteSeries.setAttribute('aria-label', editDeleteSeries.innerHTML);\n        }\n        this.quickDialog.content = this.l10n.getConstant('editContent');\n        this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteTitle' : 'editTitle');\n        this.quickDialogClass('Recurrence');\n        this.showQuickDialog('RecurrenceAlert');\n    };\n    QuickPopups.prototype.openRecurrenceValidationAlert = function (type) {\n        this.quickDialogClass('Alert');\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        okButton.innerHTML = this.l10n.getConstant('ok');\n        okButton.setAttribute('aria-label', okButton.innerHTML);\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        var dialogCancel;\n        switch (type) {\n            case 'wrongPattern':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n                break;\n            case 'createError':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('createError');\n                break;\n            case 'sameDayAlert':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n                break;\n            case 'seriesChangeAlert':\n                dialogCancel = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS);\n                removeClass([cancelButton, dialogCancel], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n                okButton.innerHTML = this.l10n.getConstant('yes');\n                cancelButton.innerHTML = this.l10n.getConstant('no');\n                dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n                break;\n            case 'occurrenceAlert':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('occurenceAlert');\n                break;\n        }\n        if ((!this.parent.enableRecurrenceValidation && type === 'wrongPattern') || this.parent.enableRecurrenceValidation) {\n            this.showQuickDialog('RecurrenceValidationAlert');\n        }\n    };\n    QuickPopups.prototype.openDeleteAlert = function () {\n        if (this.parent.activeViewOptions.readonly) {\n            return;\n        }\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('delete');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialog.content = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n        this.quickDialog.header = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n        this.quickDialogClass('Delete');\n        this.showQuickDialog('DeleteAlert');\n    };\n    QuickPopups.prototype.openValidationError = function (type, eventData) {\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        this.quickDialog.content = this.l10n.getConstant(type);\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('ok');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            okButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialogClass('Alert');\n        this.showQuickDialog(type === 'overlapAlert' ? 'OverlapAlert' : 'ValidationAlert', eventData);\n    };\n    QuickPopups.prototype.showQuickDialog = function (popupType, eventData) {\n        var _this = this;\n        this.quickDialog.dataBind();\n        var eventProp = {\n            type: popupType, cancel: false, element: this.quickDialog.element,\n            data: extend({}, (eventData || this.parent.activeEventData.event), null, true)\n        };\n        if (!this.parent.activeViewOptions.allowOverlap) {\n            eventProp.overlapEvents = this.parent.overlapAppointments;\n        }\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            if (!popupArgs.cancel) {\n                _this.quickDialog.show();\n            }\n        });\n    };\n    QuickPopups.prototype.createMoreEventList = function (eventCollection, groupOrder, groupIndex) {\n        var _this = this;\n        var fields = this.parent.eventFields;\n        var moreEventContentEle = createElement('div', { className: cls.MORE_EVENT_CONTENT_CLASS });\n        var moreEventWrapperEle = createElement('div', { className: cls.MORE_EVENT_WRAPPER_CLASS });\n        if (eventCollection.length === 0) {\n            moreEventWrapperEle = createElement('div', {\n                className: cls.MORE_EVENT_CONTENT_CLASS,\n                innerHTML: this.l10n.getConstant('emptyContainer')\n            });\n        }\n        else {\n            var _loop_1 = function (eventData) {\n                var eventText = (eventData[fields.subject] || this_1.parent.eventSettings.fields.subject.default\n                    || this_1.parent.localeObj.getConstant('addTitle'));\n                var appointmentElement = createElement('div', {\n                    className: cls.APPOINTMENT_CLASS,\n                    attrs: {\n                        'data-id': '' + eventData[fields.id],\n                        'data-guid': eventData.Guid, 'role': 'button', 'tabindex': '0',\n                        'aria-disabled': this_1.parent.eventBase.getReadonlyAttribute(eventData),\n                        'aria-label': this_1.parent.getAnnouncementString(eventData)\n                    }\n                });\n                if (eventData[fields.isReadonly]) {\n                    addClass([appointmentElement], 'e-read-only');\n                }\n                var templateElement = void 0;\n                if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {\n                    var tempId = this_1.parent.element.id + '_' + this_1.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n                    templateElement = this_1.parent.getAppointmentTemplate()(eventData, this_1.parent, 'eventTemplate', tempId, false, undefined, undefined, this_1.parent.root);\n                    append(templateElement, appointmentElement);\n                }\n                else {\n                    appointmentElement.appendChild(createElement('div', { className: cls.SUBJECT_CLASS }));\n                    this_1.parent.sanitize(eventText, appointmentElement.firstElementChild);\n                }\n                if (!isNullOrUndefined(groupIndex)) {\n                    appointmentElement.setAttribute('data-group-index', groupIndex);\n                }\n                if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n                    var iconClass = (eventData[fields.id] === eventData[fields.recurrenceID]) ?\n                        cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                    appointmentElement.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n                }\n                var args = {\n                    data: extend({}, eventData, null, true),\n                    element: appointmentElement, cancel: false\n                };\n                this_1.parent.trigger(event.eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        moreEventWrapperEle.appendChild(appointmentElement);\n                        var isPreventCrud = _this.parent.isAdaptive || _this.parent.currentView === 'Year';\n                        _this.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData, isPreventCrud);\n                        _this.parent.eventBase.applyResourceColor(appointmentElement, eventData, 'backgroundColor', groupOrder);\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n                var eventData = eventCollection_1[_i];\n                _loop_1(eventData);\n            }\n        }\n        moreEventContentEle.appendChild(moreEventWrapperEle);\n        return moreEventContentEle;\n    };\n    QuickPopups.prototype.tapHoldEventPopup = function (e) {\n        var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS);\n        this.parent.selectedElements = [];\n        this.isMultipleEventSelect = true;\n        this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        var guid = target.getAttribute('data-guid');\n        var eventObj = this.parent.eventBase.getEventByGuid(guid);\n        if (isNullOrUndefined(eventObj)) {\n            return;\n        }\n        var eventTitle = (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle'));\n        var eventTemplate = \"<div class=\\\"\" + cls.MULTIPLE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.POPUP_HEADER_CLASS + \"\\\">\" +\n            (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button>\") +\n            (\"<div class=\\\"\" + cls.SUBJECT_CLASS + \"\\\">\" + eventTitle + \"</div>\") +\n            (\"<button class=\\\"\" + cls.EDIT_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n            (\"<button class=\\\"\" + cls.DELETE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button></div></div>\");\n        this.quickPopup.element.innerHTML = eventTemplate;\n        var closeIcon = this.quickPopup.element.querySelector('.' + cls.CLOSE_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n        var readonly = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];\n        var editAction = !this.parent.eventSettings.allowEditing || readonly;\n        var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n        var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n        if (editIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n        }\n        var deleteIcon = this.quickPopup.element.querySelector('.' + cls.DELETE_CLASS);\n        if (deleteIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n        }\n        this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(e));\n    };\n    QuickPopups.prototype.isCellBlocked = function (args) {\n        var tempObj = {};\n        tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var targetCell = args.element instanceof Array ? args.element[0] : args.element;\n            var groupIndex = parseInt(targetCell.getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);\n        }\n        return this.parent.eventBase.isBlockRange(tempObj);\n    };\n    QuickPopups.prototype.cellClick = function (args) {\n        var date = new Date(args.startTime.getTime());\n        if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding ||\n            this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args) ||\n            !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n            this.quickPopupHide();\n            return;\n        }\n        var targetEle = !isNullOrUndefined(args.event) ? args.event.target : args.element;\n        if (this.parent.isAdaptive) {\n            this.quickPopupHide();\n            var newEventClone = this.parent.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n            if (isNullOrUndefined(newEventClone)) {\n                newEventClone = createElement('div', {\n                    className: cls.NEW_EVENT_CLASS,\n                    innerHTML: \"<div class=\\\"e-title\\\">+ \" + this.l10n.getConstant('newEvent') + \"</div>\"\n                });\n            }\n            var targetCell = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n            if (targetCell) {\n                targetCell.appendChild(newEventClone);\n            }\n            return;\n        }\n        var target = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' +\n            cls.HEADER_CELLS_CLASS);\n        if (isNullOrUndefined(target) || targetEle.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n            return;\n        }\n        var isSameTarget = this.quickPopup.relateTo === target;\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var subjectElement_1 = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement_1) {\n                subjectElement_1.focus();\n            }\n            return;\n        }\n        else if (this.quickPopup.element) {\n            this.destroyPopupButtons('quickPopup');\n        }\n        var temp = {};\n        temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        var quickCellPopup = createElement('div', { className: cls.CELL_POPUP_CLASS });\n        quickCellPopup.appendChild(this.getPopupHeader('Cell', temp));\n        quickCellPopup.appendChild(this.getPopupContent('Cell', args, temp));\n        quickCellPopup.appendChild(this.getPopupFooter('Cell', temp));\n        this.quickPopup.element.setAttribute('aria-label', this.l10n.getConstant('newEvent'));\n        var subjectElement = quickCellPopup.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectElement) {\n            Input.createInput({ element: subjectElement, properties: { placeholder: this.l10n.getConstant('addTitle') } });\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            subjectElement.value = this.parent.eventSettings.fields.subject.default;\n        }\n        var closeIcon = quickCellPopup.querySelector('.' + cls.CLOSE_CLASS);\n        if (closeIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n        }\n        var moreButton = quickCellPopup.querySelector('.' + cls.QUICK_POPUP_EVENT_DETAILS_CLASS);\n        if (moreButton) {\n            this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n        }\n        var saveButton = quickCellPopup.querySelector('.' + cls.EVENT_CREATE_CLASS);\n        if (saveButton) {\n            this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n        }\n        if (this.morePopup) {\n            this.morePopup.hide();\n        }\n        this.quickPopup.content = quickCellPopup;\n        this.quickPopup.relateTo = target;\n        this.quickPopup.dataBind();\n        this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(args.event));\n    };\n    QuickPopups.prototype.isSameEventClick = function (events) {\n        var isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n            if (!this.parent.isAdaptive) {\n                var editButton = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n                if (editButton) {\n                    editButton.focus();\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    QuickPopups.prototype.isQuickTemplate = function (type) {\n        return this.parent.quickInfoTemplates.templateType === 'Both' || this.parent.quickInfoTemplates.templateType === type;\n    };\n    QuickPopups.prototype.eventClick = function (events) {\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        if (!this.parent.showQuickInfo) {\n            return;\n        }\n        if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n            this.updateTapHoldEventPopup(closest(events.element, '.' + cls.APPOINTMENT_CLASS));\n        }\n        else {\n            var isSameTarget = this.isSameEventClick(events);\n            this.parent.selectedElements = [];\n            if (isSameTarget) {\n                return;\n            }\n            else if (this.quickPopup.element) {\n                this.destroyPopupButtons('quickPopup');\n            }\n            var eventData = events.event;\n            var quickEventPopup = createElement('div', { className: cls.EVENT_POPUP_CLASS });\n            quickEventPopup.appendChild(this.getPopupHeader('Event', eventData));\n            quickEventPopup.appendChild(this.getPopupContent('Event', events, eventData));\n            quickEventPopup.appendChild(this.getPopupFooter('Event', eventData));\n            this.quickPopup.element.setAttribute('aria-label', this.l10n.getConstant('editEvent'));\n            var readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n            var editAction = !this.parent.eventSettings.allowEditing || readonly;\n            var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n            var editIcon = quickEventPopup.querySelector('.' + cls.EDIT_CLASS);\n            var buttonClass = 'e-flat e-round e-small';\n            if (editIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n            }\n            var deleteIcon = quickEventPopup.querySelector('.' + cls.DELETE_CLASS);\n            if (deleteIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n            }\n            var closeIcon = quickEventPopup.querySelector('.' + cls.CLOSE_CLASS);\n            if (closeIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n            }\n            var editButton = quickEventPopup.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editButton) {\n                this.renderButton('e-flat e-primary', '', editAction, editButton, this.editClick);\n            }\n            var deleteButton = quickEventPopup.querySelector('.' + cls.DELETE_EVENT_CLASS);\n            if (deleteButton) {\n                this.renderButton('e-flat', '', deleteAction, deleteButton, this.deleteClick);\n            }\n            if (this.morePopup && !closest(events.element, '.' + cls.MORE_EVENT_WRAPPER_CLASS)) {\n                this.morePopup.hide();\n            }\n            this.quickPopup.content = quickEventPopup;\n            this.quickPopup.relateTo = this.parent.isAdaptive ? document.body :\n                closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n            this.quickPopup.dataBind();\n            this.beforeQuickPopupOpen(events.element, this.parent.eventBase.getPageCoordinates(events.originalEvent));\n        }\n    };\n    QuickPopups.prototype.getPopupHeader = function (headerType, headerData) {\n        var headerTemplate = createElement('div', { className: cls.POPUP_HEADER_CLASS });\n        if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {\n            var headerArgs = extend({}, headerData, { elementType: headerType.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, 'header', templateId + '_headerTemplate', false));\n            append([].slice.call(headerTemp), headerTemplate);\n        }\n        else {\n            var header = void 0;\n            var args = void 0;\n            switch (headerType) {\n                case 'Cell':\n                    header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\"><button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\");\n                    break;\n                case 'Event':\n                    args = this.getFormattedString(headerData);\n                    header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\">\" +\n                        (\"<button class=\\\"\" + (cls.EDIT_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + (cls.DELETE_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\") +\n                        (\"<div class=\\\"\" + cls.SUBJECT_WRAP + \"\\\"><div class=\\\"\" + cls.SUBJECT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" \") +\n                        (\"title=\\\"\" + (args.eventSubject ? args.eventSubject.replaceAll('\"', '\\'') : args.eventSubject) + \"\\\"></div></div >\");\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: header });\n            if (headerType === 'Event') {\n                var subjectText = templateWrapper.querySelector('.' + cls.SUBJECT_CLASS);\n                this.parent.sanitize(args.eventSubject, subjectText);\n            }\n            append([].slice.call(templateWrapper.childNodes), headerTemplate);\n        }\n        return headerTemplate;\n    };\n    QuickPopups.prototype.getPopupContent = function (type, args, data) {\n        var contentTemplate = createElement('div', { className: cls.POPUP_CONTENT_CLASS });\n        if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {\n            var contentArgs = extend({}, data, { elementType: type.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, 'content', templateId + '_contentTemplate', false));\n            append([].slice.call(contentTemp), contentTemplate);\n        }\n        else {\n            var content = void 0;\n            var cellDetails = void 0;\n            var argsData = void 0;\n            var resourceText = this.getResourceText(args, type.toLowerCase());\n            switch (type) {\n                case 'Cell':\n                    cellDetails = this.getFormattedString(data);\n                    content = \"<table class=\\\"\" + cls.POPUP_TABLE_CLASS + \"\\\"><tbody><tr><td><form class=\\\"\" + cls.FORM_CLASS + \"\\\" onsubmit=\" +\n                        (\"\\\"return false;\\\"><input class=\\\"\" + cls.SUBJECT_CLASS + \" \" + EVENT_FIELD + \"\\\" type=\\\"text\\\" name=\") +\n                        (\"\\\"\" + this.parent.eventFields.subject + \"\\\" /></form></td></tr><tr><td><div class=\\\"\" + cls.DATE_TIME_CLASS + \"\\\">\") +\n                        (\"<div class=\\\"\" + cls.DATE_TIME_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.DATE_TIME_DETAILS_CLASS + \" \") +\n                        (cls.TEXT_ELLIPSIS + \"\\\">\" + cellDetails.details + \"</div></div>\") +\n                        ((this.parent.activeViewOptions.group.resources.length > 0 ? \"<div class=\\\"\" + cls.RESOURCE_CLASS + \"\\\">\" +\n                            (\"<div class=\\\"\" + cls.RESOURCE_ICON_CLASS + \" \" + cls.ICON + \" \\\"></div><div class=\\\"\" + cls.RESOURCE_DETAILS_CLASS + \" \") +\n                            (cls.TEXT_ELLIPSIS + \"\\\"></div></div>\") : '') + \"</td></tr></tbody></table>\");\n                    break;\n                case 'Event':\n                    argsData = this.getFormattedString(data);\n                    content = '<div class=\"' + cls.DATE_TIME_CLASS + '\"><div class=\"' + cls.DATE_TIME_ICON_CLASS + ' ' + cls.ICON +\n                        '\"></div><div class=\"' + cls.DATE_TIME_WRAPPER_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"><div class=\"' +\n                        cls.DATE_TIME_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + argsData.details + '</div>';\n                    if (data[this.parent.eventFields.recurrenceRule]) {\n                        content += '<div class=\"' + cls.RECURRENCE_SUMMARY_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            this.getRecurrenceSummary(data) + '</div>';\n                    }\n                    content += '</div></div>';\n                    if (data[this.parent.eventFields.location]) {\n                        content += '<div class=\"' + cls.LOCATION_CLASS + '\"><div class=\"' + cls.LOCATION_ICON_CLASS + ' ' +\n                            cls.ICON + '\"></div><div class=\"' + cls.LOCATION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"></div></div>';\n                    }\n                    if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {\n                        content += '<div class=\"' + cls.TIME_ZONE_CLASS + '\"><div class=\"' + cls.TIME_ZONE_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.TIME_ZONE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            this.getTimezone(data) + '</div></div>';\n                    }\n                    if (data[this.parent.eventFields.description]) {\n                        content += '<div class=\"' + cls.DESCRIPTION_CLASS + '\"><div class=\"' + cls.DESCRIPTION_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.DESCRIPTION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"></div></div>';\n                    }\n                    if (this.parent.resourceCollection.length > 0) {\n                        content += '<div class=\"' + cls.RESOURCE_CLASS + '\"><div class=\"' + cls.RESOURCE_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.RESOURCE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"></div></div>';\n                    }\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: content });\n            if (data[this.parent.eventFields.location]) {\n                var locationDetails = templateWrapper.querySelector('.' + cls.LOCATION_DETAILS_CLASS);\n                if (!isNullOrUndefined(locationDetails)) {\n                    this.parent.sanitize(data[this.parent.eventFields.location], locationDetails);\n                }\n            }\n            if (data[this.parent.eventFields.description]) {\n                var descriptionDetails = templateWrapper.querySelector('.' + cls.DESCRIPTION_DETAILS_CLASS);\n                if (!isNullOrUndefined(descriptionDetails)) {\n                    this.parent.sanitize(data[this.parent.eventFields.description], descriptionDetails);\n                }\n            }\n            if (resourceText) {\n                var resourceDetails = templateWrapper.querySelector('.' + cls.RESOURCE_DETAILS_CLASS);\n                if (!isNullOrUndefined(resourceDetails)) {\n                    this.parent.sanitize(resourceText, resourceDetails);\n                }\n            }\n            append([].slice.call(templateWrapper.childNodes), contentTemplate);\n        }\n        return contentTemplate;\n    };\n    QuickPopups.prototype.getPopupFooter = function (footerType, footerData) {\n        var footerTemplate = createElement('div', { className: cls.POPUP_FOOTER_CLASS });\n        if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {\n            var footerArgs = extend({}, footerData, { elementType: footerType.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, 'footer', templateId + '_footerTemplate', false));\n            append([].slice.call(footerTemp), footerTemplate);\n        }\n        else {\n            var footer = void 0;\n            switch (footerType) {\n                case 'Cell':\n                    footer = \"<button class=\\\"\" + (cls.QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS) + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('moreDetails') + \"\\\">\" + this.l10n.getConstant('moreDetails') + \"</button>\") +\n                        (\"<button class=\\\"\" + cls.EVENT_CREATE_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('save') + \"\\\">\") +\n                        (this.l10n.getConstant('save') + \"</button>\");\n                    break;\n                case 'Event':\n                    footer = \"\" + (this.parent.isAdaptive ? '' : \"<button class=\\\"\" + cls.EDIT_EVENT_CLASS + \" \" +\n                        (cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\">\" + this.l10n.getConstant('edit') + \"</button>\") +\n                        (\"<button class=\\\"\" + cls.DELETE_EVENT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\">\") +\n                        (this.l10n.getConstant('delete') + \"</button>\"));\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: footer });\n            append([].slice.call(templateWrapper.childNodes), footerTemplate);\n        }\n        return footerTemplate;\n    };\n    QuickPopups.prototype.getResourceText = function (args, type) {\n        if (this.parent.resourceCollection.length === 0) {\n            return null;\n        }\n        var resourceValue = '';\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            var resourceCollection_1 = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            var resourceData = resourceCollection_1.dataSource;\n            if (type === 'event') {\n                var eventData = args.event;\n                var _loop_2 = function (data) {\n                    var resourceId = eventData[resourceCollection_1.field];\n                    if (resourceId instanceof Array) {\n                        if (resourceId.indexOf(data[resourceCollection_1.idField]) > -1) {\n                            var id_1 = resourceId[resourceId.indexOf(data[resourceCollection_1.idField])];\n                            var resource = resourceData.filter(function (e) {\n                                return e[resourceCollection_1.idField] === id_1;\n                            })[0];\n                            resourceValue += (resourceValue === '') ? resource[resourceCollection_1.textField] :\n                                ', ' + resource[resourceCollection_1.textField];\n                        }\n                    }\n                    else if (data[resourceCollection_1.idField] === resourceId) {\n                        resourceValue = data[resourceCollection_1.textField].toString();\n                    }\n                };\n                for (var _i = 0, resourceData_1 = resourceData; _i < resourceData_1.length; _i++) {\n                    var data = resourceData_1[_i];\n                    _loop_2(data);\n                }\n            }\n            else {\n                resourceValue = resourceData[0][resourceCollection_1.textField].toString();\n            }\n        }\n        else {\n            if (type === 'event') {\n                var eventData = args.event;\n                var resourceData = void 0;\n                var lastResource_1;\n                for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n                    resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];\n                    if (!isNullOrUndefined(resourceData)) {\n                        lastResource_1 = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];\n                        break;\n                    }\n                }\n                if (!Array.isArray(resourceData)) {\n                    resourceData = [resourceData];\n                }\n                var resNames_1 = [];\n                var lastResourceData_1 = lastResource_1.dataSource;\n                resourceData.forEach(function (value) {\n                    var text;\n                    var i = util.findIndexInData(lastResourceData_1, lastResource_1.idField, value);\n                    if (i > -1) {\n                        text = lastResourceData_1[parseInt(i.toString(), 10)][lastResource_1.textField];\n                    }\n                    if (text) {\n                        resNames_1.push(text);\n                    }\n                });\n                resourceValue = resNames_1.join(', ');\n            }\n            else {\n                var argsData = args;\n                var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n                var resourceDetails = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)];\n                resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n            }\n        }\n        return resourceValue;\n    };\n    QuickPopups.prototype.getFormattedString = function (eventData) {\n        var fields = this.parent.eventFields;\n        var eventSubject = (eventData[fields.subject] || this.l10n.getConstant('noTitle'));\n        var startDate = eventData[fields.startTime];\n        var endDate = eventData[fields.endTime];\n        var startDateDetails = this.getDateFormat(startDate, 'long');\n        var endDateDetails = (eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0) ?\n            this.getDateFormat(util.addDays(new Date(endDate.getTime()), -1), 'long') :\n            this.getDateFormat(endDate, 'long');\n        var startTimeDetail = this.parent.getTimeString(startDate);\n        var endTimeDetail = this.parent.getTimeString(endDate);\n        var details = '';\n        var spanLength = endDate.getDate() !== startDate.getDate() &&\n            (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n        if (eventData[fields.isAllDay]) {\n            details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            if (((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) / util.MS_PER_DAY) > 1) {\n                details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            }\n        }\n        else if ((((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) / util.MS_PER_DAY) >= 1) || spanLength > 0) {\n            details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n        }\n        else {\n            details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n        }\n        return { eventSubject: eventSubject, details: details };\n    };\n    QuickPopups.prototype.moreEventClick = function (data, endDate, groupIndex) {\n        var _this = this;\n        this.quickPopupHide(true);\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var selectedDate = ((data.date).getTime()).toString();\n        var target = closest(data.element, '.' + cls.MORE_INDICATOR_CLASS + ',.' + cls.WORK_CELLS_CLASS);\n        var day = this.parent.globalize.formatDate(data.date, { format: 'E', calendar: this.parent.getCalendarMode() });\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DAY_CLASS).innerHTML = util.capitalizeFirstWord(day, 'single');\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        dateElement.innerHTML = this.getDateFormat(data.date, 'd');\n        dateElement.setAttribute('data-date', selectedDate);\n        dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            dateElement.setAttribute('data-group-index', groupIndex);\n            groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n        }\n        var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n        removeClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        if (util.resetTime(data.date).getTime() === util.resetTime(this.parent.getCurrentTime()).getTime()) {\n            addClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        }\n        if (!this.parent.isAdaptive) {\n            if (this.parent.currentView.indexOf('Timeline') !== -1) {\n                var gIndex = target.getAttribute('data-group-index');\n                var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n                startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n                var tdDate = startDate.getTime().toString();\n                if (isNullOrUndefined(gIndex)) {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-date=\"' + tdDate + '\"]');\n                }\n                else {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n                    if (isNullOrUndefined(this.morePopup.relateTo)) {\n                        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS +\n                            ' tbody tr td[data-group-index=\"' + gIndex + '\"]'));\n                        for (var i = 0; i < workCells.length; i++) {\n                            var date = workCells[parseInt(i.toString(), 10)].getAttribute('data-date');\n                            if (date < tdDate) {\n                                this.morePopup.relateTo = workCells[parseInt(i.toString(), 10)];\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                this.morePopup.relateTo = closest(target, '.' + cls.WORK_CELLS_CLASS);\n            }\n        }\n        this.parent.renderTemplates(function () {\n            var eventProp = {\n                type: 'EventContainer', cancel: false,\n                element: _this.morePopup.element, data: data\n            };\n            _this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n                if (!popupArgs.cancel) {\n                    _this.morePopup.show();\n                }\n            });\n        });\n    };\n    QuickPopups.prototype.saveClick = function (event) {\n        this.applyFormValidation();\n        this.dialogEvent = event;\n        this.isCrudAction = true;\n        this.quickPopupHide();\n    };\n    QuickPopups.prototype.detailsClick = function (event) {\n        var subjectEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectEle && subjectEle.value !== '') {\n            extend(this.parent.activeCellsData, { subject: subjectEle.value });\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.fieldValidator.destroyToolTip();\n        this.quickPopupHide();\n        this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n    };\n    QuickPopups.prototype.editClick = function (event) {\n        this.dialogEvent = event;\n        this.quickPopupHide(true);\n        var data = this.parent.activeEventData.event;\n        this.parent.currentAction = 'EditSeries';\n        if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n            this.parent.currentAction = 'EditOccurrence';\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n        }\n    };\n    QuickPopups.prototype.deleteClick = function (event) {\n        this.dialogEvent = event;\n        this.quickPopupHide(true);\n        this.parent.currentAction = 'Delete';\n        if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.openDeleteAlert();\n        }\n    };\n    QuickPopups.prototype.updateMoreEventContent = function () {\n        if (this.morePopup.element.classList.contains('e-popup-close')) {\n            return;\n        }\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        var startDate = new Date(parseInt(dateElement.getAttribute('data-date'), 10));\n        var endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n        var groupIndex = dateElement.getAttribute('data-group-index');\n        var data;\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            groupOrder = data.groupOrder;\n        }\n        var events = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n        var moreElement = this.createMoreEventList(events, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n    };\n    QuickPopups.prototype.closeClick = function (event) {\n        this.dialogEvent = event;\n        if (this.parent.currentView === 'Year' && this.parent.activeCellsData && this.parent.activeCellsData.element) {\n            this.parent.selectCell(this.parent.activeCellsData.element);\n        }\n        this.quickPopupHide();\n        this.morePopup.hide();\n    };\n    QuickPopups.prototype.dialogButtonClick = function (event) {\n        this.dialogEvent = event;\n        this.quickDialog.hide();\n        var target = event.target;\n        var cancelBtn = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        var eventData = this.parent.activeEventData.event;\n        if (target.classList.contains(cls.QUICK_DIALOG_OCCURRENCE_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteOccurrence' : 'EditOccurrence';\n            switch (this.parent.currentAction) {\n                case 'EditOccurrence':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteOccurrence':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteFollowingEvents' : 'EditFollowingEvents';\n            switch (this.parent.currentAction) {\n                case 'EditFollowingEvents':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteFollowingEvents':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_SERIES_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteSeries' : 'EditSeries';\n            switch (this.parent.currentAction) {\n                case 'EditSeries':\n                    this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);\n                    break;\n                case 'DeleteSeries':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_DELETE_CLASS)) {\n            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n        }\n        else if (!cancelBtn.classList.contains(cls.DISABLE_CLASS) && (target.classList.contains(cls.QUICK_DIALOG_ALERT_OK) ||\n            (target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(cls.QUICK_DIALOG_CANCEL_CLASS)))) {\n            this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL);\n            this.parent.eventWindow.eventSave(event, this.l10n.getConstant('ok'));\n        }\n    };\n    QuickPopups.prototype.updateTapHoldEventPopup = function (target) {\n        var selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        if (selectedElements.length > 0) {\n            var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n            var titleContent = (selectedElements.length === 1) ?\n                (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle')) :\n                '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n            this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS).innerHTML = titleContent;\n            if (selectedElements.length > 1) {\n                addClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n        }\n        else {\n            this.parent.selectedElements = [];\n            this.quickPopupHide();\n        }\n    };\n    QuickPopups.prototype.getTimezone = function (event) {\n        var zoneDetails = '';\n        zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n        zoneDetails += zoneDetails === '' ? '' : ' - ';\n        zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n        return zoneDetails;\n    };\n    QuickPopups.prototype.getRecurrenceSummary = function (event) {\n        var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n        if (recurrenceEditor) {\n            var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n            return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n        }\n        return '';\n    };\n    QuickPopups.prototype.getDateFormat = function (date, skeletonString) {\n        return util.capitalizeFirstWord(this.parent.globalize.formatDate(date, { skeleton: skeletonString, calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    QuickPopups.prototype.getDataFromTarget = function (target) {\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            return this.parent.activeEventData.event;\n        }\n        // Deprecated cells data in quick popups\n        var eventObj = {\n            startTime: this.parent.activeCellsData.startTime,\n            endTime: this.parent.activeCellsData.endTime,\n            isAllDay: this.parent.activeCellsData.isAllDay,\n            groupIndex: this.parent.activeCellsData.groupIndex\n        };\n        var cellsData = this.parent.activeCellsData;\n        this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n        return eventObj;\n    };\n    QuickPopups.prototype.beforeQuickDialogClose = function (e) {\n        var _this = this;\n        var args = {\n            event: e.event || this.dialogEvent,\n            type: (isNullOrUndefined(this.parent.activeEventData.event)) ? 'ValidationAlert' :\n                !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])\n                    ? 'RecurrenceAlert' : 'DeleteAlert', cancel: false, data: this.parent.activeEventData.event,\n            element: this.quickDialog.element\n        };\n        this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n            if (!popupCloseArgs.cancel) {\n                _this.parent.eventBase.focusElement(true);\n            }\n        });\n    };\n    QuickPopups.prototype.beforeQuickPopupOpen = function (target, originalEvent) {\n        var _this = this;\n        this.parent.renderTemplates(function () {\n            var isEventPopup = _this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n            var popupType = _this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n            var eventProp = {\n                type: popupType, cancel: false, data: extend({}, _this.getDataFromTarget(target), null, true),\n                target: target, element: _this.quickPopup.element\n            };\n            _this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n                if (popupArgs.cancel) {\n                    _this.quickPopupHide();\n                    _this.destroyPopupButtons('quickPopup');\n                    if (popupArgs.element.classList.contains(cls.POPUP_OPEN)) {\n                        _this.quickPopupClose();\n                    }\n                    util.removeChildren(_this.quickPopup.element);\n                    _this.isMultipleEventSelect = false;\n                }\n                else {\n                    var display = _this.quickPopup.element.style.display;\n                    _this.quickPopup.element.style.display = 'block';\n                    if (_this.parent.isAdaptive) {\n                        _this.quickPopup.element.removeAttribute('style');\n                        _this.quickPopup.element.style.display = 'block';\n                        _this.quickPopup.element.style.height = formatUnit((popupType === 'EditEventInfo') ? 65 : window.innerHeight);\n                    }\n                    else {\n                        var isVirtualScroll = _this.parent.virtualScrollModule && _this.parent.virtualScrollModule.isHorizontalScroll\n                            && !isNullOrUndefined(closest(target, '.' + cls.CONTENT_TABLE_CLASS));\n                        var conTable = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                        _this.quickPopup.offsetX = isVirtualScroll && !_this.parent.enableRtl ? (util.getTranslateX(conTable) + 10) : 10;\n                        _this.quickPopup.offsetY = _this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll ?\n                            _this.quickPopup.offsetY : 0;\n                        _this.quickPopup.collision = { X: _this.parent.enableRtl ? 'flip' : 'none', Y: 'fit' };\n                        _this.quickPopup.position = { X: _this.parent.enableRtl ? 'left' : 'right', Y: _this.parent.enableRtl ? 'bottom' : 'top' };\n                        _this.quickPopup.dataBind();\n                        _this.quickPopup.refreshPosition(null, true);\n                        var collide = isCollide(_this.quickPopup.element, _this.parent.element);\n                        if (collide.indexOf(_this.parent.enableRtl ? 'left' : 'right') > -1) {\n                            _this.quickPopup.offsetX = -target.offsetWidth - 10 - _this.quickPopup.element.offsetWidth;\n                            if (isVirtualScroll && !_this.parent.enableRtl) {\n                                _this.quickPopup.offsetX = util.getTranslateX(conTable) + _this.quickPopup.offsetX;\n                            }\n                            _this.quickPopup.dataBind();\n                            _this.quickPopup.refreshPosition(null, true);\n                            var leftCollide = isCollide(_this.quickPopup.element, _this.parent.element);\n                            if (leftCollide.indexOf('left') > -1) {\n                                _this.quickPopup.position = { X: 'center', Y: 'center' };\n                                _this.quickPopup.collision = { X: 'fit', Y: 'fit' };\n                                _this.quickPopup.offsetX = -(_this.quickPopup.element.offsetWidth / 2);\n                                _this.quickPopup.dataBind();\n                            }\n                        }\n                        if (_this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n                            var translateY = util.getTranslateY(conTable);\n                            _this.quickPopup.offsetY = translateY;\n                            _this.quickPopup.dataBind();\n                            _this.quickPopup.refreshPosition(null, true);\n                        }\n                        if (_this.quickPopup.position.X === 'center' && _this.quickPopup.position.Y === 'center' && !isNullOrUndefined(originalEvent) &&\n                            originalEvent.clientX && originalEvent.clientY) {\n                            var clientX = originalEvent.clientX;\n                            var clientY = originalEvent.clientY;\n                            var targetRect = target.getBoundingClientRect();\n                            var offsetY = originalEvent.offsetY || Math.ceil(clientY - targetRect.y);\n                            var previousOffset = _this.quickPopup.offsetY;\n                            var collision = isCollide(_this.quickPopup.element, target);\n                            var popupRect = _this.quickPopup.element.getBoundingClientRect();\n                            var targetEle = document.elementFromPoint(clientX, clientY);\n                            if (collision.indexOf('top') > -1 || collision.indexOf('bottom') > -1 || closest(targetEle, '.' + cls.POPUP_WRAPPER_CLASS)) {\n                                if (popupRect.top <= clientY &&\n                                    clientY <= popupRect.top + popupRect.height) {\n                                    _this.quickPopup.offsetY = previousOffset - popupRect.height - 10;\n                                    _this.quickPopup.dataBind();\n                                    collision = isCollide(_this.quickPopup.element, _this.parent.element);\n                                    if (collision.indexOf('top') > -1) {\n                                        _this.quickPopup.offsetY = previousOffset + offsetY + 10;\n                                        _this.quickPopup.dataBind();\n                                    }\n                                }\n                                else if (isCollide(_this.quickPopup.element, _this.parent.element).indexOf('bottom') > -1) {\n                                    _this.quickPopup.offsetY =\n                                        previousOffset - offsetY - Math.ceil(popupRect.height) - 10;\n                                    _this.quickPopup.dataBind();\n                                }\n                            }\n                        }\n                    }\n                    if (isEventPopup) {\n                        _this.applyEventColor();\n                    }\n                    _this.quickPopup.element.style.display = display;\n                    _this.quickPopup.dataBind();\n                    _this.quickPopup.show();\n                }\n            });\n        });\n    };\n    QuickPopups.prototype.applyEventColor = function () {\n        var colorField = '';\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n        }\n        else {\n            colorField = 'background-color';\n        }\n        var color = this.parent.activeEventData.element.style[colorField];\n        if (color === '') {\n            return;\n        }\n        var colorEle = this.quickPopup.element.querySelector('.' + cls.POPUP_HEADER_CLASS);\n        var footerEle = this.quickPopup.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n        if (footerEle && footerEle.offsetParent) {\n            colorEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (colorEle) {\n                colorEle.style.borderLeftColor = color;\n                color = \"rgba(\" + color.match(/\\d+/g).join() + \",0.3)\";\n            }\n        }\n        if (colorEle) {\n            colorEle.style.backgroundColor = color;\n        }\n    };\n    QuickPopups.prototype.quickPopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.quickPopup.element.style.top = '0px';\n            return;\n        }\n        if (this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS)) {\n            var subjectElement = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement) {\n                subjectElement.focus();\n            }\n        }\n        else {\n            var editElement = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editElement) {\n                editElement.focus();\n            }\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n        }\n    };\n    QuickPopups.prototype.quickPopupClose = function () {\n        this.parent.eventBase.focusElement();\n        this.quickPopup.relateTo = '.' + cls.WORK_CELLS_CLASS;\n        this.fieldValidator.destroyToolTip();\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.destroyPopupButtons('quickPopup');\n        util.removeChildren(this.quickPopup.element);\n    };\n    QuickPopups.prototype.morePopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.morePopup.element.style.top = '0px';\n            this.morePopup.element.style.left = '0px';\n            this.morePopup.element.style.height = formatUnit(window.innerHeight);\n            return;\n        }\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS).focus();\n        this.morePopup.refreshPosition();\n    };\n    QuickPopups.prototype.morePopupClose = function () {\n        var moreWrapper = this.parent.element.querySelector('.' + cls.MORE_EVENT_WRAPPER_CLASS);\n        if (moreWrapper) {\n            remove(moreWrapper);\n        }\n    };\n    QuickPopups.prototype.popupClose = function (event) {\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.quickPopupHide(true);\n    };\n    QuickPopups.prototype.quickPopupHide = function (hideAnimation) {\n        var _this = this;\n        if (!this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            return;\n        }\n        var isCellPopup = this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS);\n        var popupData;\n        if (isCellPopup) {\n            var formvalidator = this.quickPopup.element.querySelector('.e-formvalidator');\n            if (this.isCrudAction && formvalidator &&\n                !formvalidator.ej2_instances[0].validate()) {\n                return;\n            }\n            var fields = this.parent.eventFields;\n            var saveObj = this.parent.eventWindow.getObjectFromFormData(cls.POPUP_WRAPPER_CLASS);\n            this.parent.eventWindow.setDefaultValueToObject(saveObj);\n            saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n            saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n            saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n            saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.setResourceValues(saveObj);\n            }\n            popupData = saveObj;\n        }\n        else {\n            popupData = this.parent.activeEventData.event;\n        }\n        var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n        var args = {\n            event: this.dialogEvent,\n            type: this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo',\n            cancel: false, data: popupData, element: this.quickPopup.element,\n            target: (isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n            if (!popupCloseArgs.cancel) {\n                if (_this.quickPopup.element.classList.contains('e-popup-open')) {\n                    if (isCellPopup && _this.isCrudAction) {\n                        _this.parent.currentAction = 'Add';\n                        _this.parent.crudModule.addEvent(popupCloseArgs.data);\n                    }\n                    if (hideAnimation) {\n                        var animation = _this.quickPopup.hideAnimation;\n                        _this.quickPopup.hideAnimation = null;\n                        _this.quickPopup.hide();\n                        _this.quickPopup.hideAnimation = animation;\n                    }\n                    else {\n                        _this.quickPopup.hide();\n                    }\n                    _this.isMultipleEventSelect = false;\n                    _this.isCrudAction = false;\n                }\n            }\n        });\n    };\n    QuickPopups.prototype.navigationClick = function (e) {\n        var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n        if (!isNullOrUndefined(navigateEle)) {\n            var date = this.parent.getDateFromElement(e.currentTarget);\n            if (!isNullOrUndefined(date)) {\n                this.closeClick(e);\n                this.parent.setProperties({ selectedDate: date }, true);\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    };\n    QuickPopups.prototype.documentClick = function (e) {\n        var target = e.event.target;\n        var isInsideDialog = !!closest(target, '.e-dialog');\n        var classNames = '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.HEADER_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS +\n            ',.' + cls.WORK_CELLS_CLASS + ',.' + cls.APPOINTMENT_CLASS;\n        if (!isInsideDialog) {\n            classNames += ',.e-popup';\n        }\n        var popupWrap = this.parent.element.querySelector('.' + cls.POPUP_WRAPPER_CLASS);\n        if ((popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames)) || !closest(target, classNames)) {\n            this.quickPopupHide();\n            this.parent.removeNewEventElement();\n        }\n        var tar = this.parent.allowInline ? this.parent.inlineModule.getInlineElement() : null;\n        if (tar && tar !== target) {\n            this.parent.inlineModule.documentClick(tar);\n        }\n        if (closest(target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.HEADER_CELLS_CLASS)) {\n            this.parent.removeNewEventElement();\n        }\n        if (!closest(target, '.' + cls.MORE_POPUP_WRAPPER_CLASS) && (target.classList &&\n            !target.classList.contains(cls.MORE_INDICATOR_CLASS))\n            && (!closest(target, '.' + cls.MORE_POPUP_WRAPPER_CLASS + '.' + cls.POPUP_OPEN))\n            && !closest(target, '.' + cls.WORK_CELLS_CLASS)) {\n            this.morePopup.hide();\n        }\n    };\n    QuickPopups.prototype.onClosePopup = function (event) {\n        if (!isNullOrUndefined(event)) {\n            this.dialogEvent = event;\n        }\n        this.quickPopupHide();\n        if (isNullOrUndefined(event) || (!isNullOrUndefined(event) && event.action !== 'escape') ||\n            (this.parent.inlineModule && this.parent.element.querySelector('.' + cls.INLINE_APPOINTMENT_CLASS))) {\n            this.parent.eventBase.focusElement();\n        }\n    };\n    QuickPopups.prototype.addEventListener = function () {\n        this.parent.on(event.cellClick, this.cellClick, this);\n        this.parent.on(event.eventClick, this.eventClick, this);\n        this.parent.on(event.documentClick, this.documentClick, this);\n        this.parent.on(event.dataReady, this.updateMoreEventContent, this);\n    };\n    QuickPopups.prototype.removeEventListener = function () {\n        this.parent.off(event.cellClick, this.cellClick);\n        this.parent.off(event.eventClick, this.eventClick);\n        this.parent.off(event.documentClick, this.documentClick);\n        this.parent.off(event.dataReady, this.updateMoreEventContent);\n    };\n    QuickPopups.prototype.destroyPopupButtons = function (popupName) {\n        var popup = popupName === 'quickPopup' ? this.quickPopup : this.morePopup;\n        var buttonCollections = [].slice.call(popup.element.querySelectorAll('.e-control.e-btn'));\n        for (var _i = 0, buttonCollections_1 = buttonCollections; _i < buttonCollections_1.length; _i++) {\n            var button = buttonCollections_1[_i];\n            var instance = button.ej2_instances[0];\n            if (instance) {\n                instance.destroy();\n            }\n        }\n        if (popupName === 'quickPopup') {\n            var input = popup.element.querySelector('input.' + cls.SUBJECT_CLASS);\n            if (input) {\n                input.remove();\n            }\n            var form = this.quickPopup.element.querySelector('form.' + cls.FORM_CLASS);\n            if (form) {\n                util.removeChildren(form);\n                form.remove();\n            }\n            this.parent.resetTemplates(['content', 'header', 'footer']);\n        }\n    };\n    QuickPopups.prototype.refreshQuickDialog = function () {\n        this.destroyQuickDialog();\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.refreshQuickPopup = function () {\n        this.destroyQuickPopup();\n        this.renderQuickPopup();\n    };\n    QuickPopups.prototype.refreshMorePopup = function () {\n        this.destroyMorePopup();\n        this.renderMorePopup();\n    };\n    QuickPopups.prototype.destroyQuickDialog = function () {\n        if (this.quickDialog.element) {\n            this.quickDialog.destroy();\n            remove(this.quickDialog.element);\n            this.quickDialog = null;\n        }\n    };\n    QuickPopups.prototype.destroyQuickPopup = function () {\n        if (this.quickPopup.element) {\n            this.destroyPopupButtons('quickPopup');\n            this.quickPopup.destroy();\n            remove(this.quickPopup.element);\n            this.quickPopup = null;\n        }\n    };\n    QuickPopups.prototype.destroyMorePopup = function () {\n        if (this.morePopup.element) {\n            this.destroyPopupButtons('morePopup');\n            this.morePopup.destroy();\n            remove(this.morePopup.element);\n            this.morePopup = null;\n        }\n    };\n    QuickPopups.prototype.destroy = function () {\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.removeEventListener();\n        this.destroyQuickPopup();\n        this.destroyMorePopup();\n        this.destroyQuickDialog();\n        this.dialogEvent = null;\n        this.parent = null;\n        this.l10n = null;\n        this.isCrudAction = null;\n        this.fieldValidator = null;\n        this.isMultipleEventSelect = null;\n    };\n    return QuickPopups;\n}());\nexport { QuickPopups };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}