{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, isNullOrUndefined, addClass, remove, EventHandler, extend, append, detach } from '@syncfusion/ej2-base';\nimport { cldrData, removeClass, getValue, getDefaultDateObject, closest, SanitizeHtmlHelper, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { Query, Deferred } from '@syncfusion/ej2-data';\nimport { CheckBox, Button } from '@syncfusion/ej2-buttons';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { FieldValidator } from './form-validator';\nimport { RecurrenceEditor } from '../../recurrence-editor/recurrence-editor';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\nvar EventWindow = /** @class */function () {\n  function EventWindow(parent) {\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.fields = this.parent.eventFields;\n    this.eventWindowTime = {\n      startTime: new Date(),\n      endTime: new Date()\n    };\n    this.renderEventWindow();\n  }\n  EventWindow.prototype.renderEventWindow = function () {\n    this.element = createElement('div', {\n      id: this.parent.element.id + '_dialog_wrapper'\n    });\n    this.parent.element.appendChild(this.element);\n    var dialogModel = {\n      animationSettings: {\n        effect: 'Zoom'\n      },\n      content: this.getEventWindowContent(),\n      cssClass: cls.EVENT_WINDOW_DIALOG_CLASS,\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      height: this.parent.isAdaptive ? '100%' : 'auto',\n      minHeight: '300px',\n      isModal: true,\n      showCloseIcon: this.parent.isAdaptive ? false : true,\n      target: document.body,\n      visible: false,\n      width: '500px',\n      beforeOpen: this.onBeforeOpen.bind(this),\n      beforeClose: this.onBeforeClose.bind(this)\n    };\n    if (this.parent.isAdaptive) {\n      dialogModel.cssClass = cls.EVENT_WINDOW_DIALOG_CLASS + ' ' + cls.DEVICE_CLASS;\n      if (!this.parent.editorHeaderTemplate) {\n        dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n      }\n    } else {\n      if (!this.parent.editorFooterTemplate) {\n        this.renderDialogButtons(dialogModel);\n      }\n      if (!this.parent.editorHeaderTemplate) {\n        dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n      }\n    }\n    this.dialogObject = new Dialog(dialogModel, this.element);\n    if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n      this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n    }\n    this.addEventHandlers();\n    addClass([this.element.parentElement], cls.EVENT_WINDOW_DIALOG_CLASS + '-container');\n    EventHandler.add(this.dialogObject.element, 'keydown', this.preventEventSave, this);\n    this.applyFormValidation();\n  };\n  EventWindow.prototype.renderDialogButtons = function (dialogButton) {\n    dialogButton.buttons = [{\n      buttonModel: {\n        content: this.l10n.getConstant('deleteButton'),\n        cssClass: cls.DELETE_EVENT_CLASS,\n        disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n      },\n      click: this.eventDelete.bind(this)\n    }, {\n      buttonModel: {\n        content: this.l10n.getConstant('saveButton'),\n        cssClass: 'e-primary ' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS,\n        isPrimary: true,\n        disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n      },\n      click: this.eventSave.bind(this)\n    }, {\n      buttonModel: {\n        cssClass: cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS,\n        content: this.l10n.getConstant('cancelButton')\n      },\n      click: this.dialogClose.bind(this)\n    }];\n  };\n  EventWindow.prototype.addEventHandlers = function () {\n    var backIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_BACK_ICON_CLASS);\n    var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n    if (this.parent.isAdaptive && !isNullOrUndefined(backIcon) && !isNullOrUndefined(saveIcon)) {\n      EventHandler.add(backIcon, 'click', this.dialogClose, this);\n      EventHandler.add(saveIcon, 'click', this.eventSave, this);\n    }\n  };\n  EventWindow.prototype.refresh = function () {\n    this.destroy(true);\n    this.renderEventWindow();\n  };\n  EventWindow.prototype.refreshRecurrenceEditor = function () {\n    if (this.recurrenceEditor) {\n      var recurrenceEditor = this.recurrenceEditor.element;\n      this.recurrenceEditor.destroy();\n      this.createRecurrenceEditor(recurrenceEditor);\n    }\n  };\n  EventWindow.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n    if (this.parent.editorTemplate) {\n      this.recurrenceEditor = recurrenceEditor;\n    }\n  };\n  EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\n    this.parent.currentAction = type;\n    this.parent.removeNewEventElement();\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide(true);\n    }\n    this.parent.inlineModule.removeInlineAppointmentElement();\n    if (type === 'Add') {\n      var eventObj = {};\n      this.cellClickAction = !isEventData;\n      this.parent.activeCellsData = data;\n      var event_1 = data;\n      if (this.cellClickAction) {\n        this.convertToEventData(event_1, eventObj);\n      } else {\n        this.parent.activeCellsData = {\n          startTime: event_1.startTime || event_1[this.fields.startTime],\n          endTime: event_1.endTime || event_1[this.fields.endTime],\n          isAllDay: event_1.isAllDay || event_1[this.fields.isAllDay],\n          element: event_1.element,\n          groupIndex: event_1.groupIndex\n        };\n        eventObj = event_1;\n      }\n      data = eventObj;\n    }\n    if (!isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n      this.parent.resetTemplates(['editorHeaderTemplate']);\n      if (this.parent.isAdaptive && !this.parent.editorFooterTemplate) {\n        this.dialogObject.header = this.createAdaptiveHeaderElement(data);\n      } else {\n        this.dialogObject.header = this.getDialogHeader(data);\n      }\n    }\n    if (!isNullOrUndefined(this.parent.editorFooterTemplate)) {\n      this.parent.resetTemplates(['editorFooterTemplate']);\n      this.dialogObject.footerTemplate = this.getDialogFooter(data);\n    }\n    if (!isNullOrUndefined(this.parent.editorHeaderTemplate) || !isNullOrUndefined(this.parent.editorFooterTemplate)) {\n      this.dialogObject.dataBind();\n      this.addEventHandlers();\n    }\n    if (!isNullOrUndefined(this.parent.editorTemplate)) {\n      this.renderFormElements(this.element.querySelector('.e-schedule-form'), data, type, repeatType);\n    } else {\n      this.setEditorContent(data, type, repeatType);\n    }\n  };\n  EventWindow.prototype.setEditorContent = function (data, type, repeatType) {\n    if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n    }\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n    }\n    switch (type) {\n      case 'Add':\n        this.onCellDetailsUpdate(data, repeatType);\n        break;\n      case 'Save':\n      case 'EditOccurrence':\n      case 'EditSeries':\n      case 'EditFollowingEvents':\n        if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n          addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n        }\n        this.cellClickAction = false;\n        this.onEventDetailsUpdate(data);\n        break;\n    }\n  };\n  EventWindow.prototype.setDialogContent = function () {\n    this.dialogObject.content = this.getEventWindowContent();\n    this.dialogObject.dataBind();\n    this.applyFormValidation();\n  };\n  EventWindow.prototype.setDialogHeader = function () {\n    if (!isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n      this.parent.resetTemplates(['editorHeaderTemplate']);\n      if (this.parent.isAdaptive && !this.parent.editorFooterTemplate) {\n        this.dialogObject.header = this.createAdaptiveHeaderElement();\n      } else {\n        this.dialogObject.header = this.getDialogHeader();\n      }\n    } else if (this.parent.isAdaptive) {\n      this.dialogObject.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n    } else {\n      this.dialogObject.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n    }\n    this.dialogObject.dataBind();\n    this.addEventHandlers();\n  };\n  EventWindow.prototype.setDialogFooter = function () {\n    if (!isNullOrUndefined(this.parent.editorFooterTemplate)) {\n      this.parent.resetTemplates(['editorFooterTemplate']);\n      this.dialogObject.footerTemplate = this.getDialogFooter();\n    } else if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorFooterTemplate)) {\n      this.renderDialogButtons(this.dialogObject);\n    } else if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorFooterTemplate)) {\n      this.dialogObject.footerTemplate = null;\n    }\n    this.dialogObject.dataBind();\n  };\n  EventWindow.prototype.createAdaptiveHeaderElement = function (data) {\n    var header = createElement('div', {\n      className: 'e-title-header'\n    });\n    var headerBackIcon = createElement('div', {\n      className: 'e-back-icon e-icons'\n    });\n    header.appendChild(headerBackIcon);\n    var headerTemplate = this.getDialogHeader(data);\n    header.appendChild(headerTemplate);\n    var headerSaveIcon = createElement('div', {\n      className: 'e-save-icon e-icons'\n    });\n    header.appendChild(headerSaveIcon);\n    return header;\n  };\n  EventWindow.prototype.getDialogHeader = function (args) {\n    var headerTemplate = [];\n    var headerTemplateId = this.parent.element.id + '_editorHeaderTemplate';\n    var temHeaderDiv = document.createElement('div');\n    headerTemplate = [].slice.call(this.parent.getEditorHeaderTemplate()(args || {}, this.parent, 'editorHeaderTemplate', headerTemplateId, false));\n    append(headerTemplate, temHeaderDiv);\n    return temHeaderDiv;\n  };\n  EventWindow.prototype.getDialogFooter = function (args) {\n    var footerTemplate = [];\n    var footerTemplateId = this.parent.element.id + '_editorFooterTemplate';\n    var temFooterDiv = document.createElement('div');\n    footerTemplate = [].slice.call(this.parent.getEditorFooterTemplate()(args || {}, this.parent, 'editorFooterTemplate', footerTemplateId, false));\n    append(footerTemplate, temFooterDiv);\n    return temFooterDiv;\n  };\n  EventWindow.prototype.preventEventSave = function (e) {\n    if (this.parent && !this.parent.allowKeyboardInteraction && e.code === 'Enter') {\n      this.isEnterKey = true;\n    }\n  };\n  EventWindow.prototype.onBeforeOpen = function (args) {\n    var _this = this;\n    var endTime = this.eventData[this.fields.endTime].getTime();\n    var eventProp = {\n      type: 'Editor',\n      data: this.eventData,\n      cancel: false,\n      element: this.element,\n      target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n    };\n    if (this.cellClickAction) {\n      eventProp.duration = this.getSlotDuration();\n    }\n    var saveObj = this.getInstance(cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n    if (saveObj) {\n      saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n      saveObj.dataBind();\n    }\n    var deleteObj = this.getInstance(cls.DELETE_EVENT_CLASS);\n    if (deleteObj) {\n      deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n      deleteObj.dataBind();\n    }\n    var callBackPromise = new Deferred();\n    this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n      args.cancel = popupArgs.cancel;\n      args.maxHeight = _this.parent.isAdaptive ? 'max-content' : args.maxHeight;\n      _this.duration = _this.cellClickAction ? popupArgs.duration : null;\n      if (_this.eventData[_this.fields.endTime].getTime() === endTime && !_this.cellClickAction && _this.eventData[_this.fields.endTime].getHours() === 0 && _this.eventData[_this.fields.endTime].getMinutes() === 0) {\n        _this.eventData = extend({}, _this.eventData, null, true);\n        _this.trimAllDay(_this.eventData);\n      }\n      _this.refreshDateTimePicker(_this.duration);\n      if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {\n        var startObj = _this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        var endObj = _this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n        endObj.value = new Date(startObj.value.getTime() + util.MS_PER_MINUTE * popupArgs.duration);\n        endObj.dataBind();\n      }\n      if (_this.parent.editorTemplate && _this.element.querySelector('.e-recurrenceeditor') && !_this.recurrenceEditor) {\n        _this.recurrenceEditor = _this.getInstance('e-recurrenceeditor');\n      }\n      callBackPromise.resolve(args);\n    });\n    return callBackPromise;\n  };\n  EventWindow.prototype.onBeforeClose = function (args) {\n    var _this = this;\n    if (args.isInteracted) {\n      this.isCrudAction = false;\n    }\n    var eventProp = {\n      type: 'Editor',\n      event: args.event || this.dialogEvent,\n      data: this.eventCrudData,\n      cancel: false,\n      element: this.element,\n      target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n    };\n    var callBackPromise = new Deferred();\n    this.parent.trigger(event.popupClose, eventProp, function (popupArgs) {\n      args.cancel = popupArgs.cancel;\n      if (!popupArgs.cancel) {\n        if (_this.isCrudAction) {\n          args.cancel = _this.processCrudActions(popupArgs.data);\n          _this.isCrudAction = args.cancel;\n        }\n        if (!_this.isCrudAction) {\n          _this.resetForm();\n          _this.parent.eventBase.focusElement(true);\n          _this.eventCrudData = null;\n        }\n      }\n      callBackPromise.resolve(args);\n    });\n    return callBackPromise;\n  };\n  EventWindow.prototype.getEventWindowContent = function () {\n    var container = createElement('div', {\n      className: cls.FORM_CONTAINER_CLASS\n    });\n    var form = createElement('form', {\n      id: this.parent.element.id + 'EditForm',\n      className: cls.FORM_CLASS,\n      attrs: {\n        onsubmit: 'return false;'\n      }\n    });\n    this.renderFormElements(form);\n    container.appendChild(form);\n    return container;\n  };\n  EventWindow.prototype.renderFormElements = function (form, args, type, repeatType) {\n    var _this = this;\n    if (!isNullOrUndefined(this.parent.editorTemplate)) {\n      if (args) {\n        if (this.fieldValidator) {\n          this.fieldValidator.destroy();\n          this.fieldValidator = null;\n        }\n        if (this.recurrenceEditor) {\n          this.recurrenceEditor.destroy();\n          this.recurrenceEditor = null;\n        }\n        this.destroyComponents();\n        this.parent.resetTemplates(['editorTemplate']);\n        EventHandler.clearEvents(form);\n        if (!this.parent.isReact) {\n          var formElements = [].slice.call(form.children);\n          for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {\n            var element = formElements_1[_i];\n            remove(element);\n          }\n        }\n      }\n      var templateId = this.parent.element.id + '_editorTemplate';\n      var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n      append(tempEle, form);\n      this.parent.renderTemplates(function () {\n        if (_this.element) {\n          _this.applyFormValidation();\n          if (args) {\n            _this.setEditorContent(args, type, repeatType);\n          }\n        }\n      });\n    } else {\n      form.appendChild(this.getDefaultEventWindowContent());\n      if (args) {\n        this.setEditorContent(args, type, repeatType);\n      }\n    }\n  };\n  EventWindow.prototype.getDefaultEventWindowContent = function () {\n    var parentDiv = this.createDivElement(cls.EVENT_WINDOW_DIALOG_PARENT_CLASS);\n    var titleLocationDiv = this.createDivElement(cls.EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n    parentDiv.appendChild(titleLocationDiv);\n    titleLocationDiv.appendChild(this.renderTextBox(cls.SUBJECT_CLASS));\n    titleLocationDiv.appendChild(this.renderTextBox(cls.LOCATION_CLASS));\n    var startEndDateTimeDiv = this.createDivElement(cls.EVENT_WINDOW_START_END_DIV_CLASS);\n    parentDiv.appendChild(startEndDateTimeDiv);\n    startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n    startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_END_CLASS));\n    var allDayTimezoneDiv = this.createDivElement(cls.EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n    parentDiv.appendChild(allDayTimezoneDiv);\n    allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.EVENT_WINDOW_ALL_DAY_CLASS));\n    allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.TIME_ZONE_CLASS));\n    var timezoneParentDiv = this.createDivElement(cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n    parentDiv.appendChild(timezoneParentDiv);\n    timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_START_TZ_CLASS));\n    timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_END_TZ_CLASS));\n    var repeatParentDiv = this.createDivElement(cls.EVENT_WINDOW_REPEAT_DIV_CLASS);\n    parentDiv.appendChild(repeatParentDiv);\n    var repeatDiv = this.renderCheckBox(cls.EVENT_WINDOW_REPEAT_CLASS);\n    var repeatEditContainer = createElement('span', {\n      className: REPEAT_CONTAINER_CLASS\n    });\n    var button = createElement('button', {\n      className: REPEAT_BUTTON_CLASS,\n      attrs: {\n        type: 'button',\n        'title': this.l10n.getConstant('editRecurrence')\n      }\n    });\n    this.buttonObj = new Button({\n      iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons',\n      cssClass: 'e-medium ' + this.parent.cssClass\n    });\n    repeatEditContainer.appendChild(button);\n    this.buttonObj.appendTo(button);\n    repeatDiv.appendChild(repeatEditContainer);\n    repeatParentDiv.appendChild(repeatDiv);\n    if (this.parent.isAdaptive) {\n      EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n    } else {\n      this.createRecurrenceEditor(parentDiv);\n    }\n    if (this.parent.resourceCollection.length > 0) {\n      var resourceParentDiv = this.createDivElement(cls.EVENT_WINDOW_RESOURCES_DIV_CLASS);\n      for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\n        var resource = _a[_i];\n        resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n      }\n      parentDiv.appendChild(resourceParentDiv);\n    }\n    var description = this.createDivElement(cls.DESCRIPTION_CLASS + '-row');\n    description.appendChild(this.renderTextBox(cls.DESCRIPTION_CLASS));\n    parentDiv.appendChild(description);\n    var submit = createElement('button', {\n      attrs: {\n        type: 'hidden',\n        title: 'submit'\n      }\n    });\n    submit.style.display = 'none';\n    parentDiv.appendChild(submit);\n    return parentDiv;\n  };\n  EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\n    var recurrenceEditor = createElement('div', {\n      id: this.parent.element.id + '_recurrence_editor'\n    });\n    parentDiv.appendChild(recurrenceEditor);\n    this.recurrenceEditor = this.renderRecurrenceEditor();\n    this.recurrenceEditor.appendTo(recurrenceEditor);\n    this.updateMinMaxDateToEditor();\n  };\n  EventWindow.prototype.createDivElement = function (className) {\n    return createElement('div', {\n      className: className\n    });\n  };\n  EventWindow.prototype.createInputElement = function (className, fieldName, type) {\n    return createElement(type || 'input', {\n      className: className,\n      attrs: {\n        type: 'text',\n        name: fieldName,\n        value: '',\n        id: fieldName\n      }\n    });\n  };\n  EventWindow.prototype.getSlotDuration = function () {\n    return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n  };\n  EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\n    var dateTimeDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    dateTimeDiv.appendChild(dateTimeInput);\n    var dateTimePicker = new DateTimePicker({\n      change: changeEvent,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      calendarMode: this.parent.calendarMode,\n      min: this.parent.minDate,\n      max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n      cssClass: this.parent.cssClass,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      floatLabelType: 'Always',\n      strictMode: true,\n      timeFormat: this.parent.activeViewOptions.timeFormat,\n      format: (isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.parent.activeViewOptions.timeFormat,\n      placeholder: this.getFieldLabel(value),\n      step: this.getSlotDuration(),\n      width: '100%'\n    });\n    dateTimePicker.appendTo(dateTimeInput);\n    return dateTimeDiv;\n  };\n  EventWindow.prototype.refreshDateTimePicker = function (duration) {\n    var elementSelector = '.' + cls.EVENT_WINDOW_START_CLASS + ',.' + cls.EVENT_WINDOW_END_CLASS;\n    var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n    for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {\n      var element = startEndElement_1[_i];\n      var instance = element.ej2_instances[0];\n      instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n      instance.timeFormat = this.parent.activeViewOptions.timeFormat;\n      instance.step = duration || this.getSlotDuration();\n      instance.dataBind();\n    }\n  };\n  EventWindow.prototype.onTimeChange = function () {\n    var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n    if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n      var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n      var duration = 0;\n      if (this.cellClickAction) {\n        duration = util.MS_PER_MINUTE * this.duration;\n        this.eventWindowTime.startTime = startObj.value;\n      } else {\n        duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n      }\n      var endDate = isNullOrUndefined(startObj.value) ? null : new Date(startObj.value.getTime() + duration);\n      if (this.cellClickAction) {\n        this.eventWindowTime.endTime = endDate;\n      }\n      endObj.value = endDate;\n      endObj.dataBind();\n    }\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n    }\n  };\n  EventWindow.prototype.renderResourceDetails = function (resourceData) {\n    var _this = this;\n    var fieldName = resourceData.field;\n    var value = 'e-' + fieldName;\n    var labelValue = resourceData.title;\n    var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n    var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    resourceDiv.appendChild(resourceInput);\n    var resourceTemplate = function (data) {\n      return SanitizeHtmlHelper.sanitize(\"<div class=\\\"e-resource-template\\\">\\n                <div class=\\\"e-resource-color\\\" data-resource-color=\\\"\" + data[resourceData.colorField] + \"\\\"></div>\\n                <div class=\\\"e-resource-text\\\">\" + data[resourceData.textField] + \"</div></div>\");\n    };\n    initializeCSPTemplate(resourceTemplate, resourceData);\n    if (resourceData.allowMultiple) {\n      var listObj = new MultiSelect({\n        enableRtl: this.parent.enableRtl,\n        enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n        cssClass: this.parent.cssClass || '',\n        dataSource: resourceData.dataSource,\n        change: this.onMultiselectResourceChange.bind(this),\n        itemTemplate: resourceTemplate,\n        fields: {\n          text: resourceData.textField,\n          value: resourceData.idField\n        },\n        htmlAttributes: {\n          'name': fieldName\n        },\n        floatLabelType: 'Always',\n        placeholder: labelValue,\n        popupHeight: '230px',\n        popupWidth: '447px',\n        mode: 'Box',\n        open: function (args) {\n          Promise.resolve().then(function () {\n            _this.applyStylesAfterRender(args);\n          });\n        }\n      });\n      listObj.appendTo(resourceInput);\n    } else {\n      var dropDownList = new DropDownList({\n        cssClass: this.parent.cssClass || '',\n        change: this.onDropdownResourceChange.bind(this),\n        dataSource: resourceData.dataSource,\n        enableRtl: this.parent.enableRtl,\n        fields: {\n          text: resourceData.textField,\n          value: resourceData.idField\n        },\n        htmlAttributes: {\n          'name': fieldName\n        },\n        floatLabelType: 'Always',\n        placeholder: labelValue,\n        popupHeight: '230px',\n        popupWidth: '447px',\n        itemTemplate: resourceTemplate,\n        open: function (args) {\n          Promise.resolve().then(function () {\n            _this.applyStylesAfterRender(args);\n          });\n        }\n      });\n      dropDownList.appendTo(resourceInput);\n    }\n    return resourceDiv;\n  };\n  EventWindow.prototype.applyStylesAfterRender = function (args) {\n    if (!args.popup || !args.popup.element) {\n      return;\n    }\n    var resourceColors = args.popup.element.querySelectorAll('.e-resource-color[data-resource-color]');\n    resourceColors.forEach(function (element) {\n      var color = element.getAttribute('data-resource-color');\n      if (color) {\n        element.style.backgroundColor = color;\n      }\n    });\n  };\n  EventWindow.prototype.renderDropDown = function (value) {\n    var _this = this;\n    var fieldName = this.getFieldName(value);\n    var timezoneDiv = this.createDivElement(value + '-container');\n    var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    timezoneDiv.appendChild(timezoneInput);\n    var dropDownList = new DropDownList({\n      allowFiltering: true,\n      change: this.onTimezoneChange.bind(this),\n      cssClass: this.parent.cssClass || '',\n      dataSource: this.parent.timezoneDataSource,\n      enableRtl: this.parent.enableRtl,\n      fields: {\n        text: 'Text',\n        value: 'Value'\n      },\n      filterBarPlaceholder: this.parent.localeObj.getConstant('searchTimezone'),\n      noRecordsTemplate: this.parent.localeObj.getConstant('noRecords'),\n      filtering: function (e) {\n        var query = new Query();\n        query = e.text !== '' ? query.where('Text', 'contains', e.text, true) : query;\n        e.updateData(_this.parent.timezoneDataSource, query);\n      },\n      htmlAttributes: {\n        'title': this.getFieldLabel(value),\n        'name': fieldName\n      },\n      floatLabelType: 'Always',\n      placeholder: this.getFieldLabel(value),\n      popupHeight: '230px'\n    });\n    dropDownList.appendTo(timezoneInput);\n    return timezoneDiv;\n  };\n  EventWindow.prototype.onMultiselectResourceChange = function (args) {\n    if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n      return;\n    }\n    var resourceCollection = this.parent.resourceBase.resourceCollection;\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n    for (var i = 0; i < resourceCollection.length; i++) {\n      if (resourceCollection[parseInt(i.toString(), 10)].field === fieldName && i < resourceCollection.length - 1) {\n        var resObject = this.createInstance(i);\n        var datasource = [];\n        var _loop_1 = function (j) {\n          var resourceModel = resourceCollection[i + 1];\n          // eslint-disable-next-line max-len\n          var filter = resourceModel.dataSource.filter(function (data) {\n            return data[resourceModel.groupIDField] === args.value[parseInt(j.toString(), 10)];\n          })[0];\n          var groupId = !isNullOrUndefined(filter) ? filter[resourceCollection[i + 1].groupIDField] : null;\n          var filterRes = this_1.filterDatasource(i, groupId);\n          datasource = datasource.concat(filterRes);\n        };\n        var this_1 = this;\n        for (var j = 0; j < args.value.length; j++) {\n          _loop_1(j);\n        }\n        resObject.dataSource = datasource;\n        resObject.dataBind();\n      }\n    }\n  };\n  EventWindow.prototype.createInstance = function (index) {\n    var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n    var resObject = this.element.querySelector('.e-' + resourceData.field).ej2_instances[0];\n    resObject.clear();\n    return resObject;\n  };\n  EventWindow.prototype.onDropdownResourceChange = function (args) {\n    if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n      return;\n    }\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n    var resourceCollection = this.parent.resourceBase.resourceCollection;\n    for (var i = 0; i < resourceCollection.length; i++) {\n      if (i < resourceCollection.length - 1 && resourceCollection[parseInt(i.toString(), 10)].field === fieldName) {\n        var resObj = this.createInstance(i);\n        var groupId = args.itemData[resourceCollection[parseInt(i.toString(), 10)].idField];\n        resObj.dataSource = this.filterDatasource(i, groupId);\n        resObj.dataBind();\n        var resValue = resObj.dataSource.length > 0 ? resObj.dataSource[0][resourceCollection[i + 1].idField] : null;\n        resObj.value = resourceCollection[i + 1].allowMultiple ? [resValue] : resValue;\n        resObj.dataBind();\n      }\n    }\n  };\n  EventWindow.prototype.filterDatasource = function (index, groupId) {\n    var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n    return resourceData.dataSource.filter(function (data) {\n      return data[resourceData.groupIDField] === groupId;\n    });\n  };\n  EventWindow.prototype.onTimezoneChange = function (args) {\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n    if (fieldName === this.parent.eventFields.startTimezone) {\n      var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n      var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n      endTimezoneObj.value = startTimezoneObj.value;\n      endTimezoneObj.dataBind();\n    }\n  };\n  EventWindow.prototype.renderCheckBox = function (value) {\n    var checkBoxDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    checkBoxDiv.appendChild(checkBoxInput);\n    var checkBox = new CheckBox({\n      change: this.onChange.bind(this),\n      cssClass: value + ' ' + this.parent.cssClass,\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      label: this.getFieldLabel(value)\n    });\n    checkBox.appendTo(checkBoxInput);\n    checkBoxInput.setAttribute('name', fieldName);\n    if (fieldName === 'Repeat') {\n      this.repeatStatus = checkBox;\n    }\n    return checkBoxDiv;\n  };\n  EventWindow.prototype.renderTextBox = function (value) {\n    var textBoxDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var elementType = value === cls.DESCRIPTION_CLASS ? 'textarea' : 'input';\n    var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName, elementType);\n    textBoxDiv.appendChild(textBoxInput);\n    Input.createInput({\n      element: textBoxInput,\n      floatLabelType: 'Always',\n      properties: {\n        enableRtl: this.parent.enableRtl,\n        placeholder: this.getFieldLabel(value)\n      }\n    });\n    return textBoxDiv;\n  };\n  EventWindow.prototype.getFieldName = function (name) {\n    var fieldName = '';\n    switch (name) {\n      case cls.SUBJECT_CLASS:\n        fieldName = this.fields.subject;\n        break;\n      case cls.LOCATION_CLASS:\n        fieldName = this.fields.location;\n        break;\n      case cls.EVENT_WINDOW_START_CLASS:\n        fieldName = this.fields.startTime;\n        break;\n      case cls.EVENT_WINDOW_END_CLASS:\n        fieldName = this.fields.endTime;\n        break;\n      case cls.DESCRIPTION_CLASS:\n        fieldName = this.fields.description;\n        break;\n      case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n        fieldName = this.fields.isAllDay;\n        break;\n      case cls.EVENT_WINDOW_START_TZ_CLASS:\n        fieldName = this.fields.startTimezone;\n        break;\n      case cls.EVENT_WINDOW_END_TZ_CLASS:\n        fieldName = this.fields.endTimezone;\n        break;\n      case cls.TIME_ZONE_CLASS:\n        fieldName = 'Timezone';\n        break;\n      case cls.EVENT_WINDOW_REPEAT_CLASS:\n        fieldName = 'Repeat';\n        break;\n    }\n    return fieldName;\n  };\n  EventWindow.prototype.getFieldLabel = function (fieldName) {\n    var labelText = '';\n    switch (fieldName) {\n      case cls.SUBJECT_CLASS:\n        labelText = this.parent.editorTitles.subject;\n        break;\n      case cls.LOCATION_CLASS:\n        labelText = this.parent.editorTitles.location;\n        break;\n      case cls.DESCRIPTION_CLASS:\n        labelText = this.parent.editorTitles.description;\n        break;\n      case cls.EVENT_WINDOW_START_CLASS:\n        labelText = this.parent.editorTitles.startTime;\n        break;\n      case cls.EVENT_WINDOW_END_CLASS:\n        labelText = this.parent.editorTitles.endTime;\n        break;\n      case cls.EVENT_WINDOW_START_TZ_CLASS:\n        labelText = this.parent.editorTitles.startTimezone;\n        break;\n      case cls.EVENT_WINDOW_END_TZ_CLASS:\n        labelText = this.parent.editorTitles.endTimezone;\n        break;\n      case cls.EVENT_WINDOW_REPEAT_CLASS:\n        labelText = this.parent.editorTitles.recurrenceRule;\n        break;\n      case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n        labelText = this.parent.editorTitles.isAllDay;\n        break;\n      case cls.TIME_ZONE_CLASS:\n        labelText = this.l10n.getConstant('timezone');\n        break;\n    }\n    return labelText;\n  };\n  EventWindow.prototype.onChange = function (args) {\n    if (args.event && args.event.target) {\n      var targetSelector = \".\" + cls.EVENT_WINDOW_ALL_DAY_CLASS + \",.\" + cls.TIME_ZONE_CLASS + \",.\" + cls.EVENT_WINDOW_REPEAT_CLASS;\n      var target = closest(args.event.target, targetSelector);\n      if (target.classList.contains(cls.EVENT_WINDOW_ALL_DAY_CLASS)) {\n        this.onAllDayChange(args.checked);\n      } else if (target.classList.contains(cls.TIME_ZONE_CLASS)) {\n        this.timezoneChangeStyle(args.checked);\n      } else if (target.classList.contains(cls.EVENT_WINDOW_REPEAT_CLASS)) {\n        this.onRepeatChange(args.checked);\n      }\n    }\n  };\n  EventWindow.prototype.renderRepeatDialog = function () {\n    var element = createElement('div');\n    this.repeatDialogObject = new Dialog({\n      header: this.l10n.getConstant('recurrence'),\n      visible: false,\n      content: '<div class=\"e-rec-editor\"></div>',\n      closeOnEscape: true,\n      width: '90%',\n      buttons: [{\n        click: this.repeatSaveDialog.bind(this),\n        buttonModel: {\n          content: this.l10n.getConstant('save'),\n          cssClass: 'e-save',\n          isPrimary: true\n        }\n      }, {\n        click: this.repeatCancelDialog.bind(this),\n        buttonModel: {\n          cssClass: 'e-cancel',\n          content: this.l10n.getConstant('cancel')\n        }\n      }],\n      target: this.element,\n      animationSettings: {\n        effect: 'Zoom'\n      },\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      isModal: true,\n      cssClass: REPEAT_DIALOG_CLASS,\n      open: this.repeatOpenDialog.bind(this)\n    });\n    this.element.appendChild(element);\n    this.repeatDialogObject.appendTo(element);\n    this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n  };\n  EventWindow.prototype.loadRecurrenceEditor = function () {\n    this.repeatDialogObject.show();\n    if (this.recurrenceEditor && this.repeatRule) {\n      this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n    }\n  };\n  EventWindow.prototype.onRepeatChange = function (state) {\n    if (state) {\n      if (!this.repeatDialogObject) {\n        this.renderRepeatDialog();\n      }\n      this.recurrenceEditor.setProperties({\n        startDate: this.repeatStartDate,\n        selectedType: 0\n      });\n      this.loadRecurrenceEditor();\n    } else {\n      if (this.repeatDialogObject) {\n        this.repeatDialogObject.hide();\n      }\n      this.repeatRule = '';\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        this.updateRepeatLabel(this.repeatRule);\n      }\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n      addClass([element], HIDE_STYLE_CLASS);\n    }\n  };\n  EventWindow.prototype.repeatSaveDialog = function () {\n    this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n    var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n    if (this.recurrenceEditor.getRecurrenceRule()) {\n      removeClass([element], HIDE_STYLE_CLASS);\n    } else {\n      addClass([element], HIDE_STYLE_CLASS);\n      this.repeatStatus.setProperties({\n        checked: false\n      });\n    }\n    this.updateRepeatLabel(this.repeatRule);\n    this.closeRepeatDialog();\n  };\n  EventWindow.prototype.closeRepeatDialog = function () {\n    this.repeatDialogObject.hide();\n  };\n  EventWindow.prototype.repeatCancelDialog = function () {\n    this.closeRepeatDialog();\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n    }\n    if (!this.repeatTempRule) {\n      this.repeatStatus.setProperties({\n        checked: false\n      });\n    }\n  };\n  EventWindow.prototype.repeatOpenDialog = function () {\n    this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n  };\n  EventWindow.prototype.onCellDetailsUpdate = function (eventObj, repeatType) {\n    if (!this.parent.eventSettings.allowAdding) {\n      return;\n    }\n    if (this.parent.isAdaptive && repeatType && !this.repeatDialogObject) {\n      this.renderRepeatDialog();\n    }\n    this.element.querySelector('.' + cls.FORM_CLASS).removeAttribute('data-id');\n    if (isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n      this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n    }\n    eventObj.Timezone = false;\n    this.repeatStartDate = eventObj[this.fields.startTime];\n    this.repeatRule = '';\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n      eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\n    }\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n      eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n    }\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n      eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n    }\n    this.showDetails(eventObj);\n    if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n      this.repeatRule = eventObj[this.fields.recurrenceRule];\n    }\n    var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n    if (deleteButton) {\n      addClass([deleteButton], cls.DISABLE_CLASS);\n    }\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.setProperties({\n        startDate: eventObj[this.fields.startTime],\n        selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ? this.recurrenceEditor.selectedType : 0\n      });\n      this.repeatRule = this.recurrenceEditor.value;\n    }\n    if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n      if (eventObj[this.fields.recurrenceRule] || repeatType) {\n        removeClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: true\n        });\n      } else {\n        addClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: false\n        });\n      }\n      this.updateRepeatLabel(this.repeatRule);\n    } else {\n      var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n      this.disableButton(saveButton, false);\n    }\n    this.dialogObject.show();\n  };\n  EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\n    if (cellsData.subject) {\n      eventObj[this.fields.subject] = cellsData.subject;\n    }\n    eventObj[this.fields.startTime] = cellsData.startTime;\n    eventObj[this.fields.endTime] = cellsData.endTime;\n    eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n    if (cellsData.RecurrenceRule) {\n      eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n    }\n    if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.setResourceValues(eventObj);\n    }\n  };\n  EventWindow.prototype.applyFormValidation = function () {\n    var form = this.element.querySelector('.' + cls.FORM_CLASS);\n    if (!form) {\n      return;\n    }\n    var getValidationRule = function (rules) {\n      return rules && Object.keys(rules).length > 0 ? rules : undefined;\n    };\n    var rules = {};\n    var subjectRule = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n    if (!isNullOrUndefined(subjectRule)) {\n      rules[this.parent.eventSettings.fields.subject.name] = subjectRule;\n    }\n    var locationRule = getValidationRule(this.parent.eventSettings.fields.location.validation);\n    if (!isNullOrUndefined(locationRule)) {\n      rules[this.parent.eventSettings.fields.location.name] = locationRule;\n    }\n    var startTimeRule = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n    if (!isNullOrUndefined(startTimeRule)) {\n      rules[this.parent.eventSettings.fields.startTime.name] = startTimeRule;\n    }\n    var endTimeRule = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n    if (!isNullOrUndefined(endTimeRule)) {\n      rules[this.parent.eventSettings.fields.endTime.name] = endTimeRule;\n    }\n    var descriptionRule = getValidationRule(this.parent.eventSettings.fields.description.validation);\n    if (!isNullOrUndefined(descriptionRule)) {\n      rules[this.parent.eventSettings.fields.description.name] = descriptionRule;\n    }\n    if (this.fieldValidator) {\n      this.fieldValidator.destroy();\n      this.fieldValidator = null;\n    }\n    this.fieldValidator = new FieldValidator();\n    this.fieldValidator.renderFormValidator(form, rules, this.element, this.parent.locale);\n  };\n  EventWindow.prototype.showDetails = function (eventData) {\n    this.eventData = eventData;\n    var eventObj = extend({}, eventData, null, true);\n    var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n    if ((!this.cellClickAction || this.cellClickAction && !isNullOrUndefined(this.parent.editorTemplate)) && eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n      this.trimAllDay(eventObj);\n    }\n    var keyNames = Object.keys(eventObj);\n    for (var _i = 0, formElements_2 = formElements; _i < formElements_2.length; _i++) {\n      var curElement = formElements_2[_i];\n      var columnName = curElement.name || this.getColumnName(curElement);\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        if (keyNames.indexOf(columnName) !== -1) {\n          this.setValueToElement(curElement, eventObj[\"\" + columnName]);\n        } else {\n          this.setDefaultValueToElement(curElement);\n        }\n      }\n    }\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      this.onAllDayChange(eventObj[this.fields.isAllDay]);\n      var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n      if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n        timezoneObj.checked = true;\n        timezoneObj.dataBind();\n      }\n      this.timezoneChangeStyle(timezoneObj.checked);\n      delete eventObj.Timezone;\n    }\n  };\n  EventWindow.prototype.getColumnName = function (element) {\n    var attrName = element.getAttribute('data-name') || '';\n    if (attrName === '') {\n      var isDropDowns = false;\n      var fieldSelector = '';\n      if (element.classList.contains('e-dropdownlist')) {\n        fieldSelector = 'e-ddl';\n        isDropDowns = true;\n      } else if (element.classList.contains('e-multiselect')) {\n        fieldSelector = 'e-multiselect';\n        isDropDowns = true;\n      } else if (element.classList.contains('e-datetimepicker')) {\n        fieldSelector = 'e-datetimepicker';\n      } else if (element.classList.contains('e-datepicker')) {\n        fieldSelector = 'e-datepicker';\n      } else if (element.classList.contains('e-checkbox')) {\n        fieldSelector = 'e-checkbox';\n      } else if (element.classList.contains('e-numerictextbox')) {\n        fieldSelector = 'e-numerictextbox';\n      }\n      var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n      var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n      if (control) {\n        var attrEle = control.querySelector('[name]');\n        if (attrEle) {\n          attrName = attrEle.name;\n        }\n      }\n    }\n    return attrName;\n  };\n  EventWindow.prototype.onAllDayChange = function (allDayStatus) {\n    var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n    var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n    var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n    var format;\n    if (allDayStatus) {\n      format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n      addClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n      addClass([timezoneDiv], cls.DISABLE_CLASS);\n      if (this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n        removeClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n      }\n      startObj.format = endObj.format = format;\n    } else {\n      format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') + ' ' + this.parent.activeViewOptions.timeFormat : this.parent.dateFormat + ' ' + this.parent.activeViewOptions.timeFormat;\n      removeClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n      removeClass([timezoneDiv], cls.DISABLE_CLASS);\n      if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n        addClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n      }\n      startObj.format = endObj.format = format;\n    }\n    if (this.cellClickAction) {\n      this.updateDateTime(allDayStatus, startObj, endObj);\n    }\n    startObj.dataBind();\n    endObj.dataBind();\n    if (!isNullOrUndefined(this.recurrenceEditor)) {\n      this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n    }\n  };\n  EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\n    var startDate;\n    var endDate;\n    if (allDayStatus) {\n      startDate = util.resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n      if (this.parent.activeCellsData.isAllDay) {\n        var temp = util.addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n        endDate = +this.eventWindowTime.startTime > temp ? this.eventWindowTime.endTime : new Date(temp);\n      } else {\n        endDate = util.resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n      }\n    } else {\n      var start = this.parent.activeCellsData.startTime;\n      startDate = new Date(this.eventWindowTime.startTime.getTime());\n      startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n      if (this.parent.activeCellsData.isAllDay) {\n        var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n        startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n        endDate = new Date(startDate.getTime());\n        endDate.setMilliseconds(util.MS_PER_MINUTE * this.getSlotDuration());\n      } else {\n        endDate = new Date(startDate.getTime());\n        endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n      }\n    }\n    this.eventWindowTime = {\n      startTime: new Date(startDate.getTime()),\n      endTime: new Date(endDate.getTime())\n    };\n    startObj.value = startDate;\n    endObj.value = endDate;\n    startObj.dataBind();\n    endObj.dataBind();\n  };\n  EventWindow.prototype.getFormat = function (formatType) {\n    var format;\n    if (isNullOrUndefined(this.parent.locale) || this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n      format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n    } else {\n      format = getValue(\"main.\" + this.parent.locale + \".dates.calendars.\" + this.parent.getCalendarMode() + \".\" + formatType + \".short\", cldrData);\n    }\n    return format;\n  };\n  EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\n    if (!this.parent.eventSettings.allowEditing) {\n      return;\n    }\n    if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorFooterTemplate)) {\n      removeClass([this.element.querySelector('.' + cls.DELETE_EVENT_CLASS)], cls.DISABLE_CLASS);\n    }\n    if (isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n      this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n    }\n    this.element.querySelector('.' + cls.FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      eventObj = extend({}, eventObj, null, true);\n      var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n      var timezoneValue = void 0;\n      if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n        timezoneValue = true;\n        this.parent.eventBase.timezoneConvert(eventObj);\n      } else {\n        timezoneValue = false;\n      }\n      eventObj.Timezone = timezoneValue;\n      timezoneObj.checked = timezoneValue;\n      timezoneObj.dataBind();\n    }\n    this.showDetails(eventObj);\n    if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n    } else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n      this.recurrenceEditor.setProperties({\n        startDate: eventObj[this.fields.startTime]\n      });\n      this.recurrenceEditor.setRecurrenceRule('');\n    }\n    this.repeatStartDate = eventObj[this.fields.startTime];\n    this.repeatRule = '';\n    if (eventObj[this.fields.recurrenceRule]) {\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n      }\n      this.repeatRule = eventObj[this.fields.recurrenceRule];\n    }\n    if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n      if (eventObj[this.fields.recurrenceRule]) {\n        removeClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: true\n        });\n      } else {\n        addClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: false\n        });\n      }\n      this.updateRepeatLabel(this.repeatRule);\n    }\n    var isDisable = this.parent.readonly || eventObj[this.fields.isReadonly];\n    if (!this.parent.isAdaptive) {\n      var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n      var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n      this.disableButton(saveButton, isDisable);\n      this.disableButton(deleteButton, isDisable);\n    } else {\n      var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n      if (saveIcon) {\n        if (isDisable) {\n          addClass([saveIcon], cls.ICON_DISABLE_CLASS);\n        } else {\n          removeClass([saveIcon], cls.ICON_DISABLE_CLASS);\n        }\n      }\n    }\n    this.dialogObject.show();\n  };\n  EventWindow.prototype.disableButton = function (element, value) {\n    if (element) {\n      element.ej2_instances[0].disabled = value;\n    }\n  };\n  EventWindow.prototype.renderRecurrenceEditor = function () {\n    return new RecurrenceEditor({\n      calendarMode: this.parent.calendarMode,\n      cssClass: this.parent.cssClass,\n      dateFormat: this.parent.dateFormat,\n      enableRtl: this.parent.enableRtl,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      locale: this.parent.locale\n    });\n  };\n  EventWindow.prototype.updateMinMaxDateToEditor = function () {\n    var startDate = this.element.querySelector('.e-start');\n    var endDate = this.element.querySelector('.e-end');\n    if (startDate && endDate) {\n      var startObj = startDate.ej2_instances[0];\n      var endObj = endDate.ej2_instances[0];\n      startObj.min = this.parent.minDate;\n      startObj.max = this.parent.maxDate;\n      endObj.min = this.parent.minDate;\n      endObj.max = this.parent.maxDate;\n      startObj.dataBind();\n      endObj.dataBind();\n    }\n    if (this.recurrenceEditor) {\n      var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n      if (untilDate) {\n        var untilObj = untilDate.ej2_instances[0];\n        untilObj.min = this.parent.minDate;\n        untilObj.max = this.parent.maxDate;\n        untilObj.dataBind();\n      }\n    }\n  };\n  EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\n    if (this.parent.isAdaptive && !this.repeatDialogObject) {\n      this.renderRepeatDialog();\n    }\n    var data = repeatRule ? this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule) : this.l10n.getConstant('repeat');\n    this.repeatStatus.setProperties({\n      label: data\n    });\n  };\n  EventWindow.prototype.dialogClose = function (event) {\n    if (this.isEnterKey) {\n      this.isEnterKey = false;\n      return;\n    }\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.parent.activeEventData = {\n      event: undefined,\n      element: undefined\n    };\n    this.parent.currentAction = null;\n    this.dialogObject.hide();\n  };\n  EventWindow.prototype.resetForm = function () {\n    this.fieldValidator.destroyToolTip();\n    this.resetFormFields();\n    if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n      this.recurrenceEditor.resetFields();\n    }\n  };\n  EventWindow.prototype.timezoneChangeStyle = function (value) {\n    var timezoneDiv = this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n    var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n    if (value) {\n      addClass([timezoneDiv], cls.ENABLE_CLASS);\n      var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n      var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n      var timezone = startTimezoneObj.dataSource;\n      if (!startTimezoneObj.value || !this.parent.timezone) {\n        var found = timezone.some(function (tz) {\n          return tz.Value === localTimezoneName;\n        });\n        if (!found) {\n          timezone.push({\n            Value: localTimezoneName,\n            Text: localTimezoneName\n          });\n          startTimezoneObj.dataSource = timezone;\n          endTimezoneObj.dataSource = timezone;\n          startTimezoneObj.dataBind();\n          endTimezoneObj.dataBind();\n        }\n      }\n      startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n      endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n      startTimezoneObj.dataBind();\n      endTimezoneObj.dataBind();\n    } else {\n      removeClass([timezoneDiv], cls.ENABLE_CLASS);\n    }\n  };\n  EventWindow.prototype.resetFormFields = function () {\n    var formElement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n    for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\n      var currentElement = formElement_1[_i];\n      var columnName = currentElement.name || this.getColumnName(currentElement);\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        this.setDefaultValueToElement(currentElement);\n      }\n    }\n  };\n  EventWindow.prototype.eventSave = function (event, alert) {\n    if (this.isEnterKey) {\n      this.isEnterKey = false;\n      return;\n    }\n    var formElement = this.element.querySelector('.' + cls.FORM_CLASS);\n    if (formElement && formElement.classList.contains('e-formvalidator') && !formElement.ej2_instances[0].validate()) {\n      return;\n    }\n    var dataCollection = this.getEventDataFromEditor();\n    if (this.processEventValidation(dataCollection.tempData, alert)) {\n      return;\n    }\n    this.eventCrudData = dataCollection.eventData;\n    this.dialogEvent = event;\n    this.isCrudAction = true;\n    this.dialogObject.hide();\n  };\n  EventWindow.prototype.getEventDataFromEditor = function () {\n    var eventObj = extend({}, this.getObjectFromFormData(cls.EVENT_WINDOW_DIALOG_CLASS));\n    if (!eventObj.Timezone) {\n      eventObj[this.fields.startTimezone] = null;\n      eventObj[this.fields.endTimezone] = null;\n    }\n    delete eventObj.Timezone;\n    delete eventObj.Repeat;\n    this.setDefaultValueToObject(eventObj);\n    eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n    var tempObj = extend({}, eventObj, null, true);\n    if (eventObj[this.fields.isAllDay]) {\n      eventObj[this.fields.startTime] = isNullOrUndefined(eventObj[this.fields.startTime]) ? null : util.resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n      eventObj[this.fields.endTime] = isNullOrUndefined(eventObj[this.fields.endTime]) ? null : util.addDays(util.resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n    }\n    return {\n      eventData: eventObj,\n      tempData: tempObj\n    };\n  };\n  EventWindow.prototype.processEventValidation = function (eventObj, alert) {\n    var alertType;\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n        this.parent.quickPopup.openValidationError('invalidDateError');\n        return true;\n      }\n      if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n        this.parent.quickPopup.openValidationError('startEndError');\n        return true;\n      }\n    }\n    if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n      if (this.parent.currentAction !== 'EditOccurrence') {\n        alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n      }\n      var isShowAlert = true;\n      if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n        isShowAlert = false;\n      }\n      if (!isNullOrUndefined(alertType) && isShowAlert && (!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern' || this.parent.enableRecurrenceValidation)) {\n        this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n        return true;\n      }\n    }\n    return false;\n  };\n  EventWindow.prototype.processCrudActions = function (eventObj) {\n    var _this = this;\n    this.parent.uiStateValues.isBlock = false;\n    var resourceData = this.getResourceData(eventObj);\n    var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 || this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit && !isNullOrUndefined(resourceData);\n    var eventId = this.getEventIdFromForm();\n    if (!isNullOrUndefined(eventId)) {\n      var eveId_1 = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n      var editedData = this.parent.eventsData.filter(function (data) {\n        return data[_this.fields.id] === eveId_1;\n      })[0];\n      if (isNullOrUndefined(editedData)) {\n        editedData = this.parent.blockData.filter(function (data) {\n          return data[_this.fields.id] === eveId_1;\n        })[0];\n      }\n      eventObj = extend({}, editedData, eventObj);\n      if (eventObj[this.fields.isReadonly]) {\n        return false;\n      }\n      if (this.parent.eventBase.checkOverlap(eventObj)) {\n        return true;\n      }\n      var currentAction = void 0;\n      if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n        currentAction = this.parent.currentAction;\n        eventObj.Guid = this.parent.activeEventData.event.Guid;\n        if (this.parent.currentAction === 'EditOccurrence') {\n          if (!eventObj[this.fields.recurrenceID]) {\n            eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n            eventObj.Guid = this.parent.activeEventData.event.Guid;\n          } else {\n            eveId_1 = eventObj[this.fields.recurrenceID];\n            currentAction = null;\n          }\n          if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {\n            return true;\n          }\n        }\n        if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n          eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n        } else if (this.parent.currentAction === 'EditFollowingEvents') {\n          eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n          eventObj[this.fields.followingID] = editedData[this.fields.id];\n        }\n      }\n      if (isResourceEventExpand) {\n        this.resourceSaveEvent(eventObj, 'Save', currentAction);\n      } else {\n        this.parent.saveEvent(eventObj, currentAction);\n      }\n    } else {\n      this.parent.currentAction = 'Add';\n      if (this.parent.eventBase.checkOverlap(eventObj)) {\n        return true;\n      }\n      if (isResourceEventExpand) {\n        this.resourceSaveEvent(eventObj, this.parent.currentAction);\n      } else {\n        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n        this.parent.addEvent(eventObj);\n      }\n    }\n    return this.parent.uiStateValues.isBlock;\n  };\n  EventWindow.prototype.getResourceData = function (eventObj) {\n    var resourceData = null;\n    if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection) && this.parent.resourceBase.resourceCollection.length > 0) {\n      var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n      resourceData = eventObj[lastResourceData.field];\n    }\n    return resourceData;\n  };\n  EventWindow.prototype.getObjectFromFormData = function (className) {\n    var formElement = this.getFormElements(className);\n    var eventObj = {};\n    for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {\n      var currentElement = formElement_2[_i];\n      var columnName = currentElement.name || this.getColumnName(currentElement);\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        eventObj[\"\" + columnName] = this.getValueFromElement(currentElement);\n      }\n    }\n    return eventObj;\n  };\n  EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\n    if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n      eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.l10n.getConstant('addTitle');\n    }\n    if (!isNullOrUndefined(eventObj[this.fields.location])) {\n      eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n    }\n    if (!isNullOrUndefined(eventObj[this.fields.description])) {\n      eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n    }\n  };\n  EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\n    var alertMessage;\n    var recEditor = this.recurrenceEditor;\n    var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n    if (alert !== this.l10n.getConstant('ok')) {\n      var activeEvent = this.parent.activeEventData.event;\n      var excludedEvents = [];\n      if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents') && !isNullOrUndefined(activeEvent)) {\n        var eventStartTime = activeEvent[this.parent.eventFields.startTime];\n        var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n        if (seriesEvents.length > 0) {\n          excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n        } else {\n          var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n          excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);\n        }\n        if (this.parent.currentAction === 'EditSeries' && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n          excludedEvents.push(this.eventData);\n        }\n      }\n      if (excludedEvents.length > 0) {\n        alertMessage = 'seriesChangeAlert';\n      }\n      if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' && this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n        alertMessage = 'wrongPattern';\n      }\n      if (isNullOrUndefined(alertMessage)) {\n        var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n        var obj = {\n          'SU': 0,\n          'MO': 1,\n          'TU': 2,\n          'WE': 3,\n          'TH': 4,\n          'FR': 5,\n          'SA': 6\n        };\n        var temp = [];\n        var tempDiff = [];\n        var tempValue = void 0;\n        switch (recEditor.value.split(';')[0].split('=')[1]) {\n          case 'DAILY':\n            if ((endDate.getTime() - startDate.getTime()) / (1000 * 3600) > interval * 24) {\n              alertMessage = 'createError';\n            }\n            break;\n          case 'WEEKLY':\n            types = recEditor.value.split(';')[1].split('=')[1].split(',');\n            for (var index = 0; index < types.length * (interval + 1); index++) {\n              temp[parseInt(index.toString(), 10)] = types.length > index ? obj[types[parseInt(index.toString(), 10)]] : temp[index - types.length] + 7 * interval;\n            }\n            tempValue = temp.sort(function (a, b) {\n              return a - b;\n            });\n            for (var index = 1; index < tempValue.length; index++) {\n              tempDiff.push(tempValue[parseInt(index.toString(), 10)] - tempValue[index - 1]);\n            }\n            if ((endDate.getTime() - startDate.getTime()) / (1000 * 3600) >= Math.min.apply(Math, tempDiff) * 24 || isNullOrUndefined(interval)) {\n              alertMessage = 'createError';\n            }\n            break;\n          case 'MONTHLY':\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n              alertMessage = 'createError';\n            }\n            break;\n          case 'YEARLY':\n            if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n              alertMessage = 'createError';\n            }\n            break;\n        }\n      }\n    } else {\n      if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n        alertMessage = 'createError';\n      }\n      if (isNullOrUndefined(alertMessage)) {\n        this.parent.quickPopup.quickDialog.hide();\n      }\n    }\n    if (isNullOrUndefined(interval)) {\n      alertMessage = 'createError';\n    }\n    return alertMessage;\n  };\n  EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\n    var recIndex;\n    for (var index = 0; index < recColl.length; index++) {\n      if (event[this.fields.startTime].valueOf() === recColl[parseInt(index.toString(), 10)][this.fields.startTime].valueOf()) {\n        recIndex = index;\n        break;\n      }\n    }\n    return recIndex;\n  };\n  EventWindow.prototype.trimAllDay = function (data) {\n    if (data[this.fields.isAllDay]) {\n      var temp = util.addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n      data[this.fields.endTime] = +data[this.fields.startTime] > temp ? data[this.fields.endTime] : new Date(temp);\n    }\n  };\n  EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\n    var _this = this;\n    if (editData === void 0) {\n      editData = this.eventData;\n    }\n    var recurColl = this.parent.getOccurrencesByID(eventId);\n    var excludedDatas = this.parent.eventsData.filter(function (data) {\n      return data[_this.fields.recurrenceID] === eventId;\n    });\n    excludedDatas.map(function (data) {\n      return recurColl.push(extend({}, data));\n    });\n    currentData = extend({}, currentData);\n    this.trimAllDay(currentData);\n    for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\n      var data = recurColl_1[_i];\n      this.trimAllDay(data);\n    }\n    this.parent.eventBase.sortByTime(recurColl);\n    var index = this.getRecurrenceIndex(recurColl, editData);\n    if (isNullOrUndefined(index)) {\n      return false;\n    }\n    var currentStartTime = new Date(+currentData[this.fields.startTime]);\n    var currentEndTime = new Date(+currentData[this.fields.endTime]);\n    var nextStartTime;\n    var nextEndTime;\n    if (index !== recurColl.length - 1) {\n      nextStartTime = new Date(+recurColl[index + 1][this.fields.startTime]);\n      nextEndTime = new Date(+recurColl[index + 1][this.fields.endTime]);\n    }\n    var lastEndTime = new Date(+recurColl[recurColl.length - 1][this.fields.endTime]);\n    if (index === 0) {\n      if (!isNullOrUndefined(recurColl[index + 1])) {\n        if (!(nextStartTime.getTime() >= currentEndTime.getTime()) && util.resetTime(lastEndTime).getTime() >= util.resetTime(currentStartTime).getTime() || util.resetTime(lastEndTime).getTime() < util.resetTime(currentStartTime).getTime()) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n          return true;\n        } else if (!(util.resetTime(currentStartTime).getTime() < util.resetTime(nextStartTime).getTime())) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n          return true;\n        }\n      }\n      return false;\n    } else {\n      var previousStartTime = new Date(+recurColl[index - 1][this.fields.startTime]);\n      var previousEndTime = new Date(+recurColl[index - 1][this.fields.endTime]);\n      if (index === recurColl.length - 1) {\n        if (util.resetTime(new Date(+recurColl[recurColl.length - 1 - index][this.fields.startTime])).getTime() > util.resetTime(currentStartTime).getTime()) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n          return true;\n        } else if (!(previousEndTime.getTime() <= currentStartTime.getTime() && util.resetTime(currentStartTime).getTime() > util.resetTime(previousStartTime).getTime())) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n          return true;\n        }\n      } else if (!((util.resetTime(previousStartTime).getTime() < util.resetTime(currentStartTime).getTime() || util.resetTime(new Date(+recurColl[0][this.fields.startTime])).getTime() > util.resetTime(currentStartTime).getTime()) && (util.resetTime(nextStartTime).getTime() > util.resetTime(currentStartTime).getTime() || lastEndTime.getTime() < currentStartTime.getTime()))) {\n        this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n        return true;\n      } else if (!(previousEndTime.getTime() <= currentStartTime.getTime() && nextStartTime.getTime() >= currentEndTime.getTime()) || util.resetTime(nextEndTime).getTime() < util.resetTime(currentStartTime).getTime() || util.resetTime(previousStartTime).getTime() > util.resetTime(currentEndTime).getTime() || !(util.resetTime(currentStartTime).getTime() < util.resetTime(nextStartTime).getTime())) {\n        this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n        return true;\n      }\n    }\n    return false;\n  };\n  EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\n    var _this = this;\n    var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n    var resourceData = eventObj[lastResourceData.field];\n    resourceData = resourceData instanceof Array ? resourceData.reverse() : [resourceData].reverse();\n    var lastLevel = this.parent.resourceBase.lastResourceLevel;\n    var eventList = [];\n    var _loop_2 = function (i) {\n      var events = extend({}, eventObj, null, true);\n      events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();\n      var temp = [];\n      var addValues = function () {\n        if (action === 'Save' && i === resourceData.length - 1) {\n          if (temp.length > 0) {\n            temp[0][_this.fields.id] = eventObj[_this.fields.id];\n            for (var k = 1; k < temp.length; k++) {\n              temp[parseInt(k.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n              eventList.push(temp[parseInt(k.toString(), 10)]);\n              _this.parent.saveEvent(temp[0], currentAction);\n            }\n          } else {\n            events[_this.fields.id] = eventObj[_this.fields.id];\n            _this.parent.saveEvent(events, currentAction);\n          }\n        } else {\n          if (temp.length > 0) {\n            for (var j = 0; j < temp.length; j++) {\n              temp[parseInt(j.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\n              eventList.push(temp[parseInt(j.toString(), 10)]);\n            }\n          } else {\n            events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n            eventList.push(events);\n          }\n        }\n      };\n      if (this_2.parent.activeViewOptions.group.byGroupID && !isNullOrUndefined(lastLevel)) {\n        var lastResource = lastResourceData.dataSource;\n        var resCol = this_2.parent.resourceCollection;\n        var index = void 0;\n        if (resCol.length > 1) {\n          index = util.findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i.toString(), 10)], events, resCol);\n        } else {\n          index = util.findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i.toString(), 10)]);\n        }\n        if (index < 0) {\n          return {\n            value: void 0\n          };\n        }\n        var groupId_1 = lastResource[parseInt(index.toString(), 10)][lastResourceData.groupIDField];\n        var filter = lastLevel.filter(function (obj) {\n          return obj.resourceData[lastResourceData.idField] === resourceData[parseInt(i.toString(), 10)];\n        }).filter(function (obj) {\n          return obj.resourceData[lastResourceData.groupIDField] === groupId_1;\n        })[0];\n        var groupOrder = filter.groupOrder;\n        for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {\n          var field = this_2.parent.resourceBase.resourceCollection[parseInt(index_1.toString(), 10)].field;\n          events[\"\" + field] = groupOrder[parseInt(index_1.toString(), 10)] instanceof Array ? groupOrder[parseInt(index_1.toString(), 10)][0] : groupOrder[parseInt(index_1.toString(), 10)];\n        }\n        addValues();\n      } else {\n        for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {\n          var field = this_2.parent.resourceBase.resourceCollection[parseInt(index.toString(), 10)].field;\n          if (events[\"\" + field] instanceof Array && events[\"\" + field].length > 1) {\n            for (var k = 0; k < events[\"\" + field].length; k++) {\n              var event_3 = extend({}, events, null, true);\n              event_3[\"\" + field] = eventObj[\"\" + field][parseInt(k.toString(), 10)];\n              event_3[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n              temp.push(event_3);\n            }\n          } else {\n            if (temp.length === 0) {\n              events[\"\" + field] = eventObj[\"\" + field] instanceof Array ? eventObj[\"\" + field][0] : eventObj[\"\" + field];\n              events[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n            } else {\n              for (var l = 0; l < temp.length; l++) {\n                temp[parseInt(l.toString(), 10)][\"\" + field] = eventObj[\"\" + field] instanceof Array ? eventObj[\"\" + field][0] : eventObj[\"\" + field];\n              }\n            }\n          }\n        }\n        events[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n        addValues();\n      }\n    };\n    var this_2 = this;\n    for (var i = 0; i < resourceData.length; i++) {\n      var state_1 = _loop_2(i);\n      if (typeof state_1 === \"object\") return state_1.value;\n    }\n    if (eventList.length > 0) {\n      for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\n        var event_4 = eventList_1[_i];\n        event_4[this.fields.recurrenceException] = null;\n        event_4[this.fields.recurrenceID] = null;\n      }\n      this.parent.addEvent(eventList);\n    }\n  };\n  EventWindow.prototype.getEventIdFromForm = function () {\n    return this.element.querySelector('.' + cls.FORM_CLASS).getAttribute('data-id');\n  };\n  EventWindow.prototype.getFormElements = function (className) {\n    var elements = [];\n    if (className === cls.EVENT_WINDOW_DIALOG_CLASS) {\n      elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD));\n    } else {\n      elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD));\n    }\n    return elements;\n  };\n  EventWindow.prototype.getValueFromElement = function (element) {\n    var value;\n    if (element.classList.contains('e-datepicker')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-datetimepicker')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-dropdownlist')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-multiselect')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-checkbox')) {\n      value = element.ej2_instances[0].checked;\n    } else if (element.classList.contains('e-numerictextbox')) {\n      value = element.ej2_instances[0].value;\n    } else {\n      if (element.type === 'checkbox') {\n        value = element.checked;\n      } else {\n        value = this.parent.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(element.value) : element.value;\n      }\n    }\n    return value;\n  };\n  EventWindow.prototype.setValueToElement = function (element, value) {\n    if (element.classList.contains('e-datepicker')) {\n      var instance = element.ej2_instances[0];\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-datetimepicker')) {\n      var instance = element.ej2_instances[0];\n      if (instance.element.classList.contains(cls.EVENT_WINDOW_START_CLASS)) {\n        this.eventWindowTime.startTime = new Date('' + value);\n      } else {\n        this.eventWindowTime.endTime = new Date('' + value);\n      }\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-dropdownlist')) {\n      var instance = element.ej2_instances[0];\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-multiselect')) {\n      var instance = element.ej2_instances[0];\n      instance.value = [];\n      instance.value = value instanceof Array ? value : [value];\n      instance.dataBind();\n    } else if (element.classList.contains('e-checkbox')) {\n      var instance = element.ej2_instances[0];\n      instance.checked = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-numerictextbox')) {\n      var instance = element.ej2_instances[0];\n      instance.value = value;\n      instance.dataBind();\n    } else {\n      if (element.type !== 'checkbox') {\n        element.value = value || '';\n      } else {\n        element.checked = value;\n      }\n    }\n  };\n  EventWindow.prototype.setDefaultValueToElement = function (element) {\n    if (element.classList.contains('e-datepicker')) {\n      var instance = element.ej2_instances[0];\n      instance.value = this.parent.getCurrentTime();\n      instance.dataBind();\n    } else if (element.classList.contains('e-datetimepicker')) {\n      var instance = element.ej2_instances[0];\n      var dateValue = this.parent.getCurrentTime();\n      this.eventWindowTime = {\n        startTime: dateValue,\n        endTime: dateValue\n      };\n      instance.value = dateValue;\n      instance.dataBind();\n    } else if (element.classList.contains('e-dropdownlist')) {\n      var instance = element.ej2_instances[0];\n      instance.value = null;\n      instance.dataBind();\n    } else if (element.classList.contains('e-multiselect')) {\n      var instance = element.ej2_instances[0];\n      instance.value = [];\n      instance.dataBind();\n    } else if (element.classList.contains('e-checkbox')) {\n      var instance = element.ej2_instances[0];\n      instance.checked = false;\n      instance.dataBind();\n    } else if (element.classList.contains('e-numerictextbox')) {\n      var instance = element.ej2_instances[0];\n      instance.value = null;\n      instance.dataBind();\n    } else {\n      if (element.type === 'checkbox') {\n        element.checked = false;\n      } else {\n        element.value = '';\n      }\n    }\n  };\n  EventWindow.prototype.getInstance = function (className) {\n    var element = this.element.querySelector('.' + className);\n    return element ? element.ej2_instances[0] : null;\n  };\n  EventWindow.prototype.eventDelete = function (event) {\n    if (this.isEnterKey) {\n      this.isEnterKey = false;\n      return;\n    }\n    switch (this.parent.currentAction) {\n      case 'EditOccurrence':\n        if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n          this.parent.currentAction = 'DeleteOccurrence';\n        } else {\n          this.parent.currentAction = 'Delete';\n        }\n        break;\n      case 'EditSeries':\n        this.parent.currentAction = 'DeleteSeries';\n        break;\n      case 'Save':\n        this.parent.currentAction = 'Delete';\n        break;\n      case 'EditFollowingEvents':\n        if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n          this.parent.currentAction = 'DeleteFollowingEvents';\n        }\n        break;\n    }\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.dialogObject.hide();\n    this.parent.quickPopup.openDeleteAlert();\n  };\n  EventWindow.prototype.getRecurrenceEditorInstance = function () {\n    if (this.parent.isAdaptive && !this.repeatDialogObject) {\n      this.renderRepeatDialog();\n    }\n    return this.recurrenceEditor;\n  };\n  EventWindow.prototype.destroyComponents = function () {\n    var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n    for (var _i = 0, formElements_3 = formElements; _i < formElements_3.length; _i++) {\n      var element = formElements_3[_i];\n      var instance = void 0;\n      if (element.classList.contains('e-datetimepicker')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-datepicker')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-checkbox')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-dropdownlist')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-multiselect')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-numerictextbox')) {\n        instance = element.ej2_instances;\n      }\n      if (instance && instance[0]) {\n        instance[0].destroy();\n      }\n    }\n    if (this.buttonObj) {\n      this.buttonObj.destroy();\n    }\n  };\n  EventWindow.prototype.detachComponents = function () {\n    var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n    for (var _i = 0, formElements_4 = formElements; _i < formElements_4.length; _i++) {\n      var element = formElements_4[_i];\n      detach(element);\n    }\n  };\n  EventWindow.prototype.destroy = function (isIgnore) {\n    if (this.parent && !this.parent.isDestroyed) {\n      this.parent.resetTemplates(['editorTemplate', 'editorHeaderTemplate', 'editorFooterTemplate']);\n    }\n    this.destroyComponents();\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.destroy();\n      detach(this.recurrenceEditor.element);\n      this.recurrenceEditor = null;\n    }\n    if (this.fieldValidator) {\n      this.fieldValidator.destroy();\n      this.fieldValidator = null;\n    }\n    if (this.repeatDialogObject) {\n      this.repeatDialogObject.destroy();\n      this.repeatDialogObject = null;\n    }\n    this.detachComponents();\n    if (this.dialogObject) {\n      if (this.dialogObject.element) {\n        var form = this.dialogObject.element.querySelector('form');\n        util.removeChildren(form);\n        detach(form);\n        EventHandler.remove(this.dialogObject.element, 'keydown', this.preventEventSave);\n      }\n      this.dialogObject.destroy();\n      this.dialogObject = null;\n    }\n    if (this.element) {\n      remove(this.element);\n      this.element = null;\n    }\n    if (!isIgnore) {\n      this.l10n = null;\n      this.parent = null;\n      this.fields = null;\n      this.buttonObj = null;\n      this.repeatStatus = null;\n      this.eventWindowTime = null;\n      this.dialogEvent = null;\n    }\n  };\n  return EventWindow;\n}();\nexport { EventWindow };","map":{"version":3,"names":["createElement","isNullOrUndefined","addClass","remove","EventHandler","extend","append","detach","cldrData","removeClass","getValue","getDefaultDateObject","closest","SanitizeHtmlHelper","initializeCSPTemplate","Query","Deferred","CheckBox","Button","Dialog","DropDownList","MultiSelect","Input","DateTimePicker","FieldValidator","RecurrenceEditor","cls","event","util","EVENT_FIELD","REPEAT_CONTAINER_CLASS","REPEAT_BUTTON_ICON_CLASS","REPEAT_BUTTON_CLASS","REPEAT_DIALOG_CLASS","HIDE_STYLE_CLASS","EventWindow","parent","l10n","localeObj","fields","eventFields","eventWindowTime","startTime","Date","endTime","renderEventWindow","prototype","element","id","appendChild","dialogModel","animationSettings","effect","content","getEventWindowContent","cssClass","EVENT_WINDOW_DIALOG_CLASS","enableRtl","enableHtmlSanitizer","height","isAdaptive","minHeight","isModal","showCloseIcon","target","document","body","visible","width","beforeOpen","onBeforeOpen","bind","beforeClose","onBeforeClose","DEVICE_CLASS","editorHeaderTemplate","header","getConstant","editorFooterTemplate","renderDialogButtons","dialogObject","querySelector","setAttribute","addEventHandlers","parentElement","add","preventEventSave","applyFormValidation","dialogButton","buttons","buttonModel","DELETE_EVENT_CLASS","disabled","eventSettings","allowDeleting","readonly","click","eventDelete","EVENT_WINDOW_SAVE_BUTTON_CLASS","isPrimary","allowAdding","eventSave","EVENT_WINDOW_CANCEL_BUTTON_CLASS","dialogClose","backIcon","EVENT_WINDOW_BACK_ICON_CLASS","saveIcon","EVENT_WINDOW_SAVE_ICON_CLASS","refresh","destroy","refreshRecurrenceEditor","recurrenceEditor","createRecurrenceEditor","setRecurrenceEditor","editorTemplate","openEditor","data","type","isEventData","repeatType","currentAction","removeNewEventElement","quickPopup","quickPopupHide","inlineModule","removeInlineAppointmentElement","eventObj","cellClickAction","activeCellsData","event_1","convertToEventData","isAllDay","groupIndex","resetTemplates","createAdaptiveHeaderElement","getDialogHeader","footerTemplate","getDialogFooter","dataBind","renderFormElements","setEditorContent","DISABLE_CLASS","firstDayOfWeek","activeViewOptions","onCellDetailsUpdate","onEventDetailsUpdate","setDialogContent","setDialogHeader","setDialogFooter","className","headerBackIcon","headerTemplate","headerSaveIcon","args","headerTemplateId","temHeaderDiv","slice","call","getEditorHeaderTemplate","footerTemplateId","temFooterDiv","getEditorFooterTemplate","e","allowKeyboardInteraction","code","isEnterKey","_this","eventData","getTime","eventProp","cancel","activeEventData","duration","getSlotDuration","saveObj","getInstance","allowEditing","deleteObj","callBackPromise","trigger","popupOpen","popupArgs","maxHeight","getHours","getMinutes","trimAllDay","refreshDateTimePicker","startObj","EVENT_WINDOW_START_CLASS","endObj","EVENT_WINDOW_END_CLASS","value","MS_PER_MINUTE","resolve","isInteracted","isCrudAction","dialogEvent","eventCrudData","popupClose","processCrudActions","resetForm","eventBase","focusElement","container","FORM_CONTAINER_CLASS","form","FORM_CLASS","attrs","onsubmit","fieldValidator","destroyComponents","clearEvents","isReact","formElements","children","_i","formElements_1","length","templateId","tempEle","getEditorTemplate","renderTemplates","getDefaultEventWindowContent","parentDiv","createDivElement","EVENT_WINDOW_DIALOG_PARENT_CLASS","titleLocationDiv","EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS","renderTextBox","SUBJECT_CLASS","LOCATION_CLASS","startEndDateTimeDiv","EVENT_WINDOW_START_END_DIV_CLASS","renderDateTimePicker","onTimeChange","allDayTimezoneDiv","EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS","renderCheckBox","EVENT_WINDOW_ALL_DAY_CLASS","TIME_ZONE_CLASS","timezoneParentDiv","EVENT_WINDOW_TIME_ZONE_DIV_CLASS","renderDropDown","EVENT_WINDOW_START_TZ_CLASS","EVENT_WINDOW_END_TZ_CLASS","repeatParentDiv","EVENT_WINDOW_REPEAT_DIV_CLASS","repeatDiv","EVENT_WINDOW_REPEAT_CLASS","repeatEditContainer","button","buttonObj","iconCss","appendTo","loadRecurrenceEditor","resourceCollection","resourceParentDiv","EVENT_WINDOW_RESOURCES_DIV_CLASS","_a","resourceBase","resource","renderResourceDetails","description","DESCRIPTION_CLASS","submit","title","style","display","renderRecurrenceEditor","updateMinMaxDateToEditor","createInputElement","fieldName","name","timeScale","interval","slotCount","changeEvent","dateTimeDiv","getFieldName","dateTimeInput","dateTimePicker","change","calendarMode","min","minDate","max","maxDate","setHours","locale","floatLabelType","strictMode","timeFormat","format","dateFormat","getFormat","placeholder","getFieldLabel","step","elementSelector","startEndElement","querySelectorAll","startEndElement_1","instance","ej2_instances","classList","contains","endDate","updateRuleUntilDate","resourceData","field","labelValue","resourceDiv","resourceInput","resourceTemplate","sanitize","colorField","textField","allowMultiple","listObj","dataSource","onMultiselectResourceChange","itemTemplate","text","idField","htmlAttributes","popupHeight","popupWidth","mode","open","Promise","then","applyStylesAfterRender","dropDownList","onDropdownResourceChange","popup","resourceColors","forEach","color","getAttribute","backgroundColor","timezoneDiv","timezoneInput","allowFiltering","onTimezoneChange","timezoneDataSource","filterBarPlaceholder","noRecordsTemplate","filtering","query","where","updateData","group","byGroupID","getColumnName","i","parseInt","toString","resObject","createInstance","datasource","_loop_1","j","resourceModel","filter","groupIDField","groupId","filterRes","this_1","filterDatasource","concat","index","clear","resObj","itemData","resValue","startTimezone","startTimezoneObj","endTimezoneObj","checkBoxDiv","checkBoxInput","checkBox","onChange","label","repeatStatus","textBoxDiv","elementType","textBoxInput","createInput","properties","subject","location","endTimezone","labelText","editorTitles","recurrenceRule","targetSelector","onAllDayChange","checked","timezoneChangeStyle","onRepeatChange","renderRepeatDialog","repeatDialogObject","closeOnEscape","repeatSaveDialog","repeatCancelDialog","repeatOpenDialog","show","repeatRule","setRecurrenceRule","state","setProperties","startDate","repeatStartDate","selectedType","hide","updateRepeatLabel","getRecurrenceRule","closeRepeatDialog","repeatTempRule","removeAttribute","EVENT_WINDOW_TITLE_TEXT_CLASS","innerHTML","Timezone","default","showDetails","deleteButton","saveButton","disableButton","cellsData","RecurrenceRule","resources","setResourceValues","getValidationRule","rules","Object","keys","undefined","subjectRule","validation","locationRule","startTimeRule","endTimeRule","descriptionRule","renderFormValidator","getFormElements","keyNames","formElements_2","curElement","columnName","indexOf","setValueToElement","setDefaultValueToElement","timezoneObj","attrName","isDropDowns","fieldSelector","classSelector","control","attrEle","allDayStatus","EVENT_WINDOW_ICON_DISABLE_CLASS","ENABLE_CLASS","updateDateTime","resetTime","temp","addDays","start","getSeconds","startHour","getStartEndTime","workHours","setMilliseconds","formatType","getCalendarMode","timezoneValue","timezoneConvert","isDisable","isReadonly","ICON_DISABLE_CLASS","untilDate","untilObj","getRuleSummary","destroyToolTip","resetFormFields","isDestroyed","resetFields","localTimezoneName","tzModule","getLocalTimezoneName","timezone","found","some","tz","Value","push","Text","formElement","formElement_1","currentElement","alert","validate","dataCollection","getEventDataFromEditor","processEventValidation","tempData","getObjectFromFormData","Repeat","setDefaultValueToObject","tempObj","alertType","openValidationError","recurrenceValidation","isShowAlert","uiStateValues","isIgnoreOccurrence","enableRecurrenceValidation","openRecurrenceValidationAlert","isBlock","getResourceData","isResourceEventExpand","allowGroupEdit","eventId","getEventIdFromForm","eveId_1","getEventIDType","editedData","eventsData","blockData","checkOverlap","Guid","recurrenceID","getEventMaxID","editOccurrenceValidation","followingID","resourceSaveEvent","saveEvent","addEvent","lastResourceData","formElement_2","getValueFromElement","alertMessage","recEditor","activeEvent","excludedEvents","eventStartTime","seriesEvents","getSeriesEvents","getEditedOccurrences","event_2","getEventById","recurrenceException","types","split","obj","tempDiff","tempValue","sort","a","b","Math","apply","setMonth","getMonth","setFullYear","getFullYear","quickDialog","getRecurrenceIndex","recColl","recIndex","valueOf","currentData","editData","recurColl","getOccurrencesByID","excludedDatas","map","recurColl_1","sortByTime","currentStartTime","currentEndTime","nextStartTime","nextEndTime","lastEndTime","previousStartTime","previousEndTime","action","Array","reverse","lastLevel","lastResourceLevel","eventList","_loop_2","events","this_2","addValues","k","lastResource","resCol","findIndexInData","groupId_1","groupOrder","index_1","event_3","l","state_1","eventList_1","event_4","elements","getCurrentTime","dateValue","openDeleteAlert","getRecurrenceEditorInstance","formElements_3","detachComponents","formElements_4","isIgnore","removeChildren"],"sources":["C:/Users/Dell/OneDrive/Desktop/Programs/soc-portal/node_modules/@syncfusion/ej2-schedule/src/schedule/popups/event-window.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, isNullOrUndefined, addClass, remove, EventHandler, extend, append, detach } from '@syncfusion/ej2-base';\nimport { cldrData, removeClass, getValue, getDefaultDateObject, closest, SanitizeHtmlHelper, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { Query, Deferred } from '@syncfusion/ej2-data';\nimport { CheckBox, Button } from '@syncfusion/ej2-buttons';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { FieldValidator } from './form-validator';\nimport { RecurrenceEditor } from '../../recurrence-editor/recurrence-editor';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\nvar EventWindow = /** @class */ (function () {\n    function EventWindow(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fields = this.parent.eventFields;\n        this.eventWindowTime = { startTime: new Date(), endTime: new Date() };\n        this.renderEventWindow();\n    }\n    EventWindow.prototype.renderEventWindow = function () {\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        var dialogModel = {\n            animationSettings: { effect: 'Zoom' },\n            content: this.getEventWindowContent(),\n            cssClass: cls.EVENT_WINDOW_DIALOG_CLASS,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            height: this.parent.isAdaptive ? '100%' : 'auto',\n            minHeight: '300px',\n            isModal: true,\n            showCloseIcon: this.parent.isAdaptive ? false : true,\n            target: document.body,\n            visible: false,\n            width: '500px',\n            beforeOpen: this.onBeforeOpen.bind(this),\n            beforeClose: this.onBeforeClose.bind(this)\n        };\n        if (this.parent.isAdaptive) {\n            dialogModel.cssClass = cls.EVENT_WINDOW_DIALOG_CLASS + ' ' + cls.DEVICE_CLASS;\n            if (!this.parent.editorHeaderTemplate) {\n                dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' +\n                    this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n            }\n        }\n        else {\n            if (!this.parent.editorFooterTemplate) {\n                this.renderDialogButtons(dialogModel);\n            }\n            if (!this.parent.editorHeaderTemplate) {\n                dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n            }\n        }\n        this.dialogObject = new Dialog(dialogModel, this.element);\n        if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n        this.addEventHandlers();\n        addClass([this.element.parentElement], cls.EVENT_WINDOW_DIALOG_CLASS + '-container');\n        EventHandler.add(this.dialogObject.element, 'keydown', this.preventEventSave, this);\n        this.applyFormValidation();\n    };\n    EventWindow.prototype.renderDialogButtons = function (dialogButton) {\n        dialogButton.buttons = [{\n                buttonModel: {\n                    content: this.l10n.getConstant('deleteButton'), cssClass: cls.DELETE_EVENT_CLASS,\n                    disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n                },\n                click: this.eventDelete.bind(this)\n            }, {\n                buttonModel: {\n                    content: this.l10n.getConstant('saveButton'), cssClass: 'e-primary ' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS,\n                    isPrimary: true, disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n                },\n                click: this.eventSave.bind(this)\n            }, {\n                buttonModel: { cssClass: cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS, content: this.l10n.getConstant('cancelButton') },\n                click: this.dialogClose.bind(this)\n            }];\n    };\n    EventWindow.prototype.addEventHandlers = function () {\n        var backIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_BACK_ICON_CLASS);\n        var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n        if (this.parent.isAdaptive && !isNullOrUndefined(backIcon) && !isNullOrUndefined(saveIcon)) {\n            EventHandler.add(backIcon, 'click', this.dialogClose, this);\n            EventHandler.add(saveIcon, 'click', this.eventSave, this);\n        }\n    };\n    EventWindow.prototype.refresh = function () {\n        this.destroy(true);\n        this.renderEventWindow();\n    };\n    EventWindow.prototype.refreshRecurrenceEditor = function () {\n        if (this.recurrenceEditor) {\n            var recurrenceEditor = this.recurrenceEditor.element;\n            this.recurrenceEditor.destroy();\n            this.createRecurrenceEditor(recurrenceEditor);\n        }\n    };\n    EventWindow.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n        if (this.parent.editorTemplate) {\n            this.recurrenceEditor = recurrenceEditor;\n        }\n    };\n    EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\n        this.parent.currentAction = type;\n        this.parent.removeNewEventElement();\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        this.parent.inlineModule.removeInlineAppointmentElement();\n        if (type === 'Add') {\n            var eventObj = {};\n            this.cellClickAction = !isEventData;\n            this.parent.activeCellsData = data;\n            var event_1 = data;\n            if (this.cellClickAction) {\n                this.convertToEventData(event_1, eventObj);\n            }\n            else {\n                this.parent.activeCellsData = {\n                    startTime: (event_1.startTime || event_1[this.fields.startTime]),\n                    endTime: (event_1.endTime || event_1[this.fields.endTime]),\n                    isAllDay: (event_1.isAllDay || event_1[this.fields.isAllDay]),\n                    element: event_1.element,\n                    groupIndex: event_1.groupIndex\n                };\n                eventObj = event_1;\n            }\n            data = eventObj;\n        }\n        if (!isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n            this.parent.resetTemplates(['editorHeaderTemplate']);\n            if (this.parent.isAdaptive && !this.parent.editorFooterTemplate) {\n                this.dialogObject.header = this.createAdaptiveHeaderElement(data);\n            }\n            else {\n                this.dialogObject.header = this.getDialogHeader(data);\n            }\n        }\n        if (!isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            this.parent.resetTemplates(['editorFooterTemplate']);\n            this.dialogObject.footerTemplate = this.getDialogFooter(data);\n        }\n        if (!isNullOrUndefined(this.parent.editorHeaderTemplate) || !isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            this.dialogObject.dataBind();\n            this.addEventHandlers();\n        }\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            this.renderFormElements(this.element.querySelector('.e-schedule-form'), data, type, repeatType);\n        }\n        else {\n            this.setEditorContent(data, type, repeatType);\n        }\n    };\n    EventWindow.prototype.setEditorContent = function (data, type, repeatType) {\n        if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n        }\n        switch (type) {\n            case 'Add':\n                this.onCellDetailsUpdate(data, repeatType);\n                break;\n            case 'Save':\n            case 'EditOccurrence':\n            case 'EditSeries':\n            case 'EditFollowingEvents':\n                if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n                    addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n                }\n                this.cellClickAction = false;\n                this.onEventDetailsUpdate(data);\n                break;\n        }\n    };\n    EventWindow.prototype.setDialogContent = function () {\n        this.dialogObject.content = this.getEventWindowContent();\n        this.dialogObject.dataBind();\n        this.applyFormValidation();\n    };\n    EventWindow.prototype.setDialogHeader = function () {\n        if (!isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n            this.parent.resetTemplates(['editorHeaderTemplate']);\n            if (this.parent.isAdaptive && !this.parent.editorFooterTemplate) {\n                this.dialogObject.header = this.createAdaptiveHeaderElement();\n            }\n            else {\n                this.dialogObject.header = this.getDialogHeader();\n            }\n        }\n        else if (this.parent.isAdaptive) {\n            this.dialogObject.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' +\n                this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n        }\n        else {\n            this.dialogObject.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n        }\n        this.dialogObject.dataBind();\n        this.addEventHandlers();\n    };\n    EventWindow.prototype.setDialogFooter = function () {\n        if (!isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            this.parent.resetTemplates(['editorFooterTemplate']);\n            this.dialogObject.footerTemplate = this.getDialogFooter();\n        }\n        else if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            this.renderDialogButtons(this.dialogObject);\n        }\n        else if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            this.dialogObject.footerTemplate = null;\n        }\n        this.dialogObject.dataBind();\n    };\n    EventWindow.prototype.createAdaptiveHeaderElement = function (data) {\n        var header = createElement('div', { className: 'e-title-header' });\n        var headerBackIcon = createElement('div', { className: 'e-back-icon e-icons' });\n        header.appendChild(headerBackIcon);\n        var headerTemplate = this.getDialogHeader(data);\n        header.appendChild(headerTemplate);\n        var headerSaveIcon = createElement('div', { className: 'e-save-icon e-icons' });\n        header.appendChild(headerSaveIcon);\n        return header;\n    };\n    EventWindow.prototype.getDialogHeader = function (args) {\n        var headerTemplate = [];\n        var headerTemplateId = this.parent.element.id + '_editorHeaderTemplate';\n        var temHeaderDiv = document.createElement('div');\n        headerTemplate = [].slice.call(this.parent.getEditorHeaderTemplate()(args || {}, this.parent, 'editorHeaderTemplate', headerTemplateId, false));\n        append(headerTemplate, temHeaderDiv);\n        return temHeaderDiv;\n    };\n    EventWindow.prototype.getDialogFooter = function (args) {\n        var footerTemplate = [];\n        var footerTemplateId = this.parent.element.id + '_editorFooterTemplate';\n        var temFooterDiv = document.createElement('div');\n        footerTemplate = [].slice.call(this.parent.getEditorFooterTemplate()(args || {}, this.parent, 'editorFooterTemplate', footerTemplateId, false));\n        append(footerTemplate, temFooterDiv);\n        return temFooterDiv;\n    };\n    EventWindow.prototype.preventEventSave = function (e) {\n        if (this.parent && !this.parent.allowKeyboardInteraction && e.code === 'Enter') {\n            this.isEnterKey = true;\n        }\n    };\n    EventWindow.prototype.onBeforeOpen = function (args) {\n        var _this = this;\n        var endTime = this.eventData[this.fields.endTime].getTime();\n        var eventProp = {\n            type: 'Editor',\n            data: this.eventData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        if (this.cellClickAction) {\n            eventProp.duration = this.getSlotDuration();\n        }\n        var saveObj = this.getInstance(cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n        if (saveObj) {\n            saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n            saveObj.dataBind();\n        }\n        var deleteObj = this.getInstance(cls.DELETE_EVENT_CLASS);\n        if (deleteObj) {\n            deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n            deleteObj.dataBind();\n        }\n        var callBackPromise = new Deferred();\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            args.cancel = popupArgs.cancel;\n            args.maxHeight = _this.parent.isAdaptive ? 'max-content' : args.maxHeight;\n            _this.duration = _this.cellClickAction ? popupArgs.duration : null;\n            if (_this.eventData[_this.fields.endTime].getTime() === endTime && !_this.cellClickAction &&\n                _this.eventData[_this.fields.endTime].getHours() === 0 &&\n                _this.eventData[_this.fields.endTime].getMinutes() === 0) {\n                _this.eventData = extend({}, _this.eventData, null, true);\n                _this.trimAllDay(_this.eventData);\n            }\n            _this.refreshDateTimePicker(_this.duration);\n            if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {\n                var startObj = _this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n                var endObj = _this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n                endObj.value = new Date(startObj.value.getTime() + (util.MS_PER_MINUTE * popupArgs.duration));\n                endObj.dataBind();\n            }\n            if (_this.parent.editorTemplate && _this.element.querySelector('.e-recurrenceeditor') && !_this.recurrenceEditor) {\n                _this.recurrenceEditor = _this.getInstance('e-recurrenceeditor');\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.onBeforeClose = function (args) {\n        var _this = this;\n        if (args.isInteracted) {\n            this.isCrudAction = false;\n        }\n        var eventProp = {\n            type: 'Editor',\n            event: args.event || this.dialogEvent,\n            data: this.eventCrudData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        var callBackPromise = new Deferred();\n        this.parent.trigger(event.popupClose, eventProp, function (popupArgs) {\n            args.cancel = popupArgs.cancel;\n            if (!popupArgs.cancel) {\n                if (_this.isCrudAction) {\n                    args.cancel = _this.processCrudActions(popupArgs.data);\n                    _this.isCrudAction = args.cancel;\n                }\n                if (!_this.isCrudAction) {\n                    _this.resetForm();\n                    _this.parent.eventBase.focusElement(true);\n                    _this.eventCrudData = null;\n                }\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.getEventWindowContent = function () {\n        var container = createElement('div', { className: cls.FORM_CONTAINER_CLASS });\n        var form = createElement('form', {\n            id: this.parent.element.id + 'EditForm',\n            className: cls.FORM_CLASS,\n            attrs: { onsubmit: 'return false;' }\n        });\n        this.renderFormElements(form);\n        container.appendChild(form);\n        return container;\n    };\n    EventWindow.prototype.renderFormElements = function (form, args, type, repeatType) {\n        var _this = this;\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            if (args) {\n                if (this.fieldValidator) {\n                    this.fieldValidator.destroy();\n                    this.fieldValidator = null;\n                }\n                if (this.recurrenceEditor) {\n                    this.recurrenceEditor.destroy();\n                    this.recurrenceEditor = null;\n                }\n                this.destroyComponents();\n                this.parent.resetTemplates(['editorTemplate']);\n                EventHandler.clearEvents(form);\n                if (!this.parent.isReact) {\n                    var formElements = [].slice.call(form.children);\n                    for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {\n                        var element = formElements_1[_i];\n                        remove(element);\n                    }\n                }\n            }\n            var templateId = this.parent.element.id + '_editorTemplate';\n            var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n            append(tempEle, form);\n            this.parent.renderTemplates(function () {\n                if (_this.element) {\n                    _this.applyFormValidation();\n                    if (args) {\n                        _this.setEditorContent(args, type, repeatType);\n                    }\n                }\n            });\n        }\n        else {\n            form.appendChild(this.getDefaultEventWindowContent());\n            if (args) {\n                this.setEditorContent(args, type, repeatType);\n            }\n        }\n    };\n    EventWindow.prototype.getDefaultEventWindowContent = function () {\n        var parentDiv = this.createDivElement(cls.EVENT_WINDOW_DIALOG_PARENT_CLASS);\n        var titleLocationDiv = this.createDivElement(cls.EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n        parentDiv.appendChild(titleLocationDiv);\n        titleLocationDiv.appendChild(this.renderTextBox(cls.SUBJECT_CLASS));\n        titleLocationDiv.appendChild(this.renderTextBox(cls.LOCATION_CLASS));\n        var startEndDateTimeDiv = this.createDivElement(cls.EVENT_WINDOW_START_END_DIV_CLASS);\n        parentDiv.appendChild(startEndDateTimeDiv);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_END_CLASS));\n        var allDayTimezoneDiv = this.createDivElement(cls.EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n        parentDiv.appendChild(allDayTimezoneDiv);\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.EVENT_WINDOW_ALL_DAY_CLASS));\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.TIME_ZONE_CLASS));\n        var timezoneParentDiv = this.createDivElement(cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        parentDiv.appendChild(timezoneParentDiv);\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_START_TZ_CLASS));\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_END_TZ_CLASS));\n        var repeatParentDiv = this.createDivElement(cls.EVENT_WINDOW_REPEAT_DIV_CLASS);\n        parentDiv.appendChild(repeatParentDiv);\n        var repeatDiv = this.renderCheckBox(cls.EVENT_WINDOW_REPEAT_CLASS);\n        var repeatEditContainer = createElement('span', { className: REPEAT_CONTAINER_CLASS });\n        var button = createElement('button', {\n            className: REPEAT_BUTTON_CLASS,\n            attrs: { type: 'button', 'title': this.l10n.getConstant('editRecurrence') }\n        });\n        this.buttonObj = new Button({ iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons', cssClass: 'e-medium ' + this.parent.cssClass });\n        repeatEditContainer.appendChild(button);\n        this.buttonObj.appendTo(button);\n        repeatDiv.appendChild(repeatEditContainer);\n        repeatParentDiv.appendChild(repeatDiv);\n        if (this.parent.isAdaptive) {\n            EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n        }\n        else {\n            this.createRecurrenceEditor(parentDiv);\n        }\n        if (this.parent.resourceCollection.length > 0) {\n            var resourceParentDiv = this.createDivElement(cls.EVENT_WINDOW_RESOURCES_DIV_CLASS);\n            for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n            }\n            parentDiv.appendChild(resourceParentDiv);\n        }\n        var description = this.createDivElement(cls.DESCRIPTION_CLASS + '-row');\n        description.appendChild(this.renderTextBox(cls.DESCRIPTION_CLASS));\n        parentDiv.appendChild(description);\n        var submit = createElement('button', { attrs: { type: 'hidden', title: 'submit' } });\n        submit.style.display = 'none';\n        parentDiv.appendChild(submit);\n        return parentDiv;\n    };\n    EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\n        var recurrenceEditor = createElement('div', { id: this.parent.element.id + '_recurrence_editor' });\n        parentDiv.appendChild(recurrenceEditor);\n        this.recurrenceEditor = this.renderRecurrenceEditor();\n        this.recurrenceEditor.appendTo(recurrenceEditor);\n        this.updateMinMaxDateToEditor();\n    };\n    EventWindow.prototype.createDivElement = function (className) {\n        return createElement('div', { className: className });\n    };\n    EventWindow.prototype.createInputElement = function (className, fieldName, type) {\n        return createElement(type || 'input', {\n            className: className, attrs: {\n                type: 'text', name: fieldName, value: '', id: fieldName\n            }\n        });\n    };\n    EventWindow.prototype.getSlotDuration = function () {\n        return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    };\n    EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\n        var dateTimeDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        dateTimeDiv.appendChild(dateTimeInput);\n        var dateTimePicker = new DateTimePicker({\n            change: changeEvent,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            calendarMode: this.parent.calendarMode,\n            min: this.parent.minDate,\n            max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            floatLabelType: 'Always',\n            strictMode: true,\n            timeFormat: this.parent.activeViewOptions.timeFormat,\n            format: (isNullOrUndefined(this.parent.dateFormat) ?\n                this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.parent.activeViewOptions.timeFormat,\n            placeholder: this.getFieldLabel(value),\n            step: this.getSlotDuration(),\n            width: '100%'\n        });\n        dateTimePicker.appendTo(dateTimeInput);\n        return dateTimeDiv;\n    };\n    EventWindow.prototype.refreshDateTimePicker = function (duration) {\n        var elementSelector = '.' + cls.EVENT_WINDOW_START_CLASS + ',.' + cls.EVENT_WINDOW_END_CLASS;\n        var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {\n            var element = startEndElement_1[_i];\n            var instance = element.ej2_instances[0];\n            instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n            instance.timeFormat = this.parent.activeViewOptions.timeFormat;\n            instance.step = duration || this.getSlotDuration();\n            instance.dataBind();\n        }\n    };\n    EventWindow.prototype.onTimeChange = function () {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n            var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n            var duration = 0;\n            if (this.cellClickAction) {\n                duration = util.MS_PER_MINUTE * this.duration;\n                this.eventWindowTime.startTime = startObj.value;\n            }\n            else {\n                duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n            }\n            var endDate = (isNullOrUndefined(startObj.value)) ? null : new Date(startObj.value.getTime() + duration);\n            if (this.cellClickAction) {\n                this.eventWindowTime.endTime = endDate;\n            }\n            endObj.value = endDate;\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n        }\n    };\n    EventWindow.prototype.renderResourceDetails = function (resourceData) {\n        var _this = this;\n        var fieldName = resourceData.field;\n        var value = 'e-' + fieldName;\n        var labelValue = resourceData.title;\n        var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n        var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        resourceDiv.appendChild(resourceInput);\n        var resourceTemplate = function (data) {\n            return SanitizeHtmlHelper.sanitize(\"<div class=\\\"e-resource-template\\\">\\n                <div class=\\\"e-resource-color\\\" data-resource-color=\\\"\" + data[resourceData.colorField] + \"\\\"></div>\\n                <div class=\\\"e-resource-text\\\">\" + data[resourceData.textField] + \"</div></div>\");\n        };\n        initializeCSPTemplate(resourceTemplate, resourceData);\n        if (resourceData.allowMultiple) {\n            var listObj = new MultiSelect({\n                enableRtl: this.parent.enableRtl,\n                enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                cssClass: this.parent.cssClass || '',\n                dataSource: resourceData.dataSource,\n                change: this.onMultiselectResourceChange.bind(this),\n                itemTemplate: resourceTemplate,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                mode: 'Box',\n                open: function (args) {\n                    Promise.resolve().then(function () {\n                        _this.applyStylesAfterRender(args);\n                    });\n                }\n            });\n            listObj.appendTo(resourceInput);\n        }\n        else {\n            var dropDownList = new DropDownList({\n                cssClass: this.parent.cssClass || '',\n                change: this.onDropdownResourceChange.bind(this),\n                dataSource: resourceData.dataSource,\n                enableRtl: this.parent.enableRtl,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                itemTemplate: resourceTemplate,\n                open: function (args) {\n                    Promise.resolve().then(function () {\n                        _this.applyStylesAfterRender(args);\n                    });\n                }\n            });\n            dropDownList.appendTo(resourceInput);\n        }\n        return resourceDiv;\n    };\n    EventWindow.prototype.applyStylesAfterRender = function (args) {\n        if (!args.popup || !args.popup.element) {\n            return;\n        }\n        var resourceColors = args.popup.element.querySelectorAll('.e-resource-color[data-resource-color]');\n        resourceColors.forEach(function (element) {\n            var color = element.getAttribute('data-resource-color');\n            if (color) {\n                element.style.backgroundColor = color;\n            }\n        });\n    };\n    EventWindow.prototype.renderDropDown = function (value) {\n        var _this = this;\n        var fieldName = this.getFieldName(value);\n        var timezoneDiv = this.createDivElement(value + '-container');\n        var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        timezoneDiv.appendChild(timezoneInput);\n        var dropDownList = new DropDownList({\n            allowFiltering: true,\n            change: this.onTimezoneChange.bind(this),\n            cssClass: this.parent.cssClass || '',\n            dataSource: this.parent.timezoneDataSource,\n            enableRtl: this.parent.enableRtl,\n            fields: { text: 'Text', value: 'Value' },\n            filterBarPlaceholder: this.parent.localeObj.getConstant('searchTimezone'),\n            noRecordsTemplate: this.parent.localeObj.getConstant('noRecords'),\n            filtering: function (e) {\n                var query = new Query();\n                query = (e.text !== '') ? query.where('Text', 'contains', e.text, true) : query;\n                e.updateData(_this.parent.timezoneDataSource, query);\n            },\n            htmlAttributes: { 'title': this.getFieldLabel(value), 'name': fieldName },\n            floatLabelType: 'Always',\n            placeholder: this.getFieldLabel(value),\n            popupHeight: '230px'\n        });\n        dropDownList.appendTo(timezoneInput);\n        return timezoneDiv;\n    };\n    EventWindow.prototype.onMultiselectResourceChange = function (args) {\n        if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n            return;\n        }\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if (resourceCollection[parseInt(i.toString(), 10)].field === fieldName && i < resourceCollection.length - 1) {\n                var resObject = this.createInstance(i);\n                var datasource = [];\n                var _loop_1 = function (j) {\n                    var resourceModel = resourceCollection[i + 1];\n                    // eslint-disable-next-line max-len\n                    var filter = resourceModel.dataSource.filter(function (data) {\n                        return data[resourceModel.groupIDField] === args.value[parseInt(j.toString(), 10)];\n                    })[0];\n                    var groupId = (!isNullOrUndefined(filter)) ?\n                        filter[resourceCollection[i + 1].groupIDField] : null;\n                    var filterRes = this_1.filterDatasource(i, groupId);\n                    datasource = datasource.concat(filterRes);\n                };\n                var this_1 = this;\n                for (var j = 0; j < args.value.length; j++) {\n                    _loop_1(j);\n                }\n                resObject.dataSource = datasource;\n                resObject.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.createInstance = function (index) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        var resObject = this.element.querySelector('.e-' + resourceData.field).\n            ej2_instances[0];\n        resObject.clear();\n        return resObject;\n    };\n    EventWindow.prototype.onDropdownResourceChange = function (args) {\n        if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n            return;\n        }\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if ((i < resourceCollection.length - 1) && resourceCollection[parseInt(i.toString(), 10)].field === fieldName) {\n                var resObj = this.createInstance(i);\n                var groupId = args.itemData[resourceCollection[parseInt(i.toString(), 10)].idField];\n                resObj.dataSource = this.filterDatasource(i, groupId);\n                resObj.dataBind();\n                var resValue = (resObj.dataSource.length > 0) ?\n                    resObj.dataSource[0][resourceCollection[i + 1].idField] : null;\n                resObj.value = (resourceCollection[i + 1].allowMultiple) ? [resValue] : resValue;\n                resObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.filterDatasource = function (index, groupId) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        return resourceData.dataSource.filter(function (data) {\n            return data[resourceData.groupIDField] === groupId;\n        });\n    };\n    EventWindow.prototype.onTimezoneChange = function (args) {\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        if (fieldName === this.parent.eventFields.startTimezone) {\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            endTimezoneObj.value = startTimezoneObj.value;\n            endTimezoneObj.dataBind();\n        }\n    };\n    EventWindow.prototype.renderCheckBox = function (value) {\n        var checkBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        checkBoxDiv.appendChild(checkBoxInput);\n        var checkBox = new CheckBox({\n            change: this.onChange.bind(this),\n            cssClass: value + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            label: this.getFieldLabel(value)\n        });\n        checkBox.appendTo(checkBoxInput);\n        checkBoxInput.setAttribute('name', fieldName);\n        if (fieldName === 'Repeat') {\n            this.repeatStatus = checkBox;\n        }\n        return checkBoxDiv;\n    };\n    EventWindow.prototype.renderTextBox = function (value) {\n        var textBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var elementType = (value === cls.DESCRIPTION_CLASS) ? 'textarea' : 'input';\n        var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName, elementType);\n        textBoxDiv.appendChild(textBoxInput);\n        Input.createInput({\n            element: textBoxInput,\n            floatLabelType: 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl,\n                placeholder: this.getFieldLabel(value)\n            }\n        });\n        return textBoxDiv;\n    };\n    EventWindow.prototype.getFieldName = function (name) {\n        var fieldName = '';\n        switch (name) {\n            case cls.SUBJECT_CLASS:\n                fieldName = this.fields.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                fieldName = this.fields.location;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                fieldName = this.fields.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                fieldName = this.fields.endTime;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                fieldName = this.fields.description;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                fieldName = this.fields.isAllDay;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                fieldName = this.fields.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                fieldName = this.fields.endTimezone;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                fieldName = 'Timezone';\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                fieldName = 'Repeat';\n                break;\n        }\n        return fieldName;\n    };\n    EventWindow.prototype.getFieldLabel = function (fieldName) {\n        var labelText = '';\n        switch (fieldName) {\n            case cls.SUBJECT_CLASS:\n                labelText = this.parent.editorTitles.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                labelText = this.parent.editorTitles.location;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                labelText = this.parent.editorTitles.description;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                labelText = this.parent.editorTitles.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                labelText = this.parent.editorTitles.endTime;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                labelText = this.parent.editorTitles.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                labelText = this.parent.editorTitles.endTimezone;\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                labelText = this.parent.editorTitles.recurrenceRule;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                labelText = this.parent.editorTitles.isAllDay;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                labelText = this.l10n.getConstant('timezone');\n                break;\n        }\n        return labelText;\n    };\n    EventWindow.prototype.onChange = function (args) {\n        if (args.event && args.event.target) {\n            var targetSelector = \".\" + cls.EVENT_WINDOW_ALL_DAY_CLASS + \",.\" + cls.TIME_ZONE_CLASS + \",.\" + cls.EVENT_WINDOW_REPEAT_CLASS;\n            var target = closest(args.event.target, targetSelector);\n            if (target.classList.contains(cls.EVENT_WINDOW_ALL_DAY_CLASS)) {\n                this.onAllDayChange(args.checked);\n            }\n            else if (target.classList.contains(cls.TIME_ZONE_CLASS)) {\n                this.timezoneChangeStyle(args.checked);\n            }\n            else if (target.classList.contains(cls.EVENT_WINDOW_REPEAT_CLASS)) {\n                this.onRepeatChange(args.checked);\n            }\n        }\n    };\n    EventWindow.prototype.renderRepeatDialog = function () {\n        var element = createElement('div');\n        this.repeatDialogObject = new Dialog({\n            header: this.l10n.getConstant('recurrence'),\n            visible: false,\n            content: '<div class=\"e-rec-editor\"></div>',\n            closeOnEscape: true,\n            width: '90%',\n            buttons: [{\n                    click: this.repeatSaveDialog.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('save'), cssClass: 'e-save', isPrimary: true }\n                },\n                { click: this.repeatCancelDialog.bind(this), buttonModel: { cssClass: 'e-cancel', content: this.l10n.getConstant('cancel') } }],\n            target: this.element,\n            animationSettings: { effect: 'Zoom' },\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            isModal: true,\n            cssClass: REPEAT_DIALOG_CLASS,\n            open: this.repeatOpenDialog.bind(this)\n        });\n        this.element.appendChild(element);\n        this.repeatDialogObject.appendTo(element);\n        this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n    };\n    EventWindow.prototype.loadRecurrenceEditor = function () {\n        this.repeatDialogObject.show();\n        if (this.recurrenceEditor && this.repeatRule) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        }\n    };\n    EventWindow.prototype.onRepeatChange = function (state) {\n        if (state) {\n            if (!this.repeatDialogObject) {\n                this.renderRepeatDialog();\n            }\n            this.recurrenceEditor.setProperties({ startDate: this.repeatStartDate, selectedType: 0 });\n            this.loadRecurrenceEditor();\n        }\n        else {\n            if (this.repeatDialogObject) {\n                this.repeatDialogObject.hide();\n            }\n            this.repeatRule = '';\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n                this.updateRepeatLabel(this.repeatRule);\n            }\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n        }\n    };\n    EventWindow.prototype.repeatSaveDialog = function () {\n        this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n        var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n        if (this.recurrenceEditor.getRecurrenceRule()) {\n            removeClass([element], HIDE_STYLE_CLASS);\n        }\n        else {\n            addClass([element], HIDE_STYLE_CLASS);\n            this.repeatStatus.setProperties({ checked: false });\n        }\n        this.updateRepeatLabel(this.repeatRule);\n        this.closeRepeatDialog();\n    };\n    EventWindow.prototype.closeRepeatDialog = function () {\n        this.repeatDialogObject.hide();\n    };\n    EventWindow.prototype.repeatCancelDialog = function () {\n        this.closeRepeatDialog();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n        }\n        if (!this.repeatTempRule) {\n            this.repeatStatus.setProperties({ checked: false });\n        }\n    };\n    EventWindow.prototype.repeatOpenDialog = function () {\n        this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n    };\n    EventWindow.prototype.onCellDetailsUpdate = function (eventObj, repeatType) {\n        if (!this.parent.eventSettings.allowAdding) {\n            return;\n        }\n        if (this.parent.isAdaptive && repeatType && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        this.element.querySelector('.' + cls.FORM_CLASS).removeAttribute('data-id');\n        if (isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n            this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n        }\n        eventObj.Timezone = false;\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n            eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n            eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n        if (deleteButton) {\n            addClass([deleteButton], cls.DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({\n                startDate: eventObj[this.fields.startTime],\n                selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ?\n                    this.recurrenceEditor.selectedType : 0\n            });\n            this.repeatRule = this.recurrenceEditor.value;\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            if (eventObj[this.fields.recurrenceRule] || repeatType) {\n                removeClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: true });\n            }\n            else {\n                addClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: false });\n            }\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        else {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            this.disableButton(saveButton, false);\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\n        if (cellsData.subject) {\n            eventObj[this.fields.subject] = cellsData.subject;\n        }\n        eventObj[this.fields.startTime] = cellsData.startTime;\n        eventObj[this.fields.endTime] = cellsData.endTime;\n        eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n        if (cellsData.RecurrenceRule) {\n            eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n        }\n        if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.setResourceValues(eventObj);\n        }\n    };\n    EventWindow.prototype.applyFormValidation = function () {\n        var form = this.element.querySelector('.' + cls.FORM_CLASS);\n        if (!form) {\n            return;\n        }\n        var getValidationRule = function (rules) {\n            return (rules && Object.keys(rules).length > 0) ? rules : undefined;\n        };\n        var rules = {};\n        var subjectRule = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n        if (!isNullOrUndefined(subjectRule)) {\n            rules[this.parent.eventSettings.fields.subject.name] = subjectRule;\n        }\n        var locationRule = getValidationRule(this.parent.eventSettings.fields.location.validation);\n        if (!isNullOrUndefined(locationRule)) {\n            rules[this.parent.eventSettings.fields.location.name] = locationRule;\n        }\n        var startTimeRule = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n        if (!isNullOrUndefined(startTimeRule)) {\n            rules[this.parent.eventSettings.fields.startTime.name] = startTimeRule;\n        }\n        var endTimeRule = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n        if (!isNullOrUndefined(endTimeRule)) {\n            rules[this.parent.eventSettings.fields.endTime.name] = endTimeRule;\n        }\n        var descriptionRule = getValidationRule(this.parent.eventSettings.fields.description.validation);\n        if (!isNullOrUndefined(descriptionRule)) {\n            rules[this.parent.eventSettings.fields.description.name] = descriptionRule;\n        }\n        if (this.fieldValidator) {\n            this.fieldValidator.destroy();\n            this.fieldValidator = null;\n        }\n        this.fieldValidator = new FieldValidator();\n        this.fieldValidator.renderFormValidator(form, rules, this.element, this.parent.locale);\n    };\n    EventWindow.prototype.showDetails = function (eventData) {\n        this.eventData = eventData;\n        var eventObj = extend({}, eventData, null, true);\n        var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        if ((!this.cellClickAction || this.cellClickAction && !isNullOrUndefined(this.parent.editorTemplate)) &&\n            eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n            this.trimAllDay(eventObj);\n        }\n        var keyNames = Object.keys(eventObj);\n        for (var _i = 0, formElements_2 = formElements; _i < formElements_2.length; _i++) {\n            var curElement = formElements_2[_i];\n            var columnName = curElement.name || this.getColumnName(curElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                if (keyNames.indexOf(columnName) !== -1) {\n                    this.setValueToElement(curElement, eventObj[\"\" + columnName]);\n                }\n                else {\n                    this.setDefaultValueToElement(curElement);\n                }\n            }\n        }\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            this.onAllDayChange(eventObj[this.fields.isAllDay]);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n                timezoneObj.checked = true;\n                timezoneObj.dataBind();\n            }\n            this.timezoneChangeStyle(timezoneObj.checked);\n            delete eventObj.Timezone;\n        }\n    };\n    EventWindow.prototype.getColumnName = function (element) {\n        var attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            var isDropDowns = false;\n            var fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist')) {\n                fieldSelector = 'e-ddl';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                fieldSelector = 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-datetimepicker')) {\n                fieldSelector = 'e-datetimepicker';\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                fieldSelector = 'e-datepicker';\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                fieldSelector = 'e-checkbox';\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                fieldSelector = 'e-numerictextbox';\n            }\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n            if (control) {\n                var attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    };\n    EventWindow.prototype.onAllDayChange = function (allDayStatus) {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n        var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n        var format;\n        if (allDayStatus) {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n            addClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            addClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n                removeClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        else {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') + ' ' +\n                this.parent.activeViewOptions.timeFormat : this.parent.dateFormat + ' ' + this.parent.activeViewOptions.timeFormat;\n            removeClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            removeClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n                addClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        if (this.cellClickAction) {\n            this.updateDateTime(allDayStatus, startObj, endObj);\n        }\n        startObj.dataBind();\n        endObj.dataBind();\n        if (!isNullOrUndefined(this.recurrenceEditor)) {\n            this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n        }\n    };\n    EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\n        var startDate;\n        var endDate;\n        if (allDayStatus) {\n            startDate = util.resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n            if (this.parent.activeCellsData.isAllDay) {\n                var temp = util.addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n                endDate = (+this.eventWindowTime.startTime > temp) ? this.eventWindowTime.endTime : new Date(temp);\n            }\n            else {\n                endDate = util.resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n            }\n        }\n        else {\n            var start = this.parent.activeCellsData.startTime;\n            startDate = new Date(this.eventWindowTime.startTime.getTime());\n            startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n            if (this.parent.activeCellsData.isAllDay) {\n                var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n                startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(util.MS_PER_MINUTE * this.getSlotDuration());\n            }\n            else {\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n            }\n        }\n        this.eventWindowTime = { startTime: new Date(startDate.getTime()), endTime: new Date(endDate.getTime()) };\n        startObj.value = startDate;\n        endObj.value = endDate;\n        startObj.dataBind();\n        endObj.dataBind();\n    };\n    EventWindow.prototype.getFormat = function (formatType) {\n        var format;\n        if (isNullOrUndefined(this.parent.locale) || this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n        }\n        else {\n            format = getValue(\"main.\" + this.parent.locale + \".dates.calendars.\" + this.parent.getCalendarMode() + \".\" + formatType + \".short\", cldrData);\n        }\n        return format;\n    };\n    EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\n        if (!this.parent.eventSettings.allowEditing) {\n            return;\n        }\n        if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            removeClass([this.element.querySelector('.' + cls.DELETE_EVENT_CLASS)], cls.DISABLE_CLASS);\n        }\n        if (isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n            this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n        }\n        this.element.querySelector('.' + cls.FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            eventObj = extend({}, eventObj, null, true);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            var timezoneValue = void 0;\n            if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n                timezoneValue = true;\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            else {\n                timezoneValue = false;\n            }\n            eventObj.Timezone = timezoneValue;\n            timezoneObj.checked = timezoneValue;\n            timezoneObj.dataBind();\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n        }\n        else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({ startDate: eventObj[this.fields.startTime] });\n            this.recurrenceEditor.setRecurrenceRule('');\n        }\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (eventObj[this.fields.recurrenceRule]) {\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            }\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            if (eventObj[this.fields.recurrenceRule]) {\n                removeClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: true });\n            }\n            else {\n                addClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: false });\n            }\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        var isDisable = (this.parent.readonly || eventObj[this.fields.isReadonly]);\n        if (!this.parent.isAdaptive) {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n            this.disableButton(saveButton, isDisable);\n            this.disableButton(deleteButton, isDisable);\n        }\n        else {\n            var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n            if (saveIcon) {\n                if (isDisable) {\n                    addClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n                else {\n                    removeClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n            }\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.disableButton = function (element, value) {\n        if (element) {\n            element.ej2_instances[0].disabled = value;\n        }\n    };\n    EventWindow.prototype.renderRecurrenceEditor = function () {\n        return new RecurrenceEditor({\n            calendarMode: this.parent.calendarMode,\n            cssClass: this.parent.cssClass,\n            dateFormat: this.parent.dateFormat,\n            enableRtl: this.parent.enableRtl,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            locale: this.parent.locale\n        });\n    };\n    EventWindow.prototype.updateMinMaxDateToEditor = function () {\n        var startDate = this.element.querySelector('.e-start');\n        var endDate = this.element.querySelector('.e-end');\n        if (startDate && endDate) {\n            var startObj = startDate.ej2_instances[0];\n            var endObj = endDate.ej2_instances[0];\n            startObj.min = this.parent.minDate;\n            startObj.max = this.parent.maxDate;\n            endObj.min = this.parent.minDate;\n            endObj.max = this.parent.maxDate;\n            startObj.dataBind();\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n            if (untilDate) {\n                var untilObj = untilDate.ej2_instances[0];\n                untilObj.min = this.parent.minDate;\n                untilObj.max = this.parent.maxDate;\n                untilObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        var data = repeatRule ?\n            (this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule)) : this.l10n.getConstant('repeat');\n        this.repeatStatus.setProperties({ label: data });\n    };\n    EventWindow.prototype.dialogClose = function (event) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.parent.activeEventData = { event: undefined, element: undefined };\n        this.parent.currentAction = null;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.resetForm = function () {\n        this.fieldValidator.destroyToolTip();\n        this.resetFormFields();\n        if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n            this.recurrenceEditor.resetFields();\n        }\n    };\n    EventWindow.prototype.timezoneChangeStyle = function (value) {\n        var timezoneDiv = this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n        if (value) {\n            addClass([timezoneDiv], cls.ENABLE_CLASS);\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            var timezone = startTimezoneObj.dataSource;\n            if (!startTimezoneObj.value || !this.parent.timezone) {\n                var found = timezone.some(function (tz) { return tz.Value === localTimezoneName; });\n                if (!found) {\n                    timezone.push({ Value: localTimezoneName, Text: localTimezoneName });\n                    startTimezoneObj.dataSource = timezone;\n                    endTimezoneObj.dataSource = timezone;\n                    startTimezoneObj.dataBind();\n                    endTimezoneObj.dataBind();\n                }\n            }\n            startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            startTimezoneObj.dataBind();\n            endTimezoneObj.dataBind();\n        }\n        else {\n            removeClass([timezoneDiv], cls.ENABLE_CLASS);\n        }\n    };\n    EventWindow.prototype.resetFormFields = function () {\n        var formElement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\n            var currentElement = formElement_1[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                this.setDefaultValueToElement(currentElement);\n            }\n        }\n    };\n    EventWindow.prototype.eventSave = function (event, alert) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        var formElement = this.element.querySelector('.' + cls.FORM_CLASS);\n        if (formElement && formElement.classList.contains('e-formvalidator') &&\n            !formElement.ej2_instances[0].validate()) {\n            return;\n        }\n        var dataCollection = this.getEventDataFromEditor();\n        if (this.processEventValidation(dataCollection.tempData, alert)) {\n            return;\n        }\n        this.eventCrudData = dataCollection.eventData;\n        this.dialogEvent = event;\n        this.isCrudAction = true;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.getEventDataFromEditor = function () {\n        var eventObj = extend({}, this.getObjectFromFormData(cls.EVENT_WINDOW_DIALOG_CLASS));\n        if (!eventObj.Timezone) {\n            eventObj[this.fields.startTimezone] = null;\n            eventObj[this.fields.endTimezone] = null;\n        }\n        delete eventObj.Timezone;\n        delete eventObj.Repeat;\n        this.setDefaultValueToObject(eventObj);\n        eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n        var tempObj = extend({}, eventObj, null, true);\n        if (eventObj[this.fields.isAllDay]) {\n            eventObj[this.fields.startTime] = (isNullOrUndefined(eventObj[this.fields.startTime])) ? null\n                : util.resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n            eventObj[this.fields.endTime] = (isNullOrUndefined(eventObj[this.fields.endTime])) ? null\n                : util.addDays(util.resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n        }\n        return { eventData: eventObj, tempData: tempObj };\n    };\n    EventWindow.prototype.processEventValidation = function (eventObj, alert) {\n        var alertType;\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('invalidDateError');\n                return true;\n            }\n            if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('startEndError');\n                return true;\n            }\n        }\n        if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n            if (this.parent.currentAction !== 'EditOccurrence') {\n                alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n            }\n            var isShowAlert = true;\n            if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n                isShowAlert = false;\n            }\n            if (!isNullOrUndefined(alertType) && isShowAlert\n                && ((!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern') || this.parent.enableRecurrenceValidation)) {\n                this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.processCrudActions = function (eventObj) {\n        var _this = this;\n        this.parent.uiStateValues.isBlock = false;\n        var resourceData = this.getResourceData(eventObj);\n        var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 ||\n            this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit\n            && !isNullOrUndefined(resourceData);\n        var eventId = this.getEventIdFromForm();\n        if (!isNullOrUndefined(eventId)) {\n            var eveId_1 = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n            var editedData = this.parent.eventsData.filter(function (data) {\n                return data[_this.fields.id] === eveId_1;\n            })[0];\n            if (isNullOrUndefined(editedData)) {\n                editedData = this.parent.blockData.filter(function (data) {\n                    return data[_this.fields.id] === eveId_1;\n                })[0];\n            }\n            eventObj = extend({}, editedData, eventObj);\n            if (eventObj[this.fields.isReadonly]) {\n                return false;\n            }\n            if (this.parent.eventBase.checkOverlap(eventObj)) {\n                return true;\n            }\n            var currentAction = void 0;\n            if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n                currentAction = this.parent.currentAction;\n                eventObj.Guid = this.parent.activeEventData.event.Guid;\n                if (this.parent.currentAction === 'EditOccurrence') {\n                    if (!eventObj[this.fields.recurrenceID]) {\n                        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                        eventObj.Guid = this.parent.activeEventData.event.Guid;\n                    }\n                    else {\n                        eveId_1 = eventObj[this.fields.recurrenceID];\n                        currentAction = null;\n                    }\n                    if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {\n                        return true;\n                    }\n                }\n                if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n                    eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n                }\n                else if (this.parent.currentAction === 'EditFollowingEvents') {\n                    eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                    eventObj[this.fields.followingID] = editedData[this.fields.id];\n                }\n            }\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, 'Save', currentAction);\n            }\n            else {\n                this.parent.saveEvent(eventObj, currentAction);\n            }\n        }\n        else {\n            this.parent.currentAction = 'Add';\n            if (this.parent.eventBase.checkOverlap(eventObj)) {\n                return true;\n            }\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, this.parent.currentAction);\n            }\n            else {\n                eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                this.parent.addEvent(eventObj);\n            }\n        }\n        return this.parent.uiStateValues.isBlock;\n    };\n    EventWindow.prototype.getResourceData = function (eventObj) {\n        var resourceData = null;\n        if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection)\n            && this.parent.resourceBase.resourceCollection.length > 0) {\n            var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            resourceData = eventObj[lastResourceData.field];\n        }\n        return resourceData;\n    };\n    EventWindow.prototype.getObjectFromFormData = function (className) {\n        var formElement = this.getFormElements(className);\n        var eventObj = {};\n        for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {\n            var currentElement = formElement_2[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                eventObj[\"\" + columnName] = this.getValueFromElement(currentElement);\n            }\n        }\n        return eventObj;\n    };\n    EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\n        if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n            eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n                || this.l10n.getConstant('addTitle');\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.location])) {\n            eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.description])) {\n            eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n        }\n    };\n    EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\n        var alertMessage;\n        var recEditor = this.recurrenceEditor;\n        var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n        if (alert !== this.l10n.getConstant('ok')) {\n            var activeEvent = this.parent.activeEventData.event;\n            var excludedEvents = [];\n            if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents')\n                && !isNullOrUndefined(activeEvent)) {\n                var eventStartTime = activeEvent[this.parent.eventFields.startTime];\n                var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n                if (seriesEvents.length > 0) {\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n                }\n                else {\n                    var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);\n                }\n                if (this.parent.currentAction === 'EditSeries'\n                    && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n                    excludedEvents.push(this.eventData);\n                }\n            }\n            if (excludedEvents.length > 0) {\n                alertMessage = 'seriesChangeAlert';\n            }\n            if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' &&\n                this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n                alertMessage = 'wrongPattern';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                var obj = { 'SU': 0, 'MO': 1, 'TU': 2, 'WE': 3, 'TH': 4, 'FR': 5, 'SA': 6 };\n                var temp = [];\n                var tempDiff = [];\n                var tempValue = void 0;\n                switch (recEditor.value.split(';')[0].split('=')[1]) {\n                    case 'DAILY':\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) > (interval * 24))) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'WEEKLY':\n                        types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                        for (var index = 0; index < types.length * (interval + 1); index++) {\n                            temp[parseInt(index.toString(), 10)] =\n                                (types.length > index) ? obj[types[parseInt(index.toString(), 10)]] :\n                                    temp[index - types.length] + (7 * interval);\n                        }\n                        tempValue = temp.sort(function (a, b) { return a - b; });\n                        for (var index = 1; index < tempValue.length; index++) {\n                            tempDiff.push(tempValue[parseInt(index.toString(), 10)] - tempValue[index - 1]);\n                        }\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) >= Math.min.apply(Math, tempDiff) * 24)\n                            || isNullOrUndefined(interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'MONTHLY':\n                        if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'YEARLY':\n                        if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                }\n            }\n        }\n        else {\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                alertMessage = 'createError';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                this.parent.quickPopup.quickDialog.hide();\n            }\n        }\n        if (isNullOrUndefined(interval)) {\n            alertMessage = 'createError';\n        }\n        return alertMessage;\n    };\n    EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\n        var recIndex;\n        for (var index = 0; index < recColl.length; index++) {\n            if (event[this.fields.startTime].valueOf() === recColl[parseInt(index.toString(), 10)][this.fields.startTime].valueOf()) {\n                recIndex = index;\n                break;\n            }\n        }\n        return recIndex;\n    };\n    EventWindow.prototype.trimAllDay = function (data) {\n        if (data[this.fields.isAllDay]) {\n            var temp = util.addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n            data[this.fields.endTime] = (+data[this.fields.startTime] > temp) ? data[this.fields.endTime] : new Date(temp);\n        }\n    };\n    EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\n        var _this = this;\n        if (editData === void 0) {\n            editData = this.eventData;\n        }\n        var recurColl = this.parent.getOccurrencesByID(eventId);\n        var excludedDatas = this.parent.eventsData.filter(function (data) {\n            return data[_this.fields.recurrenceID] === eventId;\n        });\n        excludedDatas.map(function (data) { return recurColl.push(extend({}, data)); });\n        currentData = extend({}, currentData);\n        this.trimAllDay(currentData);\n        for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\n            var data = recurColl_1[_i];\n            this.trimAllDay(data);\n        }\n        this.parent.eventBase.sortByTime(recurColl);\n        var index = this.getRecurrenceIndex(recurColl, editData);\n        if (isNullOrUndefined(index)) {\n            return false;\n        }\n        var currentStartTime = new Date(+currentData[this.fields.startTime]);\n        var currentEndTime = new Date(+currentData[this.fields.endTime]);\n        var nextStartTime;\n        var nextEndTime;\n        if (index !== recurColl.length - 1) {\n            nextStartTime = new Date(+recurColl[index + 1][this.fields.startTime]);\n            nextEndTime = new Date(+recurColl[index + 1][this.fields.endTime]);\n        }\n        var lastEndTime = new Date(+recurColl[recurColl.length - 1][this.fields.endTime]);\n        if (index === 0) {\n            if (!isNullOrUndefined(recurColl[index + 1])) {\n                if (!(nextStartTime.getTime() >= currentEndTime.getTime()) &&\n                    (util.resetTime(lastEndTime).getTime() >=\n                        util.resetTime(currentStartTime).getTime()) ||\n                    util.resetTime(lastEndTime).getTime() < util.resetTime(currentStartTime).getTime()) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                    return true;\n                }\n                else if (!(util.resetTime(currentStartTime).getTime() <\n                    util.resetTime(nextStartTime).getTime())) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            var previousStartTime = new Date(+recurColl[index - 1][this.fields.startTime]);\n            var previousEndTime = new Date(+recurColl[index - 1][this.fields.endTime]);\n            if (index === recurColl.length - 1) {\n                if (util.resetTime(new Date(+recurColl[(recurColl.length - 1) - index][this.fields.startTime])).getTime() >\n                    util.resetTime(currentStartTime).getTime()) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                    return true;\n                }\n                else if (!((previousEndTime.getTime() <= currentStartTime.getTime()) &&\n                    (util.resetTime(currentStartTime).getTime() > util.resetTime(previousStartTime).getTime()))) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                    return true;\n                }\n            }\n            else if (!(((util.resetTime(previousStartTime).getTime() < util.resetTime(currentStartTime).getTime()) ||\n                util.resetTime(new Date(+recurColl[0][this.fields.startTime])).getTime() >\n                    util.resetTime(currentStartTime).getTime()) &&\n                ((util.resetTime(nextStartTime).getTime() > util.resetTime(currentStartTime).getTime()) ||\n                    (lastEndTime.getTime() < currentStartTime.getTime())))) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                return true;\n            }\n            else if (!(previousEndTime.getTime() <= currentStartTime.getTime() && nextStartTime.getTime() >=\n                currentEndTime.getTime()) || (util.resetTime(nextEndTime).getTime() <\n                util.resetTime(currentStartTime).getTime()) ||\n                (util.resetTime(previousStartTime).getTime() > util.resetTime(currentEndTime).getTime()) ||\n                !(util.resetTime(currentStartTime).getTime() < util.resetTime(nextStartTime).getTime())) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\n        var _this = this;\n        var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n        var resourceData = eventObj[lastResourceData.field];\n        resourceData = (resourceData instanceof Array) ? resourceData.reverse() : [resourceData].reverse();\n        var lastLevel = this.parent.resourceBase.lastResourceLevel;\n        var eventList = [];\n        var _loop_2 = function (i) {\n            var events = extend({}, eventObj, null, true);\n            events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();\n            var temp = [];\n            var addValues = function () {\n                if (action === 'Save' && i === resourceData.length - 1) {\n                    if (temp.length > 0) {\n                        temp[0][_this.fields.id] = eventObj[_this.fields.id];\n                        for (var k = 1; k < temp.length; k++) {\n                            temp[parseInt(k.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                            eventList.push(temp[parseInt(k.toString(), 10)]);\n                            _this.parent.saveEvent(temp[0], currentAction);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = eventObj[_this.fields.id];\n                        _this.parent.saveEvent(events, currentAction);\n                    }\n                }\n                else {\n                    if (temp.length > 0) {\n                        for (var j = 0; j < temp.length; j++) {\n                            temp[parseInt(j.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\n                            eventList.push(temp[parseInt(j.toString(), 10)]);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                        eventList.push(events);\n                    }\n                }\n            };\n            if (this_2.parent.activeViewOptions.group.byGroupID && (!isNullOrUndefined(lastLevel))) {\n                var lastResource = lastResourceData.dataSource;\n                var resCol = this_2.parent.resourceCollection;\n                var index = void 0;\n                if (resCol.length > 1) {\n                    index =\n                        util.findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i.toString(), 10)], events, resCol);\n                }\n                else {\n                    index =\n                        util.findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i.toString(), 10)]);\n                }\n                if (index < 0) {\n                    return { value: void 0 };\n                }\n                var groupId_1 = lastResource[parseInt(index.toString(), 10)][lastResourceData.groupIDField];\n                var filter = lastLevel.filter(function (obj) { return obj.resourceData[lastResourceData.idField] ===\n                    resourceData[parseInt(i.toString(), 10)]; }).\n                    filter(function (obj) { return obj.resourceData[lastResourceData.groupIDField] === groupId_1; })[0];\n                var groupOrder = filter.groupOrder;\n                for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[parseInt(index_1.toString(), 10)].field;\n                    events[\"\" + field] = (groupOrder[parseInt(index_1.toString(), 10)] instanceof Array) ? groupOrder[parseInt(index_1.toString(), 10)][0] :\n                        groupOrder[parseInt(index_1.toString(), 10)];\n                }\n                addValues();\n            }\n            else {\n                for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[parseInt(index.toString(), 10)].field;\n                    if (events[\"\" + field] instanceof Array && events[\"\" + field].length > 1) {\n                        for (var k = 0; k < events[\"\" + field].length; k++) {\n                            var event_3 = extend({}, events, null, true);\n                            event_3[\"\" + field] = eventObj[\"\" + field][parseInt(k.toString(), 10)];\n                            event_3[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n                            temp.push(event_3);\n                        }\n                    }\n                    else {\n                        if (temp.length === 0) {\n                            events[\"\" + field] = (eventObj[\"\" + field] instanceof Array) ?\n                                eventObj[\"\" + field][0] : eventObj[\"\" + field];\n                            events[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n                        }\n                        else {\n                            for (var l = 0; l < temp.length; l++) {\n                                temp[parseInt(l.toString(), 10)][\"\" + field] = (eventObj[\"\" + field] instanceof Array) ?\n                                    eventObj[\"\" + field][0] : eventObj[\"\" + field];\n                            }\n                        }\n                    }\n                }\n                events[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n                addValues();\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < resourceData.length; i++) {\n            var state_1 = _loop_2(i);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        if (eventList.length > 0) {\n            for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\n                var event_4 = eventList_1[_i];\n                event_4[this.fields.recurrenceException] = null;\n                event_4[this.fields.recurrenceID] = null;\n            }\n            this.parent.addEvent(eventList);\n        }\n    };\n    EventWindow.prototype.getEventIdFromForm = function () {\n        return this.element.querySelector('.' + cls.FORM_CLASS).getAttribute('data-id');\n    };\n    EventWindow.prototype.getFormElements = function (className) {\n        var elements = [];\n        if (className === cls.EVENT_WINDOW_DIALOG_CLASS) {\n            elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD));\n        }\n        else {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD));\n        }\n        return elements;\n    };\n    EventWindow.prototype.getValueFromElement = function (element) {\n        var value;\n        if (element.classList.contains('e-datepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else if (element.classList.contains('e-numerictextbox')) {\n            value = element.ej2_instances[0].value;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = this.parent.enableHtmlSanitizer ?\n                    SanitizeHtmlHelper.sanitize(element.value) : element.value;\n            }\n        }\n        return value;\n    };\n    EventWindow.prototype.setValueToElement = function (element, value) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(cls.EVENT_WINDOW_START_CLASS)) {\n                this.eventWindowTime.startTime = new Date('' + value);\n            }\n            else {\n                this.eventWindowTime.endTime = new Date('' + value);\n            }\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.value = ((value instanceof Array) ? value : [value]);\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-numerictextbox')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else {\n            if (element.type !== 'checkbox') {\n                element.value = value || '';\n            }\n            else {\n                element.checked = value;\n            }\n        }\n    };\n    EventWindow.prototype.setDefaultValueToElement = function (element) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = this.parent.getCurrentTime();\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            var dateValue = this.parent.getCurrentTime();\n            this.eventWindowTime = { startTime: dateValue, endTime: dateValue };\n            instance.value = dateValue;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = null;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = false;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-numerictextbox')) {\n            var instance = element.ej2_instances[0];\n            instance.value = null;\n            instance.dataBind();\n        }\n        else {\n            if (element.type === 'checkbox') {\n                element.checked = false;\n            }\n            else {\n                element.value = '';\n            }\n        }\n    };\n    EventWindow.prototype.getInstance = function (className) {\n        var element = this.element.querySelector('.' + className);\n        return element ? element.ej2_instances[0] : null;\n    };\n    EventWindow.prototype.eventDelete = function (event) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        switch (this.parent.currentAction) {\n            case 'EditOccurrence':\n                if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteOccurrence';\n                }\n                else {\n                    this.parent.currentAction = 'Delete';\n                }\n                break;\n            case 'EditSeries':\n                this.parent.currentAction = 'DeleteSeries';\n                break;\n            case 'Save':\n                this.parent.currentAction = 'Delete';\n                break;\n            case 'EditFollowingEvents':\n                if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteFollowingEvents';\n                }\n                break;\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.dialogObject.hide();\n        this.parent.quickPopup.openDeleteAlert();\n    };\n    EventWindow.prototype.getRecurrenceEditorInstance = function () {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        return this.recurrenceEditor;\n    };\n    EventWindow.prototype.destroyComponents = function () {\n        var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElements_3 = formElements; _i < formElements_3.length; _i++) {\n            var element = formElements_3[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datetimepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                instance = element.ej2_instances;\n            }\n            if (instance && instance[0]) {\n                instance[0].destroy();\n            }\n        }\n        if (this.buttonObj) {\n            this.buttonObj.destroy();\n        }\n    };\n    EventWindow.prototype.detachComponents = function () {\n        var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElements_4 = formElements; _i < formElements_4.length; _i++) {\n            var element = formElements_4[_i];\n            detach(element);\n        }\n    };\n    EventWindow.prototype.destroy = function (isIgnore) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.resetTemplates(['editorTemplate', 'editorHeaderTemplate', 'editorFooterTemplate']);\n        }\n        this.destroyComponents();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.destroy();\n            detach(this.recurrenceEditor.element);\n            this.recurrenceEditor = null;\n        }\n        if (this.fieldValidator) {\n            this.fieldValidator.destroy();\n            this.fieldValidator = null;\n        }\n        if (this.repeatDialogObject) {\n            this.repeatDialogObject.destroy();\n            this.repeatDialogObject = null;\n        }\n        this.detachComponents();\n        if (this.dialogObject) {\n            if (this.dialogObject.element) {\n                var form = this.dialogObject.element.querySelector('form');\n                util.removeChildren(form);\n                detach(form);\n                EventHandler.remove(this.dialogObject.element, 'keydown', this.preventEventSave);\n            }\n            this.dialogObject.destroy();\n            this.dialogObject = null;\n        }\n        if (this.element) {\n            remove(this.element);\n            this.element = null;\n        }\n        if (!isIgnore) {\n            this.l10n = null;\n            this.parent = null;\n            this.fields = null;\n            this.buttonObj = null;\n            this.repeatStatus = null;\n            this.eventWindowTime = null;\n            this.dialogEvent = null;\n        }\n    };\n    return EventWindow;\n}());\nexport { EventWindow };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}