{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, createElement, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Base class for the common drag and resize related actions\n */\nvar ActionBase = /** @class */function () {\n  function ActionBase(parent) {\n    this.daysVariation = 0;\n    this.parent = parent;\n    this.actionObj = {\n      X: 0,\n      Y: 0,\n      groupIndex: 0,\n      cellWidth: 0,\n      cellHeight: 0,\n      slotInterval: 0,\n      interval: 0,\n      actionIndex: 0,\n      cloneElement: [],\n      originalElement: [],\n      action: null,\n      isAllDay: null,\n      excludeSelectors: null,\n      index: 0,\n      navigationInterval: null,\n      scrollInterval: null\n    };\n    this.scrollArgs = {\n      element: null,\n      width: 0,\n      height: 0\n    };\n    this.resizeEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n  }\n  ActionBase.prototype.getChangedData = function (multiData) {\n    var _this = this;\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n    eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n    if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n      eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n    }\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var originalElement = this.getOriginalElement(this.actionObj.element);\n      if (originalElement) {\n        var indexCol_1 = originalElement.map(function (element) {\n          return parseInt(element.getAttribute('data-group-index'), 10);\n        });\n        if (indexCol_1.indexOf(this.actionObj.groupIndex) === -1 || !isNullOrUndefined(multiData) && multiData.length > 0) {\n          var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n          indexCol_1 = indexCol_1.filter(function (index) {\n            return index !== cloneIndex_1;\n          });\n          indexCol_1.push(this.actionObj.groupIndex);\n          if (multiData && multiData.length > 0) {\n            multiData.forEach(function (data) {\n              _this.parent.resourceBase.getResourceData(data, _this.actionObj.groupIndex, indexCol_1);\n            });\n          } else {\n            this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol_1);\n          }\n        }\n      }\n    }\n    return eventObj;\n  };\n  ActionBase.prototype.saveChangedData = function (eventArgs, isMultiSelect) {\n    if (isMultiSelect === void 0) {\n      isMultiSelect = false;\n    }\n    this.parent.activeEventData.event = this.actionObj.event;\n    this.parent.currentAction = 'Save';\n    var currentAction;\n    var eventsCollection = [eventArgs.data];\n    if (isMultiSelect) {\n      eventsCollection = eventArgs.selectedData;\n    }\n    for (var _i = 0, eventsCollection_1 = eventsCollection; _i < eventsCollection_1.length; _i++) {\n      var eventObj = eventsCollection_1[_i];\n      var isSameResource = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n      if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] && +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n        this.parent.crudModule.crudObj.isCrudAction = false;\n        return;\n      }\n      if (eventObj[this.parent.eventFields.recurrenceRule]) {\n        var eveId = eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id];\n        if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n          eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n          currentAction = 'EditOccurrence';\n        }\n        if (this.parent.enableRecurrenceValidation && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n          return;\n        }\n      } else {\n        currentAction = null;\n      }\n      if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n        this.parent.eventBase.timezoneConvert(eventObj);\n      }\n      this.parent.crudModule.saveEvent(eventObj, currentAction);\n    }\n  };\n  ActionBase.prototype.calculateIntervalTime = function (date) {\n    var dateInMS = util.resetTime(date).getTime();\n    var startHour = this.parent.activeView.getStartHour();\n    var intervalInMS = util.MS_PER_MINUTE * this.actionObj.interval;\n    dateInMS += (startHour.getHours() * 60 + startHour.getMinutes()) * util.MS_PER_MINUTE + startHour.getSeconds() * 1000;\n    dateInMS = dateInMS + Math.floor((date.getTime() - dateInMS) / intervalInMS) * intervalInMS;\n    return new Date(dateInMS);\n  };\n  ActionBase.prototype.getContentAreaDimension = function () {\n    var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var trElement = [].slice.call(viewElement.querySelector('tr').children);\n    if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.isAdaptive && !this.parent.enableAdaptiveUI && !this.parent.virtualScrollModule) {\n      trElement = this.getResourceElements(trElement);\n    }\n    var leftOffset = trElement[0].getBoundingClientRect();\n    var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n    var viewDimension = {\n      bottom: viewElement.scrollHeight - 5,\n      left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n      right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n      top: 0,\n      leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,\n      rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left\n    };\n    return viewDimension;\n  };\n  ActionBase.prototype.getIndex = function (index) {\n    var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n    var indexes = {\n      minIndex: 0,\n      maxIndex: contentElements.length - 1\n    };\n    if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n      var groupElements = this.getResourceElements(contentElements);\n      indexes.minIndex = groupElements[0].cellIndex;\n      indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n    }\n    if (index < indexes.minIndex) {\n      index = indexes.minIndex;\n    }\n    if (index > indexes.maxIndex) {\n      index = indexes.maxIndex;\n    }\n    return index;\n  };\n  ActionBase.prototype.updateTimePosition = function (date, multiData) {\n    var index = 0;\n    for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n      var cloneElement = _a[_i];\n      var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n      if (timeElement) {\n        var startTime = this.actionObj.start;\n        var endTime = this.actionObj.end;\n        if (multiData && multiData.length > 0) {\n          startTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.startTime];\n          endTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.endTime];\n        }\n        timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' + this.parent.getTimeString(endTime);\n      }\n      index++;\n    }\n    if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n      return;\n    }\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n    if (!timeIndicator) {\n      timeIndicator = createElement('div', {\n        className: cls.CLONE_TIME_INDICATOR_CLASS\n      });\n      var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n      this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n    }\n    timeIndicator.innerHTML = this.parent.getTimeString(date);\n    var offsetValue = 0;\n    if (this.parent.activeView.isTimelineView()) {\n      if (this.parent.enableRtl) {\n        var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n        offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? rightValue + this.actionObj.clone.offsetWidth : rightValue;\n        timeIndicator.style.right = formatUnit(offsetValue);\n      } else {\n        var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n        offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? leftValue : leftValue + this.actionObj.clone.offsetWidth;\n        timeIndicator.style.left = formatUnit(offsetValue);\n      }\n    } else {\n      offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n      timeIndicator.style.top = formatUnit(offsetValue);\n    }\n  };\n  ActionBase.prototype.getResourceElements = function (table) {\n    var _this = this;\n    return table.filter(function (element) {\n      return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n    });\n  };\n  ActionBase.prototype.getOriginalElement = function (element) {\n    var originalElement;\n    var guid = element.getAttribute('data-guid');\n    var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS);\n    if (isMorePopup || this.parent.activeView.isTimelineView() || this.actionObj.action !== 'resize' && this.parent.virtualScrollModule) {\n      originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n    } else {\n      var tr = closest(element, 'tr');\n      if (tr) {\n        originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n      }\n    }\n    return originalElement;\n  };\n  ActionBase.prototype.createCloneElement = function (element) {\n    var cloneWrapper = document.createElement('div');\n    cloneWrapper.appendChild(element.cloneNode(true));\n    var cloneElement = cloneWrapper.children[0];\n    var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n    cloneClassLists.push(this.actionObj.action === 'drag' ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n      cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n    }\n    addClass([cloneElement], cloneClassLists);\n    addClass([element], cls.EVENT_ACTION_CLASS);\n    if (!isNullOrUndefined(element.parentElement)) {\n      element.parentElement.appendChild(cloneElement);\n    }\n    cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n    var dragElement = document.querySelector(this.parent.eventDragArea);\n    if (this.parent.eventDragArea && this.actionObj.action === 'drag' && dragElement) {\n      dragElement.appendChild(cloneElement);\n    }\n    setStyleAttribute(cloneElement, {\n      border: '0px'\n    });\n    return cloneElement;\n  };\n  ActionBase.prototype.removeCloneElementClasses = function () {\n    var elements = this.actionObj.originalElement;\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' || this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n      elements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.EVENT_ACTION_CLASS));\n    }\n    removeClass(elements, cls.EVENT_ACTION_CLASS);\n  };\n  ActionBase.prototype.removeCloneElement = function () {\n    this.actionObj.originalElement = [];\n    var dynamicEle = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n    for (var _i = 0, dynamicEle_1 = dynamicEle; _i < dynamicEle_1.length; _i++) {\n      var cloneEle = dynamicEle_1[_i];\n      remove(cloneEle);\n    }\n    for (var _a = 0, _b = this.actionObj.cloneElement; _a < _b.length; _a++) {\n      var cloneElement = _b[_a];\n      if (!isNullOrUndefined(cloneElement.parentNode)) {\n        remove(cloneElement);\n      }\n    }\n    this.actionObj.cloneElement = [];\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n    if (timeIndicator) {\n      remove(timeIndicator);\n    }\n  };\n  ActionBase.prototype.getCursorElement = function (e) {\n    var pages = this.parent.eventBase.getPageCoordinates(e);\n    return document.elementFromPoint(pages.clientX, pages.clientY);\n  };\n  ActionBase.prototype.autoScroll = function () {\n    var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n    var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n    var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n    var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n    if (this.actionObj.action === 'resize' && this.scrollEdges.right && parent.scrollLeft + parent.offsetWidth > parent.scrollWidth) {\n      var tdCollections = [].slice.call(this.parent.getContentTable().querySelector('tr').children).length - 1;\n      var cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + this.actionObj.clone.offsetWidth) / this.actionObj.cellWidth);\n      xInBounds = cellIndex === tdCollections;\n    }\n    if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n      parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n      if (this.actionObj.action === 'resize') {\n        if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n          this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n        }\n      }\n    }\n    if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n      parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n      if (this.actionObj.action === 'resize') {\n        if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n          this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n        }\n      }\n    }\n  };\n  ActionBase.prototype.autoScrollValidation = function () {\n    if (!this.actionObj.scroll.enable) {\n      return false;\n    }\n    var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n    this.scrollEdges = res;\n    return res.bottom || res.top || res.left || res.right;\n  };\n  ActionBase.prototype.actionClass = function (type) {\n    if (type === 'addClass') {\n      addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n    } else {\n      removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n    }\n  };\n  ActionBase.prototype.updateScrollPosition = function (e) {\n    var _this = this;\n    this.scrollEventArgs = e;\n    if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n      this.actionObj.scrollInterval = window.setInterval(function () {\n        if (_this.autoScrollValidation() && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n          if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0 && _this.actionObj.groupIndex < 0) {\n            return;\n          }\n          _this.autoScroll();\n          if (_this.actionObj.action === 'drag') {\n            _this.parent.dragAndDropModule.updateDraggingDateTime(_this.scrollEventArgs);\n          } else {\n            _this.parent.resizeModule.updateResizingDirection(_this.scrollEventArgs);\n          }\n        }\n      }, this.actionObj.scroll.timeDelay);\n    }\n  };\n  ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n    var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n    }\n    var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n    addClass(elements, cls.EVENT_ACTION_CLASS);\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n    removeClass(eventWrappers, cls.EVENT_ACTION_CLASS);\n  };\n  ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n    var event = JSON.parse(JSON.stringify(eventObj));\n    event[this.parent.eventFields.startTime] = startTime;\n    event[this.parent.eventFields.endTime] = endTime;\n    return event;\n  };\n  ActionBase.prototype.dynamicYearlyEventsRendering = function (event, isResize) {\n    if (isResize === void 0) {\n      isResize = false;\n    }\n    if (!isNullOrUndefined(this.parent.eventDragArea)) {\n      return;\n    }\n    var appWidth = this.actionObj.cellWidth - 7;\n    if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n      appWidth = this.actionObj.cellWidth * event.count;\n    }\n    if (!isResize && this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0) {\n      var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n      if (eventObj[this.parent.eventFields.startTime].getTime() === eventObj[this.parent.eventFields.endTime].getTime()) {\n        eventObj.isSpanned.count = 1;\n      }\n      appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n    }\n    if (!isResize && this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length !== 0) {\n      var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n      appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n    }\n    var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n    appointmentElement.setAttribute('drag', 'true');\n    addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n    setStyleAttribute(appointmentElement, {\n      'width': appWidth + 'px',\n      'border': '0px',\n      'pointer-events': 'none',\n      'position': 'absolute',\n      'overflow': 'hidden',\n      'padding': '3px'\n    });\n    if (this.actionObj.clone.style.backgroundColor !== '') {\n      setStyleAttribute(appointmentElement, {\n        'backgroundColor': this.actionObj.clone.style.backgroundColor\n      });\n    }\n    var date = util.resetTime(event[this.parent.eventFields.startTime]).getTime();\n    var query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n    }\n    var cellTd = this.parent.element.querySelector(query);\n    if (isNullOrUndefined(cellTd)) {\n      return;\n    }\n    if (isResize) {\n      var dateHeader = cellTd.querySelector('.' + cls.DATE_HEADER_CLASS);\n      var appHeight = this.actionObj.cellHeight * event.count - (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n      if (this.resizeEdges.right || this.resizeEdges.left) {\n        appHeight = parseInt(this.actionObj.clone.style.height, 10);\n      }\n      setStyleAttribute(appointmentElement, {\n        'height': appHeight + 'px'\n      });\n    }\n    this.renderDynamicElement(cellTd, appointmentElement, true);\n    this.actionObj.cloneElement.push(appointmentElement);\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  ActionBase.prototype.renderDynamicElement = function (cellTd, element, isAppointment) {\n    if (isAppointment === void 0) {\n      isAppointment = false;\n    }\n    if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n      cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n    } else {\n      var wrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(element);\n      cellTd.appendChild(wrapper);\n    }\n  };\n  ActionBase.prototype.createAppointmentElement = function (resIndex, innerText) {\n    var appointmentWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      innerHTML: innerText\n    });\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n    return appointmentWrapper;\n  };\n  ActionBase.prototype.dynamicEventsRendering = function (event) {\n    var _this = this;\n    if (!isNullOrUndefined(this.parent.eventDragArea)) {\n      return;\n    }\n    var dateRender = this.parent.activeView.renderDates;\n    var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n    var workDays = this.parent.activeViewOptions.workDays;\n    var groupOrder;\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var renderedResource = this.parent.virtualScrollModule && this.parent.virtualScrollModule.isHorizontalScroll ? this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;\n      var resources = renderedResource.filter(function (res) {\n        return res.groupIndex === _this.actionObj.groupIndex;\n      });\n      dateRender = resources[0].renderDates;\n      var elementSelector = \".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + this.actionObj.groupIndex + \"\\\"]\";\n      workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n      workDays = resources[0].workDays;\n      groupOrder = resources[0].groupOrder;\n    }\n    this.monthEvent.dateRender = dateRender;\n    this.monthEvent.getSlotDates(workDays);\n    if (this.resizeEdges.left || this.resizeEdges.right) {\n      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n      for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n        var wrapper = eventWrappers_1[_i];\n        remove(wrapper);\n      }\n    }\n    var spannedEvents = this.monthEvent.splitEvent(event, dateRender);\n    for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n      var event_1 = spannedEvents_1[_a];\n      var day = this.parent.getIndexOfDate(dateRender, util.resetTime(event_1[this.monthEvent.fields.startTime]));\n      var diffInDays = event_1.data.count;\n      var appWidth = diffInDays * this.actionObj.cellWidth - 7;\n      var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n      appointmentElement.setAttribute('drag', 'true');\n      addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n      this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n      setStyleAttribute(appointmentElement, {\n        'width': appWidth + 'px',\n        'border': '0px',\n        'pointer-events': 'none'\n      });\n      var cellTd = workCells[parseInt(day.toString(), 10)];\n      if (cellTd) {\n        this.monthEvent.renderElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n      }\n    }\n  };\n  ActionBase.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.actionObj = {};\n    this.scrollArgs = {};\n    this.resizeEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n  };\n  return ActionBase;\n}();\nexport { ActionBase };","map":{"version":3,"names":["addClass","createElement","extend","isNullOrUndefined","closest","setStyleAttribute","formatUnit","remove","removeClass","cls","util","ActionBase","parent","daysVariation","actionObj","X","Y","groupIndex","cellWidth","cellHeight","slotInterval","interval","actionIndex","cloneElement","originalElement","action","isAllDay","excludeSelectors","index","navigationInterval","scrollInterval","scrollArgs","element","width","height","resizeEdges","left","right","top","bottom","scrollEdges","prototype","getChangedData","multiData","_this","eventObj","event","eventFields","startTime","start","endTime","end","activeViewOptions","group","resources","length","getOriginalElement","indexCol_1","map","parseInt","getAttribute","indexOf","cloneIndex_1","clone","filter","push","forEach","data","resourceBase","getResourceData","saveChangedData","eventArgs","isMultiSelect","activeEventData","currentAction","eventsCollection","selectedData","_i","eventsCollection_1","isSameResource","crudModule","crudObj","isCrudAction","recurrenceRule","eveId","recurrenceID","id","eventBase","getEventMaxID","enableRecurrenceValidation","eventWindow","editOccurrenceValidation","startTimezone","endTimezone","timezoneConvert","saveEvent","calculateIntervalTime","date","dateInMS","resetTime","getTime","startHour","activeView","getStartHour","intervalInMS","MS_PER_MINUTE","getHours","getMinutes","getSeconds","Math","floor","Date","getContentAreaDimension","viewElement","querySelector","CONTENT_WRAP_CLASS","trElement","slice","call","children","isTimelineView","isAdaptive","enableAdaptiveUI","virtualScrollModule","getResourceElements","leftOffset","getBoundingClientRect","rightOffset","viewDimension","scrollHeight","enableRtl","getIndex","contentElements","getContentTable","indexes","minIndex","maxIndex","uiStateValues","isGroupAdaptive","groupElements","cellIndex","updateTimePosition","_a","timeElement","APPOINTMENT_TIME","toString","innerHTML","getTimeString","timeScale","enable","currentView","timeIndicator","CLONE_TIME_INDICATOR_CLASS","className","wrapperClass","DATE_HEADER_WRAP_CLASS","TIME_CELLS_WRAP_CLASS","appendChild","offsetValue","rightValue","style","offsetWidth","leftValue","offsetTop","offsetHeight","table","guid","isMorePopup","offsetParent","classList","contains","MORE_EVENT_POPUP_CLASS","querySelectorAll","tr","createCloneElement","cloneWrapper","document","cloneNode","cloneClassLists","CLONE_ELEMENT_CLASS","DRAG_CLONE_CLASS","RESIZE_CLONE_CLASS","MONTH_CLONE_ELEMENT_CLASS","EVENT_ACTION_CLASS","parentElement","dragElement","eventDragArea","border","removeCloneElementClasses","elements","removeCloneElement","dynamicEle","dynamicEle_1","cloneEle","_b","parentNode","getCursorElement","e","pages","getPageCoordinates","elementFromPoint","clientX","clientY","autoScroll","yIsScrollable","xIsScrollable","scrollWidth","yInBounds","scrollTop","xInBounds","scrollLeft","tdCollections","ceil","offsetLeft","scroll","scrollBy","autoScrollValidation","res","boundaryValidation","pageY","pageX","actionClass","type","updateScrollPosition","scrollEventArgs","window","setInterval","ALLDAY_APPOINTMENT_CLASS","dragAndDropModule","updateDraggingDateTime","resizeModule","updateResizingDirection","timeDelay","updateOriginalElement","query","concat","eventWrappers","getUpdatedEvent","JSON","parse","stringify","dynamicYearlyEventsRendering","isResize","appWidth","count","orientation","yearEvent","isSpannedEvent","isSpanned","appointmentElement","createAppointmentElement","subject","setAttribute","backgroundColor","WORK_CELLS_CLASS","cellTd","dateHeader","DATE_HEADER_CLASS","appHeight","renderDynamicElement","isAppointment","APPOINTMENT_WRAPPER_CLASS","wrapper","resIndex","innerText","appointmentWrapper","APPOINTMENT_CLASS","dynamicEventsRendering","dateRender","renderDates","workCells","workDays","groupOrder","renderedResource","isHorizontalScroll","renderedResources","lastResourceLevel","elementSelector","monthEvent","getSlotDates","eventWrappers_1","spannedEvents","splitEvent","spannedEvents_1","event_1","day","getIndexOfDate","fields","diffInDays","applyResourceColor","renderElement","destroy","isDestroyed"],"sources":["C:/Users/Dell/OneDrive/Desktop/Programs/soc-portal/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/action-base.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, createElement, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Base class for the common drag and resize related actions\n */\nvar ActionBase = /** @class */ (function () {\n    function ActionBase(parent) {\n        this.daysVariation = 0;\n        this.parent = parent;\n        this.actionObj = {\n            X: 0, Y: 0, groupIndex: 0, cellWidth: 0, cellHeight: 0, slotInterval: 0, interval: 0, actionIndex: 0,\n            cloneElement: [], originalElement: [], action: null, isAllDay: null, excludeSelectors: null,\n            index: 0, navigationInterval: null, scrollInterval: null\n        };\n        this.scrollArgs = { element: null, width: 0, height: 0 };\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    }\n    ActionBase.prototype.getChangedData = function (multiData) {\n        var _this = this;\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n        eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n        if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var originalElement = this.getOriginalElement(this.actionObj.element);\n            if (originalElement) {\n                var indexCol_1 = originalElement.map(function (element) { return parseInt(element.getAttribute('data-group-index'), 10); });\n                if (indexCol_1.indexOf(this.actionObj.groupIndex) === -1 || (!isNullOrUndefined(multiData) && multiData.length > 0)) {\n                    var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n                    indexCol_1 = indexCol_1.filter(function (index) { return index !== cloneIndex_1; });\n                    indexCol_1.push(this.actionObj.groupIndex);\n                    if (multiData && multiData.length > 0) {\n                        multiData.forEach(function (data) {\n                            _this.parent.resourceBase.getResourceData(data, _this.actionObj.groupIndex, indexCol_1);\n                        });\n                    }\n                    else {\n                        this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol_1);\n                    }\n                }\n            }\n        }\n        return eventObj;\n    };\n    ActionBase.prototype.saveChangedData = function (eventArgs, isMultiSelect) {\n        if (isMultiSelect === void 0) { isMultiSelect = false; }\n        this.parent.activeEventData.event = this.actionObj.event;\n        this.parent.currentAction = 'Save';\n        var currentAction;\n        var eventsCollection = [eventArgs.data];\n        if (isMultiSelect) {\n            eventsCollection = eventArgs.selectedData;\n        }\n        for (var _i = 0, eventsCollection_1 = eventsCollection; _i < eventsCollection_1.length; _i++) {\n            var eventObj = eventsCollection_1[_i];\n            var isSameResource = (this.parent.activeViewOptions.group.resources.length > 0) ?\n                parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n            if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] &&\n                +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n                this.parent.crudModule.crudObj.isCrudAction = false;\n                return;\n            }\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                var eveId = (eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id]);\n                if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n                    eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n                    currentAction = 'EditOccurrence';\n                }\n                if (this.parent.enableRecurrenceValidation\n                    && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n                    return;\n                }\n            }\n            else {\n                currentAction = null;\n            }\n            if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            this.parent.crudModule.saveEvent(eventObj, currentAction);\n        }\n    };\n    ActionBase.prototype.calculateIntervalTime = function (date) {\n        var dateInMS = util.resetTime(date).getTime();\n        var startHour = this.parent.activeView.getStartHour();\n        var intervalInMS = util.MS_PER_MINUTE * this.actionObj.interval;\n        dateInMS += (startHour.getHours() * 60 + startHour.getMinutes()) * util.MS_PER_MINUTE + startHour.getSeconds() * 1000;\n        dateInMS = dateInMS + Math.floor((date.getTime() - dateInMS) / intervalInMS) * intervalInMS;\n        return new Date(dateInMS);\n    };\n    ActionBase.prototype.getContentAreaDimension = function () {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trElement = [].slice.call(viewElement.querySelector('tr').children);\n        if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.isAdaptive && !this.parent.enableAdaptiveUI && !this.parent.virtualScrollModule) {\n            trElement = this.getResourceElements(trElement);\n        }\n        var leftOffset = trElement[0].getBoundingClientRect();\n        var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n        var viewDimension = {\n            bottom: viewElement.scrollHeight - 5,\n            left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n            right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n            top: 0,\n            leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,\n            rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left\n        };\n        return viewDimension;\n    };\n    ActionBase.prototype.getIndex = function (index) {\n        var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n        var indexes = { minIndex: 0, maxIndex: contentElements.length - 1 };\n        if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n            var groupElements = this.getResourceElements(contentElements);\n            indexes.minIndex = groupElements[0].cellIndex;\n            indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n        }\n        if (index < indexes.minIndex) {\n            index = indexes.minIndex;\n        }\n        if (index > indexes.maxIndex) {\n            index = indexes.maxIndex;\n        }\n        return index;\n    };\n    ActionBase.prototype.updateTimePosition = function (date, multiData) {\n        var index = 0;\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n            var cloneElement = _a[_i];\n            var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n            if (timeElement) {\n                var startTime = this.actionObj.start;\n                var endTime = this.actionObj.end;\n                if (multiData && multiData.length > 0) {\n                    startTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.startTime];\n                    endTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.endTime];\n                }\n                timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' +\n                    this.parent.getTimeString(endTime);\n            }\n            index++;\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' ||\n            this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (!timeIndicator) {\n            timeIndicator = createElement('div', { className: cls.CLONE_TIME_INDICATOR_CLASS });\n            var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n            this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n        }\n        timeIndicator.innerHTML = this.parent.getTimeString(date);\n        var offsetValue = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (this.parent.enableRtl) {\n                var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    rightValue + this.actionObj.clone.offsetWidth : rightValue;\n                timeIndicator.style.right = formatUnit(offsetValue);\n            }\n            else {\n                var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    leftValue : leftValue + this.actionObj.clone.offsetWidth;\n                timeIndicator.style.left = formatUnit(offsetValue);\n            }\n        }\n        else {\n            offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop :\n                this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n            timeIndicator.style.top = formatUnit(offsetValue);\n        }\n    };\n    ActionBase.prototype.getResourceElements = function (table) {\n        var _this = this;\n        return table.filter(function (element) {\n            return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n        });\n    };\n    ActionBase.prototype.getOriginalElement = function (element) {\n        var originalElement;\n        var guid = element.getAttribute('data-guid');\n        var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS);\n        if (isMorePopup || this.parent.activeView.isTimelineView() || (this.actionObj.action !== 'resize' && this.parent.virtualScrollModule)) {\n            originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        else {\n            var tr = closest(element, 'tr');\n            if (tr) {\n                originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n            }\n        }\n        return originalElement;\n    };\n    ActionBase.prototype.createCloneElement = function (element) {\n        var cloneWrapper = document.createElement('div');\n        cloneWrapper.appendChild(element.cloneNode(true));\n        var cloneElement = cloneWrapper.children[0];\n        var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n        cloneClassLists.push((this.actionObj.action === 'drag') ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n            cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n        }\n        addClass([cloneElement], cloneClassLists);\n        addClass([element], cls.EVENT_ACTION_CLASS);\n        if (!isNullOrUndefined(element.parentElement)) {\n            element.parentElement.appendChild(cloneElement);\n        }\n        cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n        var dragElement = document.querySelector(this.parent.eventDragArea);\n        if (this.parent.eventDragArea && this.actionObj.action === 'drag' && dragElement) {\n            dragElement.appendChild(cloneElement);\n        }\n        setStyleAttribute(cloneElement, { border: '0px' });\n        return cloneElement;\n    };\n    ActionBase.prototype.removeCloneElementClasses = function () {\n        var elements = this.actionObj.originalElement;\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' ||\n            this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.EVENT_ACTION_CLASS));\n        }\n        removeClass(elements, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.removeCloneElement = function () {\n        this.actionObj.originalElement = [];\n        var dynamicEle = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n        for (var _i = 0, dynamicEle_1 = dynamicEle; _i < dynamicEle_1.length; _i++) {\n            var cloneEle = dynamicEle_1[_i];\n            remove(cloneEle);\n        }\n        for (var _a = 0, _b = this.actionObj.cloneElement; _a < _b.length; _a++) {\n            var cloneElement = _b[_a];\n            if (!isNullOrUndefined(cloneElement.parentNode)) {\n                remove(cloneElement);\n            }\n        }\n        this.actionObj.cloneElement = [];\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (timeIndicator) {\n            remove(timeIndicator);\n        }\n    };\n    ActionBase.prototype.getCursorElement = function (e) {\n        var pages = this.parent.eventBase.getPageCoordinates(e);\n        return document.elementFromPoint(pages.clientX, pages.clientY);\n    };\n    ActionBase.prototype.autoScroll = function () {\n        var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n        var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n        var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n        var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n        if (this.actionObj.action === 'resize' && this.scrollEdges.right && (parent.scrollLeft + parent.offsetWidth) > parent.scrollWidth) {\n            var tdCollections = ([].slice.call(this.parent.getContentTable().querySelector('tr').children)).length - 1;\n            var cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth)) /\n                this.actionObj.cellWidth);\n            xInBounds = cellIndex === tdCollections;\n        }\n        if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n            parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n                    this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n        if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n            parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n                    this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n    };\n    ActionBase.prototype.autoScrollValidation = function () {\n        if (!this.actionObj.scroll.enable) {\n            return false;\n        }\n        var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n        this.scrollEdges = res;\n        return res.bottom || res.top || res.left || res.right;\n    };\n    ActionBase.prototype.actionClass = function (type) {\n        if (type === 'addClass') {\n            addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n        else {\n            removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n    };\n    ActionBase.prototype.updateScrollPosition = function (e) {\n        var _this = this;\n        this.scrollEventArgs = e;\n        if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n            this.actionObj.scrollInterval = window.setInterval(function () {\n                if (_this.autoScrollValidation() && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                    if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0\n                        && _this.actionObj.groupIndex < 0) {\n                        return;\n                    }\n                    _this.autoScroll();\n                    if (_this.actionObj.action === 'drag') {\n                        _this.parent.dragAndDropModule.updateDraggingDateTime(_this.scrollEventArgs);\n                    }\n                    else {\n                        _this.parent.resizeModule.updateResizingDirection(_this.scrollEventArgs);\n                    }\n                }\n            }, this.actionObj.scroll.timeDelay);\n        }\n    };\n    ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n        var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n        }\n        var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n        addClass(elements, cls.EVENT_ACTION_CLASS);\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        removeClass(eventWrappers, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n        var event = JSON.parse(JSON.stringify(eventObj));\n        event[this.parent.eventFields.startTime] = startTime;\n        event[this.parent.eventFields.endTime] = endTime;\n        return event;\n    };\n    ActionBase.prototype.dynamicYearlyEventsRendering = function (event, isResize) {\n        if (isResize === void 0) { isResize = false; }\n        if (!isNullOrUndefined(this.parent.eventDragArea)) {\n            return;\n        }\n        var appWidth = this.actionObj.cellWidth - 7;\n        if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n            appWidth = this.actionObj.cellWidth * event.count;\n        }\n        if (!isResize && (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0)) {\n            var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n            if (eventObj[this.parent.eventFields.startTime].getTime() ===\n                eventObj[this.parent.eventFields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n        }\n        if (!isResize && this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length !== 0) {\n            var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n            appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n        }\n        var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n        appointmentElement.setAttribute('drag', 'true');\n        addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n        setStyleAttribute(appointmentElement, {\n            'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none',\n            'position': 'absolute', 'overflow': 'hidden', 'padding': '3px'\n        });\n        if (this.actionObj.clone.style.backgroundColor !== '') {\n            setStyleAttribute(appointmentElement, { 'backgroundColor': this.actionObj.clone.style.backgroundColor });\n        }\n        var date = util.resetTime(event[this.parent.eventFields.startTime]).getTime();\n        var query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        var cellTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(cellTd)) {\n            return;\n        }\n        if (isResize) {\n            var dateHeader = cellTd.querySelector('.' + cls.DATE_HEADER_CLASS);\n            var appHeight = this.actionObj.cellHeight * event.count -\n                (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n            if (this.resizeEdges.right || this.resizeEdges.left) {\n                appHeight = parseInt(this.actionObj.clone.style.height, 10);\n            }\n            setStyleAttribute(appointmentElement, { 'height': appHeight + 'px' });\n        }\n        this.renderDynamicElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ActionBase.prototype.renderDynamicElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n            cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    ActionBase.prototype.createAppointmentElement = function (resIndex, innerText) {\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            innerHTML: innerText\n        });\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        return appointmentWrapper;\n    };\n    ActionBase.prototype.dynamicEventsRendering = function (event) {\n        var _this = this;\n        if (!isNullOrUndefined(this.parent.eventDragArea)) {\n            return;\n        }\n        var dateRender = this.parent.activeView.renderDates;\n        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        var workDays = this.parent.activeViewOptions.workDays;\n        var groupOrder;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var renderedResource = this.parent.virtualScrollModule && this.parent.virtualScrollModule.isHorizontalScroll ?\n                this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;\n            var resources = renderedResource.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            dateRender = resources[0].renderDates;\n            var elementSelector = \".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + this.actionObj.groupIndex + \"\\\"]\";\n            workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n            workDays = resources[0].workDays;\n            groupOrder = resources[0].groupOrder;\n        }\n        this.monthEvent.dateRender = dateRender;\n        this.monthEvent.getSlotDates(workDays);\n        if (this.resizeEdges.left || this.resizeEdges.right) {\n            var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n            for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n                var wrapper = eventWrappers_1[_i];\n                remove(wrapper);\n            }\n        }\n        var spannedEvents = this.monthEvent.splitEvent(event, dateRender);\n        for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n            var event_1 = spannedEvents_1[_a];\n            var day = this.parent.getIndexOfDate(dateRender, util.resetTime(event_1[this.monthEvent.fields.startTime]));\n            var diffInDays = event_1.data.count;\n            var appWidth = (diffInDays * this.actionObj.cellWidth) - 7;\n            var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n            appointmentElement.setAttribute('drag', 'true');\n            addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n            this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n            setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none' });\n            var cellTd = workCells[parseInt(day.toString(), 10)];\n            if (cellTd) {\n                this.monthEvent.renderElement(cellTd, appointmentElement, true);\n                this.actionObj.cloneElement.push(appointmentElement);\n            }\n        }\n    };\n    ActionBase.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.actionObj = {};\n        this.scrollArgs = {};\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    };\n    return ActionBase;\n}());\nexport { ActionBase };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}