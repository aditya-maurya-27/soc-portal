{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\nimport { extend, isNullOrUndefined, createElement, EventHandler, addClass, append, removeClass, remove, closest, classList } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Data } from '../actions/data';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar ResourceBase = /** @class */function () {\n  function ResourceBase(parent) {\n    this.resourceCollection = [];\n    this.leftPixel = 25;\n    this.resourceDateTree = [];\n    this.parent = parent;\n  }\n  ResourceBase.prototype.renderResourceHeaderIndent = function (tr) {\n    var resColTd = createElement('td', {\n      className: cls.RESOURCE_LEFT_TD_CLASS\n    });\n    var resColDiv = createElement('div', {\n      className: cls.RESOURCE_TEXT_CLASS\n    });\n    if (this.parent.activeViewOptions.headerIndentTemplate) {\n      var data = {\n        className: [resColTd.className],\n        type: 'emptyCells'\n      };\n      this.parent.renderHeaderIndentTemplate(data, resColTd);\n    } else {\n      resColTd.appendChild(resColDiv);\n    }\n    var args = {\n      elementType: 'emptyCells',\n      element: resColTd\n    };\n    this.parent.trigger(events.renderCell, args);\n    tr.appendChild(resColTd);\n  };\n  ResourceBase.prototype.hideResourceRows = function (tBody) {\n    if (this.resourceCollection.length <= 1 || this.parent.virtualScrollModule) {\n      return;\n    }\n    var trCount = this.lastResourceLevel.length;\n    for (var i = 0; i < trCount; i++) {\n      var resData = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;\n      var res = this.lastResourceLevel[parseInt(i.toString(), 10)].resource;\n      if (resData.ClassName === cls.RESOURCE_PARENT_CLASS && !resData[res.expandedField] && !isNullOrUndefined(resData[res.expandedField])) {\n        var trCollection = [].slice.call(tBody.children);\n        var slicedCollection = trCollection.slice(i + 1, i + (parseInt(resData.Count, 10) + 1));\n        addClass(slicedCollection, cls.HIDDEN_CLASS);\n      }\n    }\n  };\n  ResourceBase.prototype.createResourceColumn = function () {\n    var resColl = this.resourceCollection;\n    var resDiv = createElement('div', {\n      className: cls.RESOURCE_COLUMN_WRAP_CLASS\n    });\n    var tbl = this.parent.activeView.createTableLayout(cls.RESOURCE_COLUMN_TABLE_CLASS);\n    if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n      addClass([tbl], cls.AUTO_HEIGHT);\n    }\n    var tBody = tbl.querySelector('tbody');\n    var resData = this.generateTreeData(true);\n    this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n    this.renderedResources = this.lastResourceLevel;\n    if (this.parent.virtualScrollModule) {\n      var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n      this.setExpandedResources();\n      resData = this.expandedResources.slice(0, resourceCount);\n      this.renderedResources = resData;\n    }\n    append(this.getContentRows(resData), tBody);\n    this.hideResourceRows(tBody);\n    tbl.appendChild(tBody);\n    resDiv.appendChild(tbl);\n    return resDiv;\n  };\n  ResourceBase.prototype.setRenderedResources = function () {\n    var resColl = this.resourceCollection;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    var temp = this.generateTreeData(true);\n    this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n    this.renderedResources = this.lastResourceLevel;\n  };\n  ResourceBase.prototype.setExpandedResources = function () {\n    var resources = [];\n    for (var i = 0; i < this.lastResourceLevel.length; i++) {\n      var resource = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;\n      var count = resource.Count;\n      resources.push(this.lastResourceLevel[parseInt(i.toString(), 10)]);\n      var isExpanded = resource[this.lastResourceLevel[parseInt(i.toString(), 10)].resource.expandedField];\n      if (!isNullOrUndefined(isExpanded) && !isExpanded && count > 0) {\n        i = i + count;\n      }\n    }\n    this.expandedResources = resources;\n  };\n  ResourceBase.prototype.getContentRows = function (resData, isVirtualScroll) {\n    var resRows = [];\n    var left;\n    var rIndex;\n    var resColl = this.resourceCollection;\n    var tr = createElement('tr');\n    var td = createElement('td', {\n      attrs: {\n        tabindex: isVirtualScroll ? '-1' : '0'\n      }\n    });\n    var existingGroupIndices = this.parent.activeView.getGroupIndices();\n    for (var i = 0; i < resData.length; i++) {\n      if (existingGroupIndices.length > 0 && existingGroupIndices.indexOf(resData[parseInt(i.toString(), 10)].groupIndex) > -1) {\n        continue;\n      }\n      var ntd = td.cloneNode();\n      rIndex = util.findIndexInData(resColl, 'name', resData[parseInt(i.toString(), 10)].resource.name);\n      if (rIndex === resColl.length - 1) {\n        extend(resData[parseInt(i.toString(), 10)].resourceData, {\n          ClassName: cls.RESOURCE_CHILD_CLASS\n        });\n        this.renderedResources[parseInt(i.toString(), 10)].className = [cls.RESOURCE_CHILD_CLASS];\n      } else {\n        extend(resData[parseInt(i.toString(), 10)].resourceData, {\n          ClassName: cls.RESOURCE_PARENT_CLASS\n        });\n        this.renderedResources[parseInt(i.toString(), 10)].className = [cls.RESOURCE_PARENT_CLASS];\n      }\n      left = rIndex * this.leftPixel + 'px';\n      if (resData[parseInt(i.toString(), 10)].resourceData.ClassName === cls.RESOURCE_PARENT_CLASS && !isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData.Count) && resData[parseInt(i.toString(), 10)].resourceData.Count > 0) {\n        var iconClass = void 0;\n        if (resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField] || isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField])) {\n          iconClass = cls.RESOURCE_COLLAPSE_CLASS;\n        } else {\n          iconClass = cls.RESOURCE_EXPAND_CLASS;\n        }\n        var iconDiv = createElement('div');\n        addClass([iconDiv], [cls.RESOURCE_TREE_ICON_CLASS, iconClass]);\n        this.setMargin(iconDiv, left);\n        ntd.appendChild(iconDiv);\n        if (this.resourceCollection.length > 1) {\n          EventHandler.add(iconDiv, 'click', this.onTreeIconClick, this);\n        }\n      }\n      this.parent.activeView.setResourceHeaderContent(ntd, resData[parseInt(i.toString(), 10)], cls.RESOURCE_TEXT_CLASS);\n      ntd.setAttribute('data-group-index', resData[parseInt(i.toString(), 10)].groupIndex.toString());\n      ntd.setAttribute('aria-label', resData[parseInt(i.toString(), 10)].resourceData[resData[parseInt(i.toString(), 10)].resource.textField] + ' resource');\n      if (!this.parent.activeViewOptions.resourceHeaderTemplate) {\n        this.setMargin(ntd.querySelector('.' + cls.RESOURCE_TEXT_CLASS), left);\n      }\n      var classCollection = [cls.RESOURCE_CELLS_CLASS, resData[parseInt(i.toString(), 10)].resourceData.ClassName];\n      addClass([ntd], classCollection);\n      var args = {\n        elementType: 'resourceHeader',\n        element: ntd,\n        groupIndex: resData[parseInt(i.toString(), 10)].groupIndex\n      };\n      this.parent.trigger(events.renderCell, args);\n      var ntr = tr.cloneNode();\n      ntr.appendChild(ntd);\n      resRows.push(ntr);\n    }\n    return resRows;\n  };\n  ResourceBase.prototype.setMargin = function (element, value) {\n    if (!this.parent.enableRtl) {\n      element.style.marginLeft = value;\n    } else {\n      element.style.marginRight = value;\n    }\n  };\n  ResourceBase.prototype.countCalculation = function (parentCollection, wholeCollection) {\n    var collection;\n    for (var y = 0; y < parentCollection.length; y++) {\n      var data = parentCollection[parentCollection.length - (y + 1)].dataSource;\n      for (var x = 0; x < data.length; x++) {\n        var totalCount = 0;\n        if (this.parent.activeViewOptions.group.byGroupID) {\n          var query = new Query().where(wholeCollection[wholeCollection.length - 1].groupIDField, 'equal', data[parseInt(x.toString(), 10)][parentCollection[parentCollection.length - (y + 1)].idField]);\n          collection = new DataManager(wholeCollection[wholeCollection.length - 1].dataSource).executeLocal(query);\n        } else {\n          collection = wholeCollection[wholeCollection.length - 1].dataSource;\n        }\n        for (var z = 0; z < collection.length; z++) {\n          totalCount = totalCount + parseInt(collection[parseInt(z.toString(), 10)].Count, 10);\n        }\n        totalCount = totalCount + parseInt(data[parseInt(x.toString(), 10)].Count, 10);\n        extend(data[parseInt(x.toString(), 10)], {\n          Count: totalCount\n        });\n      }\n      wholeCollection = wholeCollection.slice(0, -1);\n    }\n  };\n  ResourceBase.prototype.onTreeIconClick = function (e) {\n    var _this = this;\n    if (this.parent.eventTooltip) {\n      this.parent.eventTooltip.close();\n    }\n    var target = e.target;\n    var hide;\n    var trElement = closest(target, '.' + cls.RESOURCE_PARENT_CLASS).parentElement;\n    var index = parseInt(trElement.children[0].getAttribute('data-group-index'), 10);\n    var args = {\n      cancel: false,\n      event: e,\n      groupIndex: index,\n      requestType: !target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpand' : 'resourceCollapse'\n    };\n    this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n      if (!actionArgs.cancel) {\n        if (target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS)) {\n          classList(target, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n          hide = true;\n        } else {\n          classList(target, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n          hide = false;\n        }\n        var eventElements = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS + ',.' + cls.MORE_INDICATOR_CLASS));\n        for (var _i = 0, eventElements_1 = eventElements; _i < eventElements_1.length; _i++) {\n          var element = eventElements_1[_i];\n          remove(element);\n        }\n        if (_this.parent.virtualScrollModule) {\n          _this.updateVirtualContent(index, hide, e, target);\n        } else {\n          _this.updateContent(index, hide);\n        }\n        var data = {\n          cssProperties: _this.parent.getCssProperties(),\n          module: 'scroll'\n        };\n        _this.parent.notify(events.scrollUiUpdate, data);\n        args = {\n          cancel: false,\n          event: e,\n          groupIndex: index,\n          requestType: target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpanded' : 'resourceCollapsed'\n        };\n        _this.parent.refreshEvents(false);\n        _this.parent.trigger(events.actionComplete, args);\n      }\n    });\n  };\n  ResourceBase.prototype.updateContent = function (index, hide) {\n    var rowCollection = [];\n    var workCellCollection = [];\n    var headerRowCollection = [];\n    var pNode;\n    var clickedRes = this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData;\n    var resRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'tr'));\n    var contentRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'tbody tr'));\n    var eventRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' .' + cls.APPOINTMENT_CONTAINER_CLASS));\n    for (var j = 0; j < clickedRes.Count; j++) {\n      rowCollection.push(resRows[index + j + 1]);\n      workCellCollection.push(contentRows[index + j + 1]);\n      headerRowCollection.push(eventRows[index + j + 1]);\n    }\n    var clonedCollection = this.lastResourceLevel;\n    for (var i = 0; i < rowCollection.length; i++) {\n      var expanded = true;\n      pNode = rowCollection[parseInt(i.toString(), 10)].children[0].classList.contains(cls.RESOURCE_PARENT_CLASS);\n      clonedCollection[parseInt(index.toString(), 10)].resourceData[clonedCollection[parseInt(index.toString(), 10)].resource.expandedField] = !hide;\n      if (hide) {\n        if (pNode) {\n          var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n          if (trElem) {\n            classList(trElem, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n          }\n        }\n        if (!rowCollection[parseInt(i.toString(), 10)].classList.contains(cls.HIDDEN_CLASS)) {\n          addClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], cls.HIDDEN_CLASS);\n        }\n      } else {\n        if (pNode) {\n          var rowIndex = rowCollection[parseInt(i.toString(), 10)].rowIndex;\n          if (!clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField] && !isNullOrUndefined(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField])) {\n            rowCollection.splice(i + 1, parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10));\n            workCellCollection.splice(i + 1, parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10));\n            headerRowCollection.splice(i + 1, parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10));\n            expanded = false;\n          }\n          if (expanded) {\n            var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n            if (trElem) {\n              classList(trElem, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n            }\n          }\n        }\n        if (rowCollection[parseInt(i.toString(), 10)].classList.contains(cls.HIDDEN_CLASS)) {\n          removeClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], cls.HIDDEN_CLASS);\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  ResourceBase.prototype.updateVirtualContent = function (index, expand, e, target) {\n    this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData[this.lastResourceLevel[parseInt(index.toString(), 10)].resource.expandedField] = !expand;\n    this.setExpandedResources();\n    var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n    var startIndex = this.expandedResources.indexOf(this.renderedResources[0]);\n    this.parent.virtualScrollModule.existingDataCollection = this.renderedResources;\n    this.renderedResources = this.expandedResources.slice(startIndex, startIndex + resourceCount);\n    if (this.renderedResources.length < resourceCount) {\n      var sIndex = this.expandedResources.length - resourceCount;\n      sIndex = sIndex > 0 ? sIndex : 0;\n      this.renderedResources = this.expandedResources.slice(sIndex, this.expandedResources.length);\n    }\n    var virtualTrack = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n    this.parent.virtualScrollModule.updateVirtualTrackHeight(virtualTrack);\n    var resTable = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'table');\n    var contentTable = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'table');\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.parent.virtualScrollModule.updateContent(resTable, contentTable, eventTable, this.renderedResources);\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n    if (!isNullOrUndefined(timeIndicator)) {\n      timeIndicator.style.height = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight + 'px';\n    }\n  };\n  ResourceBase.prototype.renderResourceHeader = function () {\n    var resourceWrapper = createElement('div', {\n      className: cls.RESOURCE_TOOLBAR_CONTAINER\n    });\n    resourceWrapper.innerHTML = '<div class=\"' + cls.RESOURCE_HEADER_TOOLBAR + '\"><div class=\"' + cls.RESOURCE_MENU + '\">' + '<div class=\"e-icons ' + cls.RESOURCE_MENU_ICON + '\"></div></div><div class=\"' + cls.RESOURCE_LEVEL_TITLE + '\"></div></div>';\n    if (this.parent.currentView === 'MonthAgenda') {\n      var target = this.parent.activeView.getPanel().querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      target.insertBefore(resourceWrapper, target.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS));\n    } else {\n      this.parent.element.insertBefore(resourceWrapper, this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n    }\n    this.renderResourceHeaderText();\n    EventHandler.add(resourceWrapper.querySelector('.' + cls.RESOURCE_MENU_ICON), 'click', this.menuClick, this);\n  };\n  ResourceBase.prototype.renderResourceTree = function () {\n    this.popupOverlay = createElement('div', {\n      className: cls.RESOURCE_TREE_POPUP_OVERLAY\n    });\n    var treeWrapper = createElement('div', {\n      className: cls.RESOURCE_TREE_POPUP + ' e-popup-close'\n    });\n    if (this.parent.currentView === 'MonthAgenda') {\n      var target = this.parent.activeView.getPanel().querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n      target.insertBefore(treeWrapper, target.children[0]);\n      target.appendChild(this.popupOverlay);\n    } else {\n      this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(treeWrapper);\n      this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.popupOverlay);\n    }\n    var resourceTree = createElement('div', {\n      className: cls.RESOURCE_TREE\n    });\n    treeWrapper.appendChild(resourceTree);\n    this.treeViewObj = new TreeView({\n      cssClass: this.parent.cssClass,\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      fields: {\n        dataSource: [].slice.call(this.generateTreeData()),\n        id: 'resourceId',\n        text: 'resourceName',\n        child: 'resourceChild'\n      },\n      nodeTemplate: this.parent.resourceHeaderTemplate,\n      nodeClicked: this.resourceClick.bind(this),\n      created: this.resourceTreeCreated.bind(this)\n    });\n    this.treeViewObj.root = this.parent.root ? this.parent.root : this.parent;\n    this.treeViewObj.appendTo(resourceTree);\n    this.treeViewObj.expandAll();\n    this.treePopup = new Popup(treeWrapper, {\n      targetType: 'relative',\n      actionOnScroll: 'none',\n      content: this.treeViewObj.element,\n      relateTo: this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS),\n      enableRtl: this.parent.enableRtl,\n      hideAnimation: {\n        name: 'SlideLeftOut',\n        duration: 500\n      },\n      showAnimation: {\n        name: 'SlideLeftIn',\n        duration: 500\n      },\n      viewPortElement: this.parent.element.querySelector('.' + (this.parent.currentView === 'MonthAgenda' ? cls.WRAPPER_CONTAINER_CLASS : cls.TABLE_CONTAINER_CLASS))\n    });\n    this.parent.on(events.documentClick, this.documentClick, this);\n  };\n  ResourceBase.prototype.resourceTreeCreated = function () {\n    if (this.parent.activeViewOptions.resourceHeaderTemplate && this.parent.portals && this.treeViewObj.portals) {\n      this.parent.portals = this.parent.portals.concat(this.treeViewObj.portals);\n      this.parent.renderTemplates();\n    }\n  };\n  ResourceBase.prototype.generateTreeData = function (isTimeLine) {\n    var _this = this;\n    var treeCollection = [];\n    var resTreeColl = [];\n    var groupIndex = 0;\n    var _loop_1 = function (i, len) {\n      var treeHandler = function (treeLevel, index, levelId) {\n        var resource = _this.resourceCollection[parseInt(index.toString(), 10)];\n        var treeArgs;\n        var resObj;\n        if (!isTimeLine) {\n          treeArgs = {\n            resourceId: levelId,\n            resourceName: treeLevel.resourceData[resource.textField],\n            resource: treeLevel.resource,\n            resourceData: treeLevel.resourceData\n          };\n        } else {\n          resObj = {\n            type: 'resourceHeader',\n            resource: treeLevel.resource,\n            resourceData: treeLevel.resourceData,\n            groupIndex: groupIndex,\n            groupOrder: treeLevel.groupOrder\n          };\n          resTreeColl.push(resObj);\n          groupIndex++;\n        }\n        if (treeLevel.child.length > 0 && !isTimeLine) {\n          treeArgs.resourceChild = [];\n        }\n        var count = 1;\n        for (var _i = 0, _a = treeLevel.child; _i < _a.length; _i++) {\n          var tree = _a[_i];\n          if (!isTimeLine) {\n            treeArgs.resourceChild.push(treeHandler(tree, index + 1, levelId + '-' + count));\n          } else {\n            treeHandler(tree, index + 1, levelId + '-' + count);\n          }\n          count += 1;\n        }\n        if (isTimeLine) {\n          extend(resObj.resourceData, {\n            Count: count - 1\n          });\n        }\n        return treeArgs;\n      };\n      if (!isTimeLine) {\n        treeCollection.push(treeHandler(this_1.resourceTreeLevel[parseInt(i.toString(), 10)], 0, (i + 1).toString()));\n      } else {\n        treeHandler(this_1.resourceTreeLevel[parseInt(i.toString(), 10)], 0, (i + 1).toString());\n      }\n    };\n    var this_1 = this;\n    for (var i = 0, len = this.resourceTreeLevel.length; i < len; i++) {\n      _loop_1(i, len);\n    }\n    if (isTimeLine) {\n      this.lastResourceLevel = resTreeColl;\n      return resTreeColl;\n    } else {\n      return treeCollection;\n    }\n  };\n  ResourceBase.prototype.renderResourceHeaderText = function () {\n    var resource = this.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n    var headerCollection = [];\n    var _loop_2 = function (i, len) {\n      var resourceLevel = this_2.resourceCollection[parseInt(i.toString(), 10)];\n      var resourceText = resourceLevel.dataSource.filter(function (resData) {\n        return resData[resourceLevel.idField] === resource.groupOrder[parseInt(i.toString(), 10)];\n      });\n      var resourceName = createElement('div', {\n        className: cls.RESOURCE_NAME\n      });\n      this_2.parent.sanitize(resourceText[0][resourceLevel.textField], resourceName);\n      headerCollection.push(resourceName);\n      var levelIcon = createElement('div', {\n        className: 'e-icons e-icon-next'\n      });\n      headerCollection.push(levelIcon);\n    };\n    var this_2 = this;\n    for (var i = 0, len = resource.groupOrder.length; i < len; i++) {\n      _loop_2(i, len);\n    }\n    headerCollection.pop();\n    var target = this.parent.currentView === 'MonthAgenda' ? this.parent.activeView.getPanel() : this.parent.element;\n    var headerWrapper = target.querySelector('.' + cls.RESOURCE_LEVEL_TITLE);\n    util.removeChildren(headerWrapper);\n    for (var _i = 0, headerCollection_1 = headerCollection; _i < headerCollection_1.length; _i++) {\n      var header = headerCollection_1[_i];\n      headerWrapper.appendChild(header);\n    }\n    if (this.lastResourceLevel.length === 1) {\n      addClass([this.parent.element.querySelector('.' + cls.RESOURCE_MENU)], cls.DISABLE_CLASS);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  ResourceBase.prototype.menuClick = function (event) {\n    if (this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP).classList.contains(cls.POPUP_OPEN)) {\n      this.treePopup.hide();\n      removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n    } else {\n      var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n      removeClass(treeNodes, 'e-active');\n      addClass([treeNodes[this.parent.uiStateValues.groupIndex]], 'e-active');\n      this.treePopup.show();\n      addClass([this.popupOverlay], cls.ENABLE_CLASS);\n    }\n  };\n  ResourceBase.prototype.selectResourceByIndex = function (groupIndex) {\n    if (this.lastResourceLevel && groupIndex > -1 && groupIndex < this.lastResourceLevel.length) {\n      this.triggerEvents(groupIndex);\n    }\n  };\n  ResourceBase.prototype.resourceClick = function (event) {\n    if (!event.node.classList.contains('e-has-child')) {\n      this.treePopup.hide();\n      removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n      var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n      var groupIndex = treeNodes.indexOf(event.node);\n      this.triggerEvents(groupIndex, event);\n      event.event.preventDefault();\n    }\n  };\n  ResourceBase.prototype.triggerEvents = function (groupIndex, event) {\n    var _this = this;\n    var args = {\n      cancel: false,\n      event: event ? event.event : null,\n      groupIndex: groupIndex,\n      requestType: 'resourceChange'\n    };\n    this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n      if (!actionArgs.cancel) {\n        _this.parent.uiStateValues.groupIndex = actionArgs.groupIndex;\n        _this.parent.renderModule.render(_this.parent.currentView);\n        args = {\n          cancel: false,\n          event: event ? event.event : null,\n          groupIndex: _this.parent.uiStateValues.groupIndex,\n          requestType: 'resourceChanged'\n        };\n        _this.parent.adaptiveGroupIndex = _this.parent.uiStateValues.groupIndex;\n        _this.parent.trigger(events.actionComplete, args);\n      }\n    });\n  };\n  ResourceBase.prototype.documentClick = function (args) {\n    if (closest(args.event.target, '.' + cls.RESOURCE_TREE_POPUP)) {\n      return;\n    }\n    var treeWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP);\n    if (treeWrapper && treeWrapper.classList.contains(cls.POPUP_OPEN)) {\n      this.treePopup.hide();\n      removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n    }\n  };\n  ResourceBase.prototype.bindResourcesData = function (isSetModel) {\n    var _this = this;\n    this.parent.showSpinner();\n    var promises = [];\n    for (var _i = 0, _a = this.parent.resources; _i < _a.length; _i++) {\n      var resource = _a[_i];\n      var dataModule = new Data(this.parent, resource.dataSource, resource.query);\n      promises.push(dataModule.getData(dataModule.generateQuery()));\n    }\n    Promise.all(promises).then(function (e) {\n      return _this.dataManagerSuccess(e, isSetModel);\n    }).catch(function (e) {\n      return _this.parent.crudModule.dataManagerFailure(e);\n    });\n  };\n  ResourceBase.prototype.dataManagerSuccess = function (e, isSetModel) {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.resourceCollection = [];\n    for (var i = 0, length_1 = e.length; i < length_1; i++) {\n      var resource = this.parent.resources[parseInt(i.toString(), 10)];\n      var resourceObj = this.getResourceModel(resource, e[parseInt(i.toString(), 10)].result);\n      this.parent.resourceCollection.push(resourceObj);\n    }\n    this.refreshLayout(isSetModel);\n  };\n  ResourceBase.prototype.getResourceModel = function (resource, resourceData) {\n    var resourceObj = {\n      field: resource.field,\n      title: resource.title,\n      name: resource.name,\n      allowMultiple: resource.allowMultiple,\n      dataSource: resourceData || resource.dataSource,\n      idField: resource.idField,\n      textField: resource.textField,\n      groupIDField: resource.groupIDField,\n      colorField: resource.colorField,\n      startHourField: resource.startHourField,\n      endHourField: resource.endHourField,\n      workDaysField: resource.workDaysField,\n      expandedField: resource.expandedField,\n      cssClassField: resource.cssClassField\n    };\n    return resourceObj;\n  };\n  ResourceBase.prototype.refreshLayout = function (isSetModel) {\n    if (isNullOrUndefined(this.parent.uiStateValues.groupIndex) || !this.parent.enablePersistence) {\n      this.parent.uiStateValues.groupIndex = 0;\n    }\n    this.parent.renderElements(isSetModel);\n  };\n  ResourceBase.prototype.setResourceCollection = function () {\n    var requiredResources = [];\n    this.resourceCollection = [];\n    this.colorIndex = null;\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      for (var _i = 0, _a = this.parent.activeViewOptions.group.resources; _i < _a.length; _i++) {\n        var resource = _a[_i];\n        var index_1 = util.findIndexInData(this.parent.resourceCollection, 'name', resource);\n        if (index_1 >= 0) {\n          requiredResources.push(this.parent.resourceCollection[parseInt(index_1.toString(), 10)]);\n        }\n      }\n    } else if (this.parent.resourceCollection.length > 0) {\n      requiredResources = this.parent.resourceCollection;\n    }\n    var index = 0;\n    for (var _b = 0, requiredResources_1 = requiredResources; _b < requiredResources_1.length; _b++) {\n      var resource = requiredResources_1[_b];\n      var resources = this.getResourceModel(resource);\n      if (resource.name === this.parent.eventSettings.resourceColorField) {\n        this.colorIndex = index;\n      }\n      index++;\n      this.resourceCollection.push(resources);\n    }\n    if (isNullOrUndefined(this.colorIndex)) {\n      this.colorIndex = this.resourceCollection.length - 1;\n    }\n  };\n  ResourceBase.prototype.generateResourceLevels = function (innerDates, isTimeLine) {\n    var _this = this;\n    var resources = this.resourceCollection;\n    var resTreeGroup = [];\n    var lastColumnDates = [];\n    var group = function (resources, index, prevResource, prevResourceData, prevOrder) {\n      var resTree = [];\n      var resource = resources[0];\n      if (resource) {\n        var data = void 0;\n        if (prevResourceData && _this.parent.activeViewOptions.group.byGroupID) {\n          var id_1 = prevResourceData[prevResource.idField];\n          data = resource.dataSource.filter(function (e) {\n            return e[resource.groupIDField] === id_1;\n          });\n        } else {\n          data = resource.dataSource;\n        }\n        for (var i = 0; i < data.length; i++) {\n          var groupOrder = [];\n          if (prevOrder && prevOrder.length > 0) {\n            groupOrder = groupOrder.concat(prevOrder);\n          }\n          groupOrder.push(data[parseInt(i.toString(), 10)][resource.idField]);\n          var items = group(resources.slice(1), index + 1, resource, data[parseInt(i.toString(), 10)], groupOrder);\n          // Here validate child item empty top level resource only\n          if (index === 0 && items.length === 0 && _this.resourceCollection.length > 1) {\n            continue;\n          }\n          var dateCol = [];\n          var renderDates = _this.parent.activeView.renderDates;\n          var resWorkDays = void 0;\n          if (!_this.parent.activeViewOptions.group.byDate && index + 1 === _this.resourceCollection.length) {\n            var workDays = data[parseInt(i.toString(), 10)][resource.workDaysField];\n            var resStartHour = data[parseInt(i.toString(), 10)][resource.startHourField];\n            var resEndHour = data[parseInt(i.toString(), 10)][resource.endHourField];\n            if (workDays && workDays.length > 0) {\n              renderDates = _this.parent.activeView.getRenderDates(workDays);\n              resWorkDays = workDays;\n              dateCol = _this.parent.activeView.getDateSlots(renderDates, workDays);\n            } else {\n              resWorkDays = _this.parent.activeViewOptions.workDays;\n              dateCol = innerDates;\n            }\n            var dateSlots = _this.generateCustomHours(dateCol, resStartHour, resEndHour, groupOrder);\n            lastColumnDates = lastColumnDates.concat(dateSlots);\n          }\n          var resCssClass = data[parseInt(i.toString(), 10)][resource.cssClassField];\n          var slotData = {\n            type: 'resourceHeader',\n            className: ['e-resource-cells'],\n            resourceLevelIndex: index,\n            groupOrder: groupOrder,\n            resource: resource,\n            resourceData: data[parseInt(i.toString(), 10)],\n            colSpan: _this.parent.activeViewOptions.group.byDate ? 1 : dateCol.length,\n            renderDates: renderDates,\n            workDays: resWorkDays,\n            cssClass: resCssClass,\n            child: items\n          };\n          resTree.push(slotData);\n        }\n        if (!resTreeGroup[parseInt(index.toString(), 10)]) {\n          resTreeGroup[parseInt(index.toString(), 10)] = [];\n        }\n        if (resTree.length > 0) {\n          resTreeGroup[parseInt(index.toString(), 10)].push(resTree);\n        }\n        return resTree;\n      }\n      return [];\n    };\n    this.resourceTreeLevel = group(resources, 0);\n    return isTimeLine ? [] : this.generateHeaderLevels(resTreeGroup, lastColumnDates, innerDates);\n  };\n  ResourceBase.prototype.generateCustomHours = function (renderDates, startHour, endHour, groupOrder) {\n    var dateSlots = extend([], renderDates, null, true);\n    for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n      var dateSlot = dateSlots_1[_i];\n      if (startHour) {\n        dateSlot.startHour = this.parent.getStartEndTime(startHour);\n      }\n      if (endHour) {\n        dateSlot.endHour = this.parent.getStartEndTime(endHour);\n      }\n      if (groupOrder) {\n        dateSlot.groupOrder = groupOrder;\n      }\n    }\n    return dateSlots;\n  };\n  ResourceBase.prototype.generateHeaderLevels = function (resTreeGroup, lastColumnDates, headerDates) {\n    var headerLevels = [];\n    for (var i = resTreeGroup.length - 1; i >= 0; i--) {\n      var temp = 0;\n      for (var _i = 0, _a = resTreeGroup[parseInt(i.toString(), 10)]; _i < _a.length; _i++) {\n        var currentLevelChilds = _a[_i];\n        for (var _b = 0, currentLevelChilds_1 = currentLevelChilds; _b < currentLevelChilds_1.length; _b++) {\n          var currentLevelChild = currentLevelChilds_1[_b];\n          if (resTreeGroup[i + 1] && resTreeGroup[i + 1].length > 0) {\n            var nextLevelChilds = resTreeGroup[parseInt((i + 1).toString(), 10)][parseInt(temp.toString(), 10)];\n            if (!nextLevelChilds) {\n              continue;\n            }\n            var colSpan = 0;\n            for (var _c = 0, nextLevelChilds_1 = nextLevelChilds; _c < nextLevelChilds_1.length; _c++) {\n              var nextLevelChild = nextLevelChilds_1[_c];\n              if (!this.parent.activeViewOptions.group.byGroupID || this.parent.activeViewOptions.group.byGroupID && nextLevelChild.resourceData[nextLevelChild.resource.groupIDField] === currentLevelChild.resourceData[currentLevelChild.resource.idField]) {\n                colSpan += nextLevelChild.colSpan;\n              }\n            }\n            currentLevelChild.colSpan = colSpan;\n          }\n          currentLevelChild.groupIndex = temp;\n          temp++;\n          headerLevels[currentLevelChild.resourceLevelIndex] = headerLevels[currentLevelChild.resourceLevelIndex] || [];\n          headerLevels[currentLevelChild.resourceLevelIndex].push(currentLevelChild);\n        }\n      }\n    }\n    this.lastResourceLevel = headerLevels.slice(-1)[0] || [];\n    if (!this.parent.activeViewOptions.group.byDate) {\n      var index = 0;\n      for (var _d = 0, _e = this.lastResourceLevel; _d < _e.length; _d++) {\n        var lastLevelResource = _e[_d];\n        for (var i = 0; i < lastLevelResource.colSpan; i++) {\n          lastColumnDates[parseInt(index.toString(), 10)].groupIndex = lastLevelResource.groupIndex;\n          index++;\n        }\n      }\n      headerLevels.push(lastColumnDates);\n      return headerLevels;\n    }\n    var dateHeaderLevels = [];\n    var levels = extend([], headerLevels, null, true);\n    var datesColumn = [];\n    if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n      var renderDates_1 = [];\n      var dateIndex = 0;\n      var _loop_3 = function (headerDate) {\n        this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)] = [];\n        var currentDateLevels = [];\n        var _loop_4 = function (j) {\n          var workDays = this_3.lastResourceLevel[parseInt(j.toString(), 10)].resourceData[this_3.lastResourceLevel[parseInt(j.toString(), 10)].resource.workDaysField];\n          if (!workDays) {\n            workDays = this_3.parent.activeViewOptions.workDays;\n          }\n          if (workDays.indexOf(headerDate.date.getDay()) !== -1) {\n            var resTd_1 = extend({}, this_3.lastResourceLevel[parseInt(j.toString(), 10)], null, true);\n            resTd_1.date = headerDate.date;\n            this_3.lastResourceLevel[parseInt(j.toString(), 10)].workDays = workDays;\n            resTd_1.startHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.startHourField]) || headerDate.startHour;\n            resTd_1.endHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.endHourField]) || headerDate.endHour;\n            this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)].push(resTd_1);\n            var _loop_5 = function (k) {\n              if (!currentDateLevels[parseInt(k.toString(), 10)]) {\n                currentDateLevels[parseInt(k.toString(), 10)] = [];\n              }\n              if (k === resTd_1.groupOrder.length - 1) {\n                if (!renderDates_1[parseInt(j.toString(), 10)]) {\n                  renderDates_1[parseInt(j.toString(), 10)] = [];\n                }\n                var filterDates = resTd_1.renderDates.filter(function (x) {\n                  return x.getDay() === headerDate.date.getDay();\n                });\n                renderDates_1[parseInt(j.toString(), 10)] = renderDates_1[parseInt(j.toString(), 10)].concat(filterDates);\n                currentDateLevels[parseInt(k.toString(), 10)].push(resTd_1);\n                return \"continue\";\n              }\n              var currentLevel = levels[parseInt(k.toString(), 10)];\n              var filteredResource = currentLevel.filter(function (data) {\n                return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k.toString(), 10)];\n              });\n              if (filteredResource && filteredResource.length > 0) {\n                var existedResource = currentDateLevels[parseInt(k.toString(), 10)].filter(function (data) {\n                  return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k.toString(), 10)];\n                });\n                if (existedResource && existedResource.length > 0) {\n                  existedResource[0].colSpan += 1;\n                } else {\n                  var filteredTd = extend({}, filteredResource[0], null, true);\n                  filteredTd.colSpan = 1;\n                  currentDateLevels[parseInt(k.toString(), 10)].push(filteredTd);\n                }\n              }\n            };\n            for (var k = 0; k < resTd_1.groupOrder.length; k++) {\n              _loop_5(k);\n            }\n          }\n        };\n        for (var j = 0; j < this_3.lastResourceLevel.length; j++) {\n          _loop_4(j);\n        }\n        if (currentDateLevels.length > 0) {\n          for (var l = 0; l < levels.length; l++) {\n            if (!dateHeaderLevels[parseInt(l.toString(), 10)]) {\n              dateHeaderLevels[parseInt(l.toString(), 10)] = [];\n            }\n            dateHeaderLevels[parseInt(l.toString(), 10)] = dateHeaderLevels[parseInt(l.toString(), 10)].concat(currentDateLevels[parseInt(l.toString(), 10)]);\n          }\n          headerDate.colSpan = currentDateLevels[currentDateLevels.length - 1].length;\n          datesColumn.push(headerDate);\n        }\n        dateIndex++;\n      };\n      var this_3 = this;\n      for (var _f = 0, headerDates_1 = headerDates; _f < headerDates_1.length; _f++) {\n        var headerDate = headerDates_1[_f];\n        _loop_3(headerDate);\n      }\n      this.resourceDateTree = this.resourceDateTree.filter(function (data) {\n        return data.length > 0;\n      });\n      this.lastResourceLevel.forEach(function (x, index) {\n        if (renderDates_1[parseInt(index.toString(), 10)]) {\n          x.renderDates = renderDates_1[parseInt(index.toString(), 10)].sort(function (a, b) {\n            return a.getTime() - b.getTime();\n          });\n        }\n      });\n      dateHeaderLevels.unshift(datesColumn);\n      return dateHeaderLevels;\n    }\n    var dateColSpan = 0;\n    for (var _g = 0, _h = levels[0]; _g < _h.length; _g++) {\n      var firstRowTd = _h[_g];\n      dateColSpan += firstRowTd.colSpan;\n    }\n    for (var _j = 0, headerDates_2 = headerDates; _j < headerDates_2.length; _j++) {\n      var headerDate = headerDates_2[_j];\n      headerDate.colSpan = dateColSpan;\n      datesColumn.push(headerDate);\n      var resGroup = extend([], levels, null, true);\n      for (var k = 0, length_2 = resGroup.length; k < length_2; k++) {\n        if (k === resGroup.length - 1) {\n          for (var _k = 0, _l = resGroup[parseInt(k.toString(), 10)]; _k < _l.length; _k++) {\n            var resTd = _l[_k];\n            resTd.date = headerDate.date;\n            resTd.workDays = headerDate.workDays;\n            resTd.startHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.startHourField]) || headerDate.startHour;\n            resTd.endHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.endHourField]) || headerDate.endHour;\n          }\n        }\n        if (!dateHeaderLevels[parseInt(k.toString(), 10)]) {\n          dateHeaderLevels[parseInt(k.toString(), 10)] = [];\n        }\n        dateHeaderLevels[parseInt(k.toString(), 10)] = dateHeaderLevels[parseInt(k.toString(), 10)].concat(resGroup[parseInt(k.toString(), 10)]);\n      }\n    }\n    dateHeaderLevels.unshift(datesColumn);\n    return dateHeaderLevels;\n  };\n  ResourceBase.prototype.setResourceValues = function (eventObj, groupIndex) {\n    var _this = this;\n    var setValues = function (index, field, value) {\n      if (_this.resourceCollection[parseInt(index.toString(), 10)].allowMultiple && _this.parent.activeViewOptions.group.allowGroupEdit) {\n        eventObj[\"\" + field] = [value];\n      } else {\n        eventObj[\"\" + field] = value;\n      }\n    };\n    if (groupIndex === void 0) {\n      groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : this.parent.activeCellsData.groupIndex;\n    }\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(groupIndex)) {\n      var groupOrder = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;\n      for (var index = 0; index < this.resourceCollection.length; index++) {\n        setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, groupOrder[parseInt(index.toString(), 10)]);\n      }\n    } else if (this.parent.resourceCollection.length > 0) {\n      for (var index = 0; index < this.resourceCollection.length; index++) {\n        var data = this.resourceCollection[parseInt(index.toString(), 10)].dataSource[0];\n        if (data) {\n          setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, data[this.resourceCollection[parseInt(index.toString(), 10)].idField]);\n        }\n      }\n    }\n  };\n  ResourceBase.prototype.getResourceColor = function (eventObj, groupOrder) {\n    var colorFieldIndex = !isNullOrUndefined(groupOrder) && this.colorIndex > groupOrder.length - 1 ? groupOrder.length - 1 : this.colorIndex;\n    var resource = this.resourceCollection[parseInt(colorFieldIndex.toString(), 10)];\n    if (isNullOrUndefined(groupOrder) && this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n      return undefined;\n    }\n    var id = isNullOrUndefined(groupOrder) ? eventObj[resource.field] : groupOrder[parseInt(colorFieldIndex.toString(), 10)];\n    var data = this.filterData(resource.dataSource, resource.idField, id);\n    if (data.length > 0) {\n      return data[0][resource.colorField];\n    }\n    return undefined;\n  };\n  ResourceBase.prototype.getCssClass = function (eventObj) {\n    var resource = this.resourceCollection.slice(-1)[0];\n    if (this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n      return undefined;\n    }\n    var data = this.filterData(resource.dataSource, resource.idField, eventObj[resource.field]);\n    if (data.length > 0) {\n      return data[0][resource.cssClassField];\n    }\n    return undefined;\n  };\n  ResourceBase.prototype.getResourceRenderDates = function () {\n    // eslint-disable-next-line prefer-spread\n    var resourceDates = [].concat.apply([], this.lastResourceLevel.map(function (e) {\n      return e.renderDates;\n    }));\n    var time = resourceDates.map(function (dateObj) {\n      return dateObj.getTime();\n    });\n    var removeDuplicateDates = function (dateColl) {\n      return dateColl.filter(function (date, index) {\n        return time.indexOf(date.getTime()) === index;\n      });\n    };\n    var renderDates = removeDuplicateDates(resourceDates);\n    renderDates.sort(function (a, b) {\n      return a.getTime() - b.getTime();\n    });\n    return renderDates;\n  };\n  ResourceBase.prototype.filterData = function (dataSource, field, value) {\n    return dataSource.filter(function (data) {\n      return data[\"\" + field] === value;\n    });\n  };\n  ResourceBase.prototype.getResourceData = function (eventObj, index, groupEditIndex) {\n    if (this.parent.activeViewOptions.group.allowGroupEdit) {\n      var resourceObj = {};\n      for (var _i = 0, groupEditIndex_1 = groupEditIndex; _i < groupEditIndex_1.length; _i++) {\n        var groupIndex = groupEditIndex_1[_i];\n        var resourceLevel = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;\n        for (var level = 0, length_3 = resourceLevel.length; level < length_3; level++) {\n          var fieldName = this.resourceCollection[parseInt(level.toString(), 10)].field;\n          if (isNullOrUndefined(resourceObj[\"\" + fieldName])) {\n            resourceObj[\"\" + fieldName] = [];\n          }\n          resourceObj[\"\" + fieldName].push(resourceLevel[parseInt(level.toString(), 10)]);\n        }\n      }\n      eventObj = extend(eventObj, resourceObj);\n    } else {\n      for (var level = 0, length_4 = this.resourceCollection.length; level < length_4; level++) {\n        if (this.lastResourceLevel[parseInt(index.toString(), 10)]) {\n          eventObj[this.resourceCollection[parseInt(level.toString(), 10)].field] = this.lastResourceLevel[parseInt(index.toString(), 10)].groupOrder[parseInt(level.toString(), 10)];\n        }\n      }\n    }\n  };\n  ResourceBase.prototype.addResource = function (resources, name, index) {\n    var resourceCollection = resources instanceof Array ? resources : [resources];\n    var _loop_6 = function (resource) {\n      if (resource.name === name) {\n        resourceCollection.forEach(function (addObj, i) {\n          return new DataManager({\n            json: resource.dataSource\n          }).insert(addObj, null, null, index + i);\n        });\n        return \"break\";\n      }\n    };\n    for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n      var resource = _a[_i];\n      var state_1 = _loop_6(resource);\n      if (state_1 === \"break\") break;\n    }\n    this.refreshLayout(true);\n  };\n  ResourceBase.prototype.removeResource = function (resourceId, name) {\n    var resourceCollection = resourceId instanceof Array ? resourceId : [resourceId];\n    var _loop_7 = function (resource) {\n      if (resource.name === name) {\n        resourceCollection.forEach(function (removeObj) {\n          return new DataManager({\n            json: resource.dataSource\n          }).remove(resource.idField, removeObj);\n        });\n        return \"break\";\n      }\n    };\n    for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n      var resource = _a[_i];\n      var state_2 = _loop_7(resource);\n      if (state_2 === \"break\") break;\n    }\n    this.refreshLayout(true);\n  };\n  ResourceBase.prototype.getIndexFromResourceId = function (id, name, resourceData, event, parentField) {\n    name = name || this.parent.resourceCollection.slice(-1)[0].name;\n    if (isNullOrUndefined(resourceData)) {\n      resourceData = this.resourceCollection.filter(function (e) {\n        return e.name === name;\n      })[0];\n      if (isNullOrUndefined(resourceData)) {\n        return null;\n      }\n    }\n    var resource = resourceData.dataSource.filter(function (e) {\n      if (event && e[resourceData.idField] === id) {\n        if (e[resourceData.groupIDField] === event[\"\" + parentField]) {\n          return e[resourceData.idField] === id;\n        }\n        return null;\n      } else {\n        return e[resourceData.idField] === id;\n      }\n    })[0];\n    return this.lastResourceLevel.map(function (e) {\n      return e.resourceData;\n    }).indexOf(resource);\n  };\n  ResourceBase.prototype.resourceExpand = function (id, name, hide) {\n    var resource = this.parent.resourceCollection.filter(function (e) {\n      if (e.name === name) {\n        return e;\n      }\n      return null;\n    })[0];\n    var index = 0;\n    var resourceData = resource.dataSource.filter(function (e) {\n      return e[resource.idField] === id;\n    })[0];\n    if (!this.parent.activeViewOptions.group.byGroupID) {\n      index = this.getIndexFromResourceId(id, name, resource);\n    } else {\n      index = this.lastResourceLevel.map(function (e) {\n        return e.resourceData;\n      }).indexOf(resourceData);\n    }\n    var target = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + (\"[data-group-index=\\\"\" + index + \"\\\"]\") + ' ' + '.' + cls.RESOURCE_TREE_ICON_CLASS);\n    if (target) {\n      if (target.classList.contains(cls.RESOURCE_EXPAND_CLASS) && !hide) {\n        target.click();\n      } else if (target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) && hide) {\n        target.click();\n      }\n    }\n  };\n  ResourceBase.prototype.resourceScroll = function (id, name) {\n    if (this.parent.isAdaptive || ['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n      return;\n    }\n    var levelName = name || this.parent.resourceCollection.slice(-1)[0].name;\n    var levelIndex = this.parent.resourceCollection.length - 1;\n    var resource = this.parent.resourceCollection.filter(function (e, index) {\n      if (e.name === levelName) {\n        levelIndex = index;\n        return e;\n      }\n      return null;\n    })[0];\n    var scrollElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var index = 0;\n    if (this.parent.activeView.isTimelineView()) {\n      if (!this.parent.activeViewOptions.group.byGroupID) {\n        index = this.getIndexFromResourceId(id, levelName, resource);\n      } else {\n        var resourceData = resource.dataSource.filter(function (e) {\n          return e[resource.idField] === id;\n        })[0];\n        index = this.lastResourceLevel.map(function (e) {\n          return e.resourceData;\n        }).indexOf(resourceData);\n      }\n      if (this.parent.virtualScrollModule) {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var averageRowHeight = Math.round(virtual.offsetHeight / this.expandedResources.length);\n        if (this.parent.rowAutoHeight) {\n          scrollElement.scrollTop = 0;\n          this.parent.virtualScrollModule.virtualScrolling();\n        }\n        scrollElement.scrollTop = index * averageRowHeight - (this.parent.virtualScrollModule.bufferCount - 1) * averageRowHeight;\n        this.parent.virtualScrollModule.virtualScrolling();\n        if (this.parent.rowAutoHeight) {\n          var td = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n          if (td && !td.parentElement.classList.contains(cls.HIDDEN_CLASS)) {\n            scrollElement.scrollTop = scrollElement.scrollTop < td.offsetTop ? td.offsetTop : scrollElement.scrollTop + td.offsetTop;\n          }\n        } else {\n          scrollElement.scrollTop = index * averageRowHeight;\n        }\n      } else {\n        var td = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n        if (td && !td.parentElement.classList.contains(cls.HIDDEN_CLASS)) {\n          scrollElement.scrollTop = td.offsetTop;\n        }\n      }\n    } else {\n      if (!this.parent.activeViewOptions.group.byGroupID) {\n        index = this.getIndexFromResourceId(id, levelName, resource);\n      } else {\n        if (levelName === this.parent.resourceCollection.slice(-1)[0].name) {\n          index = this.lastResourceLevel.map(function (e) {\n            return e.resourceData[resource.idField];\n          }).indexOf(id);\n        } else {\n          index = resource.dataSource.map(function (e) {\n            return e[resource.idField];\n          }).indexOf(id);\n        }\n      }\n      var offsetTarget = this.parent.currentView === 'Month' ? this.parent.element.querySelector(\".\" + cls.DATE_HEADER_WRAP_CLASS + \" tbody tr:nth-child(\" + (levelIndex + 1) + \")\") : this.parent.element.querySelector(\".\" + cls.HEADER_ROW_CLASS + \":nth-child(\" + (levelIndex + 1) + \")\");\n      var offset = [].slice.call(offsetTarget.children).map(function (node) {\n        return node.offsetLeft;\n      });\n      scrollElement.scrollLeft = offset[parseInt(index.toString(), 10)];\n    }\n  };\n  ResourceBase.prototype.destroy = function () {\n    this.parent.off(events.documentClick, this.documentClick);\n    if (this.treeViewObj) {\n      if (this.treeViewObj.portals && this.treeViewObj.portals.length > 0) {\n        var treeViewTemplates = this.treeViewObj.portals.map(function (x) {\n          return x.propName;\n        });\n        if (treeViewTemplates.length > 0) {\n          this.parent.resetTemplates(treeViewTemplates);\n        }\n      }\n      this.treeViewObj.destroy();\n      this.treeViewObj = null;\n    }\n    if (this.treePopup) {\n      this.treePopup.destroy();\n      this.treePopup = null;\n      remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP));\n      remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP_OVERLAY));\n    }\n    var resToolBarEle = this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER);\n    if (resToolBarEle) {\n      remove(resToolBarEle);\n    }\n  };\n  return ResourceBase;\n}();\nexport { ResourceBase };","map":{"version":3,"names":["extend","isNullOrUndefined","createElement","EventHandler","addClass","append","removeClass","remove","closest","classList","DataManager","Query","TreeView","Popup","Data","cls","events","util","ResourceBase","parent","resourceCollection","leftPixel","resourceDateTree","prototype","renderResourceHeaderIndent","tr","resColTd","className","RESOURCE_LEFT_TD_CLASS","resColDiv","RESOURCE_TEXT_CLASS","activeViewOptions","headerIndentTemplate","data","type","renderHeaderIndentTemplate","appendChild","args","elementType","element","trigger","renderCell","hideResourceRows","tBody","length","virtualScrollModule","trCount","lastResourceLevel","i","resData","parseInt","toString","resourceData","res","resource","ClassName","RESOURCE_PARENT_CLASS","expandedField","trCollection","slice","call","children","slicedCollection","Count","HIDDEN_CLASS","createResourceColumn","resColl","resDiv","RESOURCE_COLUMN_WRAP_CLASS","tbl","activeView","createTableLayout","RESOURCE_COLUMN_TABLE_CLASS","uiStateValues","isGroupAdaptive","rowAutoHeight","isTimelineView","group","resources","AUTO_HEIGHT","querySelector","generateTreeData","countCalculation","renderedResources","resourceCount","getRenderedCount","setExpandedResources","expandedResources","getContentRows","setRenderedResources","temp","count","push","isExpanded","isVirtualScroll","resRows","left","rIndex","td","attrs","tabindex","existingGroupIndices","getGroupIndices","indexOf","groupIndex","ntd","cloneNode","findIndexInData","name","RESOURCE_CHILD_CLASS","iconClass","RESOURCE_COLLAPSE_CLASS","RESOURCE_EXPAND_CLASS","iconDiv","RESOURCE_TREE_ICON_CLASS","setMargin","add","onTreeIconClick","setResourceHeaderContent","setAttribute","textField","resourceHeaderTemplate","classCollection","RESOURCE_CELLS_CLASS","ntr","value","enableRtl","style","marginLeft","marginRight","parentCollection","wholeCollection","collection","y","dataSource","x","totalCount","byGroupID","query","where","groupIDField","idField","executeLocal","z","e","_this","eventTooltip","close","target","hide","trElement","parentElement","index","getAttribute","cancel","event","requestType","contains","actionBegin","actionArgs","eventElements","querySelectorAll","APPOINTMENT_CLASS","MORE_INDICATOR_CLASS","_i","eventElements_1","updateVirtualContent","updateContent","cssProperties","getCssProperties","module","notify","scrollUiUpdate","refreshEvents","actionComplete","rowCollection","workCellCollection","headerRowCollection","pNode","clickedRes","contentRows","CONTENT_WRAP_CLASS","eventRows","APPOINTMENT_CONTAINER_CLASS","j","clonedCollection","expanded","trElem","rowIndex","splice","expand","startIndex","existingDataCollection","sIndex","virtualTrack","VIRTUAL_TRACK_CLASS","updateVirtualTrackHeight","resTable","contentTable","eventTable","EVENT_TABLE_CLASS","timeIndicator","CURRENT_TIMELINE_CLASS","height","CONTENT_TABLE_CLASS","offsetHeight","renderResourceHeader","resourceWrapper","RESOURCE_TOOLBAR_CONTAINER","innerHTML","RESOURCE_HEADER_TOOLBAR","RESOURCE_MENU","RESOURCE_MENU_ICON","RESOURCE_LEVEL_TITLE","currentView","getPanel","insertBefore","WRAPPER_CONTAINER_CLASS","TABLE_CONTAINER_CLASS","renderResourceHeaderText","menuClick","renderResourceTree","popupOverlay","RESOURCE_TREE_POPUP_OVERLAY","treeWrapper","RESOURCE_TREE_POPUP","resourceTree","RESOURCE_TREE","treeViewObj","cssClass","enableHtmlSanitizer","fields","id","text","child","nodeTemplate","nodeClicked","resourceClick","bind","created","resourceTreeCreated","root","appendTo","expandAll","treePopup","targetType","actionOnScroll","content","relateTo","hideAnimation","duration","showAnimation","viewPortElement","on","documentClick","portals","concat","renderTemplates","isTimeLine","treeCollection","resTreeColl","_loop_1","len","treeHandler","treeLevel","levelId","treeArgs","resObj","resourceId","resourceName","groupOrder","resourceChild","_a","tree","this_1","resourceTreeLevel","headerCollection","_loop_2","resourceLevel","this_2","resourceText","filter","RESOURCE_NAME","sanitize","levelIcon","pop","headerWrapper","removeChildren","headerCollection_1","header","DISABLE_CLASS","POPUP_OPEN","ENABLE_CLASS","treeNodes","show","selectResourceByIndex","triggerEvents","node","preventDefault","renderModule","render","adaptiveGroupIndex","bindResourcesData","isSetModel","showSpinner","promises","dataModule","getData","generateQuery","Promise","all","then","dataManagerSuccess","catch","crudModule","dataManagerFailure","isDestroyed","length_1","resourceObj","getResourceModel","result","refreshLayout","field","title","allowMultiple","colorField","startHourField","endHourField","workDaysField","cssClassField","enablePersistence","renderElements","setResourceCollection","requiredResources","colorIndex","index_1","_b","requiredResources_1","eventSettings","resourceColorField","generateResourceLevels","innerDates","resTreeGroup","lastColumnDates","prevResource","prevResourceData","prevOrder","resTree","id_1","items","dateCol","renderDates","resWorkDays","byDate","workDays","resStartHour","resEndHour","getRenderDates","getDateSlots","dateSlots","generateCustomHours","resCssClass","slotData","resourceLevelIndex","colSpan","generateHeaderLevels","startHour","endHour","dateSlots_1","dateSlot","getStartEndTime","headerDates","headerLevels","currentLevelChilds","currentLevelChilds_1","currentLevelChild","nextLevelChilds","_c","nextLevelChilds_1","nextLevelChild","_d","_e","lastLevelResource","dateHeaderLevels","levels","datesColumn","hideNonWorkingDays","renderDates_1","dateIndex","_loop_3","headerDate","this_3","currentDateLevels","_loop_4","date","getDay","resTd_1","_loop_5","k","filterDates","currentLevel","filteredResource","existedResource","filteredTd","l","_f","headerDates_1","forEach","sort","a","b","getTime","unshift","dateColSpan","_g","_h","firstRowTd","_j","headerDates_2","resGroup","length_2","_k","_l","resTd","setResourceValues","eventObj","setValues","allowGroupEdit","activeCellsData","getResourceColor","colorFieldIndex","undefined","filterData","getCssClass","getResourceRenderDates","resourceDates","apply","map","time","dateObj","removeDuplicateDates","dateColl","getResourceData","groupEditIndex","groupEditIndex_1","level","length_3","fieldName","length_4","addResource","Array","_loop_6","addObj","json","insert","state_1","removeResource","_loop_7","removeObj","state_2","getIndexFromResourceId","parentField","resourceExpand","click","resourceScroll","isAdaptive","levelName","levelIndex","scrollElement","virtual","averageRowHeight","Math","round","scrollTop","virtualScrolling","bufferCount","WORK_CELLS_CLASS","offsetTop","offsetTarget","DATE_HEADER_WRAP_CLASS","HEADER_ROW_CLASS","offset","offsetLeft","scrollLeft","destroy","off","treeViewTemplates","propName","resetTemplates","resToolBarEle"],"sources":["C:/Users/Dell/OneDrive/Desktop/Programs/soc-portal/node_modules/@syncfusion/ej2-schedule/src/schedule/base/resource.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\nimport { extend, isNullOrUndefined, createElement, EventHandler, addClass, append, removeClass, remove, closest, classList } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Data } from '../actions/data';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar ResourceBase = /** @class */ (function () {\n    function ResourceBase(parent) {\n        this.resourceCollection = [];\n        this.leftPixel = 25;\n        this.resourceDateTree = [];\n        this.parent = parent;\n    }\n    ResourceBase.prototype.renderResourceHeaderIndent = function (tr) {\n        var resColTd = createElement('td', { className: cls.RESOURCE_LEFT_TD_CLASS });\n        var resColDiv = createElement('div', { className: cls.RESOURCE_TEXT_CLASS });\n        if (this.parent.activeViewOptions.headerIndentTemplate) {\n            var data = { className: [resColTd.className], type: 'emptyCells' };\n            this.parent.renderHeaderIndentTemplate(data, resColTd);\n        }\n        else {\n            resColTd.appendChild(resColDiv);\n        }\n        var args = { elementType: 'emptyCells', element: resColTd };\n        this.parent.trigger(events.renderCell, args);\n        tr.appendChild(resColTd);\n    };\n    ResourceBase.prototype.hideResourceRows = function (tBody) {\n        if (this.resourceCollection.length <= 1 || this.parent.virtualScrollModule) {\n            return;\n        }\n        var trCount = this.lastResourceLevel.length;\n        for (var i = 0; i < trCount; i++) {\n            var resData = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;\n            var res = this.lastResourceLevel[parseInt(i.toString(), 10)].resource;\n            if (resData.ClassName === cls.RESOURCE_PARENT_CLASS && !resData[res.expandedField] &&\n                !isNullOrUndefined(resData[res.expandedField])) {\n                var trCollection = [].slice.call(tBody.children);\n                var slicedCollection = trCollection.slice(i + 1, i + (parseInt(resData.Count, 10) + 1));\n                addClass(slicedCollection, cls.HIDDEN_CLASS);\n            }\n        }\n    };\n    ResourceBase.prototype.createResourceColumn = function () {\n        var resColl = this.resourceCollection;\n        var resDiv = createElement('div', { className: cls.RESOURCE_COLUMN_WRAP_CLASS });\n        var tbl = this.parent.activeView.createTableLayout(cls.RESOURCE_COLUMN_TABLE_CLASS);\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([tbl], cls.AUTO_HEIGHT);\n        }\n        var tBody = tbl.querySelector('tbody');\n        var resData = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n        if (this.parent.virtualScrollModule) {\n            var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n            this.setExpandedResources();\n            resData = this.expandedResources.slice(0, resourceCount);\n            this.renderedResources = resData;\n        }\n        append(this.getContentRows(resData), tBody);\n        this.hideResourceRows(tBody);\n        tbl.appendChild(tBody);\n        resDiv.appendChild(tbl);\n        return resDiv;\n    };\n    ResourceBase.prototype.setRenderedResources = function () {\n        var resColl = this.resourceCollection;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var temp = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n    };\n    ResourceBase.prototype.setExpandedResources = function () {\n        var resources = [];\n        for (var i = 0; i < this.lastResourceLevel.length; i++) {\n            var resource = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;\n            var count = resource.Count;\n            resources.push(this.lastResourceLevel[parseInt(i.toString(), 10)]);\n            var isExpanded = resource[this.lastResourceLevel[parseInt(i.toString(), 10)].resource.expandedField];\n            if (!isNullOrUndefined(isExpanded) && !isExpanded && count > 0) {\n                i = i + count;\n            }\n        }\n        this.expandedResources = resources;\n    };\n    ResourceBase.prototype.getContentRows = function (resData, isVirtualScroll) {\n        var resRows = [];\n        var left;\n        var rIndex;\n        var resColl = this.resourceCollection;\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { tabindex: isVirtualScroll ? '-1' : '0' } });\n        var existingGroupIndices = this.parent.activeView.getGroupIndices();\n        for (var i = 0; i < resData.length; i++) {\n            if (existingGroupIndices.length > 0 && existingGroupIndices.indexOf(resData[parseInt(i.toString(), 10)].groupIndex) > -1) {\n                continue;\n            }\n            var ntd = td.cloneNode();\n            rIndex = util.findIndexInData(resColl, 'name', resData[parseInt(i.toString(), 10)].resource.name);\n            if (rIndex === resColl.length - 1) {\n                extend(resData[parseInt(i.toString(), 10)].resourceData, { ClassName: cls.RESOURCE_CHILD_CLASS });\n                this.renderedResources[parseInt(i.toString(), 10)].className = [cls.RESOURCE_CHILD_CLASS];\n            }\n            else {\n                extend(resData[parseInt(i.toString(), 10)].resourceData, { ClassName: cls.RESOURCE_PARENT_CLASS });\n                this.renderedResources[parseInt(i.toString(), 10)].className = [cls.RESOURCE_PARENT_CLASS];\n            }\n            left = (rIndex * this.leftPixel) + 'px';\n            if (resData[parseInt(i.toString(), 10)].resourceData.ClassName === cls.RESOURCE_PARENT_CLASS\n                && !isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData.Count) && (resData[parseInt(i.toString(), 10)].resourceData.Count > 0)) {\n                var iconClass = void 0;\n                if (resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField] ||\n                    isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField])) {\n                    iconClass = cls.RESOURCE_COLLAPSE_CLASS;\n                }\n                else {\n                    iconClass = cls.RESOURCE_EXPAND_CLASS;\n                }\n                var iconDiv = createElement('div');\n                addClass([iconDiv], [cls.RESOURCE_TREE_ICON_CLASS, iconClass]);\n                this.setMargin(iconDiv, left);\n                ntd.appendChild(iconDiv);\n                if (this.resourceCollection.length > 1) {\n                    EventHandler.add(iconDiv, 'click', this.onTreeIconClick, this);\n                }\n            }\n            this.parent.activeView.setResourceHeaderContent(ntd, resData[parseInt(i.toString(), 10)], cls.RESOURCE_TEXT_CLASS);\n            ntd.setAttribute('data-group-index', resData[parseInt(i.toString(), 10)].groupIndex.toString());\n            ntd.setAttribute('aria-label', resData[parseInt(i.toString(), 10)].resourceData[resData[parseInt(i.toString(), 10)].resource.textField] + ' resource');\n            if (!this.parent.activeViewOptions.resourceHeaderTemplate) {\n                this.setMargin(ntd.querySelector('.' + cls.RESOURCE_TEXT_CLASS), left);\n            }\n            var classCollection = [cls.RESOURCE_CELLS_CLASS, resData[parseInt(i.toString(), 10)].resourceData.ClassName];\n            addClass([ntd], classCollection);\n            var args = { elementType: 'resourceHeader', element: ntd, groupIndex: resData[parseInt(i.toString(), 10)].groupIndex };\n            this.parent.trigger(events.renderCell, args);\n            var ntr = tr.cloneNode();\n            ntr.appendChild(ntd);\n            resRows.push(ntr);\n        }\n        return resRows;\n    };\n    ResourceBase.prototype.setMargin = function (element, value) {\n        if (!this.parent.enableRtl) {\n            element.style.marginLeft = value;\n        }\n        else {\n            element.style.marginRight = value;\n        }\n    };\n    ResourceBase.prototype.countCalculation = function (parentCollection, wholeCollection) {\n        var collection;\n        for (var y = 0; y < parentCollection.length; y++) {\n            var data = parentCollection[parentCollection.length - (y + 1)].dataSource;\n            for (var x = 0; x < data.length; x++) {\n                var totalCount = 0;\n                if (this.parent.activeViewOptions.group.byGroupID) {\n                    var query = new Query().where(wholeCollection[wholeCollection.length - 1].groupIDField, 'equal', data[parseInt(x.toString(), 10)][parentCollection[parentCollection.length - (y + 1)].idField]);\n                    collection = new DataManager(wholeCollection[wholeCollection.length - 1].dataSource).executeLocal(query);\n                }\n                else {\n                    collection = wholeCollection[wholeCollection.length - 1].dataSource;\n                }\n                for (var z = 0; z < collection.length; z++) {\n                    totalCount = totalCount + parseInt(collection[parseInt(z.toString(), 10)].Count, 10);\n                }\n                totalCount = totalCount + parseInt(data[parseInt(x.toString(), 10)].Count, 10);\n                extend(data[parseInt(x.toString(), 10)], { Count: totalCount });\n            }\n            wholeCollection = wholeCollection.slice(0, -1);\n        }\n    };\n    ResourceBase.prototype.onTreeIconClick = function (e) {\n        var _this = this;\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        var target = e.target;\n        var hide;\n        var trElement = closest(target, '.' + cls.RESOURCE_PARENT_CLASS)\n            .parentElement;\n        var index = parseInt(trElement.children[0].getAttribute('data-group-index'), 10);\n        var args = {\n            cancel: false, event: e, groupIndex: index,\n            requestType: !target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpand' : 'resourceCollapse'\n        };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                if (target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS)) {\n                    classList(target, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n                    hide = true;\n                }\n                else {\n                    classList(target, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n                    hide = false;\n                }\n                var eventElements = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS + ',.' + cls.MORE_INDICATOR_CLASS));\n                for (var _i = 0, eventElements_1 = eventElements; _i < eventElements_1.length; _i++) {\n                    var element = eventElements_1[_i];\n                    remove(element);\n                }\n                if (_this.parent.virtualScrollModule) {\n                    _this.updateVirtualContent(index, hide, e, target);\n                }\n                else {\n                    _this.updateContent(index, hide);\n                }\n                var data = { cssProperties: _this.parent.getCssProperties(), module: 'scroll' };\n                _this.parent.notify(events.scrollUiUpdate, data);\n                args = {\n                    cancel: false, event: e, groupIndex: index,\n                    requestType: target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpanded' : 'resourceCollapsed'\n                };\n                _this.parent.refreshEvents(false);\n                _this.parent.trigger(events.actionComplete, args);\n            }\n        });\n    };\n    ResourceBase.prototype.updateContent = function (index, hide) {\n        var rowCollection = [];\n        var workCellCollection = [];\n        var headerRowCollection = [];\n        var pNode;\n        var clickedRes = this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData;\n        var resRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'tr'));\n        var contentRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'tbody tr'));\n        var eventRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' .' + cls.APPOINTMENT_CONTAINER_CLASS));\n        for (var j = 0; j < clickedRes.Count; j++) {\n            rowCollection.push(resRows[index + j + 1]);\n            workCellCollection.push(contentRows[index + j + 1]);\n            headerRowCollection.push(eventRows[index + j + 1]);\n        }\n        var clonedCollection = this.lastResourceLevel;\n        for (var i = 0; i < rowCollection.length; i++) {\n            var expanded = true;\n            pNode = rowCollection[parseInt(i.toString(), 10)].children[0].classList.contains(cls.RESOURCE_PARENT_CLASS);\n            clonedCollection[parseInt(index.toString(), 10)].resourceData[clonedCollection[parseInt(index.toString(), 10)].resource.expandedField] = !hide;\n            if (hide) {\n                if (pNode) {\n                    var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n                    if (trElem) {\n                        classList(trElem, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n                    }\n                }\n                if (!rowCollection[parseInt(i.toString(), 10)].classList.contains(cls.HIDDEN_CLASS)) {\n                    addClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], cls.HIDDEN_CLASS);\n                }\n            }\n            else {\n                if (pNode) {\n                    var rowIndex = rowCollection[parseInt(i.toString(), 10)].rowIndex;\n                    if (!clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField]\n                        && !isNullOrUndefined(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField])) {\n                        rowCollection.splice(i + 1, (parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10)));\n                        workCellCollection.splice(i + 1, (parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10)));\n                        headerRowCollection.splice(i + 1, (parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10)));\n                        expanded = false;\n                    }\n                    if (expanded) {\n                        var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n                        if (trElem) {\n                            classList(trElem, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n                        }\n                    }\n                }\n                if (rowCollection[parseInt(i.toString(), 10)].classList.contains(cls.HIDDEN_CLASS)) {\n                    removeClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], cls.HIDDEN_CLASS);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ResourceBase.prototype.updateVirtualContent = function (index, expand, e, target) {\n        this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData[this.lastResourceLevel[parseInt(index.toString(), 10)].resource.expandedField] = !expand;\n        this.setExpandedResources();\n        var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n        var startIndex = this.expandedResources.indexOf(this.renderedResources[0]);\n        this.parent.virtualScrollModule.existingDataCollection = this.renderedResources;\n        this.renderedResources = this.expandedResources.slice(startIndex, startIndex + resourceCount);\n        if (this.renderedResources.length < resourceCount) {\n            var sIndex = this.expandedResources.length - resourceCount;\n            sIndex = (sIndex > 0) ? sIndex : 0;\n            this.renderedResources = this.expandedResources.slice(sIndex, this.expandedResources.length);\n        }\n        var virtualTrack = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        this.parent.virtualScrollModule.updateVirtualTrackHeight(virtualTrack);\n        var resTable = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'table');\n        var contentTable = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'table');\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.parent.virtualScrollModule.updateContent(resTable, contentTable, eventTable, this.renderedResources);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        if (!isNullOrUndefined(timeIndicator)) {\n            timeIndicator.style.height =\n                this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight + 'px';\n        }\n    };\n    ResourceBase.prototype.renderResourceHeader = function () {\n        var resourceWrapper = createElement('div', { className: cls.RESOURCE_TOOLBAR_CONTAINER });\n        resourceWrapper.innerHTML = '<div class=\"' + cls.RESOURCE_HEADER_TOOLBAR + '\"><div class=\"' + cls.RESOURCE_MENU + '\">' +\n            '<div class=\"e-icons ' + cls.RESOURCE_MENU_ICON + '\"></div></div><div class=\"' + cls.RESOURCE_LEVEL_TITLE + '\"></div></div>';\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            target.insertBefore(resourceWrapper, target.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.insertBefore(resourceWrapper, this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n        }\n        this.renderResourceHeaderText();\n        EventHandler.add(resourceWrapper.querySelector('.' + cls.RESOURCE_MENU_ICON), 'click', this.menuClick, this);\n    };\n    ResourceBase.prototype.renderResourceTree = function () {\n        this.popupOverlay = createElement('div', { className: cls.RESOURCE_TREE_POPUP_OVERLAY });\n        var treeWrapper = createElement('div', { className: cls.RESOURCE_TREE_POPUP + ' e-popup-close' });\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n            target.insertBefore(treeWrapper, target.children[0]);\n            target.appendChild(this.popupOverlay);\n        }\n        else {\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(treeWrapper);\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.popupOverlay);\n        }\n        var resourceTree = createElement('div', { className: cls.RESOURCE_TREE });\n        treeWrapper.appendChild(resourceTree);\n        this.treeViewObj = new TreeView({\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            fields: {\n                dataSource: [].slice.call(this.generateTreeData()),\n                id: 'resourceId',\n                text: 'resourceName',\n                child: 'resourceChild'\n            },\n            nodeTemplate: this.parent.resourceHeaderTemplate,\n            nodeClicked: this.resourceClick.bind(this),\n            created: this.resourceTreeCreated.bind(this)\n        });\n        this.treeViewObj.root = this.parent.root ? this.parent.root : this.parent;\n        this.treeViewObj.appendTo(resourceTree);\n        this.treeViewObj.expandAll();\n        this.treePopup = new Popup(treeWrapper, {\n            targetType: 'relative',\n            actionOnScroll: 'none',\n            content: this.treeViewObj.element,\n            relateTo: this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS),\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'SlideLeftOut', duration: 500 },\n            showAnimation: { name: 'SlideLeftIn', duration: 500 },\n            viewPortElement: this.parent.element.querySelector('.' + (this.parent.currentView === 'MonthAgenda' ?\n                cls.WRAPPER_CONTAINER_CLASS : cls.TABLE_CONTAINER_CLASS))\n        });\n        this.parent.on(events.documentClick, this.documentClick, this);\n    };\n    ResourceBase.prototype.resourceTreeCreated = function () {\n        if (this.parent.activeViewOptions.resourceHeaderTemplate && this.parent.portals && this.treeViewObj.portals) {\n            this.parent.portals = this.parent.portals.concat(this.treeViewObj.portals);\n            this.parent.renderTemplates();\n        }\n    };\n    ResourceBase.prototype.generateTreeData = function (isTimeLine) {\n        var _this = this;\n        var treeCollection = [];\n        var resTreeColl = [];\n        var groupIndex = 0;\n        var _loop_1 = function (i, len) {\n            var treeHandler = function (treeLevel, index, levelId) {\n                var resource = _this.resourceCollection[parseInt(index.toString(), 10)];\n                var treeArgs;\n                var resObj;\n                if (!isTimeLine) {\n                    treeArgs = {\n                        resourceId: levelId,\n                        resourceName: treeLevel.resourceData[resource.textField],\n                        resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData\n                    };\n                }\n                else {\n                    resObj = {\n                        type: 'resourceHeader', resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData, groupIndex: groupIndex,\n                        groupOrder: treeLevel.groupOrder\n                    };\n                    resTreeColl.push(resObj);\n                    groupIndex++;\n                }\n                if (treeLevel.child.length > 0 && !isTimeLine) {\n                    treeArgs.resourceChild = [];\n                }\n                var count = 1;\n                for (var _i = 0, _a = treeLevel.child; _i < _a.length; _i++) {\n                    var tree = _a[_i];\n                    if (!isTimeLine) {\n                        treeArgs.resourceChild.push(treeHandler(tree, index + 1, levelId + '-' + count));\n                    }\n                    else {\n                        treeHandler(tree, index + 1, levelId + '-' + count);\n                    }\n                    count += 1;\n                }\n                if (isTimeLine) {\n                    extend(resObj.resourceData, { Count: count - 1 });\n                }\n                return treeArgs;\n            };\n            if (!isTimeLine) {\n                treeCollection.push(treeHandler(this_1.resourceTreeLevel[parseInt(i.toString(), 10)], 0, (i + 1).toString()));\n            }\n            else {\n                treeHandler(this_1.resourceTreeLevel[parseInt(i.toString(), 10)], 0, (i + 1).toString());\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = this.resourceTreeLevel.length; i < len; i++) {\n            _loop_1(i, len);\n        }\n        if (isTimeLine) {\n            this.lastResourceLevel = resTreeColl;\n            return resTreeColl;\n        }\n        else {\n            return treeCollection;\n        }\n    };\n    ResourceBase.prototype.renderResourceHeaderText = function () {\n        var resource = this.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var headerCollection = [];\n        var _loop_2 = function (i, len) {\n            var resourceLevel = this_2.resourceCollection[parseInt(i.toString(), 10)];\n            var resourceText = resourceLevel.dataSource.filter(function (resData) {\n                return resData[resourceLevel.idField] === resource.groupOrder[parseInt(i.toString(), 10)];\n            });\n            var resourceName = createElement('div', { className: cls.RESOURCE_NAME });\n            this_2.parent.sanitize(resourceText[0][resourceLevel.textField], resourceName);\n            headerCollection.push(resourceName);\n            var levelIcon = createElement('div', { className: 'e-icons e-icon-next' });\n            headerCollection.push(levelIcon);\n        };\n        var this_2 = this;\n        for (var i = 0, len = resource.groupOrder.length; i < len; i++) {\n            _loop_2(i, len);\n        }\n        headerCollection.pop();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        var headerWrapper = target.querySelector('.' + cls.RESOURCE_LEVEL_TITLE);\n        util.removeChildren(headerWrapper);\n        for (var _i = 0, headerCollection_1 = headerCollection; _i < headerCollection_1.length; _i++) {\n            var header = headerCollection_1[_i];\n            headerWrapper.appendChild(header);\n        }\n        if (this.lastResourceLevel.length === 1) {\n            addClass([this.parent.element.querySelector('.' + cls.RESOURCE_MENU)], cls.DISABLE_CLASS);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ResourceBase.prototype.menuClick = function (event) {\n        if (this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP).classList.contains(cls.POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n        else {\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            removeClass(treeNodes, 'e-active');\n            addClass([treeNodes[this.parent.uiStateValues.groupIndex]], 'e-active');\n            this.treePopup.show();\n            addClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.selectResourceByIndex = function (groupIndex) {\n        if (this.lastResourceLevel && groupIndex > -1 && groupIndex < this.lastResourceLevel.length) {\n            this.triggerEvents(groupIndex);\n        }\n    };\n    ResourceBase.prototype.resourceClick = function (event) {\n        if (!event.node.classList.contains('e-has-child')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            var groupIndex = treeNodes.indexOf(event.node);\n            this.triggerEvents(groupIndex, event);\n            event.event.preventDefault();\n        }\n    };\n    ResourceBase.prototype.triggerEvents = function (groupIndex, event) {\n        var _this = this;\n        var args = { cancel: false, event: (event) ? event.event : null, groupIndex: groupIndex, requestType: 'resourceChange' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                _this.parent.uiStateValues.groupIndex = actionArgs.groupIndex;\n                _this.parent.renderModule.render(_this.parent.currentView);\n                args = {\n                    cancel: false, event: (event) ? event.event : null, groupIndex: _this.parent.uiStateValues.groupIndex, requestType: 'resourceChanged'\n                };\n                _this.parent.adaptiveGroupIndex = _this.parent.uiStateValues.groupIndex;\n                _this.parent.trigger(events.actionComplete, args);\n            }\n        });\n    };\n    ResourceBase.prototype.documentClick = function (args) {\n        if (closest(args.event.target, '.' + cls.RESOURCE_TREE_POPUP)) {\n            return;\n        }\n        var treeWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP);\n        if (treeWrapper && treeWrapper.classList.contains(cls.POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.bindResourcesData = function (isSetModel) {\n        var _this = this;\n        this.parent.showSpinner();\n        var promises = [];\n        for (var _i = 0, _a = this.parent.resources; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var dataModule = new Data(this.parent, resource.dataSource, resource.query);\n            promises.push(dataModule.getData(dataModule.generateQuery()));\n        }\n        Promise.all(promises).then(function (e) { return _this.dataManagerSuccess(e, isSetModel); })\n            .catch(function (e) { return _this.parent.crudModule.dataManagerFailure(e); });\n    };\n    ResourceBase.prototype.dataManagerSuccess = function (e, isSetModel) {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.resourceCollection = [];\n        for (var i = 0, length_1 = e.length; i < length_1; i++) {\n            var resource = this.parent.resources[parseInt(i.toString(), 10)];\n            var resourceObj = this.getResourceModel(resource, e[parseInt(i.toString(), 10)].result);\n            this.parent.resourceCollection.push(resourceObj);\n        }\n        this.refreshLayout(isSetModel);\n    };\n    ResourceBase.prototype.getResourceModel = function (resource, resourceData) {\n        var resourceObj = {\n            field: resource.field,\n            title: resource.title,\n            name: resource.name,\n            allowMultiple: resource.allowMultiple,\n            dataSource: resourceData || resource.dataSource,\n            idField: resource.idField,\n            textField: resource.textField,\n            groupIDField: resource.groupIDField,\n            colorField: resource.colorField,\n            startHourField: resource.startHourField,\n            endHourField: resource.endHourField,\n            workDaysField: resource.workDaysField,\n            expandedField: resource.expandedField,\n            cssClassField: resource.cssClassField\n        };\n        return resourceObj;\n    };\n    ResourceBase.prototype.refreshLayout = function (isSetModel) {\n        if (isNullOrUndefined(this.parent.uiStateValues.groupIndex) || !(this.parent.enablePersistence)) {\n            this.parent.uiStateValues.groupIndex = 0;\n        }\n        this.parent.renderElements(isSetModel);\n    };\n    ResourceBase.prototype.setResourceCollection = function () {\n        var requiredResources = [];\n        this.resourceCollection = [];\n        this.colorIndex = null;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (var _i = 0, _a = this.parent.activeViewOptions.group.resources; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                var index_1 = util.findIndexInData(this.parent.resourceCollection, 'name', resource);\n                if (index_1 >= 0) {\n                    requiredResources.push(this.parent.resourceCollection[parseInt(index_1.toString(), 10)]);\n                }\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            requiredResources = this.parent.resourceCollection;\n        }\n        var index = 0;\n        for (var _b = 0, requiredResources_1 = requiredResources; _b < requiredResources_1.length; _b++) {\n            var resource = requiredResources_1[_b];\n            var resources = this.getResourceModel(resource);\n            if (resource.name === this.parent.eventSettings.resourceColorField) {\n                this.colorIndex = index;\n            }\n            index++;\n            this.resourceCollection.push(resources);\n        }\n        if (isNullOrUndefined(this.colorIndex)) {\n            this.colorIndex = this.resourceCollection.length - 1;\n        }\n    };\n    ResourceBase.prototype.generateResourceLevels = function (innerDates, isTimeLine) {\n        var _this = this;\n        var resources = this.resourceCollection;\n        var resTreeGroup = [];\n        var lastColumnDates = [];\n        var group = function (resources, index, prevResource, prevResourceData, prevOrder) {\n            var resTree = [];\n            var resource = resources[0];\n            if (resource) {\n                var data = void 0;\n                if (prevResourceData && _this.parent.activeViewOptions.group.byGroupID) {\n                    var id_1 = prevResourceData[prevResource.idField];\n                    data = resource.dataSource.filter(function (e) {\n                        return e[resource.groupIDField] === id_1;\n                    });\n                }\n                else {\n                    data = resource.dataSource;\n                }\n                for (var i = 0; i < data.length; i++) {\n                    var groupOrder = [];\n                    if (prevOrder && prevOrder.length > 0) {\n                        groupOrder = groupOrder.concat(prevOrder);\n                    }\n                    groupOrder.push(data[parseInt(i.toString(), 10)][resource.idField]);\n                    var items = group(resources.slice(1), index + 1, resource, data[parseInt(i.toString(), 10)], groupOrder);\n                    // Here validate child item empty top level resource only\n                    if (index === 0 && items.length === 0 && _this.resourceCollection.length > 1) {\n                        continue;\n                    }\n                    var dateCol = [];\n                    var renderDates = _this.parent.activeView.renderDates;\n                    var resWorkDays = void 0;\n                    if (!_this.parent.activeViewOptions.group.byDate && index + 1 === _this.resourceCollection.length) {\n                        var workDays = data[parseInt(i.toString(), 10)][resource.workDaysField];\n                        var resStartHour = data[parseInt(i.toString(), 10)][resource.startHourField];\n                        var resEndHour = data[parseInt(i.toString(), 10)][resource.endHourField];\n                        if (workDays && workDays.length > 0) {\n                            renderDates = _this.parent.activeView.getRenderDates(workDays);\n                            resWorkDays = workDays;\n                            dateCol = _this.parent.activeView.getDateSlots(renderDates, workDays);\n                        }\n                        else {\n                            resWorkDays = _this.parent.activeViewOptions.workDays;\n                            dateCol = innerDates;\n                        }\n                        var dateSlots = _this.generateCustomHours(dateCol, resStartHour, resEndHour, groupOrder);\n                        lastColumnDates = lastColumnDates.concat(dateSlots);\n                    }\n                    var resCssClass = data[parseInt(i.toString(), 10)][resource.cssClassField];\n                    var slotData = {\n                        type: 'resourceHeader', className: ['e-resource-cells'],\n                        resourceLevelIndex: index, groupOrder: groupOrder,\n                        resource: resource, resourceData: data[parseInt(i.toString(), 10)],\n                        colSpan: _this.parent.activeViewOptions.group.byDate ? 1 : dateCol.length,\n                        renderDates: renderDates, workDays: resWorkDays, cssClass: resCssClass,\n                        child: items\n                    };\n                    resTree.push(slotData);\n                }\n                if (!resTreeGroup[parseInt(index.toString(), 10)]) {\n                    resTreeGroup[parseInt(index.toString(), 10)] = [];\n                }\n                if (resTree.length > 0) {\n                    resTreeGroup[parseInt(index.toString(), 10)].push(resTree);\n                }\n                return resTree;\n            }\n            return [];\n        };\n        this.resourceTreeLevel = group(resources, 0);\n        return (isTimeLine) ? [] : this.generateHeaderLevels(resTreeGroup, lastColumnDates, innerDates);\n    };\n    ResourceBase.prototype.generateCustomHours = function (renderDates, startHour, endHour, groupOrder) {\n        var dateSlots = extend([], renderDates, null, true);\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var dateSlot = dateSlots_1[_i];\n            if (startHour) {\n                dateSlot.startHour = this.parent.getStartEndTime(startHour);\n            }\n            if (endHour) {\n                dateSlot.endHour = this.parent.getStartEndTime(endHour);\n            }\n            if (groupOrder) {\n                dateSlot.groupOrder = groupOrder;\n            }\n        }\n        return dateSlots;\n    };\n    ResourceBase.prototype.generateHeaderLevels = function (resTreeGroup, lastColumnDates, headerDates) {\n        var headerLevels = [];\n        for (var i = resTreeGroup.length - 1; i >= 0; i--) {\n            var temp = 0;\n            for (var _i = 0, _a = resTreeGroup[parseInt(i.toString(), 10)]; _i < _a.length; _i++) {\n                var currentLevelChilds = _a[_i];\n                for (var _b = 0, currentLevelChilds_1 = currentLevelChilds; _b < currentLevelChilds_1.length; _b++) {\n                    var currentLevelChild = currentLevelChilds_1[_b];\n                    if (resTreeGroup[i + 1] && resTreeGroup[i + 1].length > 0) {\n                        var nextLevelChilds = resTreeGroup[parseInt((i + 1).toString(), 10)][parseInt(temp.toString(), 10)];\n                        if (!nextLevelChilds) {\n                            continue;\n                        }\n                        var colSpan = 0;\n                        for (var _c = 0, nextLevelChilds_1 = nextLevelChilds; _c < nextLevelChilds_1.length; _c++) {\n                            var nextLevelChild = nextLevelChilds_1[_c];\n                            if (!this.parent.activeViewOptions.group.byGroupID || (this.parent.activeViewOptions.group.byGroupID &&\n                                nextLevelChild.resourceData[nextLevelChild.resource.groupIDField] ===\n                                    currentLevelChild.resourceData[currentLevelChild.resource.idField])) {\n                                colSpan += nextLevelChild.colSpan;\n                            }\n                        }\n                        currentLevelChild.colSpan = colSpan;\n                    }\n                    currentLevelChild.groupIndex = temp;\n                    temp++;\n                    headerLevels[currentLevelChild.resourceLevelIndex] = headerLevels[currentLevelChild.resourceLevelIndex] || [];\n                    headerLevels[currentLevelChild.resourceLevelIndex].push(currentLevelChild);\n                }\n            }\n        }\n        this.lastResourceLevel = headerLevels.slice(-1)[0] || [];\n        if (!this.parent.activeViewOptions.group.byDate) {\n            var index = 0;\n            for (var _d = 0, _e = this.lastResourceLevel; _d < _e.length; _d++) {\n                var lastLevelResource = _e[_d];\n                for (var i = 0; i < lastLevelResource.colSpan; i++) {\n                    lastColumnDates[parseInt(index.toString(), 10)].groupIndex = lastLevelResource.groupIndex;\n                    index++;\n                }\n            }\n            headerLevels.push(lastColumnDates);\n            return headerLevels;\n        }\n        var dateHeaderLevels = [];\n        var levels = extend([], headerLevels, null, true);\n        var datesColumn = [];\n        if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n            var renderDates_1 = [];\n            var dateIndex = 0;\n            var _loop_3 = function (headerDate) {\n                this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)] = [];\n                var currentDateLevels = [];\n                var _loop_4 = function (j) {\n                    var workDays = this_3.lastResourceLevel[parseInt(j.toString(), 10)].resourceData[this_3.lastResourceLevel[parseInt(j.toString(), 10)].resource.workDaysField];\n                    if (!workDays) {\n                        workDays = this_3.parent.activeViewOptions.workDays;\n                    }\n                    if (workDays.indexOf(headerDate.date.getDay()) !== -1) {\n                        var resTd_1 = extend({}, this_3.lastResourceLevel[parseInt(j.toString(), 10)], null, true);\n                        resTd_1.date = headerDate.date;\n                        this_3.lastResourceLevel[parseInt(j.toString(), 10)].workDays = workDays;\n                        resTd_1.startHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.startHourField]) ||\n                            headerDate.startHour;\n                        resTd_1.endHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.endHourField]) ||\n                            headerDate.endHour;\n                        this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)].push(resTd_1);\n                        var _loop_5 = function (k) {\n                            if (!currentDateLevels[parseInt(k.toString(), 10)]) {\n                                currentDateLevels[parseInt(k.toString(), 10)] = [];\n                            }\n                            if (k === resTd_1.groupOrder.length - 1) {\n                                if (!renderDates_1[parseInt(j.toString(), 10)]) {\n                                    renderDates_1[parseInt(j.toString(), 10)] = [];\n                                }\n                                var filterDates = resTd_1.renderDates.filter(function (x) { return x.getDay() === headerDate.date.getDay(); });\n                                renderDates_1[parseInt(j.toString(), 10)] = renderDates_1[parseInt(j.toString(), 10)].concat(filterDates);\n                                currentDateLevels[parseInt(k.toString(), 10)].push(resTd_1);\n                                return \"continue\";\n                            }\n                            var currentLevel = levels[parseInt(k.toString(), 10)];\n                            var filteredResource = currentLevel.filter(function (data) {\n                                return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k.toString(), 10)];\n                            });\n                            if (filteredResource && filteredResource.length > 0) {\n                                var existedResource = currentDateLevels[parseInt(k.toString(), 10)].filter(function (data) {\n                                    return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k.toString(), 10)];\n                                });\n                                if (existedResource && existedResource.length > 0) {\n                                    existedResource[0].colSpan += 1;\n                                }\n                                else {\n                                    var filteredTd = extend({}, filteredResource[0], null, true);\n                                    filteredTd.colSpan = 1;\n                                    currentDateLevels[parseInt(k.toString(), 10)].push(filteredTd);\n                                }\n                            }\n                        };\n                        for (var k = 0; k < resTd_1.groupOrder.length; k++) {\n                            _loop_5(k);\n                        }\n                    }\n                };\n                for (var j = 0; j < this_3.lastResourceLevel.length; j++) {\n                    _loop_4(j);\n                }\n                if (currentDateLevels.length > 0) {\n                    for (var l = 0; l < levels.length; l++) {\n                        if (!dateHeaderLevels[parseInt(l.toString(), 10)]) {\n                            dateHeaderLevels[parseInt(l.toString(), 10)] = [];\n                        }\n                        dateHeaderLevels[parseInt(l.toString(), 10)] = dateHeaderLevels[parseInt(l.toString(), 10)].concat(currentDateLevels[parseInt(l.toString(), 10)]);\n                    }\n                    headerDate.colSpan = currentDateLevels[currentDateLevels.length - 1].length;\n                    datesColumn.push(headerDate);\n                }\n                dateIndex++;\n            };\n            var this_3 = this;\n            for (var _f = 0, headerDates_1 = headerDates; _f < headerDates_1.length; _f++) {\n                var headerDate = headerDates_1[_f];\n                _loop_3(headerDate);\n            }\n            this.resourceDateTree = this.resourceDateTree.filter(function (data) { return data.length > 0; });\n            this.lastResourceLevel.forEach(function (x, index) {\n                if (renderDates_1[parseInt(index.toString(), 10)]) {\n                    x.renderDates = renderDates_1[parseInt(index.toString(), 10)].sort(function (a, b) { return a.getTime() - b.getTime(); });\n                }\n            });\n            dateHeaderLevels.unshift(datesColumn);\n            return dateHeaderLevels;\n        }\n        var dateColSpan = 0;\n        for (var _g = 0, _h = levels[0]; _g < _h.length; _g++) {\n            var firstRowTd = _h[_g];\n            dateColSpan += firstRowTd.colSpan;\n        }\n        for (var _j = 0, headerDates_2 = headerDates; _j < headerDates_2.length; _j++) {\n            var headerDate = headerDates_2[_j];\n            headerDate.colSpan = dateColSpan;\n            datesColumn.push(headerDate);\n            var resGroup = extend([], levels, null, true);\n            for (var k = 0, length_2 = resGroup.length; k < length_2; k++) {\n                if (k === resGroup.length - 1) {\n                    for (var _k = 0, _l = resGroup[parseInt(k.toString(), 10)]; _k < _l.length; _k++) {\n                        var resTd = _l[_k];\n                        resTd.date = headerDate.date;\n                        resTd.workDays = headerDate.workDays;\n                        resTd.startHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.startHourField]) ||\n                            headerDate.startHour;\n                        resTd.endHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.endHourField]) ||\n                            headerDate.endHour;\n                    }\n                }\n                if (!dateHeaderLevels[parseInt(k.toString(), 10)]) {\n                    dateHeaderLevels[parseInt(k.toString(), 10)] = [];\n                }\n                dateHeaderLevels[parseInt(k.toString(), 10)] = dateHeaderLevels[parseInt(k.toString(), 10)].concat(resGroup[parseInt(k.toString(), 10)]);\n            }\n        }\n        dateHeaderLevels.unshift(datesColumn);\n        return dateHeaderLevels;\n    };\n    ResourceBase.prototype.setResourceValues = function (eventObj, groupIndex) {\n        var _this = this;\n        var setValues = function (index, field, value) {\n            if (_this.resourceCollection[parseInt(index.toString(), 10)].allowMultiple && _this.parent.activeViewOptions.group.allowGroupEdit) {\n                eventObj[\"\" + field] = [value];\n            }\n            else {\n                eventObj[\"\" + field] = value;\n            }\n        };\n        if (groupIndex === void 0) {\n            groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                this.parent.activeCellsData.groupIndex;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(groupIndex)) {\n            var groupOrder = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, groupOrder[parseInt(index.toString(), 10)]);\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                var data = this.resourceCollection[parseInt(index.toString(), 10)].dataSource[0];\n                if (data) {\n                    setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, data[this.resourceCollection[parseInt(index.toString(), 10)].idField]);\n                }\n            }\n        }\n    };\n    ResourceBase.prototype.getResourceColor = function (eventObj, groupOrder) {\n        var colorFieldIndex = (!isNullOrUndefined(groupOrder) &&\n            this.colorIndex > groupOrder.length - 1) ? groupOrder.length - 1 : this.colorIndex;\n        var resource = this.resourceCollection[parseInt(colorFieldIndex.toString(), 10)];\n        if (isNullOrUndefined(groupOrder) && this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var id = isNullOrUndefined(groupOrder) ? eventObj[resource.field] : groupOrder[parseInt(colorFieldIndex.toString(), 10)];\n        var data = this.filterData(resource.dataSource, resource.idField, id);\n        if (data.length > 0) {\n            return data[0][resource.colorField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.getCssClass = function (eventObj) {\n        var resource = this.resourceCollection.slice(-1)[0];\n        if (this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var data = this.filterData(resource.dataSource, resource.idField, eventObj[resource.field]);\n        if (data.length > 0) {\n            return data[0][resource.cssClassField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.getResourceRenderDates = function () {\n        // eslint-disable-next-line prefer-spread\n        var resourceDates = [].concat.apply([], this.lastResourceLevel.map(function (e) { return e.renderDates; }));\n        var time = resourceDates.map(function (dateObj) { return dateObj.getTime(); });\n        var removeDuplicateDates = function (dateColl) { return dateColl.filter(function (date, index) {\n            return time.indexOf(date.getTime()) === index;\n        }); };\n        var renderDates = removeDuplicateDates(resourceDates);\n        renderDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        return renderDates;\n    };\n    ResourceBase.prototype.filterData = function (dataSource, field, value) {\n        return dataSource.filter(function (data) { return data[\"\" + field] === value; });\n    };\n    ResourceBase.prototype.getResourceData = function (eventObj, index, groupEditIndex) {\n        if (this.parent.activeViewOptions.group.allowGroupEdit) {\n            var resourceObj = {};\n            for (var _i = 0, groupEditIndex_1 = groupEditIndex; _i < groupEditIndex_1.length; _i++) {\n                var groupIndex = groupEditIndex_1[_i];\n                var resourceLevel = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;\n                for (var level = 0, length_3 = resourceLevel.length; level < length_3; level++) {\n                    var fieldName = this.resourceCollection[parseInt(level.toString(), 10)].field;\n                    if (isNullOrUndefined(resourceObj[\"\" + fieldName])) {\n                        resourceObj[\"\" + fieldName] = [];\n                    }\n                    resourceObj[\"\" + fieldName].push(resourceLevel[parseInt(level.toString(), 10)]);\n                }\n            }\n            eventObj = extend(eventObj, resourceObj);\n        }\n        else {\n            for (var level = 0, length_4 = this.resourceCollection.length; level < length_4; level++) {\n                if (this.lastResourceLevel[parseInt(index.toString(), 10)]) {\n                    eventObj[this.resourceCollection[parseInt(level.toString(), 10)].field] = this.lastResourceLevel[parseInt(index.toString(), 10)].groupOrder[parseInt(level.toString(), 10)];\n                }\n            }\n        }\n    };\n    ResourceBase.prototype.addResource = function (resources, name, index) {\n        var resourceCollection = (resources instanceof Array) ? resources : [resources];\n        var _loop_6 = function (resource) {\n            if (resource.name === name) {\n                resourceCollection.forEach(function (addObj, i) {\n                    return new DataManager({ json: resource.dataSource }).insert(addObj, null, null, index + i);\n                });\n                return \"break\";\n            }\n        };\n        for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var state_1 = _loop_6(resource);\n            if (state_1 === \"break\")\n                break;\n        }\n        this.refreshLayout(true);\n    };\n    ResourceBase.prototype.removeResource = function (resourceId, name) {\n        var resourceCollection = (resourceId instanceof Array) ? resourceId : [resourceId];\n        var _loop_7 = function (resource) {\n            if (resource.name === name) {\n                resourceCollection.forEach(function (removeObj) {\n                    return new DataManager({ json: resource.dataSource }).remove(resource.idField, removeObj);\n                });\n                return \"break\";\n            }\n        };\n        for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var state_2 = _loop_7(resource);\n            if (state_2 === \"break\")\n                break;\n        }\n        this.refreshLayout(true);\n    };\n    ResourceBase.prototype.getIndexFromResourceId = function (id, name, resourceData, event, parentField) {\n        name = name || this.parent.resourceCollection.slice(-1)[0].name;\n        if (isNullOrUndefined(resourceData)) {\n            resourceData = this.resourceCollection.filter(function (e) { return e.name === name; })[0];\n            if (isNullOrUndefined(resourceData)) {\n                return null;\n            }\n        }\n        var resource = resourceData.dataSource.filter(function (e) {\n            if (event && e[resourceData.idField] === id) {\n                if (e[resourceData.groupIDField] === event[\"\" + parentField]) {\n                    return e[resourceData.idField] === id;\n                }\n                return null;\n            }\n            else {\n                return e[resourceData.idField] === id;\n            }\n        })[0];\n        return (this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resource));\n    };\n    ResourceBase.prototype.resourceExpand = function (id, name, hide) {\n        var resource = this.parent.resourceCollection.filter(function (e) {\n            if (e.name === name) {\n                return e;\n            }\n            return null;\n        })[0];\n        var index = 0;\n        var resourceData = resource.dataSource.filter(function (e) { return e[resource.idField] === id; })[0];\n        if (!this.parent.activeViewOptions.group.byGroupID) {\n            index = this.getIndexFromResourceId(id, name, resource);\n        }\n        else {\n            index = this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resourceData);\n        }\n        var target = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + (\"[data-group-index=\\\"\" + index + \"\\\"]\") +\n            ' ' + '.' + cls.RESOURCE_TREE_ICON_CLASS);\n        if (target) {\n            if (target.classList.contains(cls.RESOURCE_EXPAND_CLASS) && !hide) {\n                target.click();\n            }\n            else if (target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) && hide) {\n                target.click();\n            }\n        }\n    };\n    ResourceBase.prototype.resourceScroll = function (id, name) {\n        if (this.parent.isAdaptive || ['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n            return;\n        }\n        var levelName = name || this.parent.resourceCollection.slice(-1)[0].name;\n        var levelIndex = this.parent.resourceCollection.length - 1;\n        var resource = this.parent.resourceCollection.filter(function (e, index) {\n            if (e.name === levelName) {\n                levelIndex = index;\n                return e;\n            }\n            return null;\n        })[0];\n        var scrollElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var index = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                var resourceData = resource.dataSource.filter(function (e) {\n                    return e[resource.idField] === id;\n                })[0];\n                index = this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resourceData);\n            }\n            if (this.parent.virtualScrollModule) {\n                var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n                var averageRowHeight = Math.round(virtual.offsetHeight / this.expandedResources.length);\n                if (this.parent.rowAutoHeight) {\n                    scrollElement.scrollTop = 0;\n                    this.parent.virtualScrollModule.virtualScrolling();\n                }\n                scrollElement.scrollTop = (index * averageRowHeight) - (((this.parent.virtualScrollModule.bufferCount - 1) * averageRowHeight));\n                this.parent.virtualScrollModule.virtualScrolling();\n                if (this.parent.rowAutoHeight) {\n                    var td = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n                    if (td && !td.parentElement.classList.contains(cls.HIDDEN_CLASS)) {\n                        scrollElement.scrollTop =\n                            (scrollElement.scrollTop < td.offsetTop) ? td.offsetTop : scrollElement.scrollTop + td.offsetTop;\n                    }\n                }\n                else {\n                    scrollElement.scrollTop = (index * averageRowHeight);\n                }\n            }\n            else {\n                var td = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n                if (td && !td.parentElement.classList.contains(cls.HIDDEN_CLASS)) {\n                    scrollElement.scrollTop = td.offsetTop;\n                }\n            }\n        }\n        else {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                if (levelName === this.parent.resourceCollection.slice(-1)[0].name) {\n                    index = this.lastResourceLevel.map(function (e) { return e.resourceData[resource.idField]; }).indexOf(id);\n                }\n                else {\n                    index = resource.dataSource.map(function (e) { return e[resource.idField]; }).indexOf(id);\n                }\n            }\n            var offsetTarget = this.parent.currentView === 'Month' ? this.parent.element.querySelector(\".\" + cls.DATE_HEADER_WRAP_CLASS + \" tbody tr:nth-child(\" + (levelIndex + 1) + \")\")\n                : this.parent.element.querySelector(\".\" + cls.HEADER_ROW_CLASS + \":nth-child(\" + (levelIndex + 1) + \")\");\n            var offset = [].slice.call(offsetTarget.children).map(function (node) { return node.offsetLeft; });\n            scrollElement.scrollLeft = offset[parseInt(index.toString(), 10)];\n        }\n    };\n    ResourceBase.prototype.destroy = function () {\n        this.parent.off(events.documentClick, this.documentClick);\n        if (this.treeViewObj) {\n            if (this.treeViewObj.portals && this.treeViewObj.portals.length > 0) {\n                var treeViewTemplates = this.treeViewObj.portals.map(function (x) { return x.propName; });\n                if (treeViewTemplates.length > 0) {\n                    this.parent.resetTemplates(treeViewTemplates);\n                }\n            }\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n            remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP));\n            remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP_OVERLAY));\n        }\n        var resToolBarEle = this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER);\n        if (resToolBarEle) {\n            remove(resToolBarEle);\n        }\n    };\n    return ResourceBase;\n}());\nexport { ResourceBase };\n"],"mappings":"AAAA;AACA;AACA,SAASA,MAAM,EAAEC,iBAAiB,EAAEC,aAAa,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,WAAW,EAAEC,MAAM,EAAEC,OAAO,EAAEC,SAAS,QAAQ,sBAAsB;AACxJ,SAASC,WAAW,EAAEC,KAAK,QAAQ,sBAAsB;AACzD,SAASC,QAAQ,QAAQ,6BAA6B;AACtD,SAASC,KAAK,QAAQ,wBAAwB;AAC9C,SAASC,IAAI,QAAQ,iBAAiB;AACtC,OAAO,KAAKC,GAAG,MAAM,sBAAsB;AAC3C,OAAO,KAAKC,MAAM,MAAM,kBAAkB;AAC1C,OAAO,KAAKC,IAAI,MAAM,cAAc;AACpC,IAAIC,YAAY,GAAG,aAAe,YAAY;EAC1C,SAASA,YAAYA,CAACC,MAAM,EAAE;IAC1B,IAAI,CAACC,kBAAkB,GAAG,EAAE;IAC5B,IAAI,CAACC,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,gBAAgB,GAAG,EAAE;IAC1B,IAAI,CAACH,MAAM,GAAGA,MAAM;EACxB;EACAD,YAAY,CAACK,SAAS,CAACC,0BAA0B,GAAG,UAAUC,EAAE,EAAE;IAC9D,IAAIC,QAAQ,GAAGxB,aAAa,CAAC,IAAI,EAAE;MAAEyB,SAAS,EAAEZ,GAAG,CAACa;IAAuB,CAAC,CAAC;IAC7E,IAAIC,SAAS,GAAG3B,aAAa,CAAC,KAAK,EAAE;MAAEyB,SAAS,EAAEZ,GAAG,CAACe;IAAoB,CAAC,CAAC;IAC5E,IAAI,IAAI,CAACX,MAAM,CAACY,iBAAiB,CAACC,oBAAoB,EAAE;MACpD,IAAIC,IAAI,GAAG;QAAEN,SAAS,EAAE,CAACD,QAAQ,CAACC,SAAS,CAAC;QAAEO,IAAI,EAAE;MAAa,CAAC;MAClE,IAAI,CAACf,MAAM,CAACgB,0BAA0B,CAACF,IAAI,EAAEP,QAAQ,CAAC;IAC1D,CAAC,MACI;MACDA,QAAQ,CAACU,WAAW,CAACP,SAAS,CAAC;IACnC;IACA,IAAIQ,IAAI,GAAG;MAAEC,WAAW,EAAE,YAAY;MAAEC,OAAO,EAAEb;IAAS,CAAC;IAC3D,IAAI,CAACP,MAAM,CAACqB,OAAO,CAACxB,MAAM,CAACyB,UAAU,EAAEJ,IAAI,CAAC;IAC5CZ,EAAE,CAACW,WAAW,CAACV,QAAQ,CAAC;EAC5B,CAAC;EACDR,YAAY,CAACK,SAAS,CAACmB,gBAAgB,GAAG,UAAUC,KAAK,EAAE;IACvD,IAAI,IAAI,CAACvB,kBAAkB,CAACwB,MAAM,IAAI,CAAC,IAAI,IAAI,CAACzB,MAAM,CAAC0B,mBAAmB,EAAE;MACxE;IACJ;IACA,IAAIC,OAAO,GAAG,IAAI,CAACC,iBAAiB,CAACH,MAAM;IAC3C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,OAAO,EAAEE,CAAC,EAAE,EAAE;MAC9B,IAAIC,OAAO,GAAG,IAAI,CAACF,iBAAiB,CAACG,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY;MAC7E,IAAIC,GAAG,GAAG,IAAI,CAACN,iBAAiB,CAACG,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ;MACrE,IAAIL,OAAO,CAACM,SAAS,KAAKxC,GAAG,CAACyC,qBAAqB,IAAI,CAACP,OAAO,CAACI,GAAG,CAACI,aAAa,CAAC,IAC9E,CAACxD,iBAAiB,CAACgD,OAAO,CAACI,GAAG,CAACI,aAAa,CAAC,CAAC,EAAE;QAChD,IAAIC,YAAY,GAAG,EAAE,CAACC,KAAK,CAACC,IAAI,CAACjB,KAAK,CAACkB,QAAQ,CAAC;QAChD,IAAIC,gBAAgB,GAAGJ,YAAY,CAACC,KAAK,CAACX,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIE,QAAQ,CAACD,OAAO,CAACc,KAAK,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;QACvF3D,QAAQ,CAAC0D,gBAAgB,EAAE/C,GAAG,CAACiD,YAAY,CAAC;MAChD;IACJ;EACJ,CAAC;EACD9C,YAAY,CAACK,SAAS,CAAC0C,oBAAoB,GAAG,YAAY;IACtD,IAAIC,OAAO,GAAG,IAAI,CAAC9C,kBAAkB;IACrC,IAAI+C,MAAM,GAAGjE,aAAa,CAAC,KAAK,EAAE;MAAEyB,SAAS,EAAEZ,GAAG,CAACqD;IAA2B,CAAC,CAAC;IAChF,IAAIC,GAAG,GAAG,IAAI,CAAClD,MAAM,CAACmD,UAAU,CAACC,iBAAiB,CAACxD,GAAG,CAACyD,2BAA2B,CAAC;IACnF,IAAI,CAAC,IAAI,CAACrD,MAAM,CAACsD,aAAa,CAACC,eAAe,IAAI,IAAI,CAACvD,MAAM,CAACwD,aAAa,IAAI,IAAI,CAACxD,MAAM,CAACmD,UAAU,CAACM,cAAc,CAAC,CAAC,IAC/G,IAAI,CAACzD,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAACC,SAAS,CAAClC,MAAM,GAAG,CAAC,EAAE;MAC7DxC,QAAQ,CAAC,CAACiE,GAAG,CAAC,EAAEtD,GAAG,CAACgE,WAAW,CAAC;IACpC;IACA,IAAIpC,KAAK,GAAG0B,GAAG,CAACW,aAAa,CAAC,OAAO,CAAC;IACtC,IAAI/B,OAAO,GAAG,IAAI,CAACgC,gBAAgB,CAAC,IAAI,CAAC;IACzC,IAAI,CAACC,gBAAgB,CAAChB,OAAO,CAACP,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEO,OAAO,CAACP,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjE,IAAI,CAACwB,iBAAiB,GAAG,IAAI,CAACpC,iBAAiB;IAC/C,IAAI,IAAI,CAAC5B,MAAM,CAAC0B,mBAAmB,EAAE;MACjC,IAAIuC,aAAa,GAAG,IAAI,CAACjE,MAAM,CAAC0B,mBAAmB,CAACwC,gBAAgB,CAAC,CAAC;MACtE,IAAI,CAACC,oBAAoB,CAAC,CAAC;MAC3BrC,OAAO,GAAG,IAAI,CAACsC,iBAAiB,CAAC5B,KAAK,CAAC,CAAC,EAAEyB,aAAa,CAAC;MACxD,IAAI,CAACD,iBAAiB,GAAGlC,OAAO;IACpC;IACA5C,MAAM,CAAC,IAAI,CAACmF,cAAc,CAACvC,OAAO,CAAC,EAAEN,KAAK,CAAC;IAC3C,IAAI,CAACD,gBAAgB,CAACC,KAAK,CAAC;IAC5B0B,GAAG,CAACjC,WAAW,CAACO,KAAK,CAAC;IACtBwB,MAAM,CAAC/B,WAAW,CAACiC,GAAG,CAAC;IACvB,OAAOF,MAAM;EACjB,CAAC;EACDjD,YAAY,CAACK,SAAS,CAACkE,oBAAoB,GAAG,YAAY;IACtD,IAAIvB,OAAO,GAAG,IAAI,CAAC9C,kBAAkB;IACrC;IACA,IAAIsE,IAAI,GAAG,IAAI,CAACT,gBAAgB,CAAC,IAAI,CAAC;IACtC,IAAI,CAACC,gBAAgB,CAAChB,OAAO,CAACP,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEO,OAAO,CAACP,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjE,IAAI,CAACwB,iBAAiB,GAAG,IAAI,CAACpC,iBAAiB;EACnD,CAAC;EACD7B,YAAY,CAACK,SAAS,CAAC+D,oBAAoB,GAAG,YAAY;IACtD,IAAIR,SAAS,GAAG,EAAE;IAClB,KAAK,IAAI9B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACD,iBAAiB,CAACH,MAAM,EAAEI,CAAC,EAAE,EAAE;MACpD,IAAIM,QAAQ,GAAG,IAAI,CAACP,iBAAiB,CAACG,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY;MAC9E,IAAIuC,KAAK,GAAGrC,QAAQ,CAACS,KAAK;MAC1Be,SAAS,CAACc,IAAI,CAAC,IAAI,CAAC7C,iBAAiB,CAACG,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;MAClE,IAAI0C,UAAU,GAAGvC,QAAQ,CAAC,IAAI,CAACP,iBAAiB,CAACG,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACG,aAAa,CAAC;MACpG,IAAI,CAACxD,iBAAiB,CAAC4F,UAAU,CAAC,IAAI,CAACA,UAAU,IAAIF,KAAK,GAAG,CAAC,EAAE;QAC5D3C,CAAC,GAAGA,CAAC,GAAG2C,KAAK;MACjB;IACJ;IACA,IAAI,CAACJ,iBAAiB,GAAGT,SAAS;EACtC,CAAC;EACD5D,YAAY,CAACK,SAAS,CAACiE,cAAc,GAAG,UAAUvC,OAAO,EAAE6C,eAAe,EAAE;IACxE,IAAIC,OAAO,GAAG,EAAE;IAChB,IAAIC,IAAI;IACR,IAAIC,MAAM;IACV,IAAI/B,OAAO,GAAG,IAAI,CAAC9C,kBAAkB;IACrC,IAAIK,EAAE,GAAGvB,aAAa,CAAC,IAAI,CAAC;IAC5B,IAAIgG,EAAE,GAAGhG,aAAa,CAAC,IAAI,EAAE;MAAEiG,KAAK,EAAE;QAAEC,QAAQ,EAAEN,eAAe,GAAG,IAAI,GAAG;MAAI;IAAE,CAAC,CAAC;IACnF,IAAIO,oBAAoB,GAAG,IAAI,CAAClF,MAAM,CAACmD,UAAU,CAACgC,eAAe,CAAC,CAAC;IACnE,KAAK,IAAItD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,OAAO,CAACL,MAAM,EAAEI,CAAC,EAAE,EAAE;MACrC,IAAIqD,oBAAoB,CAACzD,MAAM,GAAG,CAAC,IAAIyD,oBAAoB,CAACE,OAAO,CAACtD,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACqD,UAAU,CAAC,GAAG,CAAC,CAAC,EAAE;QACtH;MACJ;MACA,IAAIC,GAAG,GAAGP,EAAE,CAACQ,SAAS,CAAC,CAAC;MACxBT,MAAM,GAAGhF,IAAI,CAAC0F,eAAe,CAACzC,OAAO,EAAE,MAAM,EAAEjB,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACsD,IAAI,CAAC;MACjG,IAAIX,MAAM,KAAK/B,OAAO,CAACtB,MAAM,GAAG,CAAC,EAAE;QAC/B5C,MAAM,CAACiD,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,EAAE;UAAEG,SAAS,EAAExC,GAAG,CAAC8F;QAAqB,CAAC,CAAC;QACjG,IAAI,CAAC1B,iBAAiB,CAACjC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACxB,SAAS,GAAG,CAACZ,GAAG,CAAC8F,oBAAoB,CAAC;MAC7F,CAAC,MACI;QACD7G,MAAM,CAACiD,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,EAAE;UAAEG,SAAS,EAAExC,GAAG,CAACyC;QAAsB,CAAC,CAAC;QAClG,IAAI,CAAC2B,iBAAiB,CAACjC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACxB,SAAS,GAAG,CAACZ,GAAG,CAACyC,qBAAqB,CAAC;MAC9F;MACAwC,IAAI,GAAIC,MAAM,GAAG,IAAI,CAAC5E,SAAS,GAAI,IAAI;MACvC,IAAI4B,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACG,SAAS,KAAKxC,GAAG,CAACyC,qBAAqB,IACrF,CAACvD,iBAAiB,CAACgD,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACW,KAAK,CAAC,IAAKd,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACW,KAAK,GAAG,CAAE,EAAE;QAC/I,IAAI+C,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI7D,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACc,OAAO,CAAChB,QAAQ,CAAC+C,MAAM,CAAC9C,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACM,aAAa,CAAC,IACxGxD,iBAAiB,CAACgD,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACc,OAAO,CAAChB,QAAQ,CAAC+C,MAAM,CAAC9C,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACM,aAAa,CAAC,CAAC,EAAE;UAC7HqD,SAAS,GAAG/F,GAAG,CAACgG,uBAAuB;QAC3C,CAAC,MACI;UACDD,SAAS,GAAG/F,GAAG,CAACiG,qBAAqB;QACzC;QACA,IAAIC,OAAO,GAAG/G,aAAa,CAAC,KAAK,CAAC;QAClCE,QAAQ,CAAC,CAAC6G,OAAO,CAAC,EAAE,CAAClG,GAAG,CAACmG,wBAAwB,EAAEJ,SAAS,CAAC,CAAC;QAC9D,IAAI,CAACK,SAAS,CAACF,OAAO,EAAEjB,IAAI,CAAC;QAC7BS,GAAG,CAACrE,WAAW,CAAC6E,OAAO,CAAC;QACxB,IAAI,IAAI,CAAC7F,kBAAkB,CAACwB,MAAM,GAAG,CAAC,EAAE;UACpCzC,YAAY,CAACiH,GAAG,CAACH,OAAO,EAAE,OAAO,EAAE,IAAI,CAACI,eAAe,EAAE,IAAI,CAAC;QAClE;MACJ;MACA,IAAI,CAAClG,MAAM,CAACmD,UAAU,CAACgD,wBAAwB,CAACb,GAAG,EAAExD,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAEpC,GAAG,CAACe,mBAAmB,CAAC;MAClH2E,GAAG,CAACc,YAAY,CAAC,kBAAkB,EAAEtE,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACqD,UAAU,CAACrD,QAAQ,CAAC,CAAC,CAAC;MAC/FsD,GAAG,CAACc,YAAY,CAAC,YAAY,EAAEtE,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACH,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACkE,SAAS,CAAC,GAAG,WAAW,CAAC;MACtJ,IAAI,CAAC,IAAI,CAACrG,MAAM,CAACY,iBAAiB,CAAC0F,sBAAsB,EAAE;QACvD,IAAI,CAACN,SAAS,CAACV,GAAG,CAACzB,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACe,mBAAmB,CAAC,EAAEkE,IAAI,CAAC;MAC1E;MACA,IAAI0B,eAAe,GAAG,CAAC3G,GAAG,CAAC4G,oBAAoB,EAAE1E,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACG,SAAS,CAAC;MAC5GnD,QAAQ,CAAC,CAACqG,GAAG,CAAC,EAAEiB,eAAe,CAAC;MAChC,IAAIrF,IAAI,GAAG;QAAEC,WAAW,EAAE,gBAAgB;QAAEC,OAAO,EAAEkE,GAAG;QAAED,UAAU,EAAEvD,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACqD;MAAW,CAAC;MACtH,IAAI,CAACrF,MAAM,CAACqB,OAAO,CAACxB,MAAM,CAACyB,UAAU,EAAEJ,IAAI,CAAC;MAC5C,IAAIuF,GAAG,GAAGnG,EAAE,CAACiF,SAAS,CAAC,CAAC;MACxBkB,GAAG,CAACxF,WAAW,CAACqE,GAAG,CAAC;MACpBV,OAAO,CAACH,IAAI,CAACgC,GAAG,CAAC;IACrB;IACA,OAAO7B,OAAO;EAClB,CAAC;EACD7E,YAAY,CAACK,SAAS,CAAC4F,SAAS,GAAG,UAAU5E,OAAO,EAAEsF,KAAK,EAAE;IACzD,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC2G,SAAS,EAAE;MACxBvF,OAAO,CAACwF,KAAK,CAACC,UAAU,GAAGH,KAAK;IACpC,CAAC,MACI;MACDtF,OAAO,CAACwF,KAAK,CAACE,WAAW,GAAGJ,KAAK;IACrC;EACJ,CAAC;EACD3G,YAAY,CAACK,SAAS,CAAC2D,gBAAgB,GAAG,UAAUgD,gBAAgB,EAAEC,eAAe,EAAE;IACnF,IAAIC,UAAU;IACd,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,gBAAgB,CAACtF,MAAM,EAAEyF,CAAC,EAAE,EAAE;MAC9C,IAAIpG,IAAI,GAAGiG,gBAAgB,CAACA,gBAAgB,CAACtF,MAAM,IAAIyF,CAAC,GAAG,CAAC,CAAC,CAAC,CAACC,UAAU;MACzE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGtG,IAAI,CAACW,MAAM,EAAE2F,CAAC,EAAE,EAAE;QAClC,IAAIC,UAAU,GAAG,CAAC;QAClB,IAAI,IAAI,CAACrH,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAAC4D,SAAS,EAAE;UAC/C,IAAIC,KAAK,GAAG,IAAI/H,KAAK,CAAC,CAAC,CAACgI,KAAK,CAACR,eAAe,CAACA,eAAe,CAACvF,MAAM,GAAG,CAAC,CAAC,CAACgG,YAAY,EAAE,OAAO,EAAE3G,IAAI,CAACiB,QAAQ,CAACqF,CAAC,CAACpF,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC+E,gBAAgB,CAACA,gBAAgB,CAACtF,MAAM,IAAIyF,CAAC,GAAG,CAAC,CAAC,CAAC,CAACQ,OAAO,CAAC,CAAC;UAC/LT,UAAU,GAAG,IAAI1H,WAAW,CAACyH,eAAe,CAACA,eAAe,CAACvF,MAAM,GAAG,CAAC,CAAC,CAAC0F,UAAU,CAAC,CAACQ,YAAY,CAACJ,KAAK,CAAC;QAC5G,CAAC,MACI;UACDN,UAAU,GAAGD,eAAe,CAACA,eAAe,CAACvF,MAAM,GAAG,CAAC,CAAC,CAAC0F,UAAU;QACvE;QACA,KAAK,IAAIS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGX,UAAU,CAACxF,MAAM,EAAEmG,CAAC,EAAE,EAAE;UACxCP,UAAU,GAAGA,UAAU,GAAGtF,QAAQ,CAACkF,UAAU,CAAClF,QAAQ,CAAC6F,CAAC,CAAC5F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACY,KAAK,EAAE,EAAE,CAAC;QACxF;QACAyE,UAAU,GAAGA,UAAU,GAAGtF,QAAQ,CAACjB,IAAI,CAACiB,QAAQ,CAACqF,CAAC,CAACpF,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACY,KAAK,EAAE,EAAE,CAAC;QAC9E/D,MAAM,CAACiC,IAAI,CAACiB,QAAQ,CAACqF,CAAC,CAACpF,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;UAAEY,KAAK,EAAEyE;QAAW,CAAC,CAAC;MACnE;MACAL,eAAe,GAAGA,eAAe,CAACxE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAClD;EACJ,CAAC;EACDzC,YAAY,CAACK,SAAS,CAAC8F,eAAe,GAAG,UAAU2B,CAAC,EAAE;IAClD,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAI,IAAI,CAAC9H,MAAM,CAAC+H,YAAY,EAAE;MAC1B,IAAI,CAAC/H,MAAM,CAAC+H,YAAY,CAACC,KAAK,CAAC,CAAC;IACpC;IACA,IAAIC,MAAM,GAAGJ,CAAC,CAACI,MAAM;IACrB,IAAIC,IAAI;IACR,IAAIC,SAAS,GAAG9I,OAAO,CAAC4I,MAAM,EAAE,GAAG,GAAGrI,GAAG,CAACyC,qBAAqB,CAAC,CAC3D+F,aAAa;IAClB,IAAIC,KAAK,GAAGtG,QAAQ,CAACoG,SAAS,CAACzF,QAAQ,CAAC,CAAC,CAAC,CAAC4F,YAAY,CAAC,kBAAkB,CAAC,EAAE,EAAE,CAAC;IAChF,IAAIpH,IAAI,GAAG;MACPqH,MAAM,EAAE,KAAK;MAAEC,KAAK,EAAEX,CAAC;MAAExC,UAAU,EAAEgD,KAAK;MAC1CI,WAAW,EAAE,CAACR,MAAM,CAAC3I,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACgG,uBAAuB,CAAC,GAAG,gBAAgB,GAAG;IAC9F,CAAC;IACD,IAAI,CAAC5F,MAAM,CAACqB,OAAO,CAACxB,MAAM,CAAC8I,WAAW,EAAEzH,IAAI,EAAE,UAAU0H,UAAU,EAAE;MAChE,IAAI,CAACA,UAAU,CAACL,MAAM,EAAE;QACpB,IAAIN,MAAM,CAAC3I,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACgG,uBAAuB,CAAC,EAAE;UACxDtG,SAAS,CAAC2I,MAAM,EAAE,CAACrI,GAAG,CAACiG,qBAAqB,CAAC,EAAE,CAACjG,GAAG,CAACgG,uBAAuB,CAAC,CAAC;UAC7EsC,IAAI,GAAG,IAAI;QACf,CAAC,MACI;UACD5I,SAAS,CAAC2I,MAAM,EAAE,CAACrI,GAAG,CAACgG,uBAAuB,CAAC,EAAE,CAAChG,GAAG,CAACiG,qBAAqB,CAAC,CAAC;UAC7EqC,IAAI,GAAG,KAAK;QAChB;QACA,IAAIW,aAAa,GAAG,EAAE,CAACrG,KAAK,CAACC,IAAI,CAACqF,KAAK,CAAC9H,MAAM,CAACoB,OAAO,CAAC0H,gBAAgB,CAAC,GAAG,GAAGlJ,GAAG,CAACmJ,iBAAiB,GAAG,IAAI,GAAGnJ,GAAG,CAACoJ,oBAAoB,CAAC,CAAC;QACvI,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEC,eAAe,GAAGL,aAAa,EAAEI,EAAE,GAAGC,eAAe,CAACzH,MAAM,EAAEwH,EAAE,EAAE,EAAE;UACjF,IAAI7H,OAAO,GAAG8H,eAAe,CAACD,EAAE,CAAC;UACjC7J,MAAM,CAACgC,OAAO,CAAC;QACnB;QACA,IAAI0G,KAAK,CAAC9H,MAAM,CAAC0B,mBAAmB,EAAE;UAClCoG,KAAK,CAACqB,oBAAoB,CAACd,KAAK,EAAEH,IAAI,EAAEL,CAAC,EAAEI,MAAM,CAAC;QACtD,CAAC,MACI;UACDH,KAAK,CAACsB,aAAa,CAACf,KAAK,EAAEH,IAAI,CAAC;QACpC;QACA,IAAIpH,IAAI,GAAG;UAAEuI,aAAa,EAAEvB,KAAK,CAAC9H,MAAM,CAACsJ,gBAAgB,CAAC,CAAC;UAAEC,MAAM,EAAE;QAAS,CAAC;QAC/EzB,KAAK,CAAC9H,MAAM,CAACwJ,MAAM,CAAC3J,MAAM,CAAC4J,cAAc,EAAE3I,IAAI,CAAC;QAChDI,IAAI,GAAG;UACHqH,MAAM,EAAE,KAAK;UAAEC,KAAK,EAAEX,CAAC;UAAExC,UAAU,EAAEgD,KAAK;UAC1CI,WAAW,EAAER,MAAM,CAAC3I,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACgG,uBAAuB,CAAC,GAAG,kBAAkB,GAAG;QAC/F,CAAC;QACDkC,KAAK,CAAC9H,MAAM,CAAC0J,aAAa,CAAC,KAAK,CAAC;QACjC5B,KAAK,CAAC9H,MAAM,CAACqB,OAAO,CAACxB,MAAM,CAAC8J,cAAc,EAAEzI,IAAI,CAAC;MACrD;IACJ,CAAC,CAAC;EACN,CAAC;EACDnB,YAAY,CAACK,SAAS,CAACgJ,aAAa,GAAG,UAAUf,KAAK,EAAEH,IAAI,EAAE;IAC1D,IAAI0B,aAAa,GAAG,EAAE;IACtB,IAAIC,kBAAkB,GAAG,EAAE;IAC3B,IAAIC,mBAAmB,GAAG,EAAE;IAC5B,IAAIC,KAAK;IACT,IAAIC,UAAU,GAAG,IAAI,CAACpI,iBAAiB,CAACG,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY;IACpF,IAAI2C,OAAO,GAAG,EAAE,CAACpC,KAAK,CAACC,IAAI,CAAC,IAAI,CAACzC,MAAM,CAACoB,OAAO,CAAC0H,gBAAgB,CAAC,GAAG,GAAGlJ,GAAG,CAACqD,0BAA0B,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC;IACpH,IAAIgH,WAAW,GAAG,EAAE,CAACzH,KAAK,CAACC,IAAI,CAAC,IAAI,CAACzC,MAAM,CAACoB,OAAO,CAAC0H,gBAAgB,CAAC,GAAG,GAAGlJ,GAAG,CAACsK,kBAAkB,GAAG,GAAG,GAAG,UAAU,CAAC,CAAC;IACtH,IAAIC,SAAS,GAAG,EAAE,CAAC3H,KAAK,CAACC,IAAI,CAAC,IAAI,CAACzC,MAAM,CAACoB,OAAO,CAAC0H,gBAAgB,CAAC,GAAG,GAAGlJ,GAAG,CAACsK,kBAAkB,GAAG,IAAI,GAAGtK,GAAG,CAACwK,2BAA2B,CAAC,CAAC;IAC1I,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,UAAU,CAACpH,KAAK,EAAEyH,CAAC,EAAE,EAAE;MACvCT,aAAa,CAACnF,IAAI,CAACG,OAAO,CAACyD,KAAK,GAAGgC,CAAC,GAAG,CAAC,CAAC,CAAC;MAC1CR,kBAAkB,CAACpF,IAAI,CAACwF,WAAW,CAAC5B,KAAK,GAAGgC,CAAC,GAAG,CAAC,CAAC,CAAC;MACnDP,mBAAmB,CAACrF,IAAI,CAAC0F,SAAS,CAAC9B,KAAK,GAAGgC,CAAC,GAAG,CAAC,CAAC,CAAC;IACtD;IACA,IAAIC,gBAAgB,GAAG,IAAI,CAAC1I,iBAAiB;IAC7C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+H,aAAa,CAACnI,MAAM,EAAEI,CAAC,EAAE,EAAE;MAC3C,IAAI0I,QAAQ,GAAG,IAAI;MACnBR,KAAK,GAAGH,aAAa,CAAC7H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACU,QAAQ,CAAC,CAAC,CAAC,CAACpD,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACyC,qBAAqB,CAAC;MAC3GiI,gBAAgB,CAACvI,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACqI,gBAAgB,CAACvI,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACG,aAAa,CAAC,GAAG,CAAC4F,IAAI;MAC9I,IAAIA,IAAI,EAAE;QACN,IAAI6B,KAAK,EAAE;UACP,IAAIS,MAAM,GAAGZ,aAAa,CAAC7H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC6B,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACmG,wBAAwB,CAAC;UACxG,IAAIyE,MAAM,EAAE;YACRlL,SAAS,CAACkL,MAAM,EAAE,CAAC5K,GAAG,CAACiG,qBAAqB,CAAC,EAAE,CAACjG,GAAG,CAACgG,uBAAuB,CAAC,CAAC;UACjF;QACJ;QACA,IAAI,CAACgE,aAAa,CAAC7H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC1C,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACiD,YAAY,CAAC,EAAE;UACjF5D,QAAQ,CAAC,CAAC2K,aAAa,CAAC7H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE6H,kBAAkB,CAAC9H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE8H,mBAAmB,CAAC/H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAEpC,GAAG,CAACiD,YAAY,CAAC;QAC5K;MACJ,CAAC,MACI;QACD,IAAIkH,KAAK,EAAE;UACP,IAAIU,QAAQ,GAAGb,aAAa,CAAC7H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACyI,QAAQ;UACjE,IAAI,CAACH,gBAAgB,CAACvI,QAAQ,CAAC0I,QAAQ,CAACzI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACqI,gBAAgB,CAACvI,QAAQ,CAAC0I,QAAQ,CAACzI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACG,aAAa,CAAC,IAC1I,CAACxD,iBAAiB,CAACwL,gBAAgB,CAACvI,QAAQ,CAAC0I,QAAQ,CAACzI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACqI,gBAAgB,CAACvI,QAAQ,CAAC0I,QAAQ,CAACzI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACG,aAAa,CAAC,CAAC,EAAE;YACrKsH,aAAa,CAACc,MAAM,CAAC7I,CAAC,GAAG,CAAC,EAAGE,QAAQ,CAACuI,gBAAgB,CAACvI,QAAQ,CAAC0I,QAAQ,CAACzI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACW,KAAK,EAAE,EAAE,CAAE,CAAC;YACnHiH,kBAAkB,CAACa,MAAM,CAAC7I,CAAC,GAAG,CAAC,EAAGE,QAAQ,CAACuI,gBAAgB,CAACvI,QAAQ,CAAC0I,QAAQ,CAACzI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACW,KAAK,EAAE,EAAE,CAAE,CAAC;YACxHkH,mBAAmB,CAACY,MAAM,CAAC7I,CAAC,GAAG,CAAC,EAAGE,QAAQ,CAACuI,gBAAgB,CAACvI,QAAQ,CAAC0I,QAAQ,CAACzI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACW,KAAK,EAAE,EAAE,CAAE,CAAC;YACzH2H,QAAQ,GAAG,KAAK;UACpB;UACA,IAAIA,QAAQ,EAAE;YACV,IAAIC,MAAM,GAAGZ,aAAa,CAAC7H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC6B,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACmG,wBAAwB,CAAC;YACxG,IAAIyE,MAAM,EAAE;cACRlL,SAAS,CAACkL,MAAM,EAAE,CAAC5K,GAAG,CAACgG,uBAAuB,CAAC,EAAE,CAAChG,GAAG,CAACiG,qBAAqB,CAAC,CAAC;YACjF;UACJ;QACJ;QACA,IAAI+D,aAAa,CAAC7H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC1C,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACiD,YAAY,CAAC,EAAE;UAChF1D,WAAW,CAAC,CAACyK,aAAa,CAAC7H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE6H,kBAAkB,CAAC9H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE8H,mBAAmB,CAAC/H,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAEpC,GAAG,CAACiD,YAAY,CAAC;QAC/K;MACJ;IACJ;EACJ,CAAC;EACD;EACA9C,YAAY,CAACK,SAAS,CAAC+I,oBAAoB,GAAG,UAAUd,KAAK,EAAEsC,MAAM,EAAE9C,CAAC,EAAEI,MAAM,EAAE;IAC9E,IAAI,CAACrG,iBAAiB,CAACG,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAAC,IAAI,CAACL,iBAAiB,CAACG,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACG,aAAa,CAAC,GAAG,CAACqI,MAAM;IAC5J,IAAI,CAACxG,oBAAoB,CAAC,CAAC;IAC3B,IAAIF,aAAa,GAAG,IAAI,CAACjE,MAAM,CAAC0B,mBAAmB,CAACwC,gBAAgB,CAAC,CAAC;IACtE,IAAI0G,UAAU,GAAG,IAAI,CAACxG,iBAAiB,CAACgB,OAAO,CAAC,IAAI,CAACpB,iBAAiB,CAAC,CAAC,CAAC,CAAC;IAC1E,IAAI,CAAChE,MAAM,CAAC0B,mBAAmB,CAACmJ,sBAAsB,GAAG,IAAI,CAAC7G,iBAAiB;IAC/E,IAAI,CAACA,iBAAiB,GAAG,IAAI,CAACI,iBAAiB,CAAC5B,KAAK,CAACoI,UAAU,EAAEA,UAAU,GAAG3G,aAAa,CAAC;IAC7F,IAAI,IAAI,CAACD,iBAAiB,CAACvC,MAAM,GAAGwC,aAAa,EAAE;MAC/C,IAAI6G,MAAM,GAAG,IAAI,CAAC1G,iBAAiB,CAAC3C,MAAM,GAAGwC,aAAa;MAC1D6G,MAAM,GAAIA,MAAM,GAAG,CAAC,GAAIA,MAAM,GAAG,CAAC;MAClC,IAAI,CAAC9G,iBAAiB,GAAG,IAAI,CAACI,iBAAiB,CAAC5B,KAAK,CAACsI,MAAM,EAAE,IAAI,CAAC1G,iBAAiB,CAAC3C,MAAM,CAAC;IAChG;IACA,IAAIsJ,YAAY,GAAG,IAAI,CAAC/K,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACoL,mBAAmB,CAAC;IACnF,IAAI,CAAChL,MAAM,CAAC0B,mBAAmB,CAACuJ,wBAAwB,CAACF,YAAY,CAAC;IACtE,IAAIG,QAAQ,GAAG,IAAI,CAAClL,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACqD,0BAA0B,GAAG,GAAG,GAAG,OAAO,CAAC;IACtG,IAAIkI,YAAY,GAAG,IAAI,CAACnL,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACsK,kBAAkB,GAAG,GAAG,GAAG,OAAO,CAAC;IAClG,IAAIkB,UAAU,GAAG,IAAI,CAACpL,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACyL,iBAAiB,CAAC;IAC/E,IAAI,CAACrL,MAAM,CAAC0B,mBAAmB,CAAC0H,aAAa,CAAC8B,QAAQ,EAAEC,YAAY,EAAEC,UAAU,EAAE,IAAI,CAACpH,iBAAiB,CAAC;IACzG,IAAIsH,aAAa,GAAG,IAAI,CAACtL,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAAC2L,sBAAsB,CAAC;IACvF,IAAI,CAACzM,iBAAiB,CAACwM,aAAa,CAAC,EAAE;MACnCA,aAAa,CAAC1E,KAAK,CAAC4E,MAAM,GACtB,IAAI,CAACxL,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAAC6L,mBAAmB,CAAC,CAACC,YAAY,GAAG,IAAI;IAC5F;EACJ,CAAC;EACD3L,YAAY,CAACK,SAAS,CAACuL,oBAAoB,GAAG,YAAY;IACtD,IAAIC,eAAe,GAAG7M,aAAa,CAAC,KAAK,EAAE;MAAEyB,SAAS,EAAEZ,GAAG,CAACiM;IAA2B,CAAC,CAAC;IACzFD,eAAe,CAACE,SAAS,GAAG,cAAc,GAAGlM,GAAG,CAACmM,uBAAuB,GAAG,gBAAgB,GAAGnM,GAAG,CAACoM,aAAa,GAAG,IAAI,GAClH,sBAAsB,GAAGpM,GAAG,CAACqM,kBAAkB,GAAG,4BAA4B,GAAGrM,GAAG,CAACsM,oBAAoB,GAAG,gBAAgB;IAChI,IAAI,IAAI,CAAClM,MAAM,CAACmM,WAAW,KAAK,aAAa,EAAE;MAC3C,IAAIlE,MAAM,GAAG,IAAI,CAACjI,MAAM,CAACmD,UAAU,CAACiJ,QAAQ,CAAC,CAAC,CAACvI,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACsK,kBAAkB,CAAC;MAC1FjC,MAAM,CAACoE,YAAY,CAACT,eAAe,EAAE3D,MAAM,CAACpE,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAAC0M,uBAAuB,CAAC,CAAC;IACjG,CAAC,MACI;MACD,IAAI,CAACtM,MAAM,CAACoB,OAAO,CAACiL,YAAY,CAACT,eAAe,EAAE,IAAI,CAAC5L,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAAC2M,qBAAqB,CAAC,CAAC;IACzH;IACA,IAAI,CAACC,wBAAwB,CAAC,CAAC;IAC/BxN,YAAY,CAACiH,GAAG,CAAC2F,eAAe,CAAC/H,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACqM,kBAAkB,CAAC,EAAE,OAAO,EAAE,IAAI,CAACQ,SAAS,EAAE,IAAI,CAAC;EAChH,CAAC;EACD1M,YAAY,CAACK,SAAS,CAACsM,kBAAkB,GAAG,YAAY;IACpD,IAAI,CAACC,YAAY,GAAG5N,aAAa,CAAC,KAAK,EAAE;MAAEyB,SAAS,EAAEZ,GAAG,CAACgN;IAA4B,CAAC,CAAC;IACxF,IAAIC,WAAW,GAAG9N,aAAa,CAAC,KAAK,EAAE;MAAEyB,SAAS,EAAEZ,GAAG,CAACkN,mBAAmB,GAAG;IAAiB,CAAC,CAAC;IACjG,IAAI,IAAI,CAAC9M,MAAM,CAACmM,WAAW,KAAK,aAAa,EAAE;MAC3C,IAAIlE,MAAM,GAAG,IAAI,CAACjI,MAAM,CAACmD,UAAU,CAACiJ,QAAQ,CAAC,CAAC,CAACvI,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAAC0M,uBAAuB,CAAC;MAC/FrE,MAAM,CAACoE,YAAY,CAACQ,WAAW,EAAE5E,MAAM,CAACvF,QAAQ,CAAC,CAAC,CAAC,CAAC;MACpDuF,MAAM,CAAChH,WAAW,CAAC,IAAI,CAAC0L,YAAY,CAAC;IACzC,CAAC,MACI;MACD,IAAI,CAAC3M,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAAC2M,qBAAqB,CAAC,CAACtL,WAAW,CAAC4L,WAAW,CAAC;MAC3F,IAAI,CAAC7M,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAAC2M,qBAAqB,CAAC,CAACtL,WAAW,CAAC,IAAI,CAAC0L,YAAY,CAAC;IACrG;IACA,IAAII,YAAY,GAAGhO,aAAa,CAAC,KAAK,EAAE;MAAEyB,SAAS,EAAEZ,GAAG,CAACoN;IAAc,CAAC,CAAC;IACzEH,WAAW,CAAC5L,WAAW,CAAC8L,YAAY,CAAC;IACrC,IAAI,CAACE,WAAW,GAAG,IAAIxN,QAAQ,CAAC;MAC5ByN,QAAQ,EAAE,IAAI,CAAClN,MAAM,CAACkN,QAAQ;MAC9BvG,SAAS,EAAE,IAAI,CAAC3G,MAAM,CAAC2G,SAAS;MAChCwG,mBAAmB,EAAE,IAAI,CAACnN,MAAM,CAACmN,mBAAmB;MACpDC,MAAM,EAAE;QACJjG,UAAU,EAAE,EAAE,CAAC3E,KAAK,CAACC,IAAI,CAAC,IAAI,CAACqB,gBAAgB,CAAC,CAAC,CAAC;QAClDuJ,EAAE,EAAE,YAAY;QAChBC,IAAI,EAAE,cAAc;QACpBC,KAAK,EAAE;MACX,CAAC;MACDC,YAAY,EAAE,IAAI,CAACxN,MAAM,CAACsG,sBAAsB;MAChDmH,WAAW,EAAE,IAAI,CAACC,aAAa,CAACC,IAAI,CAAC,IAAI,CAAC;MAC1CC,OAAO,EAAE,IAAI,CAACC,mBAAmB,CAACF,IAAI,CAAC,IAAI;IAC/C,CAAC,CAAC;IACF,IAAI,CAACV,WAAW,CAACa,IAAI,GAAG,IAAI,CAAC9N,MAAM,CAAC8N,IAAI,GAAG,IAAI,CAAC9N,MAAM,CAAC8N,IAAI,GAAG,IAAI,CAAC9N,MAAM;IACzE,IAAI,CAACiN,WAAW,CAACc,QAAQ,CAAChB,YAAY,CAAC;IACvC,IAAI,CAACE,WAAW,CAACe,SAAS,CAAC,CAAC;IAC5B,IAAI,CAACC,SAAS,GAAG,IAAIvO,KAAK,CAACmN,WAAW,EAAE;MACpCqB,UAAU,EAAE,UAAU;MACtBC,cAAc,EAAE,MAAM;MACtBC,OAAO,EAAE,IAAI,CAACnB,WAAW,CAAC7L,OAAO;MACjCiN,QAAQ,EAAE,IAAI,CAACrO,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAAC2M,qBAAqB,CAAC;MAC5E5F,SAAS,EAAE,IAAI,CAAC3G,MAAM,CAAC2G,SAAS;MAChC2H,aAAa,EAAE;QAAE7I,IAAI,EAAE,cAAc;QAAE8I,QAAQ,EAAE;MAAI,CAAC;MACtDC,aAAa,EAAE;QAAE/I,IAAI,EAAE,aAAa;QAAE8I,QAAQ,EAAE;MAAI,CAAC;MACrDE,eAAe,EAAE,IAAI,CAACzO,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,IAAI,IAAI,CAAC7D,MAAM,CAACmM,WAAW,KAAK,aAAa,GAC/FvM,GAAG,CAAC0M,uBAAuB,GAAG1M,GAAG,CAAC2M,qBAAqB,CAAC;IAChE,CAAC,CAAC;IACF,IAAI,CAACvM,MAAM,CAAC0O,EAAE,CAAC7O,MAAM,CAAC8O,aAAa,EAAE,IAAI,CAACA,aAAa,EAAE,IAAI,CAAC;EAClE,CAAC;EACD5O,YAAY,CAACK,SAAS,CAACyN,mBAAmB,GAAG,YAAY;IACrD,IAAI,IAAI,CAAC7N,MAAM,CAACY,iBAAiB,CAAC0F,sBAAsB,IAAI,IAAI,CAACtG,MAAM,CAAC4O,OAAO,IAAI,IAAI,CAAC3B,WAAW,CAAC2B,OAAO,EAAE;MACzG,IAAI,CAAC5O,MAAM,CAAC4O,OAAO,GAAG,IAAI,CAAC5O,MAAM,CAAC4O,OAAO,CAACC,MAAM,CAAC,IAAI,CAAC5B,WAAW,CAAC2B,OAAO,CAAC;MAC1E,IAAI,CAAC5O,MAAM,CAAC8O,eAAe,CAAC,CAAC;IACjC;EACJ,CAAC;EACD/O,YAAY,CAACK,SAAS,CAAC0D,gBAAgB,GAAG,UAAUiL,UAAU,EAAE;IAC5D,IAAIjH,KAAK,GAAG,IAAI;IAChB,IAAIkH,cAAc,GAAG,EAAE;IACvB,IAAIC,WAAW,GAAG,EAAE;IACpB,IAAI5J,UAAU,GAAG,CAAC;IAClB,IAAI6J,OAAO,GAAG,SAAAA,CAAUrN,CAAC,EAAEsN,GAAG,EAAE;MAC5B,IAAIC,WAAW,GAAG,SAAAA,CAAUC,SAAS,EAAEhH,KAAK,EAAEiH,OAAO,EAAE;QACnD,IAAInN,QAAQ,GAAG2F,KAAK,CAAC7H,kBAAkB,CAAC8B,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACvE,IAAIuN,QAAQ;QACZ,IAAIC,MAAM;QACV,IAAI,CAACT,UAAU,EAAE;UACbQ,QAAQ,GAAG;YACPE,UAAU,EAAEH,OAAO;YACnBI,YAAY,EAAEL,SAAS,CAACpN,YAAY,CAACE,QAAQ,CAACkE,SAAS,CAAC;YACxDlE,QAAQ,EAAEkN,SAAS,CAAClN,QAAQ;YAC5BF,YAAY,EAAEoN,SAAS,CAACpN;UAC5B,CAAC;QACL,CAAC,MACI;UACDuN,MAAM,GAAG;YACLzO,IAAI,EAAE,gBAAgB;YAAEoB,QAAQ,EAAEkN,SAAS,CAAClN,QAAQ;YACpDF,YAAY,EAAEoN,SAAS,CAACpN,YAAY;YAAEoD,UAAU,EAAEA,UAAU;YAC5DsK,UAAU,EAAEN,SAAS,CAACM;UAC1B,CAAC;UACDV,WAAW,CAACxK,IAAI,CAAC+K,MAAM,CAAC;UACxBnK,UAAU,EAAE;QAChB;QACA,IAAIgK,SAAS,CAAC9B,KAAK,CAAC9L,MAAM,GAAG,CAAC,IAAI,CAACsN,UAAU,EAAE;UAC3CQ,QAAQ,CAACK,aAAa,GAAG,EAAE;QAC/B;QACA,IAAIpL,KAAK,GAAG,CAAC;QACb,KAAK,IAAIyE,EAAE,GAAG,CAAC,EAAE4G,EAAE,GAAGR,SAAS,CAAC9B,KAAK,EAAEtE,EAAE,GAAG4G,EAAE,CAACpO,MAAM,EAAEwH,EAAE,EAAE,EAAE;UACzD,IAAI6G,IAAI,GAAGD,EAAE,CAAC5G,EAAE,CAAC;UACjB,IAAI,CAAC8F,UAAU,EAAE;YACbQ,QAAQ,CAACK,aAAa,CAACnL,IAAI,CAAC2K,WAAW,CAACU,IAAI,EAAEzH,KAAK,GAAG,CAAC,EAAEiH,OAAO,GAAG,GAAG,GAAG9K,KAAK,CAAC,CAAC;UACpF,CAAC,MACI;YACD4K,WAAW,CAACU,IAAI,EAAEzH,KAAK,GAAG,CAAC,EAAEiH,OAAO,GAAG,GAAG,GAAG9K,KAAK,CAAC;UACvD;UACAA,KAAK,IAAI,CAAC;QACd;QACA,IAAIuK,UAAU,EAAE;UACZlQ,MAAM,CAAC2Q,MAAM,CAACvN,YAAY,EAAE;YAAEW,KAAK,EAAE4B,KAAK,GAAG;UAAE,CAAC,CAAC;QACrD;QACA,OAAO+K,QAAQ;MACnB,CAAC;MACD,IAAI,CAACR,UAAU,EAAE;QACbC,cAAc,CAACvK,IAAI,CAAC2K,WAAW,CAACW,MAAM,CAACC,iBAAiB,CAACjO,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAACH,CAAC,GAAG,CAAC,EAAEG,QAAQ,CAAC,CAAC,CAAC,CAAC;MACjH,CAAC,MACI;QACDoN,WAAW,CAACW,MAAM,CAACC,iBAAiB,CAACjO,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAACH,CAAC,GAAG,CAAC,EAAEG,QAAQ,CAAC,CAAC,CAAC;MAC5F;IACJ,CAAC;IACD,IAAI+N,MAAM,GAAG,IAAI;IACjB,KAAK,IAAIlO,CAAC,GAAG,CAAC,EAAEsN,GAAG,GAAG,IAAI,CAACa,iBAAiB,CAACvO,MAAM,EAAEI,CAAC,GAAGsN,GAAG,EAAEtN,CAAC,EAAE,EAAE;MAC/DqN,OAAO,CAACrN,CAAC,EAAEsN,GAAG,CAAC;IACnB;IACA,IAAIJ,UAAU,EAAE;MACZ,IAAI,CAACnN,iBAAiB,GAAGqN,WAAW;MACpC,OAAOA,WAAW;IACtB,CAAC,MACI;MACD,OAAOD,cAAc;IACzB;EACJ,CAAC;EACDjP,YAAY,CAACK,SAAS,CAACoM,wBAAwB,GAAG,YAAY;IAC1D,IAAIrK,QAAQ,GAAG,IAAI,CAACP,iBAAiB,CAAC,IAAI,CAAC5B,MAAM,CAACsD,aAAa,CAAC+B,UAAU,CAAC;IAC3E,IAAI4K,gBAAgB,GAAG,EAAE;IACzB,IAAIC,OAAO,GAAG,SAAAA,CAAUrO,CAAC,EAAEsN,GAAG,EAAE;MAC5B,IAAIgB,aAAa,GAAGC,MAAM,CAACnQ,kBAAkB,CAAC8B,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MACzE,IAAIqO,YAAY,GAAGF,aAAa,CAAChJ,UAAU,CAACmJ,MAAM,CAAC,UAAUxO,OAAO,EAAE;QAClE,OAAOA,OAAO,CAACqO,aAAa,CAACzI,OAAO,CAAC,KAAKvF,QAAQ,CAACwN,UAAU,CAAC5N,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MAC7F,CAAC,CAAC;MACF,IAAI0N,YAAY,GAAG3Q,aAAa,CAAC,KAAK,EAAE;QAAEyB,SAAS,EAAEZ,GAAG,CAAC2Q;MAAc,CAAC,CAAC;MACzEH,MAAM,CAACpQ,MAAM,CAACwQ,QAAQ,CAACH,YAAY,CAAC,CAAC,CAAC,CAACF,aAAa,CAAC9J,SAAS,CAAC,EAAEqJ,YAAY,CAAC;MAC9EO,gBAAgB,CAACxL,IAAI,CAACiL,YAAY,CAAC;MACnC,IAAIe,SAAS,GAAG1R,aAAa,CAAC,KAAK,EAAE;QAAEyB,SAAS,EAAE;MAAsB,CAAC,CAAC;MAC1EyP,gBAAgB,CAACxL,IAAI,CAACgM,SAAS,CAAC;IACpC,CAAC;IACD,IAAIL,MAAM,GAAG,IAAI;IACjB,KAAK,IAAIvO,CAAC,GAAG,CAAC,EAAEsN,GAAG,GAAGhN,QAAQ,CAACwN,UAAU,CAAClO,MAAM,EAAEI,CAAC,GAAGsN,GAAG,EAAEtN,CAAC,EAAE,EAAE;MAC5DqO,OAAO,CAACrO,CAAC,EAAEsN,GAAG,CAAC;IACnB;IACAc,gBAAgB,CAACS,GAAG,CAAC,CAAC;IACtB,IAAIzI,MAAM,GAAI,IAAI,CAACjI,MAAM,CAACmM,WAAW,KAAK,aAAa,GAAI,IAAI,CAACnM,MAAM,CAACmD,UAAU,CAACiJ,QAAQ,CAAC,CAAC,GAAG,IAAI,CAACpM,MAAM,CAACoB,OAAO;IAClH,IAAIuP,aAAa,GAAG1I,MAAM,CAACpE,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACsM,oBAAoB,CAAC;IACxEpM,IAAI,CAAC8Q,cAAc,CAACD,aAAa,CAAC;IAClC,KAAK,IAAI1H,EAAE,GAAG,CAAC,EAAE4H,kBAAkB,GAAGZ,gBAAgB,EAAEhH,EAAE,GAAG4H,kBAAkB,CAACpP,MAAM,EAAEwH,EAAE,EAAE,EAAE;MAC1F,IAAI6H,MAAM,GAAGD,kBAAkB,CAAC5H,EAAE,CAAC;MACnC0H,aAAa,CAAC1P,WAAW,CAAC6P,MAAM,CAAC;IACrC;IACA,IAAI,IAAI,CAAClP,iBAAiB,CAACH,MAAM,KAAK,CAAC,EAAE;MACrCxC,QAAQ,CAAC,CAAC,IAAI,CAACe,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACoM,aAAa,CAAC,CAAC,EAAEpM,GAAG,CAACmR,aAAa,CAAC;IAC7F;EACJ,CAAC;EACD;EACAhR,YAAY,CAACK,SAAS,CAACqM,SAAS,GAAG,UAAUjE,KAAK,EAAE;IAChD,IAAI,IAAI,CAACxI,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACkN,mBAAmB,CAAC,CAACxN,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACoR,UAAU,CAAC,EAAE;MACrG,IAAI,CAAC/C,SAAS,CAAC/F,IAAI,CAAC,CAAC;MACrB/I,WAAW,CAAC,CAAC,IAAI,CAACwN,YAAY,CAAC,EAAE/M,GAAG,CAACqR,YAAY,CAAC;IACtD,CAAC,MACI;MACD,IAAIC,SAAS,GAAG,EAAE,CAAC1O,KAAK,CAACC,IAAI,CAAC,IAAI,CAACwK,WAAW,CAAC7L,OAAO,CAAC0H,gBAAgB,CAAC,gCAAgC,CAAC,CAAC;MAC1G3J,WAAW,CAAC+R,SAAS,EAAE,UAAU,CAAC;MAClCjS,QAAQ,CAAC,CAACiS,SAAS,CAAC,IAAI,CAAClR,MAAM,CAACsD,aAAa,CAAC+B,UAAU,CAAC,CAAC,EAAE,UAAU,CAAC;MACvE,IAAI,CAAC4I,SAAS,CAACkD,IAAI,CAAC,CAAC;MACrBlS,QAAQ,CAAC,CAAC,IAAI,CAAC0N,YAAY,CAAC,EAAE/M,GAAG,CAACqR,YAAY,CAAC;IACnD;EACJ,CAAC;EACDlR,YAAY,CAACK,SAAS,CAACgR,qBAAqB,GAAG,UAAU/L,UAAU,EAAE;IACjE,IAAI,IAAI,CAACzD,iBAAiB,IAAIyD,UAAU,GAAG,CAAC,CAAC,IAAIA,UAAU,GAAG,IAAI,CAACzD,iBAAiB,CAACH,MAAM,EAAE;MACzF,IAAI,CAAC4P,aAAa,CAAChM,UAAU,CAAC;IAClC;EACJ,CAAC;EACDtF,YAAY,CAACK,SAAS,CAACsN,aAAa,GAAG,UAAUlF,KAAK,EAAE;IACpD,IAAI,CAACA,KAAK,CAAC8I,IAAI,CAAChS,SAAS,CAACoJ,QAAQ,CAAC,aAAa,CAAC,EAAE;MAC/C,IAAI,CAACuF,SAAS,CAAC/F,IAAI,CAAC,CAAC;MACrB/I,WAAW,CAAC,CAAC,IAAI,CAACwN,YAAY,CAAC,EAAE/M,GAAG,CAACqR,YAAY,CAAC;MAClD,IAAIC,SAAS,GAAG,EAAE,CAAC1O,KAAK,CAACC,IAAI,CAAC,IAAI,CAACwK,WAAW,CAAC7L,OAAO,CAAC0H,gBAAgB,CAAC,gCAAgC,CAAC,CAAC;MAC1G,IAAIzD,UAAU,GAAG6L,SAAS,CAAC9L,OAAO,CAACoD,KAAK,CAAC8I,IAAI,CAAC;MAC9C,IAAI,CAACD,aAAa,CAAChM,UAAU,EAAEmD,KAAK,CAAC;MACrCA,KAAK,CAACA,KAAK,CAAC+I,cAAc,CAAC,CAAC;IAChC;EACJ,CAAC;EACDxR,YAAY,CAACK,SAAS,CAACiR,aAAa,GAAG,UAAUhM,UAAU,EAAEmD,KAAK,EAAE;IAChE,IAAIV,KAAK,GAAG,IAAI;IAChB,IAAI5G,IAAI,GAAG;MAAEqH,MAAM,EAAE,KAAK;MAAEC,KAAK,EAAGA,KAAK,GAAIA,KAAK,CAACA,KAAK,GAAG,IAAI;MAAEnD,UAAU,EAAEA,UAAU;MAAEoD,WAAW,EAAE;IAAiB,CAAC;IACxH,IAAI,CAACzI,MAAM,CAACqB,OAAO,CAACxB,MAAM,CAAC8I,WAAW,EAAEzH,IAAI,EAAE,UAAU0H,UAAU,EAAE;MAChE,IAAI,CAACA,UAAU,CAACL,MAAM,EAAE;QACpBT,KAAK,CAAC9H,MAAM,CAACsD,aAAa,CAAC+B,UAAU,GAAGuD,UAAU,CAACvD,UAAU;QAC7DyC,KAAK,CAAC9H,MAAM,CAACwR,YAAY,CAACC,MAAM,CAAC3J,KAAK,CAAC9H,MAAM,CAACmM,WAAW,CAAC;QAC1DjL,IAAI,GAAG;UACHqH,MAAM,EAAE,KAAK;UAAEC,KAAK,EAAGA,KAAK,GAAIA,KAAK,CAACA,KAAK,GAAG,IAAI;UAAEnD,UAAU,EAAEyC,KAAK,CAAC9H,MAAM,CAACsD,aAAa,CAAC+B,UAAU;UAAEoD,WAAW,EAAE;QACxH,CAAC;QACDX,KAAK,CAAC9H,MAAM,CAAC0R,kBAAkB,GAAG5J,KAAK,CAAC9H,MAAM,CAACsD,aAAa,CAAC+B,UAAU;QACvEyC,KAAK,CAAC9H,MAAM,CAACqB,OAAO,CAACxB,MAAM,CAAC8J,cAAc,EAAEzI,IAAI,CAAC;MACrD;IACJ,CAAC,CAAC;EACN,CAAC;EACDnB,YAAY,CAACK,SAAS,CAACuO,aAAa,GAAG,UAAUzN,IAAI,EAAE;IACnD,IAAI7B,OAAO,CAAC6B,IAAI,CAACsH,KAAK,CAACP,MAAM,EAAE,GAAG,GAAGrI,GAAG,CAACkN,mBAAmB,CAAC,EAAE;MAC3D;IACJ;IACA,IAAID,WAAW,GAAG,IAAI,CAAC7M,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACkN,mBAAmB,CAAC;IAClF,IAAID,WAAW,IAAIA,WAAW,CAACvN,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACoR,UAAU,CAAC,EAAE;MAC/D,IAAI,CAAC/C,SAAS,CAAC/F,IAAI,CAAC,CAAC;MACrB/I,WAAW,CAAC,CAAC,IAAI,CAACwN,YAAY,CAAC,EAAE/M,GAAG,CAACqR,YAAY,CAAC;IACtD;EACJ,CAAC;EACDlR,YAAY,CAACK,SAAS,CAACuR,iBAAiB,GAAG,UAAUC,UAAU,EAAE;IAC7D,IAAI9J,KAAK,GAAG,IAAI;IAChB,IAAI,CAAC9H,MAAM,CAAC6R,WAAW,CAAC,CAAC;IACzB,IAAIC,QAAQ,GAAG,EAAE;IACjB,KAAK,IAAI7I,EAAE,GAAG,CAAC,EAAE4G,EAAE,GAAG,IAAI,CAAC7P,MAAM,CAAC2D,SAAS,EAAEsF,EAAE,GAAG4G,EAAE,CAACpO,MAAM,EAAEwH,EAAE,EAAE,EAAE;MAC/D,IAAI9G,QAAQ,GAAG0N,EAAE,CAAC5G,EAAE,CAAC;MACrB,IAAI8I,UAAU,GAAG,IAAIpS,IAAI,CAAC,IAAI,CAACK,MAAM,EAAEmC,QAAQ,CAACgF,UAAU,EAAEhF,QAAQ,CAACoF,KAAK,CAAC;MAC3EuK,QAAQ,CAACrN,IAAI,CAACsN,UAAU,CAACC,OAAO,CAACD,UAAU,CAACE,aAAa,CAAC,CAAC,CAAC,CAAC;IACjE;IACAC,OAAO,CAACC,GAAG,CAACL,QAAQ,CAAC,CAACM,IAAI,CAAC,UAAUvK,CAAC,EAAE;MAAE,OAAOC,KAAK,CAACuK,kBAAkB,CAACxK,CAAC,EAAE+J,UAAU,CAAC;IAAE,CAAC,CAAC,CACvFU,KAAK,CAAC,UAAUzK,CAAC,EAAE;MAAE,OAAOC,KAAK,CAAC9H,MAAM,CAACuS,UAAU,CAACC,kBAAkB,CAAC3K,CAAC,CAAC;IAAE,CAAC,CAAC;EACtF,CAAC;EACD9H,YAAY,CAACK,SAAS,CAACiS,kBAAkB,GAAG,UAAUxK,CAAC,EAAE+J,UAAU,EAAE;IACjE,IAAI,CAAC,IAAI,CAAC5R,MAAM,IAAI,IAAI,CAACA,MAAM,IAAI,IAAI,CAACA,MAAM,CAACyS,WAAW,EAAE;MACxD;IACJ;IACA,IAAI,CAACzS,MAAM,CAACC,kBAAkB,GAAG,EAAE;IACnC,KAAK,IAAI4B,CAAC,GAAG,CAAC,EAAE6Q,QAAQ,GAAG7K,CAAC,CAACpG,MAAM,EAAEI,CAAC,GAAG6Q,QAAQ,EAAE7Q,CAAC,EAAE,EAAE;MACpD,IAAIM,QAAQ,GAAG,IAAI,CAACnC,MAAM,CAAC2D,SAAS,CAAC5B,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MAChE,IAAI2Q,WAAW,GAAG,IAAI,CAACC,gBAAgB,CAACzQ,QAAQ,EAAE0F,CAAC,CAAC9F,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC6Q,MAAM,CAAC;MACvF,IAAI,CAAC7S,MAAM,CAACC,kBAAkB,CAACwE,IAAI,CAACkO,WAAW,CAAC;IACpD;IACA,IAAI,CAACG,aAAa,CAAClB,UAAU,CAAC;EAClC,CAAC;EACD7R,YAAY,CAACK,SAAS,CAACwS,gBAAgB,GAAG,UAAUzQ,QAAQ,EAAEF,YAAY,EAAE;IACxE,IAAI0Q,WAAW,GAAG;MACdI,KAAK,EAAE5Q,QAAQ,CAAC4Q,KAAK;MACrBC,KAAK,EAAE7Q,QAAQ,CAAC6Q,KAAK;MACrBvN,IAAI,EAAEtD,QAAQ,CAACsD,IAAI;MACnBwN,aAAa,EAAE9Q,QAAQ,CAAC8Q,aAAa;MACrC9L,UAAU,EAAElF,YAAY,IAAIE,QAAQ,CAACgF,UAAU;MAC/CO,OAAO,EAAEvF,QAAQ,CAACuF,OAAO;MACzBrB,SAAS,EAAElE,QAAQ,CAACkE,SAAS;MAC7BoB,YAAY,EAAEtF,QAAQ,CAACsF,YAAY;MACnCyL,UAAU,EAAE/Q,QAAQ,CAAC+Q,UAAU;MAC/BC,cAAc,EAAEhR,QAAQ,CAACgR,cAAc;MACvCC,YAAY,EAAEjR,QAAQ,CAACiR,YAAY;MACnCC,aAAa,EAAElR,QAAQ,CAACkR,aAAa;MACrC/Q,aAAa,EAAEH,QAAQ,CAACG,aAAa;MACrCgR,aAAa,EAAEnR,QAAQ,CAACmR;IAC5B,CAAC;IACD,OAAOX,WAAW;EACtB,CAAC;EACD5S,YAAY,CAACK,SAAS,CAAC0S,aAAa,GAAG,UAAUlB,UAAU,EAAE;IACzD,IAAI9S,iBAAiB,CAAC,IAAI,CAACkB,MAAM,CAACsD,aAAa,CAAC+B,UAAU,CAAC,IAAI,CAAE,IAAI,CAACrF,MAAM,CAACuT,iBAAkB,EAAE;MAC7F,IAAI,CAACvT,MAAM,CAACsD,aAAa,CAAC+B,UAAU,GAAG,CAAC;IAC5C;IACA,IAAI,CAACrF,MAAM,CAACwT,cAAc,CAAC5B,UAAU,CAAC;EAC1C,CAAC;EACD7R,YAAY,CAACK,SAAS,CAACqT,qBAAqB,GAAG,YAAY;IACvD,IAAIC,iBAAiB,GAAG,EAAE;IAC1B,IAAI,CAACzT,kBAAkB,GAAG,EAAE;IAC5B,IAAI,CAAC0T,UAAU,GAAG,IAAI;IACtB,IAAI,IAAI,CAAC3T,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAACC,SAAS,CAAClC,MAAM,GAAG,CAAC,EAAE;MAC1D,KAAK,IAAIwH,EAAE,GAAG,CAAC,EAAE4G,EAAE,GAAG,IAAI,CAAC7P,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAACC,SAAS,EAAEsF,EAAE,GAAG4G,EAAE,CAACpO,MAAM,EAAEwH,EAAE,EAAE,EAAE;QACvF,IAAI9G,QAAQ,GAAG0N,EAAE,CAAC5G,EAAE,CAAC;QACrB,IAAI2K,OAAO,GAAG9T,IAAI,CAAC0F,eAAe,CAAC,IAAI,CAACxF,MAAM,CAACC,kBAAkB,EAAE,MAAM,EAAEkC,QAAQ,CAAC;QACpF,IAAIyR,OAAO,IAAI,CAAC,EAAE;UACdF,iBAAiB,CAACjP,IAAI,CAAC,IAAI,CAACzE,MAAM,CAACC,kBAAkB,CAAC8B,QAAQ,CAAC6R,OAAO,CAAC5R,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QAC5F;MACJ;IACJ,CAAC,MACI,IAAI,IAAI,CAAChC,MAAM,CAACC,kBAAkB,CAACwB,MAAM,GAAG,CAAC,EAAE;MAChDiS,iBAAiB,GAAG,IAAI,CAAC1T,MAAM,CAACC,kBAAkB;IACtD;IACA,IAAIoI,KAAK,GAAG,CAAC;IACb,KAAK,IAAIwL,EAAE,GAAG,CAAC,EAAEC,mBAAmB,GAAGJ,iBAAiB,EAAEG,EAAE,GAAGC,mBAAmB,CAACrS,MAAM,EAAEoS,EAAE,EAAE,EAAE;MAC7F,IAAI1R,QAAQ,GAAG2R,mBAAmB,CAACD,EAAE,CAAC;MACtC,IAAIlQ,SAAS,GAAG,IAAI,CAACiP,gBAAgB,CAACzQ,QAAQ,CAAC;MAC/C,IAAIA,QAAQ,CAACsD,IAAI,KAAK,IAAI,CAACzF,MAAM,CAAC+T,aAAa,CAACC,kBAAkB,EAAE;QAChE,IAAI,CAACL,UAAU,GAAGtL,KAAK;MAC3B;MACAA,KAAK,EAAE;MACP,IAAI,CAACpI,kBAAkB,CAACwE,IAAI,CAACd,SAAS,CAAC;IAC3C;IACA,IAAI7E,iBAAiB,CAAC,IAAI,CAAC6U,UAAU,CAAC,EAAE;MACpC,IAAI,CAACA,UAAU,GAAG,IAAI,CAAC1T,kBAAkB,CAACwB,MAAM,GAAG,CAAC;IACxD;EACJ,CAAC;EACD1B,YAAY,CAACK,SAAS,CAAC6T,sBAAsB,GAAG,UAAUC,UAAU,EAAEnF,UAAU,EAAE;IAC9E,IAAIjH,KAAK,GAAG,IAAI;IAChB,IAAInE,SAAS,GAAG,IAAI,CAAC1D,kBAAkB;IACvC,IAAIkU,YAAY,GAAG,EAAE;IACrB,IAAIC,eAAe,GAAG,EAAE;IACxB,IAAI1Q,KAAK,GAAG,SAAAA,CAAUC,SAAS,EAAE0E,KAAK,EAAEgM,YAAY,EAAEC,gBAAgB,EAAEC,SAAS,EAAE;MAC/E,IAAIC,OAAO,GAAG,EAAE;MAChB,IAAIrS,QAAQ,GAAGwB,SAAS,CAAC,CAAC,CAAC;MAC3B,IAAIxB,QAAQ,EAAE;QACV,IAAIrB,IAAI,GAAG,KAAK,CAAC;QACjB,IAAIwT,gBAAgB,IAAIxM,KAAK,CAAC9H,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAAC4D,SAAS,EAAE;UACpE,IAAImN,IAAI,GAAGH,gBAAgB,CAACD,YAAY,CAAC3M,OAAO,CAAC;UACjD5G,IAAI,GAAGqB,QAAQ,CAACgF,UAAU,CAACmJ,MAAM,CAAC,UAAUzI,CAAC,EAAE;YAC3C,OAAOA,CAAC,CAAC1F,QAAQ,CAACsF,YAAY,CAAC,KAAKgN,IAAI;UAC5C,CAAC,CAAC;QACN,CAAC,MACI;UACD3T,IAAI,GAAGqB,QAAQ,CAACgF,UAAU;QAC9B;QACA,KAAK,IAAItF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGf,IAAI,CAACW,MAAM,EAAEI,CAAC,EAAE,EAAE;UAClC,IAAI8N,UAAU,GAAG,EAAE;UACnB,IAAI4E,SAAS,IAAIA,SAAS,CAAC9S,MAAM,GAAG,CAAC,EAAE;YACnCkO,UAAU,GAAGA,UAAU,CAACd,MAAM,CAAC0F,SAAS,CAAC;UAC7C;UACA5E,UAAU,CAAClL,IAAI,CAAC3D,IAAI,CAACiB,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACuF,OAAO,CAAC,CAAC;UACnE,IAAIgN,KAAK,GAAGhR,KAAK,CAACC,SAAS,CAACnB,KAAK,CAAC,CAAC,CAAC,EAAE6F,KAAK,GAAG,CAAC,EAAElG,QAAQ,EAAErB,IAAI,CAACiB,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE2N,UAAU,CAAC;UACxG;UACA,IAAItH,KAAK,KAAK,CAAC,IAAIqM,KAAK,CAACjT,MAAM,KAAK,CAAC,IAAIqG,KAAK,CAAC7H,kBAAkB,CAACwB,MAAM,GAAG,CAAC,EAAE;YAC1E;UACJ;UACA,IAAIkT,OAAO,GAAG,EAAE;UAChB,IAAIC,WAAW,GAAG9M,KAAK,CAAC9H,MAAM,CAACmD,UAAU,CAACyR,WAAW;UACrD,IAAIC,WAAW,GAAG,KAAK,CAAC;UACxB,IAAI,CAAC/M,KAAK,CAAC9H,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAACoR,MAAM,IAAIzM,KAAK,GAAG,CAAC,KAAKP,KAAK,CAAC7H,kBAAkB,CAACwB,MAAM,EAAE;YAC/F,IAAIsT,QAAQ,GAAGjU,IAAI,CAACiB,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACkR,aAAa,CAAC;YACvE,IAAI2B,YAAY,GAAGlU,IAAI,CAACiB,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACgR,cAAc,CAAC;YAC5E,IAAI8B,UAAU,GAAGnU,IAAI,CAACiB,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACiR,YAAY,CAAC;YACxE,IAAI2B,QAAQ,IAAIA,QAAQ,CAACtT,MAAM,GAAG,CAAC,EAAE;cACjCmT,WAAW,GAAG9M,KAAK,CAAC9H,MAAM,CAACmD,UAAU,CAAC+R,cAAc,CAACH,QAAQ,CAAC;cAC9DF,WAAW,GAAGE,QAAQ;cACtBJ,OAAO,GAAG7M,KAAK,CAAC9H,MAAM,CAACmD,UAAU,CAACgS,YAAY,CAACP,WAAW,EAAEG,QAAQ,CAAC;YACzE,CAAC,MACI;cACDF,WAAW,GAAG/M,KAAK,CAAC9H,MAAM,CAACY,iBAAiB,CAACmU,QAAQ;cACrDJ,OAAO,GAAGT,UAAU;YACxB;YACA,IAAIkB,SAAS,GAAGtN,KAAK,CAACuN,mBAAmB,CAACV,OAAO,EAAEK,YAAY,EAAEC,UAAU,EAAEtF,UAAU,CAAC;YACxFyE,eAAe,GAAGA,eAAe,CAACvF,MAAM,CAACuG,SAAS,CAAC;UACvD;UACA,IAAIE,WAAW,GAAGxU,IAAI,CAACiB,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACmR,aAAa,CAAC;UAC1E,IAAIiC,QAAQ,GAAG;YACXxU,IAAI,EAAE,gBAAgB;YAAEP,SAAS,EAAE,CAAC,kBAAkB,CAAC;YACvDgV,kBAAkB,EAAEnN,KAAK;YAAEsH,UAAU,EAAEA,UAAU;YACjDxN,QAAQ,EAAEA,QAAQ;YAAEF,YAAY,EAAEnB,IAAI,CAACiB,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YAClEyT,OAAO,EAAE3N,KAAK,CAAC9H,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAACoR,MAAM,GAAG,CAAC,GAAGH,OAAO,CAAClT,MAAM;YACzEmT,WAAW,EAAEA,WAAW;YAAEG,QAAQ,EAAEF,WAAW;YAAE3H,QAAQ,EAAEoI,WAAW;YACtE/H,KAAK,EAAEmH;UACX,CAAC;UACDF,OAAO,CAAC/P,IAAI,CAAC8Q,QAAQ,CAAC;QAC1B;QACA,IAAI,CAACpB,YAAY,CAACpS,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;UAC/CmS,YAAY,CAACpS,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,EAAE;QACrD;QACA,IAAIwS,OAAO,CAAC/S,MAAM,GAAG,CAAC,EAAE;UACpB0S,YAAY,CAACpS,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACyC,IAAI,CAAC+P,OAAO,CAAC;QAC9D;QACA,OAAOA,OAAO;MAClB;MACA,OAAO,EAAE;IACb,CAAC;IACD,IAAI,CAACxE,iBAAiB,GAAGtM,KAAK,CAACC,SAAS,EAAE,CAAC,CAAC;IAC5C,OAAQoL,UAAU,GAAI,EAAE,GAAG,IAAI,CAAC2G,oBAAoB,CAACvB,YAAY,EAAEC,eAAe,EAAEF,UAAU,CAAC;EACnG,CAAC;EACDnU,YAAY,CAACK,SAAS,CAACiV,mBAAmB,GAAG,UAAUT,WAAW,EAAEe,SAAS,EAAEC,OAAO,EAAEjG,UAAU,EAAE;IAChG,IAAIyF,SAAS,GAAGvW,MAAM,CAAC,EAAE,EAAE+V,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC;IACnD,KAAK,IAAI3L,EAAE,GAAG,CAAC,EAAE4M,WAAW,GAAGT,SAAS,EAAEnM,EAAE,GAAG4M,WAAW,CAACpU,MAAM,EAAEwH,EAAE,EAAE,EAAE;MACrE,IAAI6M,QAAQ,GAAGD,WAAW,CAAC5M,EAAE,CAAC;MAC9B,IAAI0M,SAAS,EAAE;QACXG,QAAQ,CAACH,SAAS,GAAG,IAAI,CAAC3V,MAAM,CAAC+V,eAAe,CAACJ,SAAS,CAAC;MAC/D;MACA,IAAIC,OAAO,EAAE;QACTE,QAAQ,CAACF,OAAO,GAAG,IAAI,CAAC5V,MAAM,CAAC+V,eAAe,CAACH,OAAO,CAAC;MAC3D;MACA,IAAIjG,UAAU,EAAE;QACZmG,QAAQ,CAACnG,UAAU,GAAGA,UAAU;MACpC;IACJ;IACA,OAAOyF,SAAS;EACpB,CAAC;EACDrV,YAAY,CAACK,SAAS,CAACsV,oBAAoB,GAAG,UAAUvB,YAAY,EAAEC,eAAe,EAAE4B,WAAW,EAAE;IAChG,IAAIC,YAAY,GAAG,EAAE;IACrB,KAAK,IAAIpU,CAAC,GAAGsS,YAAY,CAAC1S,MAAM,GAAG,CAAC,EAAEI,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC/C,IAAI0C,IAAI,GAAG,CAAC;MACZ,KAAK,IAAI0E,EAAE,GAAG,CAAC,EAAE4G,EAAE,GAAGsE,YAAY,CAACpS,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAEiH,EAAE,GAAG4G,EAAE,CAACpO,MAAM,EAAEwH,EAAE,EAAE,EAAE;QAClF,IAAIiN,kBAAkB,GAAGrG,EAAE,CAAC5G,EAAE,CAAC;QAC/B,KAAK,IAAI4K,EAAE,GAAG,CAAC,EAAEsC,oBAAoB,GAAGD,kBAAkB,EAAErC,EAAE,GAAGsC,oBAAoB,CAAC1U,MAAM,EAAEoS,EAAE,EAAE,EAAE;UAChG,IAAIuC,iBAAiB,GAAGD,oBAAoB,CAACtC,EAAE,CAAC;UAChD,IAAIM,YAAY,CAACtS,CAAC,GAAG,CAAC,CAAC,IAAIsS,YAAY,CAACtS,CAAC,GAAG,CAAC,CAAC,CAACJ,MAAM,GAAG,CAAC,EAAE;YACvD,IAAI4U,eAAe,GAAGlC,YAAY,CAACpS,QAAQ,CAAC,CAACF,CAAC,GAAG,CAAC,EAAEG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACD,QAAQ,CAACwC,IAAI,CAACvC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YACnG,IAAI,CAACqU,eAAe,EAAE;cAClB;YACJ;YACA,IAAIZ,OAAO,GAAG,CAAC;YACf,KAAK,IAAIa,EAAE,GAAG,CAAC,EAAEC,iBAAiB,GAAGF,eAAe,EAAEC,EAAE,GAAGC,iBAAiB,CAAC9U,MAAM,EAAE6U,EAAE,EAAE,EAAE;cACvF,IAAIE,cAAc,GAAGD,iBAAiB,CAACD,EAAE,CAAC;cAC1C,IAAI,CAAC,IAAI,CAACtW,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAAC4D,SAAS,IAAK,IAAI,CAACtH,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAAC4D,SAAS,IAChGkP,cAAc,CAACvU,YAAY,CAACuU,cAAc,CAACrU,QAAQ,CAACsF,YAAY,CAAC,KAC7D2O,iBAAiB,CAACnU,YAAY,CAACmU,iBAAiB,CAACjU,QAAQ,CAACuF,OAAO,CAAE,EAAE;gBACzE+N,OAAO,IAAIe,cAAc,CAACf,OAAO;cACrC;YACJ;YACAW,iBAAiB,CAACX,OAAO,GAAGA,OAAO;UACvC;UACAW,iBAAiB,CAAC/Q,UAAU,GAAGd,IAAI;UACnCA,IAAI,EAAE;UACN0R,YAAY,CAACG,iBAAiB,CAACZ,kBAAkB,CAAC,GAAGS,YAAY,CAACG,iBAAiB,CAACZ,kBAAkB,CAAC,IAAI,EAAE;UAC7GS,YAAY,CAACG,iBAAiB,CAACZ,kBAAkB,CAAC,CAAC/Q,IAAI,CAAC2R,iBAAiB,CAAC;QAC9E;MACJ;IACJ;IACA,IAAI,CAACxU,iBAAiB,GAAGqU,YAAY,CAACzT,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;IACxD,IAAI,CAAC,IAAI,CAACxC,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAACoR,MAAM,EAAE;MAC7C,IAAIzM,KAAK,GAAG,CAAC;MACb,KAAK,IAAIoO,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAAC9U,iBAAiB,EAAE6U,EAAE,GAAGC,EAAE,CAACjV,MAAM,EAAEgV,EAAE,EAAE,EAAE;QAChE,IAAIE,iBAAiB,GAAGD,EAAE,CAACD,EAAE,CAAC;QAC9B,KAAK,IAAI5U,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8U,iBAAiB,CAAClB,OAAO,EAAE5T,CAAC,EAAE,EAAE;UAChDuS,eAAe,CAACrS,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACqD,UAAU,GAAGsR,iBAAiB,CAACtR,UAAU;UACzFgD,KAAK,EAAE;QACX;MACJ;MACA4N,YAAY,CAACxR,IAAI,CAAC2P,eAAe,CAAC;MAClC,OAAO6B,YAAY;IACvB;IACA,IAAIW,gBAAgB,GAAG,EAAE;IACzB,IAAIC,MAAM,GAAGhY,MAAM,CAAC,EAAE,EAAEoX,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC;IACjD,IAAIa,WAAW,GAAG,EAAE;IACpB,IAAI,IAAI,CAAC9W,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAACqT,kBAAkB,EAAE;MACxD,IAAIC,aAAa,GAAG,EAAE;MACtB,IAAIC,SAAS,GAAG,CAAC;MACjB,IAAIC,OAAO,GAAG,SAAAA,CAAUC,UAAU,EAAE;QAChCC,MAAM,CAACjX,gBAAgB,CAAC4B,QAAQ,CAACkV,SAAS,CAACjV,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,EAAE;QAChE,IAAIqV,iBAAiB,GAAG,EAAE;QAC1B,IAAIC,OAAO,GAAG,SAAAA,CAAUjN,CAAC,EAAE;UACvB,IAAI0K,QAAQ,GAAGqC,MAAM,CAACxV,iBAAiB,CAACG,QAAQ,CAACsI,CAAC,CAACrI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,YAAY,CAACmV,MAAM,CAACxV,iBAAiB,CAACG,QAAQ,CAACsI,CAAC,CAACrI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACkR,aAAa,CAAC;UAC7J,IAAI,CAAC0B,QAAQ,EAAE;YACXA,QAAQ,GAAGqC,MAAM,CAACpX,MAAM,CAACY,iBAAiB,CAACmU,QAAQ;UACvD;UACA,IAAIA,QAAQ,CAAC3P,OAAO,CAAC+R,UAAU,CAACI,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;YACnD,IAAIC,OAAO,GAAG5Y,MAAM,CAAC,CAAC,CAAC,EAAEuY,MAAM,CAACxV,iBAAiB,CAACG,QAAQ,CAACsI,CAAC,CAACrI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;YAC1FyV,OAAO,CAACF,IAAI,GAAGJ,UAAU,CAACI,IAAI;YAC9BH,MAAM,CAACxV,iBAAiB,CAACG,QAAQ,CAACsI,CAAC,CAACrI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC+S,QAAQ,GAAGA,QAAQ;YACxE0C,OAAO,CAAC9B,SAAS,GAAGyB,MAAM,CAACpX,MAAM,CAAC+V,eAAe,CAAC0B,OAAO,CAACxV,YAAY,CAACwV,OAAO,CAACtV,QAAQ,CAACgR,cAAc,CAAC,CAAC,IACpGgE,UAAU,CAACxB,SAAS;YACxB8B,OAAO,CAAC7B,OAAO,GAAGwB,MAAM,CAACpX,MAAM,CAAC+V,eAAe,CAAC0B,OAAO,CAACxV,YAAY,CAACwV,OAAO,CAACtV,QAAQ,CAACiR,YAAY,CAAC,CAAC,IAChG+D,UAAU,CAACvB,OAAO;YACtBwB,MAAM,CAACjX,gBAAgB,CAAC4B,QAAQ,CAACkV,SAAS,CAACjV,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACyC,IAAI,CAACgT,OAAO,CAAC;YACzE,IAAIC,OAAO,GAAG,SAAAA,CAAUC,CAAC,EAAE;cACvB,IAAI,CAACN,iBAAiB,CAACtV,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;gBAChDqV,iBAAiB,CAACtV,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,EAAE;cACtD;cACA,IAAI2V,CAAC,KAAKF,OAAO,CAAC9H,UAAU,CAAClO,MAAM,GAAG,CAAC,EAAE;gBACrC,IAAI,CAACuV,aAAa,CAACjV,QAAQ,CAACsI,CAAC,CAACrI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;kBAC5CgV,aAAa,CAACjV,QAAQ,CAACsI,CAAC,CAACrI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,EAAE;gBAClD;gBACA,IAAI4V,WAAW,GAAGH,OAAO,CAAC7C,WAAW,CAACtE,MAAM,CAAC,UAAUlJ,CAAC,EAAE;kBAAE,OAAOA,CAAC,CAACoQ,MAAM,CAAC,CAAC,KAAKL,UAAU,CAACI,IAAI,CAACC,MAAM,CAAC,CAAC;gBAAE,CAAC,CAAC;gBAC9GR,aAAa,CAACjV,QAAQ,CAACsI,CAAC,CAACrI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAGgV,aAAa,CAACjV,QAAQ,CAACsI,CAAC,CAACrI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC6M,MAAM,CAAC+I,WAAW,CAAC;gBACzGP,iBAAiB,CAACtV,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACyC,IAAI,CAACgT,OAAO,CAAC;gBAC3D,OAAO,UAAU;cACrB;cACA,IAAII,YAAY,GAAGhB,MAAM,CAAC9U,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;cACrD,IAAI8V,gBAAgB,GAAGD,YAAY,CAACvH,MAAM,CAAC,UAAUxP,IAAI,EAAE;gBACvD,OAAOA,IAAI,CAACmB,YAAY,CAACnB,IAAI,CAACqB,QAAQ,CAACuF,OAAO,CAAC,KAAK+P,OAAO,CAAC9H,UAAU,CAAC5N,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;cACtG,CAAC,CAAC;cACF,IAAI8V,gBAAgB,IAAIA,gBAAgB,CAACrW,MAAM,GAAG,CAAC,EAAE;gBACjD,IAAIsW,eAAe,GAAGV,iBAAiB,CAACtV,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACsO,MAAM,CAAC,UAAUxP,IAAI,EAAE;kBACvF,OAAOA,IAAI,CAACmB,YAAY,CAACnB,IAAI,CAACqB,QAAQ,CAACuF,OAAO,CAAC,KAAK+P,OAAO,CAAC9H,UAAU,CAAC5N,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;gBACtG,CAAC,CAAC;gBACF,IAAI+V,eAAe,IAAIA,eAAe,CAACtW,MAAM,GAAG,CAAC,EAAE;kBAC/CsW,eAAe,CAAC,CAAC,CAAC,CAACtC,OAAO,IAAI,CAAC;gBACnC,CAAC,MACI;kBACD,IAAIuC,UAAU,GAAGnZ,MAAM,CAAC,CAAC,CAAC,EAAEiZ,gBAAgB,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;kBAC5DE,UAAU,CAACvC,OAAO,GAAG,CAAC;kBACtB4B,iBAAiB,CAACtV,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACyC,IAAI,CAACuT,UAAU,CAAC;gBAClE;cACJ;YACJ,CAAC;YACD,KAAK,IAAIL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,OAAO,CAAC9H,UAAU,CAAClO,MAAM,EAAEkW,CAAC,EAAE,EAAE;cAChDD,OAAO,CAACC,CAAC,CAAC;YACd;UACJ;QACJ,CAAC;QACD,KAAK,IAAItN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+M,MAAM,CAACxV,iBAAiB,CAACH,MAAM,EAAE4I,CAAC,EAAE,EAAE;UACtDiN,OAAO,CAACjN,CAAC,CAAC;QACd;QACA,IAAIgN,iBAAiB,CAAC5V,MAAM,GAAG,CAAC,EAAE;UAC9B,KAAK,IAAIwW,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGpB,MAAM,CAACpV,MAAM,EAAEwW,CAAC,EAAE,EAAE;YACpC,IAAI,CAACrB,gBAAgB,CAAC7U,QAAQ,CAACkW,CAAC,CAACjW,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;cAC/C4U,gBAAgB,CAAC7U,QAAQ,CAACkW,CAAC,CAACjW,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,EAAE;YACrD;YACA4U,gBAAgB,CAAC7U,QAAQ,CAACkW,CAAC,CAACjW,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG4U,gBAAgB,CAAC7U,QAAQ,CAACkW,CAAC,CAACjW,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC6M,MAAM,CAACwI,iBAAiB,CAACtV,QAAQ,CAACkW,CAAC,CAACjW,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;UACrJ;UACAmV,UAAU,CAAC1B,OAAO,GAAG4B,iBAAiB,CAACA,iBAAiB,CAAC5V,MAAM,GAAG,CAAC,CAAC,CAACA,MAAM;UAC3EqV,WAAW,CAACrS,IAAI,CAAC0S,UAAU,CAAC;QAChC;QACAF,SAAS,EAAE;MACf,CAAC;MACD,IAAIG,MAAM,GAAG,IAAI;MACjB,KAAK,IAAIc,EAAE,GAAG,CAAC,EAAEC,aAAa,GAAGnC,WAAW,EAAEkC,EAAE,GAAGC,aAAa,CAAC1W,MAAM,EAAEyW,EAAE,EAAE,EAAE;QAC3E,IAAIf,UAAU,GAAGgB,aAAa,CAACD,EAAE,CAAC;QAClChB,OAAO,CAACC,UAAU,CAAC;MACvB;MACA,IAAI,CAAChX,gBAAgB,GAAG,IAAI,CAACA,gBAAgB,CAACmQ,MAAM,CAAC,UAAUxP,IAAI,EAAE;QAAE,OAAOA,IAAI,CAACW,MAAM,GAAG,CAAC;MAAE,CAAC,CAAC;MACjG,IAAI,CAACG,iBAAiB,CAACwW,OAAO,CAAC,UAAUhR,CAAC,EAAEiB,KAAK,EAAE;QAC/C,IAAI2O,aAAa,CAACjV,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;UAC/CoF,CAAC,CAACwN,WAAW,GAAGoC,aAAa,CAACjV,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACqW,IAAI,CAAC,UAAUC,CAAC,EAAEC,CAAC,EAAE;YAAE,OAAOD,CAAC,CAACE,OAAO,CAAC,CAAC,GAAGD,CAAC,CAACC,OAAO,CAAC,CAAC;UAAE,CAAC,CAAC;QAC7H;MACJ,CAAC,CAAC;MACF5B,gBAAgB,CAAC6B,OAAO,CAAC3B,WAAW,CAAC;MACrC,OAAOF,gBAAgB;IAC3B;IACA,IAAI8B,WAAW,GAAG,CAAC;IACnB,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG/B,MAAM,CAAC,CAAC,CAAC,EAAE8B,EAAE,GAAGC,EAAE,CAACnX,MAAM,EAAEkX,EAAE,EAAE,EAAE;MACnD,IAAIE,UAAU,GAAGD,EAAE,CAACD,EAAE,CAAC;MACvBD,WAAW,IAAIG,UAAU,CAACpD,OAAO;IACrC;IACA,KAAK,IAAIqD,EAAE,GAAG,CAAC,EAAEC,aAAa,GAAG/C,WAAW,EAAE8C,EAAE,GAAGC,aAAa,CAACtX,MAAM,EAAEqX,EAAE,EAAE,EAAE;MAC3E,IAAI3B,UAAU,GAAG4B,aAAa,CAACD,EAAE,CAAC;MAClC3B,UAAU,CAAC1B,OAAO,GAAGiD,WAAW;MAChC5B,WAAW,CAACrS,IAAI,CAAC0S,UAAU,CAAC;MAC5B,IAAI6B,QAAQ,GAAGna,MAAM,CAAC,EAAE,EAAEgY,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC;MAC7C,KAAK,IAAIc,CAAC,GAAG,CAAC,EAAEsB,QAAQ,GAAGD,QAAQ,CAACvX,MAAM,EAAEkW,CAAC,GAAGsB,QAAQ,EAAEtB,CAAC,EAAE,EAAE;QAC3D,IAAIA,CAAC,KAAKqB,QAAQ,CAACvX,MAAM,GAAG,CAAC,EAAE;UAC3B,KAAK,IAAIyX,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAGH,QAAQ,CAACjX,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAEkX,EAAE,GAAGC,EAAE,CAAC1X,MAAM,EAAEyX,EAAE,EAAE,EAAE;YAC9E,IAAIE,KAAK,GAAGD,EAAE,CAACD,EAAE,CAAC;YAClBE,KAAK,CAAC7B,IAAI,GAAGJ,UAAU,CAACI,IAAI;YAC5B6B,KAAK,CAACrE,QAAQ,GAAGoC,UAAU,CAACpC,QAAQ;YACpCqE,KAAK,CAACzD,SAAS,GAAG,IAAI,CAAC3V,MAAM,CAAC+V,eAAe,CAACqD,KAAK,CAACnX,YAAY,CAACmX,KAAK,CAACjX,QAAQ,CAACgR,cAAc,CAAC,CAAC,IAC5FgE,UAAU,CAACxB,SAAS;YACxByD,KAAK,CAACxD,OAAO,GAAG,IAAI,CAAC5V,MAAM,CAAC+V,eAAe,CAACqD,KAAK,CAACnX,YAAY,CAACmX,KAAK,CAACjX,QAAQ,CAACiR,YAAY,CAAC,CAAC,IACxF+D,UAAU,CAACvB,OAAO;UAC1B;QACJ;QACA,IAAI,CAACgB,gBAAgB,CAAC7U,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;UAC/C4U,gBAAgB,CAAC7U,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,EAAE;QACrD;QACA4U,gBAAgB,CAAC7U,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG4U,gBAAgB,CAAC7U,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC6M,MAAM,CAACmK,QAAQ,CAACjX,QAAQ,CAAC4V,CAAC,CAAC3V,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;MAC5I;IACJ;IACA4U,gBAAgB,CAAC6B,OAAO,CAAC3B,WAAW,CAAC;IACrC,OAAOF,gBAAgB;EAC3B,CAAC;EACD7W,YAAY,CAACK,SAAS,CAACiZ,iBAAiB,GAAG,UAAUC,QAAQ,EAAEjU,UAAU,EAAE;IACvE,IAAIyC,KAAK,GAAG,IAAI;IAChB,IAAIyR,SAAS,GAAG,SAAAA,CAAUlR,KAAK,EAAE0K,KAAK,EAAErM,KAAK,EAAE;MAC3C,IAAIoB,KAAK,CAAC7H,kBAAkB,CAAC8B,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACiR,aAAa,IAAInL,KAAK,CAAC9H,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAAC8V,cAAc,EAAE;QAC/HF,QAAQ,CAAC,EAAE,GAAGvG,KAAK,CAAC,GAAG,CAACrM,KAAK,CAAC;MAClC,CAAC,MACI;QACD4S,QAAQ,CAAC,EAAE,GAAGvG,KAAK,CAAC,GAAGrM,KAAK;MAChC;IACJ,CAAC;IACD,IAAIrB,UAAU,KAAK,KAAK,CAAC,EAAE;MACvBA,UAAU,GAAG,IAAI,CAACrF,MAAM,CAACsD,aAAa,CAACC,eAAe,GAAG,IAAI,CAACvD,MAAM,CAACsD,aAAa,CAAC+B,UAAU,GACzF,IAAI,CAACrF,MAAM,CAACyZ,eAAe,CAACpU,UAAU;IAC9C;IACA,IAAI,IAAI,CAACrF,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAACC,SAAS,CAAClC,MAAM,GAAG,CAAC,IAAI,CAAC3C,iBAAiB,CAACuG,UAAU,CAAC,EAAE;MAC5F,IAAIsK,UAAU,GAAG,IAAI,CAAC/N,iBAAiB,CAACG,QAAQ,CAACsD,UAAU,CAACrD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC2N,UAAU;MACvF,KAAK,IAAItH,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAACpI,kBAAkB,CAACwB,MAAM,EAAE4G,KAAK,EAAE,EAAE;QACjEkR,SAAS,CAAClR,KAAK,EAAE,IAAI,CAACpI,kBAAkB,CAAC8B,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC+Q,KAAK,EAAEpD,UAAU,CAAC5N,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;MAC/H;IACJ,CAAC,MACI,IAAI,IAAI,CAAChC,MAAM,CAACC,kBAAkB,CAACwB,MAAM,GAAG,CAAC,EAAE;MAChD,KAAK,IAAI4G,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAACpI,kBAAkB,CAACwB,MAAM,EAAE4G,KAAK,EAAE,EAAE;QACjE,IAAIvH,IAAI,GAAG,IAAI,CAACb,kBAAkB,CAAC8B,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACmF,UAAU,CAAC,CAAC,CAAC;QAChF,IAAIrG,IAAI,EAAE;UACNyY,SAAS,CAAClR,KAAK,EAAE,IAAI,CAACpI,kBAAkB,CAAC8B,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC+Q,KAAK,EAAEjS,IAAI,CAAC,IAAI,CAACb,kBAAkB,CAAC8B,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC0F,OAAO,CAAC,CAAC;QAC1J;MACJ;IACJ;EACJ,CAAC;EACD3H,YAAY,CAACK,SAAS,CAACsZ,gBAAgB,GAAG,UAAUJ,QAAQ,EAAE3J,UAAU,EAAE;IACtE,IAAIgK,eAAe,GAAI,CAAC7a,iBAAiB,CAAC6Q,UAAU,CAAC,IACjD,IAAI,CAACgE,UAAU,GAAGhE,UAAU,CAAClO,MAAM,GAAG,CAAC,GAAIkO,UAAU,CAAClO,MAAM,GAAG,CAAC,GAAG,IAAI,CAACkS,UAAU;IACtF,IAAIxR,QAAQ,GAAG,IAAI,CAAClC,kBAAkB,CAAC8B,QAAQ,CAAC4X,eAAe,CAAC3X,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IAChF,IAAIlD,iBAAiB,CAAC6Q,UAAU,CAAC,IAAI,IAAI,CAAC3P,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAAC8V,cAAc,IAAIrX,QAAQ,CAAC8Q,aAAa,EAAE;MAC/G,OAAO2G,SAAS;IACpB;IACA,IAAIvM,EAAE,GAAGvO,iBAAiB,CAAC6Q,UAAU,CAAC,GAAG2J,QAAQ,CAACnX,QAAQ,CAAC4Q,KAAK,CAAC,GAAGpD,UAAU,CAAC5N,QAAQ,CAAC4X,eAAe,CAAC3X,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACxH,IAAIlB,IAAI,GAAG,IAAI,CAAC+Y,UAAU,CAAC1X,QAAQ,CAACgF,UAAU,EAAEhF,QAAQ,CAACuF,OAAO,EAAE2F,EAAE,CAAC;IACrE,IAAIvM,IAAI,CAACW,MAAM,GAAG,CAAC,EAAE;MACjB,OAAOX,IAAI,CAAC,CAAC,CAAC,CAACqB,QAAQ,CAAC+Q,UAAU,CAAC;IACvC;IACA,OAAO0G,SAAS;EACpB,CAAC;EACD7Z,YAAY,CAACK,SAAS,CAAC0Z,WAAW,GAAG,UAAUR,QAAQ,EAAE;IACrD,IAAInX,QAAQ,GAAG,IAAI,CAAClC,kBAAkB,CAACuC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnD,IAAI,IAAI,CAACxC,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAAC8V,cAAc,IAAIrX,QAAQ,CAAC8Q,aAAa,EAAE;MAC9E,OAAO2G,SAAS;IACpB;IACA,IAAI9Y,IAAI,GAAG,IAAI,CAAC+Y,UAAU,CAAC1X,QAAQ,CAACgF,UAAU,EAAEhF,QAAQ,CAACuF,OAAO,EAAE4R,QAAQ,CAACnX,QAAQ,CAAC4Q,KAAK,CAAC,CAAC;IAC3F,IAAIjS,IAAI,CAACW,MAAM,GAAG,CAAC,EAAE;MACjB,OAAOX,IAAI,CAAC,CAAC,CAAC,CAACqB,QAAQ,CAACmR,aAAa,CAAC;IAC1C;IACA,OAAOsG,SAAS;EACpB,CAAC;EACD7Z,YAAY,CAACK,SAAS,CAAC2Z,sBAAsB,GAAG,YAAY;IACxD;IACA,IAAIC,aAAa,GAAG,EAAE,CAACnL,MAAM,CAACoL,KAAK,CAAC,EAAE,EAAE,IAAI,CAACrY,iBAAiB,CAACsY,GAAG,CAAC,UAAUrS,CAAC,EAAE;MAAE,OAAOA,CAAC,CAAC+M,WAAW;IAAE,CAAC,CAAC,CAAC;IAC3G,IAAIuF,IAAI,GAAGH,aAAa,CAACE,GAAG,CAAC,UAAUE,OAAO,EAAE;MAAE,OAAOA,OAAO,CAAC5B,OAAO,CAAC,CAAC;IAAE,CAAC,CAAC;IAC9E,IAAI6B,oBAAoB,GAAG,SAAAA,CAAUC,QAAQ,EAAE;MAAE,OAAOA,QAAQ,CAAChK,MAAM,CAAC,UAAUiH,IAAI,EAAElP,KAAK,EAAE;QAC3F,OAAO8R,IAAI,CAAC/U,OAAO,CAACmS,IAAI,CAACiB,OAAO,CAAC,CAAC,CAAC,KAAKnQ,KAAK;MACjD,CAAC,CAAC;IAAE,CAAC;IACL,IAAIuM,WAAW,GAAGyF,oBAAoB,CAACL,aAAa,CAAC;IACrDpF,WAAW,CAACyD,IAAI,CAAC,UAAUC,CAAC,EAAEC,CAAC,EAAE;MAAE,OAAOD,CAAC,CAACE,OAAO,CAAC,CAAC,GAAGD,CAAC,CAACC,OAAO,CAAC,CAAC;IAAE,CAAC,CAAC;IACvE,OAAO5D,WAAW;EACtB,CAAC;EACD7U,YAAY,CAACK,SAAS,CAACyZ,UAAU,GAAG,UAAU1S,UAAU,EAAE4L,KAAK,EAAErM,KAAK,EAAE;IACpE,OAAOS,UAAU,CAACmJ,MAAM,CAAC,UAAUxP,IAAI,EAAE;MAAE,OAAOA,IAAI,CAAC,EAAE,GAAGiS,KAAK,CAAC,KAAKrM,KAAK;IAAE,CAAC,CAAC;EACpF,CAAC;EACD3G,YAAY,CAACK,SAAS,CAACma,eAAe,GAAG,UAAUjB,QAAQ,EAAEjR,KAAK,EAAEmS,cAAc,EAAE;IAChF,IAAI,IAAI,CAACxa,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAAC8V,cAAc,EAAE;MACpD,IAAI7G,WAAW,GAAG,CAAC,CAAC;MACpB,KAAK,IAAI1J,EAAE,GAAG,CAAC,EAAEwR,gBAAgB,GAAGD,cAAc,EAAEvR,EAAE,GAAGwR,gBAAgB,CAAChZ,MAAM,EAAEwH,EAAE,EAAE,EAAE;QACpF,IAAI5D,UAAU,GAAGoV,gBAAgB,CAACxR,EAAE,CAAC;QACrC,IAAIkH,aAAa,GAAG,IAAI,CAACvO,iBAAiB,CAACG,QAAQ,CAACsD,UAAU,CAACrD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC2N,UAAU;QAC1F,KAAK,IAAI+K,KAAK,GAAG,CAAC,EAAEC,QAAQ,GAAGxK,aAAa,CAAC1O,MAAM,EAAEiZ,KAAK,GAAGC,QAAQ,EAAED,KAAK,EAAE,EAAE;UAC5E,IAAIE,SAAS,GAAG,IAAI,CAAC3a,kBAAkB,CAAC8B,QAAQ,CAAC2Y,KAAK,CAAC1Y,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC+Q,KAAK;UAC7E,IAAIjU,iBAAiB,CAAC6T,WAAW,CAAC,EAAE,GAAGiI,SAAS,CAAC,CAAC,EAAE;YAChDjI,WAAW,CAAC,EAAE,GAAGiI,SAAS,CAAC,GAAG,EAAE;UACpC;UACAjI,WAAW,CAAC,EAAE,GAAGiI,SAAS,CAAC,CAACnW,IAAI,CAAC0L,aAAa,CAACpO,QAAQ,CAAC2Y,KAAK,CAAC1Y,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACnF;MACJ;MACAsX,QAAQ,GAAGza,MAAM,CAACya,QAAQ,EAAE3G,WAAW,CAAC;IAC5C,CAAC,MACI;MACD,KAAK,IAAI+H,KAAK,GAAG,CAAC,EAAEG,QAAQ,GAAG,IAAI,CAAC5a,kBAAkB,CAACwB,MAAM,EAAEiZ,KAAK,GAAGG,QAAQ,EAAEH,KAAK,EAAE,EAAE;QACtF,IAAI,IAAI,CAAC9Y,iBAAiB,CAACG,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;UACxDsX,QAAQ,CAAC,IAAI,CAACrZ,kBAAkB,CAAC8B,QAAQ,CAAC2Y,KAAK,CAAC1Y,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC+Q,KAAK,CAAC,GAAG,IAAI,CAACnR,iBAAiB,CAACG,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC2N,UAAU,CAAC5N,QAAQ,CAAC2Y,KAAK,CAAC1Y,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAC/K;MACJ;IACJ;EACJ,CAAC;EACDjC,YAAY,CAACK,SAAS,CAAC0a,WAAW,GAAG,UAAUnX,SAAS,EAAE8B,IAAI,EAAE4C,KAAK,EAAE;IACnE,IAAIpI,kBAAkB,GAAI0D,SAAS,YAAYoX,KAAK,GAAIpX,SAAS,GAAG,CAACA,SAAS,CAAC;IAC/E,IAAIqX,OAAO,GAAG,SAAAA,CAAU7Y,QAAQ,EAAE;MAC9B,IAAIA,QAAQ,CAACsD,IAAI,KAAKA,IAAI,EAAE;QACxBxF,kBAAkB,CAACmY,OAAO,CAAC,UAAU6C,MAAM,EAAEpZ,CAAC,EAAE;UAC5C,OAAO,IAAItC,WAAW,CAAC;YAAE2b,IAAI,EAAE/Y,QAAQ,CAACgF;UAAW,CAAC,CAAC,CAACgU,MAAM,CAACF,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE5S,KAAK,GAAGxG,CAAC,CAAC;QAC/F,CAAC,CAAC;QACF,OAAO,OAAO;MAClB;IACJ,CAAC;IACD,KAAK,IAAIoH,EAAE,GAAG,CAAC,EAAE4G,EAAE,GAAG,IAAI,CAAC7P,MAAM,CAACC,kBAAkB,EAAEgJ,EAAE,GAAG4G,EAAE,CAACpO,MAAM,EAAEwH,EAAE,EAAE,EAAE;MACxE,IAAI9G,QAAQ,GAAG0N,EAAE,CAAC5G,EAAE,CAAC;MACrB,IAAImS,OAAO,GAAGJ,OAAO,CAAC7Y,QAAQ,CAAC;MAC/B,IAAIiZ,OAAO,KAAK,OAAO,EACnB;IACR;IACA,IAAI,CAACtI,aAAa,CAAC,IAAI,CAAC;EAC5B,CAAC;EACD/S,YAAY,CAACK,SAAS,CAACib,cAAc,GAAG,UAAU5L,UAAU,EAAEhK,IAAI,EAAE;IAChE,IAAIxF,kBAAkB,GAAIwP,UAAU,YAAYsL,KAAK,GAAItL,UAAU,GAAG,CAACA,UAAU,CAAC;IAClF,IAAI6L,OAAO,GAAG,SAAAA,CAAUnZ,QAAQ,EAAE;MAC9B,IAAIA,QAAQ,CAACsD,IAAI,KAAKA,IAAI,EAAE;QACxBxF,kBAAkB,CAACmY,OAAO,CAAC,UAAUmD,SAAS,EAAE;UAC5C,OAAO,IAAIhc,WAAW,CAAC;YAAE2b,IAAI,EAAE/Y,QAAQ,CAACgF;UAAW,CAAC,CAAC,CAAC/H,MAAM,CAAC+C,QAAQ,CAACuF,OAAO,EAAE6T,SAAS,CAAC;QAC7F,CAAC,CAAC;QACF,OAAO,OAAO;MAClB;IACJ,CAAC;IACD,KAAK,IAAItS,EAAE,GAAG,CAAC,EAAE4G,EAAE,GAAG,IAAI,CAAC7P,MAAM,CAACC,kBAAkB,EAAEgJ,EAAE,GAAG4G,EAAE,CAACpO,MAAM,EAAEwH,EAAE,EAAE,EAAE;MACxE,IAAI9G,QAAQ,GAAG0N,EAAE,CAAC5G,EAAE,CAAC;MACrB,IAAIuS,OAAO,GAAGF,OAAO,CAACnZ,QAAQ,CAAC;MAC/B,IAAIqZ,OAAO,KAAK,OAAO,EACnB;IACR;IACA,IAAI,CAAC1I,aAAa,CAAC,IAAI,CAAC;EAC5B,CAAC;EACD/S,YAAY,CAACK,SAAS,CAACqb,sBAAsB,GAAG,UAAUpO,EAAE,EAAE5H,IAAI,EAAExD,YAAY,EAAEuG,KAAK,EAAEkT,WAAW,EAAE;IAClGjW,IAAI,GAAGA,IAAI,IAAI,IAAI,CAACzF,MAAM,CAACC,kBAAkB,CAACuC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACiD,IAAI;IAC/D,IAAI3G,iBAAiB,CAACmD,YAAY,CAAC,EAAE;MACjCA,YAAY,GAAG,IAAI,CAAChC,kBAAkB,CAACqQ,MAAM,CAAC,UAAUzI,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACpC,IAAI,KAAKA,IAAI;MAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1F,IAAI3G,iBAAiB,CAACmD,YAAY,CAAC,EAAE;QACjC,OAAO,IAAI;MACf;IACJ;IACA,IAAIE,QAAQ,GAAGF,YAAY,CAACkF,UAAU,CAACmJ,MAAM,CAAC,UAAUzI,CAAC,EAAE;MACvD,IAAIW,KAAK,IAAIX,CAAC,CAAC5F,YAAY,CAACyF,OAAO,CAAC,KAAK2F,EAAE,EAAE;QACzC,IAAIxF,CAAC,CAAC5F,YAAY,CAACwF,YAAY,CAAC,KAAKe,KAAK,CAAC,EAAE,GAAGkT,WAAW,CAAC,EAAE;UAC1D,OAAO7T,CAAC,CAAC5F,YAAY,CAACyF,OAAO,CAAC,KAAK2F,EAAE;QACzC;QACA,OAAO,IAAI;MACf,CAAC,MACI;QACD,OAAOxF,CAAC,CAAC5F,YAAY,CAACyF,OAAO,CAAC,KAAK2F,EAAE;MACzC;IACJ,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,OAAQ,IAAI,CAACzL,iBAAiB,CAACsY,GAAG,CAAC,UAAUrS,CAAC,EAAE;MAAE,OAAOA,CAAC,CAAC5F,YAAY;IAAE,CAAC,CAAC,CAACmD,OAAO,CAACjD,QAAQ,CAAC;EACjG,CAAC;EACDpC,YAAY,CAACK,SAAS,CAACub,cAAc,GAAG,UAAUtO,EAAE,EAAE5H,IAAI,EAAEyC,IAAI,EAAE;IAC9D,IAAI/F,QAAQ,GAAG,IAAI,CAACnC,MAAM,CAACC,kBAAkB,CAACqQ,MAAM,CAAC,UAAUzI,CAAC,EAAE;MAC9D,IAAIA,CAAC,CAACpC,IAAI,KAAKA,IAAI,EAAE;QACjB,OAAOoC,CAAC;MACZ;MACA,OAAO,IAAI;IACf,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,IAAIQ,KAAK,GAAG,CAAC;IACb,IAAIpG,YAAY,GAAGE,QAAQ,CAACgF,UAAU,CAACmJ,MAAM,CAAC,UAAUzI,CAAC,EAAE;MAAE,OAAOA,CAAC,CAAC1F,QAAQ,CAACuF,OAAO,CAAC,KAAK2F,EAAE;IAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACrG,IAAI,CAAC,IAAI,CAACrN,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAAC4D,SAAS,EAAE;MAChDe,KAAK,GAAG,IAAI,CAACoT,sBAAsB,CAACpO,EAAE,EAAE5H,IAAI,EAAEtD,QAAQ,CAAC;IAC3D,CAAC,MACI;MACDkG,KAAK,GAAG,IAAI,CAACzG,iBAAiB,CAACsY,GAAG,CAAC,UAAUrS,CAAC,EAAE;QAAE,OAAOA,CAAC,CAAC5F,YAAY;MAAE,CAAC,CAAC,CAACmD,OAAO,CAACnD,YAAY,CAAC;IACrG;IACA,IAAIgG,MAAM,GAAG,IAAI,CAACjI,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACqD,0BAA0B,GAAG,GAAG,IAAI,sBAAsB,GAAGoF,KAAK,GAAG,KAAK,CAAC,GAChI,GAAG,GAAG,GAAG,GAAGzI,GAAG,CAACmG,wBAAwB,CAAC;IAC7C,IAAIkC,MAAM,EAAE;MACR,IAAIA,MAAM,CAAC3I,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACiG,qBAAqB,CAAC,IAAI,CAACqC,IAAI,EAAE;QAC/DD,MAAM,CAAC2T,KAAK,CAAC,CAAC;MAClB,CAAC,MACI,IAAI3T,MAAM,CAAC3I,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACgG,uBAAuB,CAAC,IAAIsC,IAAI,EAAE;QACrED,MAAM,CAAC2T,KAAK,CAAC,CAAC;MAClB;IACJ;EACJ,CAAC;EACD7b,YAAY,CAACK,SAAS,CAACyb,cAAc,GAAG,UAAUxO,EAAE,EAAE5H,IAAI,EAAE;IACxD,IAAI,IAAI,CAACzF,MAAM,CAAC8b,UAAU,IAAI,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC1W,OAAO,CAAC,IAAI,CAACpF,MAAM,CAACmM,WAAW,CAAC,GAAG,CAAC,CAAC,EAAE;MAC3F;IACJ;IACA,IAAI4P,SAAS,GAAGtW,IAAI,IAAI,IAAI,CAACzF,MAAM,CAACC,kBAAkB,CAACuC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACiD,IAAI;IACxE,IAAIuW,UAAU,GAAG,IAAI,CAAChc,MAAM,CAACC,kBAAkB,CAACwB,MAAM,GAAG,CAAC;IAC1D,IAAIU,QAAQ,GAAG,IAAI,CAACnC,MAAM,CAACC,kBAAkB,CAACqQ,MAAM,CAAC,UAAUzI,CAAC,EAAEQ,KAAK,EAAE;MACrE,IAAIR,CAAC,CAACpC,IAAI,KAAKsW,SAAS,EAAE;QACtBC,UAAU,GAAG3T,KAAK;QAClB,OAAOR,CAAC;MACZ;MACA,OAAO,IAAI;IACf,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,IAAIoU,aAAa,GAAG,IAAI,CAACjc,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACsK,kBAAkB,CAAC;IACnF,IAAI7B,KAAK,GAAG,CAAC;IACb,IAAI,IAAI,CAACrI,MAAM,CAACmD,UAAU,CAACM,cAAc,CAAC,CAAC,EAAE;MACzC,IAAI,CAAC,IAAI,CAACzD,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAAC4D,SAAS,EAAE;QAChDe,KAAK,GAAG,IAAI,CAACoT,sBAAsB,CAACpO,EAAE,EAAE0O,SAAS,EAAE5Z,QAAQ,CAAC;MAChE,CAAC,MACI;QACD,IAAIF,YAAY,GAAGE,QAAQ,CAACgF,UAAU,CAACmJ,MAAM,CAAC,UAAUzI,CAAC,EAAE;UACvD,OAAOA,CAAC,CAAC1F,QAAQ,CAACuF,OAAO,CAAC,KAAK2F,EAAE;QACrC,CAAC,CAAC,CAAC,CAAC,CAAC;QACLhF,KAAK,GAAG,IAAI,CAACzG,iBAAiB,CAACsY,GAAG,CAAC,UAAUrS,CAAC,EAAE;UAAE,OAAOA,CAAC,CAAC5F,YAAY;QAAE,CAAC,CAAC,CAACmD,OAAO,CAACnD,YAAY,CAAC;MACrG;MACA,IAAI,IAAI,CAACjC,MAAM,CAAC0B,mBAAmB,EAAE;QACjC,IAAIwa,OAAO,GAAG,IAAI,CAAClc,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACoL,mBAAmB,CAAC;QAC9E,IAAImR,gBAAgB,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,CAACxQ,YAAY,GAAG,IAAI,CAACtH,iBAAiB,CAAC3C,MAAM,CAAC;QACvF,IAAI,IAAI,CAACzB,MAAM,CAACwD,aAAa,EAAE;UAC3ByY,aAAa,CAACK,SAAS,GAAG,CAAC;UAC3B,IAAI,CAACtc,MAAM,CAAC0B,mBAAmB,CAAC6a,gBAAgB,CAAC,CAAC;QACtD;QACAN,aAAa,CAACK,SAAS,GAAIjU,KAAK,GAAG8T,gBAAgB,GAAM,CAAC,IAAI,CAACnc,MAAM,CAAC0B,mBAAmB,CAAC8a,WAAW,GAAG,CAAC,IAAIL,gBAAkB;QAC/H,IAAI,CAACnc,MAAM,CAAC0B,mBAAmB,CAAC6a,gBAAgB,CAAC,CAAC;QAClD,IAAI,IAAI,CAACvc,MAAM,CAACwD,aAAa,EAAE;UAC3B,IAAIuB,EAAE,GAAG,IAAI,CAAC/E,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAAC6c,gBAAgB,GAAG,sBAAsB,GAAGpU,KAAK,GAAG,KAAK,CAAC;UAC/G,IAAItD,EAAE,IAAI,CAACA,EAAE,CAACqD,aAAa,CAAC9I,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACiD,YAAY,CAAC,EAAE;YAC9DoZ,aAAa,CAACK,SAAS,GAClBL,aAAa,CAACK,SAAS,GAAGvX,EAAE,CAAC2X,SAAS,GAAI3X,EAAE,CAAC2X,SAAS,GAAGT,aAAa,CAACK,SAAS,GAAGvX,EAAE,CAAC2X,SAAS;UACxG;QACJ,CAAC,MACI;UACDT,aAAa,CAACK,SAAS,GAAIjU,KAAK,GAAG8T,gBAAiB;QACxD;MACJ,CAAC,MACI;QACD,IAAIpX,EAAE,GAAG,IAAI,CAAC/E,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAAC6c,gBAAgB,GAAG,sBAAsB,GAAGpU,KAAK,GAAG,KAAK,CAAC;QAC/G,IAAItD,EAAE,IAAI,CAACA,EAAE,CAACqD,aAAa,CAAC9I,SAAS,CAACoJ,QAAQ,CAAC9I,GAAG,CAACiD,YAAY,CAAC,EAAE;UAC9DoZ,aAAa,CAACK,SAAS,GAAGvX,EAAE,CAAC2X,SAAS;QAC1C;MACJ;IACJ,CAAC,MACI;MACD,IAAI,CAAC,IAAI,CAAC1c,MAAM,CAACY,iBAAiB,CAAC8C,KAAK,CAAC4D,SAAS,EAAE;QAChDe,KAAK,GAAG,IAAI,CAACoT,sBAAsB,CAACpO,EAAE,EAAE0O,SAAS,EAAE5Z,QAAQ,CAAC;MAChE,CAAC,MACI;QACD,IAAI4Z,SAAS,KAAK,IAAI,CAAC/b,MAAM,CAACC,kBAAkB,CAACuC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACiD,IAAI,EAAE;UAChE4C,KAAK,GAAG,IAAI,CAACzG,iBAAiB,CAACsY,GAAG,CAAC,UAAUrS,CAAC,EAAE;YAAE,OAAOA,CAAC,CAAC5F,YAAY,CAACE,QAAQ,CAACuF,OAAO,CAAC;UAAE,CAAC,CAAC,CAACtC,OAAO,CAACiI,EAAE,CAAC;QAC7G,CAAC,MACI;UACDhF,KAAK,GAAGlG,QAAQ,CAACgF,UAAU,CAAC+S,GAAG,CAAC,UAAUrS,CAAC,EAAE;YAAE,OAAOA,CAAC,CAAC1F,QAAQ,CAACuF,OAAO,CAAC;UAAE,CAAC,CAAC,CAACtC,OAAO,CAACiI,EAAE,CAAC;QAC7F;MACJ;MACA,IAAIsP,YAAY,GAAG,IAAI,CAAC3c,MAAM,CAACmM,WAAW,KAAK,OAAO,GAAG,IAAI,CAACnM,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACgd,sBAAsB,GAAG,sBAAsB,IAAIZ,UAAU,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GACxK,IAAI,CAAChc,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACid,gBAAgB,GAAG,aAAa,IAAIb,UAAU,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;MAC5G,IAAIc,MAAM,GAAG,EAAE,CAACta,KAAK,CAACC,IAAI,CAACka,YAAY,CAACja,QAAQ,CAAC,CAACwX,GAAG,CAAC,UAAU5I,IAAI,EAAE;QAAE,OAAOA,IAAI,CAACyL,UAAU;MAAE,CAAC,CAAC;MAClGd,aAAa,CAACe,UAAU,GAAGF,MAAM,CAAC/a,QAAQ,CAACsG,KAAK,CAACrG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACrE;EACJ,CAAC;EACDjC,YAAY,CAACK,SAAS,CAAC6c,OAAO,GAAG,YAAY;IACzC,IAAI,CAACjd,MAAM,CAACkd,GAAG,CAACrd,MAAM,CAAC8O,aAAa,EAAE,IAAI,CAACA,aAAa,CAAC;IACzD,IAAI,IAAI,CAAC1B,WAAW,EAAE;MAClB,IAAI,IAAI,CAACA,WAAW,CAAC2B,OAAO,IAAI,IAAI,CAAC3B,WAAW,CAAC2B,OAAO,CAACnN,MAAM,GAAG,CAAC,EAAE;QACjE,IAAI0b,iBAAiB,GAAG,IAAI,CAAClQ,WAAW,CAAC2B,OAAO,CAACsL,GAAG,CAAC,UAAU9S,CAAC,EAAE;UAAE,OAAOA,CAAC,CAACgW,QAAQ;QAAE,CAAC,CAAC;QACzF,IAAID,iBAAiB,CAAC1b,MAAM,GAAG,CAAC,EAAE;UAC9B,IAAI,CAACzB,MAAM,CAACqd,cAAc,CAACF,iBAAiB,CAAC;QACjD;MACJ;MACA,IAAI,CAAClQ,WAAW,CAACgQ,OAAO,CAAC,CAAC;MAC1B,IAAI,CAAChQ,WAAW,GAAG,IAAI;IAC3B;IACA,IAAI,IAAI,CAACgB,SAAS,EAAE;MAChB,IAAI,CAACA,SAAS,CAACgP,OAAO,CAAC,CAAC;MACxB,IAAI,CAAChP,SAAS,GAAG,IAAI;MACrB7O,MAAM,CAAC,IAAI,CAACY,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACkN,mBAAmB,CAAC,CAAC;MACxE1N,MAAM,CAAC,IAAI,CAACY,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACgN,2BAA2B,CAAC,CAAC;IACpF;IACA,IAAI0Q,aAAa,GAAG,IAAI,CAACtd,MAAM,CAACoB,OAAO,CAACyC,aAAa,CAAC,GAAG,GAAGjE,GAAG,CAACiM,0BAA0B,CAAC;IAC3F,IAAIyR,aAAa,EAAE;MACfle,MAAM,CAACke,aAAa,CAAC;IACzB;EACJ,CAAC;EACD,OAAOvd,YAAY;AACvB,CAAC,CAAC,CAAE;AACJ,SAASA,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}