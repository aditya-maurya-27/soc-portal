{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Projectone\\\\Desktop\\\\GT PORTAL\\\\src\\\\pages\\\\Shifts.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport Modal from \"react-modal\";\nimport { AuthProvider, useAuth } from \"../context/AuthContext\";\nimport \"../styles/Shifts.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nModal.setAppElement(\"#root\");\nconst Shifts = () => {\n  _s();\n  const {\n    user\n  } = useAuth(AuthProvider);\n  const [shifts, setShifts] = useState([]);\n  const [selectedShift, setSelectedShift] = useState(null);\n  const [comment, setComment] = useState(\"\");\n  const [commentsMap, setCommentsMap] = useState({});\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  useEffect(() => {\n    fetch(\"http://192.168.1.49:5000/api/shifts\").then(res => res.json()).then(data => {\n      // ✅ Normalize time format with leading zeroes\n      const formatted = data.map(shift => ({\n        ...shift,\n        start: formatDateTime(shift.start),\n        end: formatDateTime(shift.end)\n      }));\n      console.log(\"Rendered Shifts:\", formatted);\n      setShifts(formatted);\n    }).catch(err => console.error(\"Failed to fetch shifts:\", err));\n  }, []);\n  const formatDateTime = datetimeStr => {\n    const date = new Date(datetimeStr);\n    const iso = date.toISOString();\n    return iso.slice(0, 19); // Keep 'YYYY-MM-DDTHH:MM:SS'\n  };\n  const handleEventClick = info => {\n    const shift = info.event;\n    setSelectedShift(shift);\n    setComment(commentsMap[shift.id] || \"\");\n    setIsModalOpen(true);\n  };\n  const isWithinShift = () => {\n    if (!selectedShift) return false;\n    const now = new Date();\n    const start = new Date(selectedShift.start);\n    const end = new Date(selectedShift.end);\n    return now >= start && now <= end;\n  };\n  const handleSave = () => {\n    if (selectedShift) {\n      setCommentsMap(prev => ({\n        ...prev,\n        [selectedShift.id]: comment\n      }));\n    }\n    setIsModalOpen(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"shifts-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shifts-calendar\",\n      children: /*#__PURE__*/_jsxDEV(FullCalendar, {\n        plugins: [interactionPlugin, dayGridPlugin, timeGridPlugin],\n        allDaySlot: false,\n        initialView: \"timeGridDay\",\n        slotMinTime: \"00:00:00\",\n        slotMaxTime: \"24:00:00\",\n        headerToolbar: {\n          left: \"prev,next today\",\n          center: \"title\",\n          right: \"timeGridDay,timeGridWeek,dayGridMonth\"\n        },\n        events: shifts,\n        editable: false,\n        height: \"auto\",\n        eventClick: handleEventClick,\n        eventDidMount: info => {\n          info.el.setAttribute(\"title\", info.event.title);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isModalOpen,\n      onRequestClose: () => setIsModalOpen(false),\n      contentLabel: \"Analyst Comments\",\n      className: \"modal\",\n      overlayClassName: \"overlay\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Analyst Comments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: 10,\n        cols: 60,\n        value: comment,\n        onChange: e => setComment(e.target.value),\n        disabled: !isWithinShift()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: \"10px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSave,\n          disabled: !isWithinShift(),\n          style: {\n            marginRight: \"10px\"\n          },\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsModalOpen(false),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), !isWithinShift() && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\",\n          marginTop: \"10px\"\n        },\n        children: \"You can only edit comments during your shift time.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(Shifts, \"hqhLUHtgH6VVEuR1Q3h6dT7xieE=\", false, function () {\n  return [useAuth];\n});\n_c = Shifts;\nexport default Shifts;\nvar _c;\n$RefreshReg$(_c, \"Shifts\");","map":{"version":3,"names":["React","useState","useEffect","FullCalendar","dayGridPlugin","timeGridPlugin","interactionPlugin","Modal","AuthProvider","useAuth","jsxDEV","_jsxDEV","setAppElement","Shifts","_s","user","shifts","setShifts","selectedShift","setSelectedShift","comment","setComment","commentsMap","setCommentsMap","isModalOpen","setIsModalOpen","fetch","then","res","json","data","formatted","map","shift","start","formatDateTime","end","console","log","catch","err","error","datetimeStr","date","Date","iso","toISOString","slice","handleEventClick","info","event","id","isWithinShift","now","handleSave","prev","className","children","plugins","allDaySlot","initialView","slotMinTime","slotMaxTime","headerToolbar","left","center","right","events","editable","height","eventClick","eventDidMount","el","setAttribute","title","fileName","_jsxFileName","lineNumber","columnNumber","isOpen","onRequestClose","contentLabel","overlayClassName","rows","cols","value","onChange","e","target","disabled","style","marginTop","onClick","marginRight","color","_c","$RefreshReg$"],"sources":["C:/Users/Projectone/Desktop/GT PORTAL/src/pages/Shifts.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport FullCalendar from \"@fullcalendar/react\";\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\r\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\r\nimport interactionPlugin from \"@fullcalendar/interaction\";\r\nimport Modal from \"react-modal\";\r\nimport { AuthProvider, useAuth } from \"../context/AuthContext\";\r\nimport \"../styles/Shifts.css\";\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nconst Shifts = () => {\r\n  const { user } = useAuth(AuthProvider);\r\n  const [shifts, setShifts] = useState([]);\r\n  const [selectedShift, setSelectedShift] = useState(null);\r\n  const [comment, setComment] = useState(\"\");\r\n  const [commentsMap, setCommentsMap] = useState({});\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://192.168.1.49:5000/api/shifts\")\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        // ✅ Normalize time format with leading zeroes\r\n        const formatted = data.map((shift) => ({\r\n          ...shift,\r\n          start: formatDateTime(shift.start),\r\n          end: formatDateTime(shift.end),\r\n        }));\r\n        console.log(\"Rendered Shifts:\", formatted);\r\n        setShifts(formatted);\r\n      })\r\n      .catch((err) => console.error(\"Failed to fetch shifts:\", err));\r\n  }, []);\r\n\r\n  const formatDateTime = (datetimeStr) => {\r\n    const date = new Date(datetimeStr);\r\n    const iso = date.toISOString();\r\n    return iso.slice(0, 19); // Keep 'YYYY-MM-DDTHH:MM:SS'\r\n  };\r\n\r\n  const handleEventClick = (info) => {\r\n    const shift = info.event;\r\n    setSelectedShift(shift);\r\n    setComment(commentsMap[shift.id] || \"\");\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const isWithinShift = () => {\r\n    if (!selectedShift) return false;\r\n    const now = new Date();\r\n    const start = new Date(selectedShift.start);\r\n    const end = new Date(selectedShift.end);\r\n    return now >= start && now <= end;\r\n  };\r\n\r\n  const handleSave = () => {\r\n    if (selectedShift) {\r\n      setCommentsMap((prev) => ({\r\n        ...prev,\r\n        [selectedShift.id]: comment,\r\n      }));\r\n    }\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"shifts-wrapper\">\r\n      <div className=\"shifts-calendar\">\r\n        <FullCalendar\r\n          plugins={[interactionPlugin, dayGridPlugin, timeGridPlugin]}\r\n          allDaySlot={false}\r\n          initialView=\"timeGridDay\"\r\n          slotMinTime={\"00:00:00\"}\r\n          slotMaxTime={\"24:00:00\"}\r\n          headerToolbar={{\r\n            left: \"prev,next today\",\r\n            center: \"title\",\r\n            right: \"timeGridDay,timeGridWeek,dayGridMonth\",\r\n          }}\r\n          events={shifts}\r\n          editable={false}\r\n          height=\"auto\"\r\n          eventClick={handleEventClick}\r\n          eventDidMount={(info) => {\r\n            info.el.setAttribute(\"title\", info.event.title);\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      <Modal\r\n        isOpen={isModalOpen}\r\n        onRequestClose={() => setIsModalOpen(false)}\r\n        contentLabel=\"Analyst Comments\"\r\n        className=\"modal\"\r\n        overlayClassName=\"overlay\"\r\n      >\r\n        <h2>Analyst Comments</h2>\r\n        <textarea\r\n          rows={10}\r\n          cols={60}\r\n          value={comment}\r\n          onChange={(e) => setComment(e.target.value)}\r\n          disabled={!isWithinShift()}\r\n        />\r\n        <div style={{ marginTop: \"10px\" }}>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={!isWithinShift()}\r\n            style={{ marginRight: \"10px\" }}\r\n          >\r\n            Save\r\n          </button>\r\n          <button onClick={() => setIsModalOpen(false)}>Close</button>\r\n        </div>\r\n        {!isWithinShift() && (\r\n          <p style={{ color: \"red\", marginTop: \"10px\" }}>\r\n            You can only edit comments during your shift time.\r\n          </p>\r\n        )}\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Shifts;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}