{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */function (_super) {\n  __extends(VerticalView, _super);\n  function VerticalView(parent) {\n    var _this = _super.call(this, parent) || this;\n    _this.viewClass = 'e-day-view';\n    _this.isInverseTableSelect = true;\n    _this.baseCssClass = 'e-vertical-view';\n    _this.appointment = null;\n    return _this;\n  }\n  VerticalView.prototype.getModuleName = function () {\n    return 'verticalView';\n  };\n  VerticalView.prototype.addEventListener = function () {\n    this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n    this.parent.on(event.dataReady, this.renderEvents, this);\n  };\n  VerticalView.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n      this.parent.off(event.dataReady, this.renderEvents);\n    }\n  };\n  VerticalView.prototype.renderEvents = function () {\n    this.appointment = this.parent.activeViewOptions.timeScale.enable ? new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n    this.appointment.renderAppointments();\n    this.parent.notify(event.eventsLoaded, {});\n  };\n  VerticalView.prototype.onContentScroll = function (e) {\n    this.parent.removeNewEventElement();\n    var target = e.target;\n    this.parent.notify(event.virtualScroll, e);\n    this.scrollLeftPanel(target);\n    this.scrollTopPanel(target);\n    if (!this.parent.isAdaptive) {\n      this.parent.uiStateValues.top = target.scrollTop;\n    }\n    this.parent.uiStateValues.left = target.scrollLeft;\n    if (!isNullOrUndefined(this.parent.quickPopup) && !this.parent.uiStateValues.isTapHold) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n    this.setPersistence();\n  };\n  VerticalView.prototype.onAdaptiveMove = function (e) {\n    if (this.parent.uiStateValues.action) {\n      e.preventDefault();\n    }\n  };\n  VerticalView.prototype.onAdaptiveScroll = function (e) {\n    if (this.parent && !this.parent.isDestroyed) {\n      this.parent.removeNewEventElement();\n      this.parent.uiStateValues.top = e.target.scrollTop;\n    }\n  };\n  VerticalView.prototype.scrollLeftPanel = function (target) {\n    var leftPanel = this.getLeftPanelElement();\n    if (!isNullOrUndefined(leftPanel)) {\n      leftPanel.scrollTop = target.scrollTop;\n    }\n  };\n  VerticalView.prototype.scrollUiUpdate = function (args) {\n    if (!this.parent) {\n      return;\n    }\n    var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n    var headerBarHeight = this.getHeaderBarHeight();\n    var timeCells = this.getLeftPanelElement();\n    var content = this.getScrollableElement();\n    var header = this.getDatesHeaderElement();\n    var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n    this.setContentHeight(content, timeCells, scrollerHeight);\n    this.setColWidth(content);\n    var scrollBarWidth = util.getScrollBarWidth();\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    header.style[args.cssProperties.rtlPadding] = '';\n    var isDateHeaderScroll = this.parent.enableAllDayScroll ? !(content.offsetWidth - content.clientWidth <= dateHeader.offsetWidth - dateHeader.clientWidth && dateHeader.classList.contains('e-all-day-scroll')) : true;\n    if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.firstElementChild.style[args.cssProperties.border] = '';\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.style[args.cssProperties.padding] = '';\n    }\n    if (!args.isPreventScrollUpdate) {\n      if (this.parent.uiStateValues.isInitial) {\n        if (this.parent.currentView.indexOf('Timeline') > -1) {\n          content.scrollTop = this.parent.uiStateValues.top;\n        }\n        this.scrollToWorkHour();\n        this.parent.uiStateValues.isInitial = false;\n      } else {\n        if (timeCells) {\n          timeCells.scrollTop = this.parent.uiStateValues.top;\n        }\n        content.scrollTop = this.parent.uiStateValues.top;\n        content.scrollLeft = this.parent.uiStateValues.left;\n      }\n    }\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      this.highlightCurrentTime();\n    }\n    this.retainScrollPosition();\n    if (!isNullOrUndefined(timeCells) && !isNullOrUndefined(content) && timeCells.scrollTop !== content.scrollTop) {\n      timeCells.scrollTop = content.scrollTop;\n    }\n  };\n  VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n    if (this.parent.isAdaptive && !this.isTimelineView()) {\n      element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n    } else {\n      if (!isNullOrUndefined(leftPanelElement)) {\n        leftPanelElement.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height - this.getScrollXIndent(element));\n      }\n      element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n    }\n  };\n  VerticalView.prototype.scrollToWorkHour = function () {\n    if (this.parent.workHours.highlight) {\n      var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n      if (firstWorkHourCell) {\n        this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.left = 0;\n      }\n    }\n  };\n  VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n    var date = this.parent.getStartEndTime(hour);\n    if (!isNullOrUndefined(scrollDate)) {\n      var headerElement = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"' + new Date(util.resetTime(scrollDate)).getTime() + '\"]');\n      if (headerElement) {\n        if (this.parent.enableRtl) {\n          var conWrap = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n          this.getScrollableElement().scrollLeft = -(conWrap.offsetWidth - headerElement.offsetLeft - headerElement.offsetWidth);\n        } else {\n          this.getScrollableElement().scrollLeft = headerElement.offsetLeft;\n        }\n      }\n    }\n    if (isNullOrUndefined(date)) {\n      return;\n    }\n    this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n  };\n  VerticalView.prototype.scrollToDate = function (scrollDate) {\n    this.scrollToHour(null, scrollDate);\n  };\n  VerticalView.prototype.generateColumnLevels = function () {\n    var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n    var columnLevels = [];\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n      if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n        while (columnLevels[0].length === 0) {\n          this.parent.setProperties({\n            selectedDate: this.parent.activeView.getNextPreviousDate(this.previousNextAction)\n          }, true);\n          this.parent.activeView.getRenderDates();\n          if (this.parent.headerModule) {\n            this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n            this.parent.headerModule.updateDateRange();\n          }\n          level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n          columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n        }\n      }\n      if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n        var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n        var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n        var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n        columnLevels = [dateSlots];\n      }\n    } else {\n      columnLevels.push(level);\n    }\n    this.colLevels = columnLevels;\n    return columnLevels;\n  };\n  // eslint-disable-next-line max-len\n  VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n    if (workStartHour === void 0) {\n      workStartHour = this.parent.workHours.start;\n    }\n    if (workEndHour === void 0) {\n      workEndHour = this.parent.workHours.end;\n    }\n    var dateCol = [];\n    var start = this.parent.getStartEndTime(workStartHour);\n    var end = this.parent.getStartEndTime(workEndHour);\n    for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n      var col = renderDates_1[_i];\n      var classList = [cls.HEADER_CELLS_CLASS];\n      if (this.isCurrentDate(col)) {\n        classList.push(cls.CURRENT_DAY_CLASS);\n      }\n      dateCol.push({\n        date: col,\n        type: 'dateHeader',\n        className: classList,\n        colSpan: 1,\n        workDays: workDays,\n        startHour: new Date(+start),\n        endHour: new Date(+end)\n      });\n    }\n    return dateCol;\n  };\n  VerticalView.prototype.isWorkHourRange = function (date) {\n    return this.getStartHour().getTime() <= date.getTime() && this.getEndHour().getTime() >= date.getTime();\n  };\n  VerticalView.prototype.highlightCurrentTime = function () {\n    var _this = this;\n    if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n      return;\n    }\n    var currentDate = this.parent.getCurrentTime();\n    if (this.parent.showTimeIndicator && this.isWorkHourRange(currentDate)) {\n      var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n      if (currentDateIndex.length > 0 && !isNullOrUndefined(this.element.querySelector('.' + cls.WORK_CELLS_CLASS))) {\n        this.changeCurrentTimePosition();\n        if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n          var interval = util.MS_PER_MINUTE - (currentDate.getSeconds() * 1000 + currentDate.getMilliseconds());\n          if (interval <= util.MS_PER_MINUTE - 1000) {\n            window.setTimeout(function () {\n              if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\n                _this.clearCurrentTimeIndicatorTimer();\n                _this.changeCurrentTimePosition();\n                _this.updateCurrentTimeIndicatorTimer();\n              }\n            }, interval);\n          }\n          this.updateCurrentTimeIndicatorTimer();\n        }\n      } else {\n        this.clearCurrentTimeIndicatorTimer();\n      }\n    } else {\n      this.clearCurrentTimeIndicatorTimer();\n    }\n  };\n  VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n    var currentDateIndex = [];\n    if (!isNullOrUndefined(this.parent.resourceBase) && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var count = 0;\n      var currentDate = util.resetTime(this.parent.getCurrentTime());\n      if (this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.activeViewOptions.group.byDate) {\n        for (var _i = 0, _a = this.parent.resourceBase.expandedResources; _i < _a.length; _i++) {\n          var resource = _a[_i];\n          if (util.resetTime(resource.date).getTime() === currentDate.getTime()) {\n            currentDateIndex.push(count);\n          }\n          count += 1;\n        }\n      } else {\n        for (var _b = 0, _c = this.parent.resourceBase.renderedResources; _b < _c.length; _b++) {\n          var resource = _c[_b];\n          var index = this.parent.getIndexOfDate(resource.renderDates, currentDate);\n          if (index >= 0) {\n            var resIndex = this.parent.activeViewOptions.group.byDate ? this.parent.resourceBase.lastResourceLevel.length * index + count : count + index;\n            currentDateIndex.push(resIndex);\n          }\n          count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n        }\n      }\n    } else {\n      var renderDates = this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0 ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n      var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n      if (index >= 0) {\n        currentDateIndex.push(index);\n      }\n    }\n    return currentDateIndex;\n  };\n  VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n    if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n      window.clearInterval(this.currentTimeIndicatorTimer);\n      this.currentTimeIndicatorTimer = null;\n      this.removeCurrentTimeIndicatorElements();\n    }\n  };\n  VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\n    var _this = this;\n    this.currentTimeIndicatorTimer = window.setInterval(function () {\n      _this.changeCurrentTimePosition();\n    }, util.MS_PER_MINUTE);\n  };\n  VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n    var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n    var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n    for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n      var indicator = timeIndicator_1[_i];\n      remove(indicator);\n    }\n  };\n  VerticalView.prototype.changeCurrentTimePosition = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.removeCurrentTimeIndicatorElements();\n    var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n    var firstRow = this.parent.getContentTable().rows[0];\n    var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n    var topInPx = formatUnit(top);\n    var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n    var timeCellsWrap = this.getLeftPanelElement();\n    var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n    if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n      return;\n    }\n    var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n    for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n      curTimeWrap[parseInt(i.toString(), 10)].appendChild(createElement('div', {\n        className: cls.PREVIOUS_TIMELINE_CLASS,\n        styles: 'top:' + topInPx\n      }));\n    }\n    for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n      var day = currentDateIndex_1[_i];\n      if (curTimeWrap.length > day) {\n        curTimeWrap[parseInt(day.toString(), 10)].appendChild(createElement('div', {\n          className: cls.CURRENT_TIMELINE_CLASS,\n          styles: 'top:' + topInPx\n        }));\n      }\n    }\n    var currentTimeEle = createElement('div', {\n      innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n      className: cls.CURRENT_TIME_CLASS,\n      styles: 'top:' + topInPx\n    });\n    if (rowIndex <= timeTrs.length) {\n      removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n      if (timeTrs[parseInt(rowIndex.toString(), 10)]) {\n        addClass([timeTrs[parseInt(rowIndex.toString(), 10)].lastElementChild], cls.HIDE_CHILDS_CLASS);\n      }\n      prepend([currentTimeEle], timeCellsWrap);\n      currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - currentTimeEle.offsetHeight / 2);\n    }\n  };\n  VerticalView.prototype.getTopFromDateTime = function (date) {\n    var startHour = this.getStartEndHours(this.parent.activeViewOptions.startHour);\n    var endHour = this.getStartEndHours(this.parent.activeViewOptions.endHour);\n    var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n    var hoursRange = util.getStartEndHours(util.resetTime(new Date(date.getTime())), startHour, endHour);\n    var totalMinutes = (hoursRange.endHour.getTime() - hoursRange.startHour.getTime()) / util.MS_PER_MINUTE;\n    var timescaleInterval = this.parent.activeViewOptions.timeScale.interval;\n    var interval = 0;\n    if (startHour.getHours() === 0 && startHour.getMinutes() === 0 && endHour.getHours() === 0 && endHour.getMinutes() === 0) {\n      interval = timescaleInterval;\n    } else {\n      interval = this.parent.activeViewOptions.timeScale.slotCount !== 1 ? timescaleInterval : timescaleInterval > totalMinutes ? totalMinutes : timescaleInterval;\n    }\n    return diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount / interval;\n  };\n  VerticalView.prototype.getWorkCellHeight = function () {\n    return parseFloat(this.parent.getElementHeight(this.element.querySelector('.' + cls.WORK_CELLS_CLASS)).toFixed(2));\n  };\n  VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n    var cntEle;\n    var wrapper = createElement('div');\n    var templateName = '';\n    var templateId = this.parent.element.id + '_';\n    switch (type) {\n      case 'dateHeader':\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n          templateName = 'dateHeaderTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n          cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false, undefined, undefined, this.parent.root));\n        } else {\n          wrapper.innerHTML = this.parent.activeView.isTimelineView() ? \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" : \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" + (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n        break;\n      case 'majorSlot':\n        if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n          templateName = 'majorSlotTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false, undefined, undefined, this.parent.root));\n        } else {\n          wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n        break;\n      case 'minorSlot':\n        if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n          templateName = 'minorSlotTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false, undefined, undefined, this.parent.root));\n        } else {\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n        break;\n      case 'alldayCells':\n        if (this.parent.activeViewOptions.cellTemplate) {\n          var viewName = this.parent.activeViewOptions.cellTemplateName;\n          templateName = 'cellTemplate';\n          var args = {\n            date: date,\n            type: type,\n            groupIndex: groupIndex\n          };\n          cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false, undefined, undefined, this.parent.root));\n        }\n        break;\n    }\n    return cntEle;\n  };\n  VerticalView.prototype.refreshHeader = function () {\n    remove(this.element.querySelector('tbody tr'));\n    this.renderHeader();\n    this.parent.notify(event.contentReady, {});\n    var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n    if (dateHeader) {\n      dateHeader.scrollLeft = this.parent.uiStateValues.left;\n    }\n  };\n  VerticalView.prototype.renderLayout = function (type) {\n    this.setPanel(createElement('div', {\n      className: cls.TABLE_WRAP_CLASS\n    }));\n    var clsList = [this.baseCssClass, this.viewClass];\n    clsList.push(type);\n    if (this.parent.activeViewOptions.group.byDate) {\n      clsList.push('e-by-date');\n    }\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n    }\n    if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n      clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n    }\n    if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n      clsList.push(cls.IGNORE_WHITESPACE);\n    }\n    this.renderPanel(type);\n    addClass([this.element], clsList);\n    this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    this.colLevels = this.generateColumnLevels();\n    this.renderHeader();\n    this.renderContent();\n    if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n    this.parent.notify(event.contentReady, {});\n  };\n  VerticalView.prototype.renderHeader = function () {\n    var tr = createElement('tr');\n    var dateTd = createElement('td');\n    dateTd.appendChild(this.renderDatesHeader());\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      var indentTd = createElement('td', {\n        className: cls.LEFT_INDENT_CLASS\n      });\n      indentTd.appendChild(this.renderLeftIndent());\n      tr.appendChild(indentTd);\n    }\n    tr.appendChild(dateTd);\n    prepend([tr], this.element.querySelector('tbody'));\n  };\n  VerticalView.prototype.renderContent = function () {\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n    }\n    var tr = createElement('tr');\n    var workTd = createElement('td');\n    if (this.parent.isAdaptive) {\n      workTd.setAttribute('colspan', this.parent.activeViewOptions.timeScale.enable ? '2' : '1');\n      var scrollContainer = createElement('div', {\n        className: cls.SCROLL_CONTAINER_CLASS\n      });\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        scrollContainer.appendChild(this.renderTimeCells());\n      }\n      scrollContainer.appendChild(this.renderContentArea());\n      workTd.appendChild(scrollContainer);\n      EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n      EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n      tr.appendChild(workTd);\n    } else {\n      var levels = this.colLevels.slice(0);\n      if (this.parent.virtualScrollModule) {\n        this.resetColLevels();\n      }\n      var wrap = this.renderContentArea();\n      workTd.appendChild(wrap);\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        var timesTd = createElement('td');\n        timesTd.appendChild(this.renderTimeCells());\n        tr.appendChild(timesTd);\n      }\n      tr.appendChild(workTd);\n      if (this.parent.virtualScrollModule) {\n        this.colLevels = levels;\n        this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n      }\n    }\n    this.element.querySelector('tbody').appendChild(tr);\n  };\n  VerticalView.prototype.renderLeftIndent = function () {\n    var wrap = createElement('div', {\n      className: cls.LEFT_INDENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n    var rowCount = this.colLevels.length;\n    var nth;\n    for (var i = 0; i < rowCount; i++) {\n      var ntr_1 = trEle.cloneNode();\n      var data_1 = {\n        className: [this.colLevels[parseInt(i.toString(), 10)][0] && this.colLevels[parseInt(i.toString(), 10)][0].className[0]],\n        type: 'emptyCells'\n      };\n      if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n        data_1.className.push(cls.WEEK_NUMBER_CLASS);\n        var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n        data_1.template = [createElement('span', {\n          innerHTML: '' + weekNo,\n          attrs: {\n            title: this.parent.localeObj.getConstant('week') + ' ' + weekNo\n          }\n        })];\n      }\n      nth = this.createTd(data_1);\n      this.parent.renderHeaderIndentTemplate(data_1, nth);\n      ntr_1.appendChild(nth);\n      tbl.querySelector('tbody').appendChild(ntr_1);\n    }\n    var ntr = trEle.cloneNode();\n    var appointmentExpandCollapse = createElement('div', {\n      attrs: {\n        'tabindex': '0',\n        'role': 'button',\n        title: this.parent.localeObj.getConstant('expandAllDaySection'),\n        'aria-disabled': 'false',\n        'aria-label': this.parent.localeObj.getConstant('expandAllDaySection')\n      },\n      className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' + cls.ICON + ' ' + cls.DISABLE_CLASS\n    });\n    var data = {\n      className: [cls.ALLDAY_CELLS_CLASS],\n      type: 'emptyCells'\n    };\n    nth = this.createTd(data);\n    nth.appendChild(appointmentExpandCollapse);\n    this.parent.renderHeaderIndentTemplate(data, nth);\n    ntr.appendChild(nth);\n    tbl.querySelector('tbody').appendChild(ntr);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n  VerticalView.prototype.renderDatesHeader = function () {\n    var container = createElement('div', {\n      className: cls.DATE_HEADER_CONTAINER_CLASS\n    });\n    var wrap = createElement('div', {\n      className: cls.DATE_HEADER_WRAP_CLASS\n    });\n    container.appendChild(wrap);\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr', {\n      className: cls.HEADER_ROW_CLASS\n    });\n    var rowCount = this.colLevels.length;\n    var lastLevel = this.colLevels[rowCount - 1];\n    for (var i = 0; i < rowCount; i++) {\n      var ntr = trEle.cloneNode();\n      var level = this.colLevels[parseInt(i.toString(), 10)];\n      for (var j = 0; j < level.length; j++) {\n        ntr.appendChild(this.createTd(level[parseInt(j.toString(), 10)]));\n      }\n      tbl.querySelector('tbody').appendChild(ntr);\n    }\n    this.createAllDayRow(tbl, lastLevel);\n    this.createColGroup(tbl, lastLevel);\n    wrap.appendChild(tbl);\n    return container;\n  };\n  VerticalView.prototype.createAllDayRow = function (table, tdData) {\n    var ntr = createElement('tr', {\n      className: cls.ALLDAY_ROW_CLASS\n    });\n    for (var j = 0; j < tdData.length; j++) {\n      var td = extend({}, tdData[parseInt(j.toString(), 10)]);\n      td.className = [cls.ALLDAY_CELLS_CLASS];\n      td.type = 'alldayCells';\n      var ntd = this.createTd(td);\n      ntd.setAttribute('data-date', td.date.getTime().toString());\n      if (!isNullOrUndefined(td.groupIndex)) {\n        ntd.setAttribute('data-group-index', '' + td.groupIndex);\n      } else if (this.parent.uiStateValues.isGroupAdaptive) {\n        ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n      }\n      this.wireCellEvents(ntd);\n      ntr.appendChild(ntd);\n    }\n    table.querySelector('tbody').appendChild(ntr);\n    var thead = createElement('thead');\n    thead.appendChild(this.parent.eventBase.createEventWrapper('allDay'));\n    prepend([thead], table);\n  };\n  VerticalView.prototype.createTd = function (td) {\n    var tdEle = createElement('td');\n    this.addAttributes(td, tdEle);\n    if (td.date && td.type) {\n      var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n      if (ele && ele.length) {\n        append(ele, tdEle);\n      }\n    }\n    if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n      addClass([tdEle], cls.DISABLE_DATES);\n    }\n    if (td.type === 'resourceHeader') {\n      this.setResourceHeaderContent(tdEle, td);\n    }\n    if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n      tdEle.setAttribute('data-date', td.date.getTime().toString());\n      if (!isNullOrUndefined(td.groupIndex)) {\n        tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n      }\n      this.wireMouseEvents(tdEle);\n    }\n    var args = {\n      elementType: td.type,\n      element: tdEle,\n      date: td.date,\n      groupIndex: td.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return tdEle;\n  };\n  VerticalView.prototype.wireCellEvents = function (element) {\n    EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n    this.wireMouseEvents(element);\n  };\n  VerticalView.prototype.wireMouseEvents = function (element) {\n    EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n    if (!this.parent.isAdaptive) {\n      EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n    }\n  };\n  VerticalView.prototype.renderTimeCells = function () {\n    var _this = this;\n    var wrap = createElement('div', {\n      className: cls.TIME_CELLS_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n    var handler = function (r) {\n      r.type = r.first ? 'majorSlot' : 'minorSlot';\n      r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n      var ntr = trEle.cloneNode();\n      var data = {\n        date: r.date,\n        type: r.type,\n        className: r.className\n      };\n      ntr.appendChild(_this.createTd(data));\n      tbl.querySelector('tbody').appendChild(ntr);\n      return r;\n    };\n    this.getTimeSlotRows(handler);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n  VerticalView.prototype.renderContentArea = function () {\n    var wrap = createElement('div', {\n      className: cls.CONTENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n    this.setAriaAttributes(tbl);\n    this.addAutoHeightClass(tbl);\n    this.renderContentTable(tbl);\n    this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n    wrap.appendChild(tbl);\n    this.wireCellEvents(tbl.querySelector('tbody'));\n    EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n    EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n    return wrap;\n  };\n  VerticalView.prototype.renderContentTable = function (table) {\n    var tBody = table.querySelector('tbody');\n    append(this.getContentRows(), tBody);\n    this.renderContentTableHeader(table);\n  };\n  VerticalView.prototype.getContentRows = function () {\n    var _this = this;\n    var rows = [];\n    var tr = createElement('tr');\n    var td = createElement('td');\n    var existingGroupIndices = this.getGroupIndices();\n    var handler = function (r) {\n      var ntr = tr.cloneNode();\n      for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n        var tdData = _a[_i];\n        var isAllowTdCreation = true;\n        if (_this.parent.virtualScrollModule && _this.parent.activeViewOptions.group.resources.length > 0) {\n          if (existingGroupIndices.indexOf(tdData.groupIndex) > -1) {\n            isAllowTdCreation = false;\n          }\n        }\n        if (isAllowTdCreation) {\n          var ntd = _this.createContentTd(tdData, r, td);\n          ntr.appendChild(ntd);\n        }\n      }\n      rows.push(ntr);\n      return r;\n    };\n    this.getTimeSlotRows(handler);\n    return rows;\n  };\n  VerticalView.prototype.createContentTd = function (tdData, r, td) {\n    var ntd = td.cloneNode();\n    if (tdData.colSpan) {\n      ntd.setAttribute('colspan', tdData.colSpan.toString());\n    }\n    var clsName = this.getContentTdClass(r);\n    var cellDate = util.resetTime(tdData.date);\n    if (!this.parent.isMinMaxDate(cellDate)) {\n      clsName.push(cls.DISABLE_DATES);\n    }\n    cellDate = new Date(cellDate.setHours(r.date.getHours(), r.date.getMinutes(), r.date.getSeconds(), r.date.getMilliseconds()));\n    var type = 'workCells';\n    if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n      clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n      type = 'resourceGroupCells';\n    }\n    if (this.parent.workHours.highlight && (this.parent.activeViewOptions.timeScale.enable && this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays) || !this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays))) {\n      clsName.push(cls.WORK_HOURS_CLASS);\n    }\n    addClass([ntd], clsName);\n    if (this.parent.activeViewOptions.cellTemplate) {\n      var args_1 = {\n        date: cellDate,\n        type: type,\n        groupIndex: tdData.groupIndex\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.cellTemplateName;\n      var templateId = scheduleId + viewName + 'cellTemplate';\n      var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false, undefined, undefined, this.parent.root));\n      append(tooltipTemplate, ntd);\n    }\n    ntd.setAttribute('data-date', cellDate.getTime().toString());\n    var skeleton = 'full';\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      var announcementText = this.parent.globalize.formatDate(tdData.date, {\n        skeleton: skeleton,\n        calendar: this.parent.getCalendarMode()\n      });\n      ntd.setAttribute('aria-label', announcementText);\n    } else {\n      var startDateText = this.parent.globalize.formatDate(cellDate, {\n        type: 'dateTime',\n        skeleton: skeleton,\n        calendar: this.parent.getCalendarMode()\n      });\n      var endDateText = this.parent.globalize.formatDate(this.getEndDateFromStartDate(cellDate), {\n        type: 'dateTime',\n        skeleton: skeleton,\n        calendar: this.parent.getCalendarMode()\n      });\n      ntd.setAttribute('aria-label', startDateText + ' ' + this.parent.localeObj.getConstant('endAt') + ' ' + endDateText);\n    }\n    if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n      var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : tdData.groupIndex;\n      ntd.setAttribute('data-group-index', '' + groupIndex);\n    }\n    var args = {\n      elementType: type,\n      element: ntd,\n      date: cellDate,\n      groupIndex: tdData.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return ntd;\n  };\n  VerticalView.prototype.getContentTdClass = function (r) {\n    return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n  };\n  VerticalView.prototype.renderContentTableHeader = function (table) {\n    var thead = createElement('thead');\n    thead.appendChild(this.parent.eventBase.createEventWrapper());\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n    }\n    prepend([thead], table);\n  };\n  VerticalView.prototype.getScrollableElement = function () {\n    if (this.parent.isAdaptive && !this.isTimelineView()) {\n      return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n    } else {\n      return this.getContentAreaElement();\n    }\n  };\n  VerticalView.prototype.getLeftPanelElement = function () {\n    return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n  };\n  VerticalView.prototype.getEndDateFromStartDate = function (start) {\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var end = new Date(start.getTime());\n    end.setMilliseconds(end.getMilliseconds() + msInterval);\n    return end;\n  };\n  VerticalView.prototype.getStartEndHours = function (startEndTime) {\n    if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n      var startEndDate = new Date(2000, 0, 0, 0);\n      var timeString = startEndTime.split(':');\n      if (timeString.length === 2) {\n        startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n      }\n      return startEndDate;\n    }\n    return new Date(2000, 0, 0, 0);\n  };\n  VerticalView.prototype.getTimeSlotRows = function (handler) {\n    var rows = [];\n    var startHour = this.getStartEndHours(this.parent.activeViewOptions.startHour);\n    var endHour = this.getStartEndHours(this.parent.activeViewOptions.endHour);\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var length = Math.round(util.MS_PER_DAY / msInterval);\n    var msStartHour = startHour.getTime();\n    var msEndHour = endHour.getTime();\n    if (msStartHour !== msEndHour) {\n      var milliSeconds = startHour.getTimezoneOffset() !== endHour.getTimezoneOffset() ? msEndHour - msStartHour - 3600000 : msEndHour - msStartHour;\n      length = Math.round(milliSeconds / msInterval);\n    }\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      length = 1;\n    }\n    var start = this.parent.getStartEndTime(this.parent.workHours.start);\n    var end = this.parent.getStartEndTime(this.parent.workHours.end);\n    for (var i = 0; i < length; i++) {\n      var dt = new Date(msStartHour + msInterval * i);\n      if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n        var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n        dt = new Date(dt.getTime() - 1000 * 60 * timeOffset);\n      }\n      var majorTickDivider = i % (msMajorInterval / msInterval);\n      var row = {\n        date: new Date('' + dt),\n        startHour: start,\n        endHour: end,\n        first: majorTickDivider === 0,\n        middle: majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1,\n        last: majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1,\n        type: ''\n      };\n      if (handler) {\n        handler(row);\n      }\n      rows.push(row);\n    }\n    return rows;\n  };\n  VerticalView.prototype.getAdjustedDate = function (startTime) {\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      return new Date(startTime.setHours(0, 0, 0, 0));\n    } else {\n      var timeSlots = this.getTimeSlotRows();\n      var startDate = new Date(new Date(timeSlots[0].date.getTime()).setHours(startTime.getHours(), startTime.getMinutes(), startTime.getMilliseconds()));\n      for (var i = 0; i < timeSlots.length; i++) {\n        if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startDate.getTime()) {\n          startTime.setHours(timeSlots[i - 1].date.getHours(), timeSlots[i - 1].date.getMinutes(), timeSlots[i - 1].date.getMilliseconds());\n          return new Date(startTime);\n        }\n      }\n    }\n    return null;\n  };\n  VerticalView.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.clearCurrentTimeIndicatorTimer();\n    if (this.element) {\n      if (this.appointment) {\n        this.appointment.destroy();\n        this.appointment = null;\n      }\n      var contentScrollableEle = this.getContentAreaElement();\n      if (contentScrollableEle) {\n        EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n        EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n      }\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n      if (this.parent.scheduleTouchModule) {\n        this.parent.scheduleTouchModule.resetValues();\n      }\n      _super.prototype.destroy.call(this);\n    }\n  };\n  return VerticalView;\n}(ViewBase);\nexport { VerticalView };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isNullOrUndefined","extend","EventHandler","formatUnit","Browser","createElement","remove","addClass","removeClass","append","prepend","ViewBase","VerticalEvent","MonthEvent","util","event","cls","VerticalView","_super","parent","_this","call","viewClass","isInverseTableSelect","baseCssClass","appointment","getModuleName","addEventListener","on","scrollUiUpdate","dataReady","renderEvents","removeEventListener","off","activeViewOptions","timeScale","enable","renderAppointments","notify","eventsLoaded","onContentScroll","e","removeNewEventElement","target","virtualScroll","scrollLeftPanel","scrollTopPanel","isAdaptive","uiStateValues","top","scrollTop","left","scrollLeft","quickPopup","isTapHold","quickPopupHide","setPersistence","onAdaptiveMove","action","preventDefault","onAdaptiveScroll","isDestroyed","leftPanel","getLeftPanelElement","args","dateHeader","element","querySelector","DATE_HEADER_WRAP_CLASS","headerBarHeight","getHeaderBarHeight","timeCells","content","getScrollableElement","header","getDatesHeaderElement","scrollerHeight","offsetHeight","setContentHeight","setColWidth","scrollBarWidth","getScrollBarWidth","firstElementChild","style","cssProperties","rtlBorder","rtlPadding","isDateHeaderScroll","enableAllDayScroll","offsetWidth","clientWidth","classList","contains","border","padding","isPreventScrollUpdate","isInitial","currentView","indexOf","scrollToWorkHour","highlightCurrentTime","retainScrollPosition","leftPanelElement","height","isTimelineView","getScrollXIndent","workHours","highlight","firstWorkHourCell","WORK_HOURS_CLASS","offsetTop","scrollToHour","hour","scrollDate","date","getStartEndTime","headerElement","HEADER_CELLS_CLASS","Date","resetTime","getTime","enableRtl","conWrap","CONTENT_TABLE_CLASS","offsetLeft","getTopFromDateTime","scrollToDate","generateColumnLevels","level","getDateSlots","renderDates","workDays","columnLevels","group","resources","length","resourceBase","generateResourceLevels","hideNonWorkingDays","setProperties","selectedDate","activeView","getNextPreviousDate","previousNextAction","getRenderDates","headerModule","setCalendarDate","updateDateRange","isGroupAdaptive","lastResourceLevel","resourceLevel","groupIndex","resStartHour","resourceData","resource","startHourField","resEndHour","endHourField","dateSlots","push","colLevels","workStartHour","workEndHour","start","end","dateCol","_i","renderDates_1","col","isCurrentDate","CURRENT_DAY_CLASS","type","className","colSpan","startHour","endHour","isWorkHourRange","getStartHour","getEndHour","headerRows","slice","option","currentDate","getCurrentTime","showTimeIndicator","currentDateIndex","getCurrentTimeIndicatorIndex","WORK_CELLS_CLASS","changeCurrentTimePosition","currentTimeIndicatorTimer","interval","MS_PER_MINUTE","getSeconds","getMilliseconds","window","setTimeout","clearCurrentTimeIndicatorTimer","updateCurrentTimeIndicatorTimer","count","virtualScrollModule","allowVirtualScrolling","byDate","_a","expandedResources","_b","_c","renderedResources","index","getIndexOfDate","resIndex","clearInterval","removeCurrentTimeIndicatorElements","setInterval","queryString","PREVIOUS_TIMELINE_CLASS","CURRENT_TIMELINE_CLASS","CURRENT_TIME_CLASS","timeIndicator","querySelectorAll","timeIndicator_1","indicator","firstRow","getContentTable","rows","topInPx","rowIndex","Math","floor","cells","timeCellsWrap","timeTrs","isNaN","curTimeWrap","TIMELINE_WRAPPER_CLASS","i","length_1","parseInt","toString","appendChild","styles","currentDateIndex_1","day","currentTimeEle","innerHTML","getTimeString","HIDE_CHILDS_CLASS","lastElementChild","getStartEndHours","diffInMinutes","getHours","getMinutes","hoursRange","totalMinutes","timescaleInterval","slotCount","getWorkCellHeight","parseFloat","getElementHeight","toFixed","getTdContent","cntEle","wrapper","templateName","templateId","id","dateHeaderTemplate","viewName","dateHeaderTemplateName","getDateHeaderTemplate","undefined","root","getTimelineDate","capitalizeFirstWord","getDayName","getDate","childNodes","majorSlotTemplate","getMajorSlotTemplate","minorSlotTemplate","getMinorSlotTemplate","cellTemplate","cellTemplateName","getCellTemplate","refreshHeader","renderHeader","contentReady","renderLayout","setPanel","TABLE_WRAP_CLASS","clsList","TIMESCALE_DISABLE","VIRTUAL_SCROLL_CLASS","rowAutoHeight","eventSettings","ignoreWhitespace","IGNORE_WHITESPACE","renderPanel","createTableLayout","OUTER_TABLE_CLASS","setAttribute","renderContent","RESOURCE_TOOLBAR_CONTAINER","renderResourceMobileLayout","tr","dateTd","renderDatesHeader","indentTd","LEFT_INDENT_CLASS","renderLeftIndent","workTd","scrollContainer","SCROLL_CONTAINER_CLASS","renderTimeCells","renderContentArea","add","touchMoveEvent","levels","resetColLevels","wrap","timesTd","renderVirtualTrack","LEFT_INDENT_WRAP_CLASS","tbl","trEle","rowCount","nth","ntr_1","cloneNode","data_1","showWeekNumber","WEEK_NUMBER_CLASS","weekNo","getWeekNumberContent","template","attrs","title","localeObj","getConstant","createTd","renderHeaderIndentTemplate","ntr","appointmentExpandCollapse","ALLDAY_APPOINTMENT_SECTION_CLASS","APPOINTMENT_ROW_EXPAND_CLASS","ICON","DISABLE_CLASS","data","ALLDAY_CELLS_CLASS","container","DATE_HEADER_CONTAINER_CLASS","HEADER_ROW_CLASS","lastLevel","j","createAllDayRow","createColGroup","table","tdData","ALLDAY_ROW_CLASS","td","ntd","wireCellEvents","thead","eventBase","createEventWrapper","tdEle","addAttributes","ele","isMinMaxDate","DISABLE_DATES","setResourceHeaderContent","wireMouseEvents","elementType","trigger","renderCell","workCellAction","cellMouseDown","cellClick","cellDblClick","TIME_CELLS_WRAP_CLASS","handler","r","first","last","TIME_CELLS_CLASS","TIME_SLOT_CLASS","getTimeSlotRows","CONTENT_WRAP_CLASS","setAriaAttributes","addAutoHeightClass","renderContentTable","tBody","getContentRows","renderContentTableHeader","existingGroupIndices","getGroupIndices","isAllowTdCreation","createContentTd","clsName","getContentTdClass","cellDate","setHours","RESOURCE_PARENT_CLASS","RESOURCE_GROUP_CELLS_CLASS","isWorkHour","isWorkDay","args_1","scheduleId","tooltipTemplate","skeleton","announcementText","globalize","formatDate","calendar","getCalendarMode","startDateText","endDateText","getEndDateFromStartDate","ALTERNATE_CELLS_CLASS","getContentAreaElement","msMajorInterval","msInterval","setMilliseconds","startEndTime","startEndDate","timeString","split","round","MS_PER_DAY","msStartHour","msEndHour","milliSeconds","getTimezoneOffset","dt","isDaylightSavingTime","timeOffset","majorTickDivider","row","middle","getAdjustedDate","startTime","timeSlots","startDate","destroy","contentScrollableEle","scheduleTouchModule","resetValues"],"sources":["C:/Users/Dell/OneDrive/Desktop/Programs/soc-portal/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/vertical-view.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */ (function (_super) {\n    __extends(VerticalView, _super);\n    function VerticalView(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        _this.isInverseTableSelect = true;\n        _this.baseCssClass = 'e-vertical-view';\n        _this.appointment = null;\n        return _this;\n    }\n    VerticalView.prototype.getModuleName = function () {\n        return 'verticalView';\n    };\n    VerticalView.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.renderEvents, this);\n    };\n    VerticalView.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n            this.parent.off(event.dataReady, this.renderEvents);\n        }\n    };\n    VerticalView.prototype.renderEvents = function () {\n        this.appointment = this.parent.activeViewOptions.timeScale.enable ?\n            new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n        this.appointment.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    VerticalView.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        var target = e.target;\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollLeftPanel(target);\n        this.scrollTopPanel(target);\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = target.scrollTop;\n        }\n        this.parent.uiStateValues.left = target.scrollLeft;\n        if (!isNullOrUndefined(this.parent.quickPopup) && !this.parent.uiStateValues.isTapHold) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        this.setPersistence();\n    };\n    VerticalView.prototype.onAdaptiveMove = function (e) {\n        if (this.parent.uiStateValues.action) {\n            e.preventDefault();\n        }\n    };\n    VerticalView.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.removeNewEventElement();\n            this.parent.uiStateValues.top = e.target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (!isNullOrUndefined(leftPanel)) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollUiUpdate = function (args) {\n        if (!this.parent) {\n            return;\n        }\n        var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var headerBarHeight = this.getHeaderBarHeight();\n        var timeCells = this.getLeftPanelElement();\n        var content = this.getScrollableElement();\n        var header = this.getDatesHeaderElement();\n        var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n        this.setContentHeight(content, timeCells, scrollerHeight);\n        this.setColWidth(content);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.style[args.cssProperties.rtlPadding] = '';\n        var isDateHeaderScroll = this.parent.enableAllDayScroll ? !((content.offsetWidth - content.clientWidth) <=\n            (dateHeader.offsetWidth - dateHeader.clientWidth) && dateHeader.classList.contains('e-all-day-scroll')) : true;\n        if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = '';\n        }\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                if (this.parent.currentView.indexOf('Timeline') > -1) {\n                    content.scrollTop = this.parent.uiStateValues.top;\n                }\n                this.scrollToWorkHour();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                if (timeCells) {\n                    timeCells.scrollTop = this.parent.uiStateValues.top;\n                }\n                content.scrollTop = this.parent.uiStateValues.top;\n                content.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.highlightCurrentTime();\n        }\n        this.retainScrollPosition();\n        if (!isNullOrUndefined(timeCells) && !isNullOrUndefined(content) && timeCells.scrollTop !== content.scrollTop) {\n            timeCells.scrollTop = content.scrollTop;\n        }\n    };\n    VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n        else {\n            if (!isNullOrUndefined(leftPanelElement)) {\n                leftPanelElement.style.height = (this.parent.height === 'auto') ? 'auto'\n                    : formatUnit(height - this.getScrollXIndent(element));\n            }\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n    };\n    VerticalView.prototype.scrollToWorkHour = function () {\n        if (this.parent.workHours.highlight) {\n            var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n            if (firstWorkHourCell) {\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n    };\n    VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n        var date = this.parent.getStartEndTime(hour);\n        if (!isNullOrUndefined(scrollDate)) {\n            var headerElement = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"' + new Date(util.resetTime(scrollDate)).getTime() + '\"]');\n            if (headerElement) {\n                if (this.parent.enableRtl) {\n                    var conWrap = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n                    this.getScrollableElement().scrollLeft = -(conWrap.offsetWidth - headerElement.offsetLeft - headerElement.offsetWidth);\n                }\n                else {\n                    this.getScrollableElement().scrollLeft = headerElement.offsetLeft;\n                }\n            }\n        }\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    };\n    VerticalView.prototype.scrollToDate = function (scrollDate) {\n        this.scrollToHour(null, scrollDate);\n    };\n    VerticalView.prototype.generateColumnLevels = function () {\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        var columnLevels = [];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n                while (columnLevels[0].length === 0) {\n                    this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(this.previousNextAction) }, true);\n                    this.parent.activeView.getRenderDates();\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n                        this.parent.headerModule.updateDateRange();\n                    }\n                    level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n                    columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n                }\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n                var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n                var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n                columnLevels = [dateSlots];\n            }\n        }\n        else {\n            columnLevels.push(level);\n        }\n        this.colLevels = columnLevels;\n        return columnLevels;\n    };\n    // eslint-disable-next-line max-len\n    VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n        if (workStartHour === void 0) { workStartHour = this.parent.workHours.start; }\n        if (workEndHour === void 0) { workEndHour = this.parent.workHours.end; }\n        var dateCol = [];\n        var start = this.parent.getStartEndTime(workStartHour);\n        var end = this.parent.getStartEndTime(workEndHour);\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateCol.push({\n                date: col, type: 'dateHeader', className: classList, colSpan: 1,\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\n            });\n        }\n        return dateCol;\n    };\n    VerticalView.prototype.isWorkHourRange = function (date) {\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\n    };\n    VerticalView.prototype.highlightCurrentTime = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return;\n        }\n        var currentDate = this.parent.getCurrentTime();\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(currentDate)) {\n            var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n            if (currentDateIndex.length > 0 && !isNullOrUndefined(this.element.querySelector('.' + cls.WORK_CELLS_CLASS))) {\n                this.changeCurrentTimePosition();\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                    var interval = util.MS_PER_MINUTE - ((currentDate.getSeconds() * 1000) + currentDate.getMilliseconds());\n                    if (interval <= (util.MS_PER_MINUTE - 1000)) {\n                        window.setTimeout(function () {\n                            if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\n                                _this.clearCurrentTimeIndicatorTimer();\n                                _this.changeCurrentTimePosition();\n                                _this.updateCurrentTimeIndicatorTimer();\n                            }\n                        }, interval);\n                    }\n                    this.updateCurrentTimeIndicatorTimer();\n                }\n            }\n            else {\n                this.clearCurrentTimeIndicatorTimer();\n            }\n        }\n        else {\n            this.clearCurrentTimeIndicatorTimer();\n        }\n    };\n    VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            var count = 0;\n            var currentDate = util.resetTime(this.parent.getCurrentTime());\n            if (this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling &&\n                this.parent.activeViewOptions.group.byDate) {\n                for (var _i = 0, _a = this.parent.resourceBase.expandedResources; _i < _a.length; _i++) {\n                    var resource = _a[_i];\n                    if (util.resetTime(resource.date).getTime() === currentDate.getTime()) {\n                        currentDateIndex.push(count);\n                    }\n                    count += 1;\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.parent.resourceBase.renderedResources; _b < _c.length; _b++) {\n                    var resource = _c[_b];\n                    var index = this.parent.getIndexOfDate(resource.renderDates, currentDate);\n                    if (index >= 0) {\n                        var resIndex = this.parent.activeViewOptions.group.byDate ?\n                            (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\n                        currentDateIndex.push(resIndex);\n                    }\n                    count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n                }\n            }\n        }\n        else {\n            var renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0)\n                ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n            var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n            if (index >= 0) {\n                currentDateIndex.push(index);\n            }\n        }\n        return currentDateIndex;\n    };\n    VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            window.clearInterval(this.currentTimeIndicatorTimer);\n            this.currentTimeIndicatorTimer = null;\n            this.removeCurrentTimeIndicatorElements();\n        }\n    };\n    VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\n        var _this = this;\n        this.currentTimeIndicatorTimer = window.setInterval(function () { _this.changeCurrentTimePosition(); }, util.MS_PER_MINUTE);\n    };\n    VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n        var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n        var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n        for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n            var indicator = timeIndicator_1[_i];\n            remove(indicator);\n        }\n    };\n    VerticalView.prototype.changeCurrentTimePosition = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var firstRow = this.parent.getContentTable().rows[0];\n        var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n        var topInPx = formatUnit(top);\n        var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n        var timeCellsWrap = this.getLeftPanelElement();\n        var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n            return;\n        }\n        var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n        for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n            curTimeWrap[parseInt(i.toString(), 10)].appendChild(createElement('div', { className: cls.PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n            var day = currentDateIndex_1[_i];\n            if (curTimeWrap.length > day) {\n                curTimeWrap[parseInt(day.toString(), 10)].appendChild(createElement('div', {\n                    className: cls.CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx\n                }));\n            }\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS,\n            styles: 'top:' + topInPx\n        });\n        if (rowIndex <= timeTrs.length) {\n            removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n            if (timeTrs[parseInt(rowIndex.toString(), 10)]) {\n                addClass([timeTrs[parseInt(rowIndex.toString(), 10)].lastElementChild], cls.HIDE_CHILDS_CLASS);\n            }\n            prepend([currentTimeEle], timeCellsWrap);\n            currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\n        }\n    };\n    VerticalView.prototype.getTopFromDateTime = function (date) {\n        var startHour = this.getStartEndHours(this.parent.activeViewOptions.startHour);\n        var endHour = this.getStartEndHours(this.parent.activeViewOptions.endHour);\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        var hoursRange = util.getStartEndHours(util.resetTime(new Date(date.getTime())), startHour, endHour);\n        var totalMinutes = (hoursRange.endHour.getTime() - hoursRange.startHour.getTime()) / util.MS_PER_MINUTE;\n        var timescaleInterval = this.parent.activeViewOptions.timeScale.interval;\n        var interval = 0;\n        if (startHour.getHours() === 0 && startHour.getMinutes() === 0 && endHour.getHours() === 0 && endHour.getMinutes() === 0) {\n            interval = timescaleInterval;\n        }\n        else {\n            interval = (this.parent.activeViewOptions.timeScale.slotCount !== 1) ? timescaleInterval :\n                (timescaleInterval > totalMinutes ? totalMinutes : timescaleInterval);\n        }\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) / interval;\n    };\n    VerticalView.prototype.getWorkCellHeight = function () {\n        return parseFloat(this.parent.getElementHeight(this.element.querySelector('.' + cls.WORK_CELLS_CLASS)).toFixed(2));\n    };\n    VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n        var cntEle;\n        var wrapper = createElement('div');\n        var templateName = '';\n        var templateId = this.parent.element.id + '_';\n        switch (type) {\n            case 'dateHeader':\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                    templateName = 'dateHeaderTemplate';\n                    var args = { date: date, type: type };\n                    var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                    cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false, undefined, undefined, this.parent.root));\n                }\n                else {\n                    wrapper.innerHTML = this.parent.activeView.isTimelineView() ?\n                        \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" :\n                        \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" +\n                            (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'majorSlot':\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n                    templateName = 'majorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false, undefined, undefined, this.parent.root));\n                }\n                else {\n                    wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'minorSlot':\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n                    templateName = 'minorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false, undefined, undefined, this.parent.root));\n                }\n                else {\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'alldayCells':\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var viewName = this.parent.activeViewOptions.cellTemplateName;\n                    templateName = 'cellTemplate';\n                    var args = { date: date, type: type, groupIndex: groupIndex };\n                    cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false, undefined, undefined, this.parent.root));\n                }\n                break;\n        }\n        return cntEle;\n    };\n    VerticalView.prototype.refreshHeader = function () {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(event.contentReady, {});\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        if (dateHeader) {\n            dateHeader.scrollLeft = this.parent.uiStateValues.left;\n        }\n    };\n    VerticalView.prototype.renderLayout = function (type) {\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.baseCssClass, this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        this.renderPanel(type);\n        addClass([this.element], clsList);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var indentTd = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            indentTd.appendChild(this.renderLeftIndent());\n            tr.appendChild(indentTd);\n        }\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    VerticalView.prototype.renderContent = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n        }\n        var tr = createElement('tr');\n        var workTd = createElement('td');\n        if (this.parent.isAdaptive) {\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\n            var scrollContainer = createElement('div', { className: cls.SCROLL_CONTAINER_CLASS });\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                scrollContainer.appendChild(this.renderTimeCells());\n            }\n            scrollContainer.appendChild(this.renderContentArea());\n            workTd.appendChild(scrollContainer);\n            EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n            tr.appendChild(workTd);\n        }\n        else {\n            var levels = this.colLevels.slice(0);\n            if (this.parent.virtualScrollModule) {\n                this.resetColLevels();\n            }\n            var wrap = this.renderContentArea();\n            workTd.appendChild(wrap);\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                var timesTd = createElement('td');\n                timesTd.appendChild(this.renderTimeCells());\n                tr.appendChild(timesTd);\n            }\n            tr.appendChild(workTd);\n            if (this.parent.virtualScrollModule) {\n                this.colLevels = levels;\n                this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n            }\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    VerticalView.prototype.renderLeftIndent = function () {\n        var wrap = createElement('div', { className: cls.LEFT_INDENT_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        var nth;\n        for (var i = 0; i < rowCount; i++) {\n            var ntr_1 = trEle.cloneNode();\n            var data_1 = { className: [(this.colLevels[parseInt(i.toString(), 10)][0] && this.colLevels[parseInt(i.toString(), 10)][0].className[0])], type: 'emptyCells' };\n            if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n                data_1.className.push(cls.WEEK_NUMBER_CLASS);\n                var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n                data_1.template = [createElement('span', {\n                        innerHTML: '' + weekNo,\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\n                    })];\n            }\n            nth = this.createTd(data_1);\n            this.parent.renderHeaderIndentTemplate(data_1, nth);\n            ntr_1.appendChild(nth);\n            tbl.querySelector('tbody').appendChild(ntr_1);\n        }\n        var ntr = trEle.cloneNode();\n        var appointmentExpandCollapse = createElement('div', {\n            attrs: {\n                'tabindex': '0', 'role': 'button',\n                title: this.parent.localeObj.getConstant('expandAllDaySection'), 'aria-disabled': 'false',\n                'aria-label': this.parent.localeObj.getConstant('expandAllDaySection')\n            },\n            className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\n                cls.ICON + ' ' + cls.DISABLE_CLASS\n        });\n        var data = { className: [cls.ALLDAY_CELLS_CLASS], type: 'emptyCells' };\n        nth = this.createTd(data);\n        nth.appendChild(appointmentExpandCollapse);\n        this.parent.renderHeaderIndentTemplate(data, nth);\n        ntr.appendChild(nth);\n        tbl.querySelector('tbody').appendChild(ntr);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        var rowCount = this.colLevels.length;\n        var lastLevel = this.colLevels[rowCount - 1];\n        for (var i = 0; i < rowCount; i++) {\n            var ntr = trEle.cloneNode();\n            var level = this.colLevels[parseInt(i.toString(), 10)];\n            for (var j = 0; j < level.length; j++) {\n                ntr.appendChild(this.createTd(level[parseInt(j.toString(), 10)]));\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        this.createAllDayRow(tbl, lastLevel);\n        this.createColGroup(tbl, lastLevel);\n        wrap.appendChild(tbl);\n        return container;\n    };\n    VerticalView.prototype.createAllDayRow = function (table, tdData) {\n        var ntr = createElement('tr', { className: cls.ALLDAY_ROW_CLASS });\n        for (var j = 0; j < tdData.length; j++) {\n            var td = extend({}, tdData[parseInt(j.toString(), 10)]);\n            td.className = [cls.ALLDAY_CELLS_CLASS];\n            td.type = 'alldayCells';\n            var ntd = this.createTd(td);\n            ntd.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            else if (this.parent.uiStateValues.isGroupAdaptive) {\n                ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n            }\n            this.wireCellEvents(ntd);\n            ntr.appendChild(ntd);\n        }\n        table.querySelector('tbody').appendChild(ntr);\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper('allDay'));\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createTd = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.date && td.type) {\n            var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n            if (ele && ele.length) {\n                append(ele, tdEle);\n            }\n        }\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n            addClass([tdEle], cls.DISABLE_DATES);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireMouseEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    VerticalView.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        this.wireMouseEvents(element);\n    };\n    VerticalView.prototype.wireMouseEvents = function (element) {\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    VerticalView.prototype.renderTimeCells = function () {\n        var _this = this;\n        var wrap = createElement('div', { className: cls.TIME_CELLS_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n            var ntr = trEle.cloneNode();\n            var data = { date: r.date, type: r.type, className: r.className };\n            ntr.appendChild(_this.createTd(data));\n            tbl.querySelector('tbody').appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentArea = function () {\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        this.addAutoHeightClass(tbl);\n        this.renderContentTable(tbl);\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n        wrap.appendChild(tbl);\n        this.wireCellEvents(tbl.querySelector('tbody'));\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.renderContentTableHeader(table);\n    };\n    VerticalView.prototype.getContentRows = function () {\n        var _this = this;\n        var rows = [];\n        var tr = createElement('tr');\n        var td = createElement('td');\n        var existingGroupIndices = this.getGroupIndices();\n        var handler = function (r) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                var isAllowTdCreation = true;\n                if (_this.parent.virtualScrollModule && _this.parent.activeViewOptions.group.resources.length > 0) {\n                    if (existingGroupIndices.indexOf(tdData.groupIndex) > -1) {\n                        isAllowTdCreation = false;\n                    }\n                }\n                if (isAllowTdCreation) {\n                    var ntd = _this.createContentTd(tdData, r, td);\n                    ntr.appendChild(ntd);\n                }\n            }\n            rows.push(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        return rows;\n    };\n    VerticalView.prototype.createContentTd = function (tdData, r, td) {\n        var ntd = td.cloneNode();\n        if (tdData.colSpan) {\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\n        }\n        var clsName = this.getContentTdClass(r);\n        var cellDate = util.resetTime(tdData.date);\n        if (!this.parent.isMinMaxDate(cellDate)) {\n            clsName.push(cls.DISABLE_DATES);\n        }\n        cellDate = new Date(cellDate.setHours(r.date.getHours(), r.date.getMinutes(), r.date.getSeconds(), r.date.getMilliseconds()));\n        var type = 'workCells';\n        if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\n            clsName.push(cls.WORK_HOURS_CLASS);\n        }\n        addClass([ntd], clsName);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: cellDate, type: type, groupIndex: tdData.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false, undefined, undefined, this.parent.root));\n            append(tooltipTemplate, ntd);\n        }\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\n        var skeleton = 'full';\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            var announcementText = this.parent.globalize.formatDate(tdData.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n            ntd.setAttribute('aria-label', announcementText);\n        }\n        else {\n            var startDateText = this.parent.globalize.formatDate(cellDate, {\n                type: 'dateTime', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            var endDateText = this.parent.globalize.formatDate(this.getEndDateFromStartDate(cellDate), {\n                type: 'dateTime', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            ntd.setAttribute('aria-label', startDateText + ' ' + this.parent.localeObj.getConstant('endAt') + ' ' + endDateText);\n        }\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                tdData.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    VerticalView.prototype.getContentTdClass = function (r) {\n        return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    VerticalView.prototype.renderContentTableHeader = function (table) {\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n    };\n    VerticalView.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    VerticalView.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n    };\n    VerticalView.prototype.getEndDateFromStartDate = function (start) {\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var end = new Date(start.getTime());\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\n        return end;\n    };\n    VerticalView.prototype.getStartEndHours = function (startEndTime) {\n        if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n            var startEndDate = new Date(2000, 0, 0, 0);\n            var timeString = startEndTime.split(':');\n            if (timeString.length === 2) {\n                startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n            }\n            return startEndDate;\n        }\n        return new Date(2000, 0, 0, 0);\n    };\n    VerticalView.prototype.getTimeSlotRows = function (handler) {\n        var rows = [];\n        var startHour = this.getStartEndHours(this.parent.activeViewOptions.startHour);\n        var endHour = this.getStartEndHours(this.parent.activeViewOptions.endHour);\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var length = Math.round(util.MS_PER_DAY / msInterval);\n        var msStartHour = startHour.getTime();\n        var msEndHour = endHour.getTime();\n        if (msStartHour !== msEndHour) {\n            var milliSeconds = (startHour.getTimezoneOffset() !== endHour.getTimezoneOffset()) ?\n                (msEndHour - msStartHour) - 3600000 : (msEndHour - msStartHour);\n            length = Math.round(milliSeconds / msInterval);\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            length = 1;\n        }\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var end = this.parent.getStartEndTime(this.parent.workHours.end);\n        for (var i = 0; i < length; i++) {\n            var dt = new Date(msStartHour + (msInterval * i));\n            if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n                var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n                dt = new Date(dt.getTime() - (1000 * 60 * timeOffset));\n            }\n            var majorTickDivider = i % (msMajorInterval / msInterval);\n            var row = {\n                date: new Date('' + dt),\n                startHour: start,\n                endHour: end,\n                first: (majorTickDivider === 0),\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\n                type: ''\n            };\n            if (handler) {\n                handler(row);\n            }\n            rows.push(row);\n        }\n        return rows;\n    };\n    VerticalView.prototype.getAdjustedDate = function (startTime) {\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            return new Date(startTime.setHours(0, 0, 0, 0));\n        }\n        else {\n            var timeSlots = this.getTimeSlotRows();\n            var startDate = new Date(new Date(timeSlots[0].date.getTime()).\n                setHours(startTime.getHours(), startTime.getMinutes(), startTime.getMilliseconds()));\n            for (var i = 0; i < timeSlots.length; i++) {\n                if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startDate.getTime()) {\n                    startTime.setHours(timeSlots[i - 1].date.getHours(), timeSlots[i - 1].date.getMinutes(), timeSlots[i - 1].date.getMilliseconds());\n                    return new Date(startTime);\n                }\n            }\n        }\n        return null;\n    };\n    VerticalView.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.clearCurrentTimeIndicatorTimer();\n        if (this.element) {\n            if (this.appointment) {\n                this.appointment.destroy();\n                this.appointment = null;\n            }\n            var contentScrollableEle = this.getContentAreaElement();\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n                EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return VerticalView;\n}(ViewBase));\nexport { VerticalView };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}